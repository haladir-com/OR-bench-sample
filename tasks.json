[
  {
    "id": "bin_packing_697a2335",
    "difficulty": "expert",
    "scenario": {
      "domain": "bin_packing",
      "description": "BlueRidge Moving & Storage is loading a mixed household (apartment + garage) into trucks for a same-day move. Items vary widely in volume, weight, and fragility. Some pairs cannot ride together due to damage/contamination risks, and a couple of items must ship together as a set. Pack everything into available truck bays while respecting volume capacity, weight limits, and fragile-handling rules.",
      "unlimited_bins": true,
      "items": [
        {
          "id": "i1",
          "name": "Sectional Sofa Piece (Left)",
          "size": 38.0,
          "weight": 180.0,
          "fragile": false
        },
        {
          "id": "i2",
          "name": "Loveseat",
          "size": 22.0,
          "weight": 90.0,
          "fragile": false
        },
        {
          "id": "i3",
          "name": "Compact Home Safe",
          "size": 12.0,
          "weight": 120.0,
          "fragile": false
        },
        {
          "id": "i4",
          "name": "Cast-Iron Radiator (wrapped)",
          "size": 10.0,
          "weight": 140.0,
          "fragile": false
        },
        {
          "id": "i5",
          "name": "Book Box (dense load)",
          "size": 8.0,
          "weight": 80.0,
          "fragile": false
        },
        {
          "id": "i6",
          "name": "King Mattress (bagged)",
          "size": 44.0,
          "weight": 60.0,
          "fragile": false
        },
        {
          "id": "i7",
          "name": "Full-Length Mirror (crated)",
          "size": 14.0,
          "weight": 35.0,
          "fragile": true
        },
        {
          "id": "i8",
          "name": "6-Drawer Dresser",
          "size": 32.0,
          "weight": 70.0,
          "fragile": false
        },
        {
          "id": "i9",
          "name": "Refrigerator",
          "size": 30.0,
          "weight": 150.0,
          "fragile": false
        },
        {
          "id": "i10",
          "name": "Floor Lamp (boxed)",
          "size": 18.0,
          "weight": 25.0,
          "fragile": true
        },
        {
          "id": "i11",
          "name": "Desktop PC (foam-crated)",
          "size": 16.0,
          "weight": 30.0,
          "fragile": true
        },
        {
          "id": "i12",
          "name": "China Dish Pack (double-wall)",
          "size": 20.0,
          "weight": 35.0,
          "fragile": true
        },
        {
          "id": "i13",
          "name": "Tool Chest (strapped)",
          "size": 24.0,
          "weight": 55.0,
          "fragile": false
        },
        {
          "id": "i14",
          "name": "Rolled Play Mat + Linens Bundle",
          "size": 28.0,
          "weight": 15.0,
          "fragile": false
        },
        {
          "id": "i15",
          "name": "Guitar (hard case)",
          "size": 12.0,
          "weight": 40.0,
          "fragile": true
        },
        {
          "id": "i16",
          "name": "Glassware Tote (partitioned)",
          "size": 26.0,
          "weight": 18.0,
          "fragile": true
        },
        {
          "id": "i17",
          "name": "Glass Tabletop (edge-guarded)",
          "size": 24.0,
          "weight": 45.0,
          "fragile": true
        },
        {
          "id": "i18",
          "name": "Washing Machine",
          "size": 20.0,
          "weight": 95.0,
          "fragile": false
        }
      ],
      "bins": [
        {
          "id": "b1",
          "name": "16-ft Truck Bay",
          "capacity": 120.0,
          "max_weight": 500.0,
          "max_fragile": 1,
          "cost": 180.0
        },
        {
          "id": "b2",
          "name": "26-ft Truck Bay",
          "capacity": 210.0,
          "max_weight": 900.0,
          "max_fragile": 8,
          "cost": 320.0
        },
        {
          "id": "b3",
          "name": "Padded Art/TV Pod (specialty)",
          "capacity": 90.0,
          "max_weight": 250.0,
          "max_fragile": 6,
          "cost": 280.0
        }
      ]
    },
    "constraints": [
      {
        "description": "Limit the total number of used truck bays to keep the move to at most three loads.",
        "_spec": {
          "fn": "max_bins",
          "args": [
            3
          ]
        }
      },
      {
        "description": "Only two 26-ft truck bays can be reserved today (the third truck is out on another job).",
        "_spec": {
          "fn": "bin_type_limit",
          "args": [
            "b2",
            2
          ]
        }
      },
      {
        "description": "Any used bay should be efficiently utilized to avoid shifting during transit (at least 70% full by volume).",
        "_spec": {
          "fn": "min_fill_rate",
          "args": [
            0.7
          ]
        }
      },
      {
        "description": "To reduce handling issues on the dock, keep overall load weights reasonably balanced (max difference between any two used bays is 350).",
        "_spec": {
          "fn": "weight_balance",
          "args": [
            350.0
          ]
        }
      },
      {
        "description": "Fragile items cannot share a bay with any item heavier than 50 (risk of crushing during braking/turns).",
        "_spec": {
          "fn": "fragile_separate",
          "args": [
            50.0
          ]
        }
      },
      {
        "description": "The sectional and loveseat must ship together to avoid a split delivery for the living-room set.",
        "_spec": {
          "fn": "must_together",
          "args": [
            [
              "i1",
              "i2"
            ]
          ]
        }
      },
      {
        "description": "The mirror crate and the glassware tote are inventoried as a single 'fragile bundle' and must be kept together.",
        "_spec": {
          "fn": "must_together",
          "args": [
            [
              "i7",
              "i16"
            ]
          ]
        }
      },
      {
        "description": "The refrigerator and the home safe cannot be placed in the same bay (tie-down geometry conflicts; safe blocks appliance straps).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i9",
            "i3"
          ]
        }
      },
      {
        "description": "The king mattress cannot share a bay with the dresser (dresser corners risk tearing and soiling the mattress).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i6",
            "i8"
          ]
        }
      },
      {
        "description": "The cast-iron radiator cannot share a bay with the sectional piece (soot/oil residue risk on upholstery).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i4",
            "i1"
          ]
        }
      }
    ],
    "instruction": "Pack all items into available truck bays (bins) while respecting each bay\u2019s volume capacity, weight limit, max fragile count, fragile/heavy separation, and the compatibility constraints. Use no more than the allowed number of bays and minimize the total number of bays used (primary objective).",
    "feasible": true,
    "solution": {
      "domain": "bin_packing",
      "assignments": [
        {
          "item_id": "i1",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i2",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i3",
          "bin_id": "b1_2"
        },
        {
          "item_id": "i4",
          "bin_id": "b1_2"
        },
        {
          "item_id": "i5",
          "bin_id": "b1_2"
        },
        {
          "item_id": "i6",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i7",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i8",
          "bin_id": "b1_2"
        },
        {
          "item_id": "i9",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i10",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i11",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i12",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i13",
          "bin_id": "b1_2"
        },
        {
          "item_id": "i14",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i15",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i16",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i17",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i18",
          "bin_id": "b2_1"
        }
      ],
      "bins_used": 3,
      "total_waste": 142.0,
      "total_cost": 820.0
    }
  },
  {
    "id": "bin_packing_403bc661",
    "difficulty": "expert",
    "scenario": {
      "domain": "bin_packing",
      "description": "AltAir Cargo is building ULD loads for a mixed aerospace/medical freight flight out of O'Hare. Items vary in volume, mass, and fragility. Some dangerous-goods pairings are prohibited, some components must fly as kits, and fragile freight cannot be packed with very heavy pieces. Choose ULD types and assignments to minimize the number of ULDs used.",
      "unlimited_bins": true,
      "items": [
        {
          "id": "i1",
          "name": "AeroFlex UN3480 Lithium Battery Module (DG, PI965)",
          "size": 28.0,
          "weight": 48.0,
          "fragile": true
        },
        {
          "id": "i2",
          "name": "SkyMed Vaccine Cooler Pack (2\u20138\u00b0C passive shipper)",
          "size": 24.0,
          "weight": 30.0,
          "fragile": true
        },
        {
          "id": "i3",
          "name": "QuantumNav IMU (precision inertial unit)",
          "size": 12.0,
          "weight": 22.0,
          "fragile": true
        },
        {
          "id": "i4",
          "name": "CarbonEdge Composite Fairing Panel (crated)",
          "size": 20.0,
          "weight": 18.0,
          "fragile": false
        },
        {
          "id": "i5",
          "name": "HydraFlow Hydraulic Pump Assembly",
          "size": 18.0,
          "weight": 12.0,
          "fragile": false
        },
        {
          "id": "i6",
          "name": "OptiLens Stabilized Camera Gimbal (shock-sensitive)",
          "size": 10.0,
          "weight": 8.0,
          "fragile": true
        },
        {
          "id": "i7",
          "name": "TitanGrip Ground-Handling Tool Chest (steel, dense)",
          "size": 35.0,
          "weight": 95.0,
          "fragile": false
        },
        {
          "id": "i8",
          "name": "OxySafe Aviation Oxygen Cylinder (DG, oxidizer)",
          "size": 30.0,
          "weight": 62.0,
          "fragile": false
        },
        {
          "id": "i9",
          "name": "MicroSeal O-Ring Kit (AOG maintenance kit)",
          "size": 16.0,
          "weight": 20.0,
          "fragile": false
        },
        {
          "id": "i10",
          "name": "JetLink Satcom Antenna Radome Assembly (precision alignment)",
          "size": 34.0,
          "weight": 40.0,
          "fragile": true
        },
        {
          "id": "i11",
          "name": "CryoShip Dry-Ice Brick Case (CO\u2082 vented outer pack)",
          "size": 22.0,
          "weight": 40.0,
          "fragile": false
        },
        {
          "id": "i12",
          "name": "Precision Gyro Calibration Stand (machined frame)",
          "size": 26.0,
          "weight": 25.0,
          "fragile": false
        },
        {
          "id": "i13",
          "name": "PolyRoute Polymer Hose Bundle (coiled, boxed)",
          "size": 14.0,
          "weight": 15.0,
          "fragile": false
        },
        {
          "id": "i14",
          "name": "AvioMount Avionics Rack (empty rack, strapped)",
          "size": 25.0,
          "weight": 45.0,
          "fragile": false
        },
        {
          "id": "i15",
          "name": "HazMat Absorbent Roll (spill-response consumable)",
          "size": 15.0,
          "weight": 28.0,
          "fragile": false
        },
        {
          "id": "i16",
          "name": "Ground Power Converter (solid-state, boxed)",
          "size": 20.0,
          "weight": 35.0,
          "fragile": false
        },
        {
          "id": "i17",
          "name": "NimbusTrack Temperature/Data Logger (paired to cooler)",
          "size": 8.0,
          "weight": 5.0,
          "fragile": true
        },
        {
          "id": "i18",
          "name": "Spare Turbofan Blade Set (crated, light composite)",
          "size": 18.0,
          "weight": 10.0,
          "fragile": false
        }
      ],
      "bins": [
        {
          "id": "b1",
          "name": "ULD LD3 Standard (AKE-style)",
          "capacity": 120.0,
          "max_weight": 450.0,
          "max_fragile": 2,
          "cost": 950.0
        },
        {
          "id": "b2",
          "name": "ULD LD7 Pallet + Net (PMC-style)",
          "capacity": 200.0,
          "max_weight": 700.0,
          "max_fragile": 4,
          "cost": 1700.0
        },
        {
          "id": "b3",
          "name": "EnviroCool Active Temp ULD (powered, high-protection)",
          "capacity": 150.0,
          "max_weight": 500.0,
          "max_fragile": 6,
          "cost": 3200.0
        }
      ]
    },
    "constraints": [
      {
        "description": "Lithium battery module i1 must not be packed in the same ULD with oxygen cylinder i8 (DG segregation rule for this flight plan).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i1",
            "i8"
          ]
        }
      },
      {
        "description": "Dry-ice case i11 must not be packed with the precision satcom antenna i10 to avoid CO\u2082 cold-soak/condensation risk in the same container.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i11",
            "i10"
          ]
        }
      },
      {
        "description": "Vaccine cooler i2 must not be packed with the heavy tool chest i7 (damage/contamination risk during ramp handling).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i2",
            "i7"
          ]
        }
      },
      {
        "description": "The vaccine cooler i2 must travel with its paired data logger i17 in the same ULD for chain-of-custody monitoring.",
        "_spec": {
          "fn": "must_together",
          "args": [
            [
              "i2",
              "i17"
            ]
          ]
        }
      },
      {
        "description": "The AOG maintenance kit must stay intact: O-ring kit i9 must be packed with absorbent roll i15 in the same ULD.",
        "_spec": {
          "fn": "must_together",
          "args": [
            [
              "i9",
              "i15"
            ]
          ]
        }
      },
      {
        "description": "Operational constraint: the load plan may use at most 3 ULDs total (space reserved for other consignments).",
        "_spec": {
          "fn": "max_bins",
          "args": [
            3
          ]
        }
      },
      {
        "description": "Only one active temperature-controlled EnviroCool ULD is available for this departure.",
        "_spec": {
          "fn": "bin_type_limit",
          "args": [
            "b3",
            1
          ]
        }
      },
      {
        "description": "Build-quality rule: every used ULD must be at least 70% full by volume to avoid load instability and excessive dunnage.",
        "_spec": {
          "fn": "min_fill_rate",
          "args": [
            0.7
          ]
        }
      },
      {
        "description": "Aircraft trim constraint: the heaviest and lightest used ULDs must not differ by more than 100 kg (simplified weight-balance requirement).",
        "_spec": {
          "fn": "weight_balance",
          "args": [
            100.0
          ]
        }
      },
      {
        "description": "Fragile separation rule: any ULD containing a fragile item may not contain any item heavier than 50 kg (to prevent crush loads).",
        "_spec": {
          "fn": "fragile_separate",
          "args": [
            50.0
          ]
        }
      }
    ],
    "instruction": "Minimize the total number of bins used (or total bin cost) while packing all items, respecting capacity limits, weight limits, fragile item constraints, and compatibility requirements.",
    "feasible": true,
    "solution": {
      "domain": "bin_packing",
      "assignments": [
        {
          "item_id": "i1",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i2",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i3",
          "bin_id": "b1_1"
        },
        {
          "item_id": "i4",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i5",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i6",
          "bin_id": "b1_1"
        },
        {
          "item_id": "i7",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i8",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i9",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i10",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i11",
          "bin_id": "b1_1"
        },
        {
          "item_id": "i12",
          "bin_id": "b1_1"
        },
        {
          "item_id": "i13",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i14",
          "bin_id": "b1_1"
        },
        {
          "item_id": "i15",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i16",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i17",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i18",
          "bin_id": "b1_1"
        }
      ],
      "bins_used": 3,
      "total_waste": 65.0,
      "total_cost": 3600.0
    }
  },
  {
    "id": "bin_packing_da92780b",
    "difficulty": "expert",
    "scenario": {
      "domain": "bin_packing",
      "description": "Pinecone Outfitters Fulfillment Center (camping & outdoor gear) is building mixed orders for a backcountry outfitter show. Items must be packed into a small number of shippable containers while respecting container volume (capacity), weight limits, fragile handling limits per container, and a few hazmat-style incompatibilities common in outdoor gear (fuel, aerosols, lithium electronics).",
      "unlimited_bins": true,
      "items": [
        {
          "id": "i1",
          "name": "Alpine Ridge 4-Person Tent (packed)",
          "size": 34.0,
          "weight": 9.0,
          "fragile": false
        },
        {
          "id": "i2",
          "name": "CanyonLite 0\u0002F Sleeping Bag (compression sack)",
          "size": 18.0,
          "weight": 4.0,
          "fragile": false
        },
        {
          "id": "i3",
          "name": "SummitRest Inflatable Sleeping Pad",
          "size": 28.0,
          "weight": 6.0,
          "fragile": true
        },
        {
          "id": "i4",
          "name": "TrailForge Camp Chair (folding)",
          "size": 22.0,
          "weight": 3.0,
          "fragile": false
        },
        {
          "id": "i5",
          "name": "EverPeak Cooler 45L (empty)",
          "size": 40.0,
          "weight": 14.0,
          "fragile": false
        },
        {
          "id": "i6",
          "name": "JetFlare Backpacking Stove (burner + igniter)",
          "size": 12.0,
          "weight": 8.0,
          "fragile": false
        },
        {
          "id": "i7",
          "name": "IsoFuel 230g Canisters (4-pack)",
          "size": 8.0,
          "weight": 2.0,
          "fragile": false
        },
        {
          "id": "i8",
          "name": "OrionCook Nesting Pot Set (anodized)",
          "size": 16.0,
          "weight": 7.0,
          "fragile": false
        },
        {
          "id": "i9",
          "name": "LeadLine Cast-Iron Dutch Oven (12 in)",
          "size": 26.0,
          "weight": 52.0,
          "fragile": false
        },
        {
          "id": "i10",
          "name": "GraniteGuard Climbing Hardware Kit (cams + rack)",
          "size": 38.0,
          "weight": 48.0,
          "fragile": false
        },
        {
          "id": "i11",
          "name": "RiverStone Folding Kayak Seat Frame",
          "size": 24.0,
          "weight": 46.0,
          "fragile": false
        },
        {
          "id": "i12",
          "name": "SkyRoute GPS Handheld (boxed)",
          "size": 10.0,
          "weight": 6.0,
          "fragile": true
        },
        {
          "id": "i13",
          "name": "AuroraView Binoculars 10x42 (boxed)",
          "size": 14.0,
          "weight": 5.0,
          "fragile": true
        },
        {
          "id": "i14",
          "name": "SunSparrow Folding Solar Panel 100W",
          "size": 12.0,
          "weight": 9.0,
          "fragile": true
        },
        {
          "id": "i15",
          "name": "BearSafe Bear Spray (pressurized can)",
          "size": 10.0,
          "weight": 4.0,
          "fragile": false
        },
        {
          "id": "i16",
          "name": "BlueFlame Propane Adapter Hose Kit",
          "size": 10.0,
          "weight": 7.0,
          "fragile": false
        },
        {
          "id": "i17",
          "name": "NanoCharge Power Bank (Lithium, boxed)",
          "size": 6.0,
          "weight": 1.0,
          "fragile": true
        },
        {
          "id": "i18",
          "name": "CrystalBeam Headlamp Kit (4-pack)",
          "size": 12.0,
          "weight": 2.0,
          "fragile": true
        },
        {
          "id": "i19",
          "name": "StreamSeal Water Filter (boxed)",
          "size": 10.0,
          "weight": 1.0,
          "fragile": true
        }
      ],
      "bins": [
        {
          "id": "b1",
          "name": "Kodiak 80L Expedition Hard Tote",
          "capacity": 80.0,
          "max_weight": 90.0,
          "max_fragile": 3,
          "cost": 22.0
        },
        {
          "id": "b2",
          "name": "Pinecone 60L Doublewall Carton",
          "capacity": 60.0,
          "max_weight": 55.0,
          "max_fragile": 4,
          "cost": 14.0
        },
        {
          "id": "b3",
          "name": "BudgetTrail 45L Light Crate (decoy)",
          "capacity": 45.0,
          "max_weight": 35.0,
          "max_fragile": 1,
          "cost": 7.0
        }
      ]
    },
    "constraints": [
      {
        "description": "Fuel canisters (i7) cannot be packed with bear spray (i15) due to pressurized hazmat segregation rules used by Pinecone Outfitters carriers.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i7",
            "i15"
          ]
        }
      },
      {
        "description": "Fuel canisters (i7) cannot be packed with lithium power bank (i17) in the same container (carrier segregation rule for this outbound lane).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i7",
            "i17"
          ]
        }
      },
      {
        "description": "Cast-iron dutch oven (i9) cannot share a bin with the inflatable sleeping pad (i3) to avoid abrasion/puncture risk during transit.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i9",
            "i3"
          ]
        }
      },
      {
        "description": "Backpacking stove (i6) must ship together with its IsoFuel canisters (i7) as a single 'stove kit' pick ticket.",
        "_spec": {
          "fn": "must_together",
          "args": [
            [
              "i6",
              "i7"
            ]
          ]
        }
      },
      {
        "description": "GPS handheld (i12) must ship together with its lithium power bank (i17) as a 'navigation bundle'.",
        "_spec": {
          "fn": "must_together",
          "args": [
            [
              "i12",
              "i17"
            ]
          ]
        }
      },
      {
        "description": "At most 5 total bins may be used (truck slotting limit for this show shipment).",
        "_spec": {
          "fn": "max_bins",
          "args": [
            5
          ]
        }
      },
      {
        "description": "Limit Kodiak 80L Expedition Hard Totes (b1) to at most 3 available units on the packing line (others are allocated to a different outbound route).",
        "_spec": {
          "fn": "bin_type_limit",
          "args": [
            "b1",
            3
          ]
        }
      },
      {
        "description": "Limit Pinecone 60L Doublewall Cartons (b2) to at most 2 because only two cartons were pre-labeled for this order batch.",
        "_spec": {
          "fn": "bin_type_limit",
          "args": [
            "b2",
            2
          ]
        }
      },
      {
        "description": "Each used bin must be at least 75% full by capacity to reduce shifting damage in transit.",
        "_spec": {
          "fn": "min_fill_rate",
          "args": [
            0.75
          ]
        }
      },
      {
        "description": "Fragile items cannot share a bin with any single item heavier than 40.0 (lb-equivalent) due to crushing risk in mixed gear containers.",
        "_spec": {
          "fn": "fragile_separate",
          "args": [
            40.0
          ]
        }
      },
      {
        "description": "To keep handling ergonomic across the line, the maximum weight difference between any two used bins must be \u001e50.0.",
        "_spec": {
          "fn": "weight_balance",
          "args": [
            50.0
          ]
        }
      }
    ],
    "instruction": "Pack all items into bins while respecting each bin's capacity, max_weight, and max_fragile limits, plus all listed constraints (incompatibilities, must-together groups, bin-type limits, min fill rate, fragile separation, and weight balance). Minimize the total number of bins used; if multiple solutions use the same number of bins, minimize total bin cost.",
    "feasible": true,
    "solution": {
      "domain": "bin_packing",
      "assignments": [
        {
          "item_id": "i1",
          "bin_id": "b1_2"
        },
        {
          "item_id": "i2",
          "bin_id": "b1_2"
        },
        {
          "item_id": "i3",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i4",
          "bin_id": "b1_1"
        },
        {
          "item_id": "i5",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i6",
          "bin_id": "b1_1"
        },
        {
          "item_id": "i7",
          "bin_id": "b1_1"
        },
        {
          "item_id": "i8",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i9",
          "bin_id": "b1_2"
        },
        {
          "item_id": "i10",
          "bin_id": "b1_1"
        },
        {
          "item_id": "i11",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i12",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i13",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i14",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i15",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i16",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i17",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i18",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i19",
          "bin_id": "b2_0"
        }
      ],
      "bins_used": 5,
      "total_waste": 10.0,
      "total_cost": 94.0
    }
  },
  {
    "id": "bin_packing_62e570f4",
    "difficulty": "expert",
    "scenario": {
      "domain": "bin_packing",
      "description": "Quill & Cobble Book Distributors must pack a mixed outbound order (textbook cases, collector editions, promos, and shipping supplies) into cartons. Packing must respect carton volume, weight limits, fragile-handling limits, and special handling rules common in book fulfillment (avoid staining/leaks; keep required kit components together).",
      "unlimited_bins": true,
      "items": [
        {
          "id": "i1",
          "name": "Textbook Case: Algebra I (hardcover, 24 copies)",
          "size": 38.0,
          "weight": 8.0,
          "fragile": false
        },
        {
          "id": "i2",
          "name": "Textbook Case: World History (hardcover, 20 copies)",
          "size": 32.0,
          "weight": 7.0,
          "fragile": false
        },
        {
          "id": "i3",
          "name": "Mass-Market Paperbacks Assortment (summer reads)",
          "size": 28.0,
          "weight": 6.0,
          "fragile": false
        },
        {
          "id": "i4",
          "name": "Children\u2019s Picture Books (laminated set)",
          "size": 26.0,
          "weight": 5.0,
          "fragile": false
        },
        {
          "id": "i5",
          "name": "Oversize Art Monograph (coffee-table edition)",
          "size": 30.0,
          "weight": 7.0,
          "fragile": true
        },
        {
          "id": "i6",
          "name": "Collector\u2019s Slipcased Trilogy (foil-stamped)",
          "size": 24.0,
          "weight": 5.2,
          "fragile": true
        },
        {
          "id": "i7",
          "name": "Signed First-Edition Biography (archival wrap)",
          "size": 22.0,
          "weight": 4.8,
          "fragile": true
        },
        {
          "id": "i8",
          "name": "Metal Bookends Pair (promo item)",
          "size": 14.0,
          "weight": 2.0,
          "fragile": false
        },
        {
          "id": "i9",
          "name": "Stationery Bundle (journals + pen set)",
          "size": 20.0,
          "weight": 3.0,
          "fragile": false
        },
        {
          "id": "i10",
          "name": "Audiobook CD Set (multi-disc)",
          "size": 12.0,
          "weight": 2.0,
          "fragile": true
        },
        {
          "id": "i11",
          "name": "Large-Format Reference Atlas (gloss pages)",
          "size": 25.0,
          "weight": 4.0,
          "fragile": true
        },
        {
          "id": "i12",
          "name": "Manga Brick (20 volumes, shrinkwrapped)",
          "size": 27.0,
          "weight": 5.0,
          "fragile": false
        },
        {
          "id": "i13",
          "name": "Licensed Tie-In Board Game (boxed)",
          "size": 34.0,
          "weight": 8.0,
          "fragile": false
        },
        {
          "id": "i14",
          "name": "Glass Snow Globe Bookmark Promo (fragile display item)",
          "size": 42.0,
          "weight": 6.5,
          "fragile": true
        },
        {
          "id": "i15",
          "name": "Returns Packet: Thermal Label Paper (rolls)",
          "size": 18.0,
          "weight": 3.0,
          "fragile": false
        },
        {
          "id": "i16",
          "name": "Protective Packing: Bubble Wrap Roll (short)",
          "size": 10.0,
          "weight": 1.0,
          "fragile": false
        },
        {
          "id": "i17",
          "name": "Oil-Based Ink Stamp Pad Pack (receiving stamps)",
          "size": 16.0,
          "weight": 2.0,
          "fragile": false
        },
        {
          "id": "i18",
          "name": "Archival Book-Cleaning Fluid Kit (sealed bottles)",
          "size": 19.0,
          "weight": 3.0,
          "fragile": false
        }
      ],
      "bins": [
        {
          "id": "b1",
          "name": "Economy Corrugated Carton (Large)",
          "capacity": 140.0,
          "max_weight": 30.0,
          "max_fragile": 1,
          "cost": 7.0
        },
        {
          "id": "b2",
          "name": "Reinforced Double-Wall Carton (Medium)",
          "capacity": 95.0,
          "max_weight": 20.0,
          "max_fragile": 3,
          "cost": 11.0
        },
        {
          "id": "b3",
          "name": "Padded BookSafe Mailer Crate (Small, foam-lined)",
          "capacity": 60.0,
          "max_weight": 18.0,
          "max_fragile": 2,
          "cost": 15.0
        }
      ]
    },
    "constraints": [
      {
        "description": "The book-cleaning fluid kit must not share a carton with the oversize art monograph (leak/solvent risk to coated pages).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i18",
            "i5"
          ]
        }
      },
      {
        "description": "The book-cleaning fluid kit must not share a carton with the signed first-edition biography (damage/liability risk).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i18",
            "i7"
          ]
        }
      },
      {
        "description": "Oil-based ink stamp pads must not share a carton with the glossy-page reference atlas (staining/offset risk).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i17",
            "i11"
          ]
        }
      },
      {
        "description": "The glass snow globe promo must ship in the same carton as the bubble wrap roll (required protective kit).",
        "_spec": {
          "fn": "must_together",
          "args": [
            [
              "i14",
              "i16"
            ]
          ]
        }
      },
      {
        "description": "The returns packet must ship as a compliance kit: thermal label paper must be packed with the archival book-cleaning fluid kit.",
        "_spec": {
          "fn": "must_together",
          "args": [
            [
              "i15",
              "i18"
            ]
          ]
        }
      },
      {
        "description": "Operational target: the entire order must be packed using no more than 4 cartons total.",
        "_spec": {
          "fn": "max_bins",
          "args": [
            4
          ]
        }
      },
      {
        "description": "Warehouse policy: at most 2 Economy Corrugated Large cartons may be used (supplier allocation limit).",
        "_spec": {
          "fn": "bin_type_limit",
          "args": [
            "b1",
            2
          ]
        }
      },
      {
        "description": "Warehouse policy: at most 2 Reinforced Double-Wall Medium cartons may be used (limited stock today).",
        "_spec": {
          "fn": "bin_type_limit",
          "args": [
            "b2",
            2
          ]
        }
      },
      {
        "description": "Warehouse policy: at most 1 Padded BookSafe Mailer Crate may be used (specialty packaging scarce).",
        "_spec": {
          "fn": "bin_type_limit",
          "args": [
            "b3",
            1
          ]
        }
      },
      {
        "description": "To avoid shipping air, every used carton must be at least 70% full by volume.",
        "_spec": {
          "fn": "min_fill_rate",
          "args": [
            0.7
          ]
        }
      },
      {
        "description": "To keep pallet handling stable, the weight difference between the heaviest and lightest used cartons must be at most 13.0.",
        "_spec": {
          "fn": "weight_balance",
          "args": [
            13.0
          ]
        }
      },
      {
        "description": "Fragile books/media cannot share a carton with any item heavier than 7.0 (crush risk under handling).",
        "_spec": {
          "fn": "fragile_separate",
          "args": [
            7.0
          ]
        }
      }
    ],
    "instruction": "Minimize the total number of bins used while packing all items, respecting bin capacity limits, bin weight limits, per-bin fragile limits, fragile separation rules, incompatibility constraints, must-together kit constraints, bin-type usage limits, minimum fill rate, and weight-balance requirements. (If multiple solutions use the same minimum number of bins, minimize total bin cost as a tie-breaker.)",
    "feasible": true,
    "solution": {
      "domain": "bin_packing",
      "assignments": [
        {
          "item_id": "i1",
          "bin_id": "b1_1"
        },
        {
          "item_id": "i2",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i3",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i4",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i5",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i6",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i7",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i8",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i9",
          "bin_id": "b1_1"
        },
        {
          "item_id": "i10",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i11",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i12",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i13",
          "bin_id": "b1_1"
        },
        {
          "item_id": "i14",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i15",
          "bin_id": "b1_1"
        },
        {
          "item_id": "i16",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i17",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i18",
          "bin_id": "b1_1"
        }
      ],
      "bins_used": 4,
      "total_waste": 33.0,
      "total_cost": 36.0
    }
  },
  {
    "id": "bin_packing_adae98ba",
    "difficulty": "expert",
    "scenario": {
      "domain": "bin_packing",
      "description": "Wine shipment case packing for \u2018Cask & Crest Logistics\u2019 preparing mixed DTC club orders (bottles, magnum, gift bundles, and tasting-room merch). Packers must respect case volume, weight limits, fragile-handling rules, and a few shipping/handling incompatibilities while minimizing the number of containers used.",
      "unlimited_bins": true,
      "items": [
        {
          "id": "i1",
          "name": "Oak Tasting-Flight Stand (hardware pre-installed)",
          "size": 12.0,
          "weight": 23.0,
          "fragile": false
        },
        {
          "id": "i2",
          "name": "6-pack Case: Sonoma Coast Pinot Noir 2022 (750ml)",
          "size": 6.0,
          "weight": 12.0,
          "fragile": true
        },
        {
          "id": "i3",
          "name": "6-pack Case: Russian River Chardonnay 2023 (750ml)",
          "size": 6.0,
          "weight": 12.0,
          "fragile": true
        },
        {
          "id": "i4",
          "name": "VIP Gift: Reserve Cabernet Duo Box (2 bottles)",
          "size": 6.0,
          "weight": 13.0,
          "fragile": true
        },
        {
          "id": "i5",
          "name": "Branded Crystal Stemware Pair (boxed)",
          "size": 4.0,
          "weight": 6.0,
          "fragile": true
        },
        {
          "id": "i6",
          "name": "Sparkling Brut Magnum 1.5L (single)",
          "size": 8.0,
          "weight": 16.0,
          "fragile": true
        },
        {
          "id": "i7",
          "name": "Gel Ice Pack Bricks (2-pack) for summer lanes",
          "size": 6.0,
          "weight": 14.0,
          "fragile": false
        },
        {
          "id": "i8",
          "name": "Cardboard Bottle Dividers (bundle)",
          "size": 3.0,
          "weight": 1.0,
          "fragile": false
        },
        {
          "id": "i9",
          "name": "12-bottle Case: Provence-Style Ros\u00e9 2024 (750ml)",
          "size": 12.0,
          "weight": 19.0,
          "fragile": true
        },
        {
          "id": "i10",
          "name": "Pairing Kit: Slate Cheese Board (gift promo)",
          "size": 9.0,
          "weight": 10.0,
          "fragile": true
        },
        {
          "id": "i11",
          "name": "Pairing Kit: Artisan Dark Chocolate Assortment (boxed)",
          "size": 9.0,
          "weight": 7.0,
          "fragile": false
        },
        {
          "id": "i12",
          "name": "Waiter\u2019s Corkscrew Bundle (10 units)",
          "size": 5.0,
          "weight": 2.0,
          "fragile": false
        },
        {
          "id": "i13",
          "name": "Foil Cutter Multi-pack (20 units)",
          "size": 7.0,
          "weight": 5.0,
          "fragile": false
        },
        {
          "id": "i14",
          "name": "Wine Club Insert Cards + Recipe Sheet Stack",
          "size": 4.0,
          "weight": 4.0,
          "fragile": false
        },
        {
          "id": "i15",
          "name": "Label Protector Sleeves (roll)",
          "size": 3.0,
          "weight": 1.0,
          "fragile": false
        },
        {
          "id": "i16",
          "name": "6-pack Case: Old Vine Zinfandel 2021 (750ml)",
          "size": 6.0,
          "weight": 13.0,
          "fragile": true
        },
        {
          "id": "i17",
          "name": "6-pack Case: Sauvignon Blanc 2024 (750ml)",
          "size": 6.0,
          "weight": 13.0,
          "fragile": true
        },
        {
          "id": "i18",
          "name": "6-pack Case: Fortified Dessert Wine 500ml (x6)",
          "size": 6.0,
          "weight": 15.0,
          "fragile": true
        }
      ],
      "bins": [
        {
          "id": "b1",
          "name": "12-bottle Molded-Pulp Shipper (Small)",
          "capacity": 24.0,
          "max_weight": 55.0,
          "max_fragile": 6,
          "cost": 9.0
        },
        {
          "id": "b2",
          "name": "18-slot Double-Wall Case (Standard)",
          "capacity": 36.0,
          "max_weight": 75.0,
          "max_fragile": 10,
          "cost": 13.0
        },
        {
          "id": "b3",
          "name": "24-slot Reusable Plastic Wine Tote (Limited Stock)",
          "capacity": 48.0,
          "max_weight": 95.0,
          "max_fragile": 14,
          "cost": 25.0
        }
      ]
    },
    "constraints": [
      {
        "description": "Ice packs i7 must not share a container with the chocolate box i11 (condensation/food-quality issue).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i7",
            "i11"
          ]
        }
      },
      {
        "description": "The sparkling magnum i6 cannot be packed in the same container as the full 12-bottle ros\u00e9 case i9 (shape/handling clearance in these cases).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i6",
            "i9"
          ]
        }
      },
      {
        "description": "The oak tasting-flight stand i1 must not be packed with the stemware i5 (scratch/break risk from hardware edges).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i1",
            "i5"
          ]
        }
      },
      {
        "description": "VIP gift components must ship together: the Reserve Cabernet duo box i4 and the crystal stemware pair i5.",
        "_spec": {
          "fn": "must_together",
          "args": [
            [
              "i4",
              "i5"
            ]
          ]
        }
      },
      {
        "description": "Pairing kit must ship together: slate board i10 and chocolate assortment i11.",
        "_spec": {
          "fn": "must_together",
          "args": [
            [
              "i10",
              "i11"
            ]
          ]
        }
      },
      {
        "description": "All items must be packed using at most 4 containers total.",
        "_spec": {
          "fn": "max_bins",
          "args": [
            4
          ]
        }
      },
      {
        "description": "Only one reusable plastic wine tote is available today.",
        "_spec": {
          "fn": "bin_type_limit",
          "args": [
            "b3",
            1
          ]
        }
      },
      {
        "description": "At most three Standard 18-slot cases can be used (the rest are allocated to another outbound wave).",
        "_spec": {
          "fn": "bin_type_limit",
          "args": [
            "b2",
            3
          ]
        }
      },
      {
        "description": "To reduce damage from shifting loads, every used container must be at least 70% full by volume.",
        "_spec": {
          "fn": "min_fill_rate",
          "args": [
            0.7
          ]
        }
      },
      {
        "description": "To keep carrier handling consistent across labels, the heaviest and lightest used containers may differ by at most 18 weight units.",
        "_spec": {
          "fn": "weight_balance",
          "args": [
            18.0
          ]
        }
      },
      {
        "description": "Fragile items cannot share a container with any item heavier than 22 weight units (crush-risk rule for glass/ceramic shipments).",
        "_spec": {
          "fn": "fragile_separate",
          "args": [
            22.0
          ]
        }
      }
    ],
    "instruction": "Pack all items into available container types while respecting container capacity, max weight, max fragile count, fragile/heavy separation, and all compatibility constraints. Minimize the total number of bins used (primary objective).",
    "feasible": true,
    "solution": {
      "domain": "bin_packing",
      "assignments": [
        {
          "item_id": "i1",
          "bin_id": "b2_2"
        },
        {
          "item_id": "i2",
          "bin_id": "b1_2"
        },
        {
          "item_id": "i3",
          "bin_id": "b1_2"
        },
        {
          "item_id": "i4",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i5",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i6",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i7",
          "bin_id": "b1_2"
        },
        {
          "item_id": "i8",
          "bin_id": "b2_2"
        },
        {
          "item_id": "i9",
          "bin_id": "b1_3"
        },
        {
          "item_id": "i10",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i11",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i12",
          "bin_id": "b2_2"
        },
        {
          "item_id": "i13",
          "bin_id": "b2_2"
        },
        {
          "item_id": "i14",
          "bin_id": "b2_2"
        },
        {
          "item_id": "i15",
          "bin_id": "b2_2"
        },
        {
          "item_id": "i16",
          "bin_id": "b1_3"
        },
        {
          "item_id": "i17",
          "bin_id": "b1_2"
        },
        {
          "item_id": "i18",
          "bin_id": "b1_3"
        }
      ],
      "bins_used": 4,
      "total_waste": 2.0,
      "total_cost": 44.0
    }
  },
  {
    "id": "bin_packing_58b97d7e",
    "difficulty": "expert",
    "scenario": {
      "domain": "bin_packing",
      "description": "BrightShip Fulfillment (an e-commerce fulfillment center) is packing a mixed batch of high-velocity orders for \"CyberMonday Rush\" into standard containers. Items include electronics, home goods, and hazardous-but-allowed consumer items (e.g., lithium batteries, aerosols). The packing team must respect container volume (capacity), container weight limits, item fragility handling, and a few compliance incompatibilities while minimizing the number of containers used.",
      "unlimited_bins": true,
      "items": [
        {
          "id": "i1",
          "name": "AetherPad 11\" Tablet (retail box)",
          "size": 48.0,
          "weight": 26.0,
          "fragile": true
        },
        {
          "id": "i2",
          "name": "VoltCell Li-ion Battery Pack (spare)",
          "size": 72.0,
          "weight": 10.0,
          "fragile": false
        },
        {
          "id": "i3",
          "name": "NanoDrone Starter Kit Box",
          "size": 33.0,
          "weight": 8.0,
          "fragile": true
        },
        {
          "id": "i4",
          "name": "Glass Insulated Bottle (single)",
          "size": 28.0,
          "weight": 3.0,
          "fragile": true
        },
        {
          "id": "i5",
          "name": "Steel Kettlebell 20 lb",
          "size": 26.0,
          "weight": 20.0,
          "fragile": false
        },
        {
          "id": "i6",
          "name": "Cast-Iron Skillet 10\"",
          "size": 25.0,
          "weight": 15.0,
          "fragile": false
        },
        {
          "id": "i7",
          "name": "Ceramic Dinnerware Set (boxed)",
          "size": 24.0,
          "weight": 18.0,
          "fragile": true
        },
        {
          "id": "i8",
          "name": "ProStudio Microphone (boxed)",
          "size": 22.0,
          "weight": 14.0,
          "fragile": true
        },
        {
          "id": "i9",
          "name": "Desk Fan (boxed)",
          "size": 20.0,
          "weight": 19.0,
          "fragile": false
        },
        {
          "id": "i10",
          "name": "AeroFresh Scented Aerosol 6-pack",
          "size": 18.0,
          "weight": 9.0,
          "fragile": false
        },
        {
          "id": "i11",
          "name": "HomeGym Adjustable Dumbbell Set",
          "size": 16.0,
          "weight": 58.0,
          "fragile": false
        },
        {
          "id": "i12",
          "name": "OptiFrame Eyewear (boxed)",
          "size": 15.0,
          "weight": 4.0,
          "fragile": true
        },
        {
          "id": "i13",
          "name": "Satin Candle Trio (glass jars)",
          "size": 14.0,
          "weight": 6.0,
          "fragile": true
        },
        {
          "id": "i14",
          "name": "LED Bulb 12-pack (boxed)",
          "size": 12.0,
          "weight": 5.0,
          "fragile": true
        },
        {
          "id": "i15",
          "name": "ArtPrint Poster Tube",
          "size": 10.0,
          "weight": 22.0,
          "fragile": false
        },
        {
          "id": "i16",
          "name": "EcoClean Detergent Pouch 2L",
          "size": 9.0,
          "weight": 11.0,
          "fragile": false
        },
        {
          "id": "i17",
          "name": "Gourmet Coffee Sampler Box",
          "size": 7.0,
          "weight": 13.0,
          "fragile": false
        },
        {
          "id": "i18",
          "name": "USB-C Cable Bundle (50-pack)",
          "size": 6.0,
          "weight": 17.0,
          "fragile": false
        }
      ],
      "bins": [
        {
          "id": "b1",
          "name": "BrightShip Small Carton (S1)",
          "capacity": 55.0,
          "max_weight": 35.0,
          "max_fragile": 2,
          "cost": 4.2
        },
        {
          "id": "b2",
          "name": "BrightShip Medium Carton (M2)",
          "capacity": 80.0,
          "max_weight": 70.0,
          "max_fragile": 3,
          "cost": 6.5
        },
        {
          "id": "b3",
          "name": "BrightShip Heavy-Duty Tote (H3)",
          "capacity": 110.0,
          "max_weight": 120.0,
          "max_fragile": 1,
          "cost": 12.0
        }
      ]
    },
    "constraints": [
      {
        "description": "Li-ion battery packs cannot be packed in the same container as aerosol products (carrier compliance rule).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i2",
            "i10"
          ]
        }
      },
      {
        "description": "Aerosols cannot be packed with detergent pouches to avoid leak/pressure cross-risk in mixed parcels.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i10",
            "i16"
          ]
        }
      },
      {
        "description": "The tablet box must not share a container with the heavy adjustable dumbbell set (drop/impact risk in single-parcel handling).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i1",
            "i11"
          ]
        }
      },
      {
        "description": "NanoDrone Starter Kit and USB-C Cable Bundle must ship together as a promo kit.",
        "_spec": {
          "fn": "must_together",
          "args": [
            [
              "i3",
              "i18"
            ]
          ]
        }
      },
      {
        "description": "OptiFrame Eyewear and Satin Candle Trio must ship together as a gift bundle.",
        "_spec": {
          "fn": "must_together",
          "args": [
            [
              "i12",
              "i13"
            ]
          ]
        }
      },
      {
        "description": "To keep outbound lanes manageable, no more than 5 containers may be used in total.",
        "_spec": {
          "fn": "max_bins",
          "args": [
            5
          ]
        }
      },
      {
        "description": "Heavy-Duty Totes (H3) are limited (only two available for this wave).",
        "_spec": {
          "fn": "bin_type_limit",
          "args": [
            "b3",
            2
          ]
        }
      },
      {
        "description": "Every used container must be at least 70% full by volume to prevent dimensional-weight waste.",
        "_spec": {
          "fn": "min_fill_rate",
          "args": [
            0.7
          ]
        }
      },
      {
        "description": "Balance loads across parcels: the maximum difference in total weight between any two used containers is 35.",
        "_spec": {
          "fn": "weight_balance",
          "args": [
            35.0
          ]
        }
      },
      {
        "description": "Fragile items cannot share a bin with any single non-fragile item heavier than 50 (to prevent crushing during line-haul).",
        "_spec": {
          "fn": "fragile_separate",
          "args": [
            50.0
          ]
        }
      }
    ],
    "instruction": "Minimize the total number of bins used while packing all items. You must respect each bin\u2019s capacity, max_weight, and max_fragile limits; all incompatibility and must_together constraints; the minimum fill-rate requirement for every used bin; the weight-balance constraint across used bins; and the fragile separation rule.",
    "feasible": true,
    "solution": {
      "domain": "bin_packing",
      "assignments": [
        {
          "item_id": "i1",
          "bin_id": "b2_2"
        },
        {
          "item_id": "i2",
          "bin_id": "b3_0"
        },
        {
          "item_id": "i3",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i4",
          "bin_id": "b2_3"
        },
        {
          "item_id": "i5",
          "bin_id": "b2_2"
        },
        {
          "item_id": "i6",
          "bin_id": "b2_3"
        },
        {
          "item_id": "i7",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i8",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i9",
          "bin_id": "b2_3"
        },
        {
          "item_id": "i10",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i11",
          "bin_id": "b3_0"
        },
        {
          "item_id": "i12",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i13",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i14",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i15",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i16",
          "bin_id": "b3_0"
        },
        {
          "item_id": "i17",
          "bin_id": "b2_3"
        },
        {
          "item_id": "i18",
          "bin_id": "b2_0"
        }
      ],
      "bins_used": 5,
      "total_waste": 25.0,
      "total_cost": 38.0
    }
  },
  {
    "id": "bin_packing_90355d07",
    "difficulty": "expert",
    "scenario": {
      "domain": "bin_packing",
      "description": "MetroMart Express (grocery delivery) is packing a single large customer order for last-mile delivery. Packers must fit a mix of produce, pantry, cold items, and household goods into available container types while respecting container capacity/weight limits, fragile handling limits, and a few safety/quality incompatibilities.",
      "unlimited_bins": true,
      "items": [
        {
          "id": "i1",
          "name": "Organic Strawberries (clamshell)",
          "size": 6.0,
          "weight": 0.7,
          "fragile": true
        },
        {
          "id": "i2",
          "name": "Blueberries (pint)",
          "size": 5.0,
          "weight": 0.4,
          "fragile": true
        },
        {
          "id": "i3",
          "name": "Cage-Free Eggs (dozen)",
          "size": 7.0,
          "weight": 0.9,
          "fragile": true
        },
        {
          "id": "i4",
          "name": "Artisan Sourdough Loaf",
          "size": 10.0,
          "weight": 0.5,
          "fragile": true
        },
        {
          "id": "i5",
          "name": "Marinara Sauce (glass jar)",
          "size": 9.0,
          "weight": 2.1,
          "fragile": true
        },
        {
          "id": "i6",
          "name": "Baby Spinach (plastic box)",
          "size": 6.0,
          "weight": 0.6,
          "fragile": false
        },
        {
          "id": "i7",
          "name": "Vine-Ripe Tomatoes (tray)",
          "size": 6.0,
          "weight": 1.1,
          "fragile": true
        },
        {
          "id": "i8",
          "name": "Fresh Basil (bunch)",
          "size": 5.0,
          "weight": 0.8,
          "fragile": true
        },
        {
          "id": "i9",
          "name": "Greek Yogurt 4-Pack",
          "size": 4.0,
          "weight": 0.6,
          "fragile": false
        },
        {
          "id": "i10",
          "name": "Orange Juice (family carton)",
          "size": 8.0,
          "weight": 1.8,
          "fragile": false
        },
        {
          "id": "i11",
          "name": "Raw Chicken Thighs (sealed tray)",
          "size": 9.0,
          "weight": 0.7,
          "fragile": false
        },
        {
          "id": "i12",
          "name": "Frozen Dumplings (bag)",
          "size": 7.0,
          "weight": 1.5,
          "fragile": false
        },
        {
          "id": "i13",
          "name": "Potatoes (10-lb bag)",
          "size": 12.0,
          "weight": 4.2,
          "fragile": false
        },
        {
          "id": "i14",
          "name": "Paper Towels (6-roll pack)",
          "size": 8.0,
          "weight": 0.9,
          "fragile": false
        },
        {
          "id": "i15",
          "name": "Cat Litter (20-lb box)",
          "size": 20.0,
          "weight": 6.0,
          "fragile": false
        },
        {
          "id": "i16",
          "name": "Laundry Detergent (large jug)",
          "size": 6.0,
          "weight": 3.0,
          "fragile": false
        },
        {
          "id": "i17",
          "name": "Dark Roast Coffee Beans (2 lb bag)",
          "size": 6.0,
          "weight": 1.0,
          "fragile": false
        },
        {
          "id": "i18",
          "name": "Dish Soap (bottle)",
          "size": 5.0,
          "weight": 0.3,
          "fragile": false
        }
      ],
      "bins": [
        {
          "id": "b1",
          "name": "MetroMart Standard Stackable Crate",
          "capacity": 45.0,
          "max_weight": 15.0,
          "max_fragile": 2,
          "cost": 6.0
        },
        {
          "id": "b2",
          "name": "MetroMart Insulated Chill Tote",
          "capacity": 30.0,
          "max_weight": 10.0,
          "max_fragile": 4,
          "cost": 11.0
        },
        {
          "id": "b3",
          "name": "Heavy-Duty Bulk Produce Box",
          "capacity": 60.0,
          "max_weight": 25.0,
          "max_fragile": 1,
          "cost": 5.0
        }
      ]
    },
    "constraints": [
      {
        "description": "Raw chicken must not be packed in the same container as ready-to-eat berries (cross-contamination risk).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i11",
            "i1"
          ]
        }
      },
      {
        "description": "Laundry detergent must not be packed with fresh bread (odor/chemical taint risk).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i16",
            "i4"
          ]
        }
      },
      {
        "description": "Cat litter must not be packed with eggs (crush/contamination risk).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i15",
            "i3"
          ]
        }
      },
      {
        "description": "Berries are picked/packed as a single produce bundle and must ship together.",
        "_spec": {
          "fn": "must_together",
          "args": [
            [
              "i1",
              "i2"
            ]
          ]
        }
      },
      {
        "description": "The dinner bundle (sourdough + marinara) is a single promotional kit and must ship together.",
        "_spec": {
          "fn": "must_together",
          "args": [
            [
              "i4",
              "i5"
            ]
          ]
        }
      },
      {
        "description": "Dispatch can handle at most 4 total containers for this stop (driver handling + drop-off time).",
        "_spec": {
          "fn": "max_bins",
          "args": [
            4
          ]
        }
      },
      {
        "description": "Insulated chill totes are scarce at this pickup window.",
        "_spec": {
          "fn": "bin_type_limit",
          "args": [
            "b2",
            1
          ]
        }
      },
      {
        "description": "Only one heavy-duty bulk produce box is available at this station (rest are allocated to other routes).",
        "_spec": {
          "fn": "bin_type_limit",
          "args": [
            "b3",
            1
          ]
        }
      },
      {
        "description": "To prevent shifting during delivery, every used container must be at least 70% full by size.",
        "_spec": {
          "fn": "min_fill_rate",
          "args": [
            0.7
          ]
        }
      },
      {
        "description": "To keep totes balanced for the driver, the heaviest packed container cannot exceed the lightest by more than 12 kg.",
        "_spec": {
          "fn": "weight_balance",
          "args": [
            12.0
          ]
        }
      },
      {
        "description": "Fragile items cannot share a container with any single item heavier than 3.5 kg (to avoid crushing).",
        "_spec": {
          "fn": "fragile_separate",
          "args": [
            3.5
          ]
        }
      }
    ],
    "instruction": "Pack all items into available containers while respecting capacity limits, max_weight, max_fragile, incompatibilities, must-together bundles, min-fill, weight-balance, and fragile-separation rules. Minimize the total number of bins used (primary objective); if multiple solutions use the same number of bins, minimize total bin cost.",
    "feasible": true,
    "solution": {
      "domain": "bin_packing",
      "assignments": [
        {
          "item_id": "i1",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i2",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i3",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i4",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i5",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i6",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i7",
          "bin_id": "b1_3"
        },
        {
          "item_id": "i8",
          "bin_id": "b1_3"
        },
        {
          "item_id": "i9",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i10",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i11",
          "bin_id": "b3_0"
        },
        {
          "item_id": "i12",
          "bin_id": "b1_3"
        },
        {
          "item_id": "i13",
          "bin_id": "b3_0"
        },
        {
          "item_id": "i14",
          "bin_id": "b1_3"
        },
        {
          "item_id": "i15",
          "bin_id": "b3_0"
        },
        {
          "item_id": "i16",
          "bin_id": "b3_0"
        },
        {
          "item_id": "i17",
          "bin_id": "b1_3"
        },
        {
          "item_id": "i18",
          "bin_id": "b1_0"
        }
      ],
      "bins_used": 4,
      "total_waste": 41.0,
      "total_cost": 28.0
    }
  },
  {
    "id": "bin_packing_9abb0397",
    "difficulty": "expert",
    "scenario": {
      "domain": "bin_packing",
      "description": "Redwood Quay Gallery is preparing a high-stakes museum loan shipment: framed paintings, works on paper, and several heavy sculptures must be packed into transport containers. The gallery must respect container size/weight limits, fragile handling limits, media-specific incompatibilities (to prevent abrasion/contamination), and a strict packing policy that discourages under-filled cases (to reduce shifting damage).",
      "unlimited_bins": true,
      "items": [
        {
          "id": "i1",
          "name": "Framed oil painting \u2014 \"Vermilion Harbor\"",
          "size": 28.0,
          "weight": 18.0,
          "fragile": true
        },
        {
          "id": "i2",
          "name": "Matted watercolor \u2014 \"Winter Mews\"",
          "size": 26.0,
          "weight": 12.0,
          "fragile": true
        },
        {
          "id": "i3",
          "name": "Charcoal portfolio \u2014 \"Line Studies\" (Set A)",
          "size": 22.0,
          "weight": 10.0,
          "fragile": true
        },
        {
          "id": "i4",
          "name": "Charcoal portfolio \u2014 \"Line Studies\" (Set B)",
          "size": 22.0,
          "weight": 10.0,
          "fragile": true
        },
        {
          "id": "i5",
          "name": "Gilded-frame mixed media \u2014 \"Gold Leaf Echo\"",
          "size": 20.0,
          "weight": 14.0,
          "fragile": true
        },
        {
          "id": "i6",
          "name": "Acrylic on panel \u2014 \"Neon Orchard\"",
          "size": 20.0,
          "weight": 15.0,
          "fragile": true
        },
        {
          "id": "i7",
          "name": "Ceramic mask sculpture \u2014 \"Mouth of Apollo\"",
          "size": 20.0,
          "weight": 30.0,
          "fragile": false
        },
        {
          "id": "i8",
          "name": "Bronze bust \u2014 \"Founder\u2019s Head\"",
          "size": 18.0,
          "weight": 55.0,
          "fragile": false
        },
        {
          "id": "i9",
          "name": "Stone plinth for bust (quarried base)",
          "size": 16.0,
          "weight": 72.0,
          "fragile": false
        },
        {
          "id": "i10",
          "name": "LED pedestal stand (aluminum, collapsible)",
          "size": 15.0,
          "weight": 25.0,
          "fragile": false
        },
        {
          "id": "i11",
          "name": "Lithium battery + controller kit for LED pedestal",
          "size": 17.0,
          "weight": 32.0,
          "fragile": false
        },
        {
          "id": "i12",
          "name": "Protective glass panel (spare glazing sheet)",
          "size": 14.0,
          "weight": 20.0,
          "fragile": true
        },
        {
          "id": "i13",
          "name": "Rigid-board triptych panel A \u2014 \"Cathedral Grid\"",
          "size": 34.0,
          "weight": 65.0,
          "fragile": false
        },
        {
          "id": "i14",
          "name": "Rigid-board triptych panel B \u2014 \"Cathedral Grid\"",
          "size": 24.0,
          "weight": 45.0,
          "fragile": false
        },
        {
          "id": "i15",
          "name": "Rigid-board triptych panel C \u2014 \"Cathedral Grid\"",
          "size": 20.0,
          "weight": 48.0,
          "fragile": false
        },
        {
          "id": "i16",
          "name": "Marble relief sculpture \u2014 \"Tide Map\"",
          "size": 28.0,
          "weight": 60.0,
          "fragile": false
        },
        {
          "id": "i17",
          "name": "Diptych painting \u2014 \"Sea Mist\" (Left)",
          "size": 12.0,
          "weight": 6.0,
          "fragile": true
        },
        {
          "id": "i18",
          "name": "Diptych painting \u2014 \"Sea Mist\" (Right)",
          "size": 10.0,
          "weight": 6.0,
          "fragile": true
        }
      ],
      "bins": [
        {
          "id": "b1",
          "name": "Climate-Controlled Museum Crate (Redwood Quay Custom)",
          "capacity": 90.0,
          "max_weight": 220.0,
          "max_fragile": 2,
          "cost": 75.0
        },
        {
          "id": "b2",
          "name": "Standard ATA Art Case (Foam-Lined)",
          "capacity": 70.0,
          "max_weight": 160.0,
          "max_fragile": 3,
          "cost": 38.0
        },
        {
          "id": "b3",
          "name": "Compact Double-Wall Foam Box",
          "capacity": 40.0,
          "max_weight": 90.0,
          "max_fragile": 3,
          "cost": 16.0
        }
      ]
    },
    "constraints": [
      {
        "description": "Oil painting i1 must not share a container with charcoal portfolio i3 (charcoal dust can embed in varnish and frame crevices during vibration).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i1",
            "i3"
          ]
        }
      },
      {
        "description": "Gilded-frame mixed media i5 must not share a container with spare glass panel i12 (micro-vibration can cause edge chipping and gold-leaf abrasion).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i5",
            "i12"
          ]
        }
      },
      {
        "description": "Watercolor i2 must not share a container with lithium battery/controller kit i11 (carrier handling rule for works-on-paper: keep away from powered components to avoid extra inspection/pressure points).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "i2",
            "i11"
          ]
        }
      },
      {
        "description": "Charcoal portfolio sets i3 and i4 are cataloged as a single loan unit and must be packed together.",
        "_spec": {
          "fn": "must_together",
          "args": [
            [
              "i3",
              "i4"
            ]
          ]
        }
      },
      {
        "description": "Diptych halves i17 and i18 must ship in the same container to preserve humidity/handling parity and simplify registrar check-in.",
        "_spec": {
          "fn": "must_together",
          "args": [
            [
              "i17",
              "i18"
            ]
          ]
        }
      },
      {
        "description": "Hard dispatch rule: the shipment may use at most 7 total containers (excess containers trigger an additional fine-art courier run).",
        "_spec": {
          "fn": "max_bins",
          "args": [
            7
          ]
        }
      },
      {
        "description": "Redwood Quay only has 2 climate-controlled museum crates available tonight (b1).",
        "_spec": {
          "fn": "bin_type_limit",
          "args": [
            "b1",
            2
          ]
        }
      },
      {
        "description": "Only 3 standard ATA art cases are available (b2); the rest must be boxed or crated.",
        "_spec": {
          "fn": "bin_type_limit",
          "args": [
            "b2",
            3
          ]
        }
      },
      {
        "description": "Only 2 compact foam boxes are in stock (b3).",
        "_spec": {
          "fn": "bin_type_limit",
          "args": [
            "b3",
            2
          ]
        }
      },
      {
        "description": "To prevent load shift and corner impacts, every used container must be at least 70% full by size.",
        "_spec": {
          "fn": "min_fill_rate",
          "args": [
            0.7
          ]
        }
      },
      {
        "description": "Courier stability requirement: keep packed container weights reasonably balanced; the maximum weight difference between any two used containers is 140.",
        "_spec": {
          "fn": "weight_balance",
          "args": [
            140.0
          ]
        }
      },
      {
        "description": "Fragile works cannot share a container with any single item heavier than 50 (to avoid crushing during drops/tilts).",
        "_spec": {
          "fn": "fragile_separate",
          "args": [
            50.0
          ]
        }
      }
    ],
    "instruction": "Minimize the total number of bins used while packing all items, respecting each bin\u2019s capacity, max weight, max fragile count, the fragile separation rule, and the compatibility (incompatible/must_together) constraints.",
    "feasible": true,
    "solution": {
      "domain": "bin_packing",
      "assignments": [
        {
          "item_id": "i1",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i2",
          "bin_id": "b3_1"
        },
        {
          "item_id": "i3",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i4",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i5",
          "bin_id": "b3_0"
        },
        {
          "item_id": "i6",
          "bin_id": "b3_0"
        },
        {
          "item_id": "i7",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i8",
          "bin_id": "b2_2"
        },
        {
          "item_id": "i9",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i10",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i11",
          "bin_id": "b2_2"
        },
        {
          "item_id": "i12",
          "bin_id": "b3_1"
        },
        {
          "item_id": "i13",
          "bin_id": "b2_2"
        },
        {
          "item_id": "i14",
          "bin_id": "b1_0"
        },
        {
          "item_id": "i15",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i16",
          "bin_id": "b2_1"
        },
        {
          "item_id": "i17",
          "bin_id": "b2_0"
        },
        {
          "item_id": "i18",
          "bin_id": "b2_0"
        }
      ],
      "bins_used": 6,
      "total_waste": 14.0,
      "total_cost": 221.0
    }
  },
  {
    "id": "crew_assignment_52eb1e20",
    "difficulty": "expert",
    "scenario": {
      "domain": "crew_assignment",
      "description": "Midland & Prairie Railroad (MPRR) Track & Signal Maintenance Sprint: The project manager must assign a mixed craft crew (track, welding, signal, catenary, inspection) to complete safety-critical corrective work orders across the Cedar Subdivision. Tasks have tight but feasible deadlines tied to scheduled track windows, and workers vary in certifications, hourly cost, and craft-specific efficiency.",
      "start_date": "2026-03-02",
      "workers": [
        {
          "id": "w1",
          "name": "Marta Alvarez",
          "certifications": [
            "signal",
            "track_safety",
            "traffic_control"
          ],
          "hourly_cost": 48.0,
          "max_tasks": 4,
          "efficiency": {
            "signal": 1.4,
            "traffic_control": 1.05
          }
        },
        {
          "id": "w2",
          "name": "Pete O'Connell",
          "certifications": [
            "welding",
            "thermite",
            "track_safety"
          ],
          "hourly_cost": 42.0,
          "max_tasks": 4,
          "efficiency": {
            "welding": 1.15,
            "thermite": 1.25
          }
        },
        {
          "id": "w3",
          "name": "Nia Patel",
          "certifications": [
            "heavy_equipment",
            "track_safety",
            "hazmat"
          ],
          "hourly_cost": 55.0,
          "max_tasks": 4,
          "efficiency": {
            "heavy_equipment": 1.4,
            "hazmat": 1.05
          }
        },
        {
          "id": "w4",
          "name": "Jonah Kim",
          "certifications": [
            "inspection_ultrasonic",
            "track_safety",
            "confined_space",
            "signal"
          ],
          "hourly_cost": 50.0,
          "max_tasks": 4,
          "efficiency": {
            "inspection": 1.5,
            "confined_space": 1.1,
            "signal": 0.95
          }
        },
        {
          "id": "w5",
          "name": "Samir Haddad",
          "certifications": [
            "catenary",
            "electrical",
            "track_safety"
          ],
          "hourly_cost": 60.0,
          "max_tasks": 4,
          "efficiency": {
            "catenary": 1.3,
            "electrical": 1.2
          }
        },
        {
          "id": "w6",
          "name": "Lucy Bennett",
          "certifications": [
            "track_safety",
            "traffic_control",
            "hazmat"
          ],
          "hourly_cost": 30.0,
          "max_tasks": 4,
          "efficiency": {
            "traffic_control": 0.85,
            "hazmat": 1.0
          }
        },
        {
          "id": "w7",
          "name": "Earl Johnson",
          "certifications": [
            "heavy_equipment",
            "welding",
            "track_safety",
            "thermite"
          ],
          "hourly_cost": 38.0,
          "max_tasks": 4,
          "efficiency": {
            "heavy_equipment": 1.0,
            "welding": 1.1,
            "thermite": 0.9
          }
        },
        {
          "id": "w8",
          "name": "Keiko Tanaka",
          "certifications": [
            "inspection_ultrasonic",
            "signal",
            "track_safety"
          ],
          "hourly_cost": 58.0,
          "max_tasks": 4,
          "efficiency": {
            "inspection": 1.2,
            "signal": 1.1
          }
        },
        {
          "id": "w9",
          "name": "Diego Ramos",
          "certifications": [
            "confined_space",
            "welding",
            "hazmat",
            "track_safety"
          ],
          "hourly_cost": 36.0,
          "max_tasks": 4,
          "efficiency": {
            "confined_space": 1.2,
            "welding": 1.0,
            "hazmat": 1.1
          }
        }
      ],
      "tasks": [
        {
          "id": "t1",
          "name": "Replace insulated joint & bond wires (MP 14.2)",
          "task_type": "signal",
          "required_certs": [
            "signal",
            "track_safety"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-03-06",
          "priority": 1
        },
        {
          "id": "t2",
          "name": "Test & calibrate track circuit (Cedar Interlocking)",
          "task_type": "signal",
          "required_certs": [
            "signal",
            "track_safety"
          ],
          "hours_needed": 14.0,
          "deadline": "2026-03-07",
          "priority": 1
        },
        {
          "id": "t3",
          "name": "Thermite weld closure rail (Siding A)",
          "task_type": "thermite",
          "required_certs": [
            "thermite",
            "track_safety"
          ],
          "hours_needed": 16.0,
          "deadline": "2026-03-08",
          "priority": 1
        },
        {
          "id": "t4",
          "name": "Replace 12 ties with tamper (Curve 3)",
          "task_type": "heavy_equipment",
          "required_certs": [
            "heavy_equipment",
            "track_safety"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-03-10",
          "priority": 2
        },
        {
          "id": "t5",
          "name": "Ballast regulator pass (Yard Lead)",
          "task_type": "heavy_equipment",
          "required_certs": [
            "heavy_equipment",
            "track_safety"
          ],
          "hours_needed": 20.0,
          "deadline": "2026-03-12",
          "priority": 2
        },
        {
          "id": "t6",
          "name": "Flash-butt weld prep & grind (Bridge Approach)",
          "task_type": "welding",
          "required_certs": [
            "welding",
            "track_safety"
          ],
          "hours_needed": 22.0,
          "deadline": "2026-03-11",
          "priority": 1
        },
        {
          "id": "t7",
          "name": "Ultrasonic rail flaw scan (North Subdivision Patrol)",
          "task_type": "inspection",
          "required_certs": [
            "inspection_ultrasonic",
            "track_safety"
          ],
          "hours_needed": 24.0,
          "deadline": "2026-03-09",
          "priority": 1
        },
        {
          "id": "t8",
          "name": "Gauge restraint measurement & geometry walk (Industrial Spur)",
          "task_type": "inspection",
          "required_certs": [
            "inspection_ultrasonic",
            "track_safety"
          ],
          "hours_needed": 16.0,
          "deadline": "2026-03-13",
          "priority": 2
        },
        {
          "id": "t9",
          "name": "Confined-space drain cleaning in culvert (MP 9.6)",
          "task_type": "confined_space",
          "required_certs": [
            "confined_space",
            "track_safety"
          ],
          "hours_needed": 14.0,
          "deadline": "2026-03-12",
          "priority": 2
        },
        {
          "id": "t10",
          "name": "Hazmat spill kit restock & disposal manifests (MPRR Fuel Pad)",
          "task_type": "hazmat",
          "required_certs": [
            "hazmat",
            "track_safety"
          ],
          "hours_needed": 10.0,
          "deadline": "2026-03-14",
          "priority": 3
        },
        {
          "id": "t11",
          "name": "Catenary dropper replacement (Span 22)",
          "task_type": "catenary",
          "required_certs": [
            "catenary",
            "electrical",
            "track_safety"
          ],
          "hours_needed": 8.0,
          "deadline": "2026-03-08",
          "priority": 1
        },
        {
          "id": "t12",
          "name": "Catenary section insulator inspection & IR scan (Station Throat)",
          "task_type": "catenary",
          "required_certs": [
            "catenary",
            "electrical",
            "track_safety"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-03-10",
          "priority": 1
        },
        {
          "id": "t13",
          "name": "Flagging & roadway worker protection set-up (Night window W-3)",
          "task_type": "traffic_control",
          "required_certs": [
            "traffic_control",
            "track_safety"
          ],
          "hours_needed": 16.0,
          "deadline": "2026-03-06",
          "priority": 1
        },
        {
          "id": "t14",
          "name": "Install derail & signage at work zone (Yard Access Road)",
          "task_type": "traffic_control",
          "required_certs": [
            "traffic_control",
            "track_safety"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-03-09",
          "priority": 2
        }
      ],
      "max_hours_per_worker": 40
    },
    "constraints": [
      {
        "description": "Workload should be balanced - no more than 10 hour difference between any two workers",
        "_spec": {
          "fn": "workload_balance",
          "args": [
            10
          ]
        }
      },
      {
        "description": "Each worker can handle at most 4 concurrent tasks",
        "_spec": {
          "fn": "max_concurrent",
          "args": [
            4
          ]
        }
      },
      {
        "description": "Each worker can work at most 40 hours in the planning horizon",
        "_spec": {
          "fn": "max_hours",
          "args": [
            40
          ]
        }
      },
      {
        "description": "Task t1 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t1"
          ]
        }
      },
      {
        "description": "Task t2 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t2"
          ]
        }
      },
      {
        "description": "Task t3 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t3"
          ]
        }
      },
      {
        "description": "Task t4 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t4"
          ]
        }
      },
      {
        "description": "Task t5 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t5"
          ]
        }
      },
      {
        "description": "Task t6 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t6"
          ]
        }
      },
      {
        "description": "Task t7 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t7"
          ]
        }
      },
      {
        "description": "Task t8 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t8"
          ]
        }
      },
      {
        "description": "Task t9 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t9"
          ]
        }
      },
      {
        "description": "Task t10 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t10"
          ]
        }
      },
      {
        "description": "Task t11 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t11"
          ]
        }
      },
      {
        "description": "Task t12 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t12"
          ]
        }
      },
      {
        "description": "Task t13 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t13"
          ]
        }
      },
      {
        "description": "Task t14 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t14"
          ]
        }
      }
    ],
    "instruction": "Assign exactly one worker to each railroad maintenance task. Respect required certifications and task deadlines. Account for worker efficiency by task_type (more efficient workers effectively need fewer paid hours to complete the same hours_needed). Minimize total labor cost while meeting max-hours, max-concurrent, and workload-balance constraints.",
    "feasible": true,
    "solution": {
      "domain": "crew_assignment",
      "assignments": [
        {
          "worker_id": "w1",
          "task_id": "t1",
          "hours": 18.0
        },
        {
          "worker_id": "w1",
          "task_id": "t2",
          "hours": 14.0
        },
        {
          "worker_id": "w2",
          "task_id": "t3",
          "hours": 22.0
        },
        {
          "worker_id": "w3",
          "task_id": "t4",
          "hours": 12.0
        },
        {
          "worker_id": "w3",
          "task_id": "t5",
          "hours": 20.0
        },
        {
          "worker_id": "w4",
          "task_id": "t7",
          "hours": 24.0
        },
        {
          "worker_id": "w5",
          "task_id": "t11",
          "hours": 8.0
        },
        {
          "worker_id": "w5",
          "task_id": "t12",
          "hours": 18.0
        },
        {
          "worker_id": "w6",
          "task_id": "t13",
          "hours": 16.0
        },
        {
          "worker_id": "w6",
          "task_id": "t14",
          "hours": 12.0
        },
        {
          "worker_id": "w7",
          "task_id": "t6",
          "hours": 22.0
        },
        {
          "worker_id": "w8",
          "task_id": "t8",
          "hours": 22.0
        },
        {
          "worker_id": "w9",
          "task_id": "t9",
          "hours": 14.0
        },
        {
          "worker_id": "w9",
          "task_id": "t10",
          "hours": 10.0
        }
      ],
      "total_cost": 10796.0,
      "total_hours": 232.0
    }
  },
  {
    "id": "crew_assignment_052b5cb6",
    "difficulty": "expert",
    "scenario": {
      "domain": "crew_assignment",
      "description": "Ridgeway Deep Mine (underground hard\u2011rock operation) is preparing for a planned 10-day maintenance window plus ongoing safety compliance. The project manager must assign a mixed equipment-and-safety crew to critical tasks (ventilation, electrical isolation, methane monitoring, ground control, and LHD/hoist maintenance) while meeting regulatory deadlines. Worker certifications gate who may perform certain work, and efficiency differs by task type due to specialized experience with underground systems. The tricky part: several deadlines cluster early, a few workers are the only high-efficiency options for specific task types, and workload-balance limits prevent overloading the obvious low-cost choices.",
      "start_date": "2026-03-02",
      "workers": [
        {
          "id": "w1",
          "name": "Mason Kline",
          "certifications": [
            "electrical",
            "lockout_tagout",
            "underground_safety"
          ],
          "hourly_cost": 68.0,
          "max_tasks": 4,
          "efficiency": {
            "electrical": 1.35,
            "mechanical": 0.85,
            "ventilation": 0.9,
            "safety": 1.0,
            "instrumentation": 1.15,
            "welding": 0.7
          }
        },
        {
          "id": "w2",
          "name": "Priya Deshmukh",
          "certifications": [
            "mechanical",
            "hydraulics",
            "underground_safety"
          ],
          "hourly_cost": 52.0,
          "max_tasks": 4,
          "efficiency": {
            "mechanical": 1.25,
            "hydraulics": 1.35,
            "welding": 0.85,
            "electrical": 0.6,
            "safety": 1.0,
            "ventilation": 0.8
          }
        },
        {
          "id": "w3",
          "name": "Owen Hart",
          "certifications": [
            "ventilation",
            "underground_safety",
            "confined_space"
          ],
          "hourly_cost": 58.0,
          "max_tasks": 3,
          "efficiency": {
            "ventilation": 1.4,
            "safety": 1.1,
            "mechanical": 0.8,
            "instrumentation": 0.9,
            "electrical": 0.6
          }
        },
        {
          "id": "w4",
          "name": "Leila Navarro",
          "certifications": [
            "instrumentation",
            "gas_monitoring",
            "underground_safety"
          ],
          "hourly_cost": 61.0,
          "max_tasks": 4,
          "efficiency": {
            "instrumentation": 1.45,
            "safety": 1.15,
            "electrical": 0.85,
            "ventilation": 0.9,
            "mechanical": 0.7
          }
        },
        {
          "id": "w5",
          "name": "Caleb Moyo",
          "certifications": [
            "welding",
            "mechanical",
            "underground_safety"
          ],
          "hourly_cost": 46.0,
          "max_tasks": 4,
          "efficiency": {
            "welding": 1.3,
            "mechanical": 1.05,
            "hydraulics": 0.95,
            "safety": 0.95,
            "electrical": 0.6
          }
        },
        {
          "id": "w6",
          "name": "Hana Iqbal",
          "certifications": [
            "ground_control",
            "underground_safety",
            "confined_space"
          ],
          "hourly_cost": 55.0,
          "max_tasks": 3,
          "efficiency": {
            "ground_control": 1.4,
            "safety": 1.2,
            "mechanical": 0.75,
            "ventilation": 0.85
          }
        },
        {
          "id": "w7",
          "name": "Ethan Rourke",
          "certifications": [
            "safety",
            "emergency_response",
            "underground_safety"
          ],
          "hourly_cost": 44.0,
          "max_tasks": 5,
          "efficiency": {
            "safety": 1.25,
            "gas_monitoring": 0.9,
            "ventilation": 0.8,
            "mechanical": 0.75,
            "instrumentation": 0.8
          }
        },
        {
          "id": "w8",
          "name": "Sofia Petrov",
          "certifications": [
            "electrical",
            "instrumentation",
            "underground_safety"
          ],
          "hourly_cost": 63.0,
          "max_tasks": 4,
          "efficiency": {
            "electrical": 1.2,
            "instrumentation": 1.25,
            "safety": 1.0,
            "mechanical": 0.75,
            "ventilation": 0.85
          }
        },
        {
          "id": "w9",
          "name": "Noah Bennett",
          "certifications": [
            "mechanical",
            "hydraulics",
            "lockout_tagout",
            "underground_safety"
          ],
          "hourly_cost": 49.0,
          "max_tasks": 4,
          "efficiency": {
            "mechanical": 1.1,
            "hydraulics": 1.25,
            "electrical": 0.8,
            "safety": 0.95,
            "welding": 0.9
          }
        },
        {
          "id": "w10",
          "name": "Aria Tan",
          "certifications": [
            "ventilation",
            "gas_monitoring",
            "underground_safety"
          ],
          "hourly_cost": 57.0,
          "max_tasks": 3,
          "efficiency": {
            "ventilation": 1.25,
            "gas_monitoring": 1.3,
            "safety": 1.05,
            "instrumentation": 0.85,
            "mechanical": 0.8
          }
        }
      ],
      "tasks": [
        {
          "id": "t1",
          "name": "Primary Substation LOTO + Feeder Inspection (Panel A3)",
          "task_type": "electrical",
          "required_certs": [
            "electrical",
            "lockout_tagout",
            "underground_safety"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-03-06",
          "priority": 1
        },
        {
          "id": "t2",
          "name": "Crusher MCC Thermal Scan + Retorque",
          "task_type": "electrical",
          "required_certs": [
            "electrical",
            "underground_safety"
          ],
          "hours_needed": 16.0,
          "deadline": "2026-03-10",
          "priority": 2
        },
        {
          "id": "t3",
          "name": "Vent Fan #2 Bearing Swap (Surface-to-Underground Duct)",
          "task_type": "ventilation",
          "required_certs": [
            "ventilation",
            "underground_safety"
          ],
          "hours_needed": 14.0,
          "deadline": "2026-03-07",
          "priority": 1
        },
        {
          "id": "t4",
          "name": "Main Return Airway Regulator Rebuild (Confined Section)",
          "task_type": "ventilation",
          "required_certs": [
            "ventilation",
            "confined_space",
            "underground_safety"
          ],
          "hours_needed": 20.0,
          "deadline": "2026-03-09",
          "priority": 1
        },
        {
          "id": "t5",
          "name": "Methane Sensor Array Calibration (Level 760)",
          "task_type": "instrumentation",
          "required_certs": [
            "instrumentation",
            "gas_monitoring",
            "underground_safety"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-03-08",
          "priority": 1
        },
        {
          "id": "t6",
          "name": "Fixed Gas System Bump-Test + Logger Verification",
          "task_type": "instrumentation",
          "required_certs": [
            "instrumentation",
            "gas_monitoring",
            "underground_safety"
          ],
          "hours_needed": 15.0,
          "deadline": "2026-03-12",
          "priority": 2
        },
        {
          "id": "t7",
          "name": "Ground Control: Spot-Bolt Pattern Audit (Panel 5)",
          "task_type": "ground_control",
          "required_certs": [
            "ground_control",
            "underground_safety"
          ],
          "hours_needed": 10.0,
          "deadline": "2026-03-11",
          "priority": 2
        },
        {
          "id": "t8",
          "name": "LHD 902 Hydraulic Pump Rebuild",
          "task_type": "hydraulics",
          "required_certs": [
            "hydraulics",
            "mechanical",
            "underground_safety"
          ],
          "hours_needed": 22.0,
          "deadline": "2026-03-13",
          "priority": 1
        },
        {
          "id": "t9",
          "name": "Hoist Brake Mechanism Inspection + Adjustment",
          "task_type": "mechanical",
          "required_certs": [
            "mechanical",
            "underground_safety"
          ],
          "hours_needed": 19.0,
          "deadline": "2026-03-14",
          "priority": 1
        },
        {
          "id": "t10",
          "name": "Conveyor Transfer Chute Liner Weld Repair",
          "task_type": "welding",
          "required_certs": [
            "welding",
            "underground_safety"
          ],
          "hours_needed": 13.0,
          "deadline": "2026-03-15",
          "priority": 3
        },
        {
          "id": "t11",
          "name": "Refuge Chamber Quarterly Safety & Comms Check",
          "task_type": "safety",
          "required_certs": [
            "safety",
            "underground_safety"
          ],
          "hours_needed": 19.0,
          "deadline": "2026-03-09",
          "priority": 1
        },
        {
          "id": "t12",
          "name": "Emergency Egress Drill Facilitation (Night Crew Briefing)",
          "task_type": "safety",
          "required_certs": [
            "safety",
            "emergency_response",
            "underground_safety"
          ],
          "hours_needed": 11.0,
          "deadline": "2026-03-10",
          "priority": 2
        },
        {
          "id": "t13",
          "name": "Water Ingress Pump Station PM (Seals + Coupling)",
          "task_type": "mechanical",
          "required_certs": [
            "mechanical",
            "underground_safety"
          ],
          "hours_needed": 16.0,
          "deadline": "2026-03-16",
          "priority": 2
        },
        {
          "id": "t14",
          "name": "Communications Leaky-Feeder Repeater Swap (Level 820)",
          "task_type": "instrumentation",
          "required_certs": [
            "instrumentation",
            "underground_safety"
          ],
          "hours_needed": 14.0,
          "deadline": "2026-03-17",
          "priority": 2
        }
      ],
      "max_hours_per_worker": 40
    },
    "constraints": [
      {
        "description": "Workload should be balanced - no more than 10 hour difference between any two workers",
        "_spec": {
          "fn": "workload_balance",
          "args": [
            10
          ]
        }
      },
      {
        "description": "Each worker can handle at most 4 tasks concurrently",
        "_spec": {
          "fn": "max_concurrent",
          "args": [
            4
          ]
        }
      },
      {
        "description": "Each worker must not exceed 40 total assigned hours",
        "_spec": {
          "fn": "max_hours",
          "args": [
            40
          ]
        }
      },
      {
        "description": "Task t1 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t1"
          ]
        }
      },
      {
        "description": "Task t4 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t4"
          ]
        }
      },
      {
        "description": "Task t8 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t8"
          ]
        }
      },
      {
        "description": "Task t11 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t11"
          ]
        }
      }
    ],
    "instruction": "Assign exactly one worker to each task to minimize total effective labor cost while completing all tasks by their deadlines. A worker can only be assigned to a task if they hold all required certifications. Account for worker efficiency by task_type: effective_hours = hours_needed / efficiency[task_type] (use 1.0 if the worker has no stated efficiency for that task_type). Respect max_hours, max_concurrent, and workload_balance constraints.",
    "feasible": true,
    "solution": {
      "domain": "crew_assignment",
      "assignments": [
        {
          "worker_id": "w1",
          "task_id": "t1",
          "hours": 18.0
        },
        {
          "worker_id": "w1",
          "task_id": "t2",
          "hours": 7.0
        },
        {
          "worker_id": "w2",
          "task_id": "t9",
          "hours": 19.0
        },
        {
          "worker_id": "w2",
          "task_id": "t13",
          "hours": 9.0
        },
        {
          "worker_id": "w3",
          "task_id": "t4",
          "hours": 20.0
        },
        {
          "worker_id": "w4",
          "task_id": "t5",
          "hours": 12.0
        },
        {
          "worker_id": "w4",
          "task_id": "t6",
          "hours": 15.0
        },
        {
          "worker_id": "w4",
          "task_id": "t14",
          "hours": 3.0
        },
        {
          "worker_id": "w5",
          "task_id": "t10",
          "hours": 13.0
        },
        {
          "worker_id": "w5",
          "task_id": "t13",
          "hours": 7.0
        },
        {
          "worker_id": "w6",
          "task_id": "t7",
          "hours": 20.0
        },
        {
          "worker_id": "w7",
          "task_id": "t11",
          "hours": 19.0
        },
        {
          "worker_id": "w7",
          "task_id": "t12",
          "hours": 11.0
        },
        {
          "worker_id": "w8",
          "task_id": "t2",
          "hours": 9.0
        },
        {
          "worker_id": "w8",
          "task_id": "t14",
          "hours": 11.0
        },
        {
          "worker_id": "w9",
          "task_id": "t8",
          "hours": 22.0
        },
        {
          "worker_id": "w10",
          "task_id": "t3",
          "hours": 20.0
        }
      ],
      "total_cost": 12964.0,
      "total_hours": 235.0
    }
  },
  {
    "id": "crew_assignment_62dd9ed7",
    "difficulty": "expert",
    "scenario": {
      "domain": "crew_assignment",
      "description": "AeroMast Wind Services is mobilizing a 10-person installation & maintenance crew to complete a tightly sequenced punch-list at Skerry Point Wind Farm (turbines T01\u2013T07 plus substation and met mast). The project manager must assign certified technicians to high-risk tasks (HV, rope access/blade work, confined space, SCADA) under deadlines while balancing workload and minimizing labor cost. Efficiency multipliers differ by task type, creating counterintuitive cases where higher hourly-rate specialists can be cheaper overall.",
      "start_date": "2026-03-02",
      "workers": [
        {
          "id": "w1",
          "name": "Eira Holm (HV/SCADA Lead)",
          "certifications": [
            "electrical",
            "high_voltage",
            "scada",
            "safety",
            "first_aid"
          ],
          "hourly_cost": 62.0,
          "max_tasks": 3,
          "efficiency": {
            "electrical": 1.25,
            "high_voltage": 1.15,
            "scada": 1.1,
            "inspection": 0.9
          }
        },
        {
          "id": "w2",
          "name": "Tom\u00e1s Reed (Mechanical/Hydraulics Tech)",
          "certifications": [
            "mechanical",
            "hydraulics",
            "confined_space",
            "welding",
            "safety"
          ],
          "hourly_cost": 44.0,
          "max_tasks": 3,
          "efficiency": {
            "mechanical": 1.2,
            "hydraulics": 1.1,
            "welding": 1.0,
            "inspection": 0.9
          }
        },
        {
          "id": "w3",
          "name": "Aisha Khan (Blade/Rope Specialist)",
          "certifications": [
            "blade_repair",
            "rope_access",
            "rescue",
            "electrical",
            "first_aid",
            "safety"
          ],
          "hourly_cost": 58.0,
          "max_tasks": 3,
          "efficiency": {
            "blade_repair": 1.3,
            "rope_access": 1.2,
            "inspection": 1.1,
            "electrical": 0.9
          }
        },
        {
          "id": "w4",
          "name": "Lars Nystr\u00f6m (Rope Access Inspector)",
          "certifications": [
            "rope_access",
            "rescue",
            "inspection",
            "electrical",
            "safety"
          ],
          "hourly_cost": 40.0,
          "max_tasks": 3,
          "efficiency": {
            "inspection": 1.3,
            "rope_access": 1.0,
            "electrical": 0.8,
            "blade_repair": 0.8
          }
        },
        {
          "id": "w5",
          "name": "Megan O\u2019Connell (LV/SCADA Tech)",
          "certifications": [
            "electrical",
            "scada",
            "inspection",
            "welding",
            "first_aid",
            "safety"
          ],
          "hourly_cost": 38.0,
          "max_tasks": 3,
          "efficiency": {
            "electrical": 0.95,
            "scada": 0.85,
            "inspection": 1.15,
            "welding": 1.1
          }
        },
        {
          "id": "w6",
          "name": "Pavel Dimitrov (HV Authorized Tech)",
          "certifications": [
            "high_voltage",
            "electrical",
            "confined_space",
            "safety"
          ],
          "hourly_cost": 49.0,
          "max_tasks": 3,
          "efficiency": {
            "high_voltage": 0.9,
            "electrical": 1.05,
            "inspection": 0.8
          }
        },
        {
          "id": "w7",
          "name": "Jun Park (SCADA Commissioning Engineer)",
          "certifications": [
            "scada",
            "electrical",
            "confined_space",
            "inspection",
            "safety"
          ],
          "hourly_cost": 55.0,
          "max_tasks": 3,
          "efficiency": {
            "scada": 1.35,
            "electrical": 1.0,
            "inspection": 1.0
          }
        },
        {
          "id": "w8",
          "name": "Sofia Marin (Multi-skill Mech/Rope Tech)",
          "certifications": [
            "mechanical",
            "hydraulics",
            "rope_access",
            "inspection",
            "safety"
          ],
          "hourly_cost": 42.0,
          "max_tasks": 3,
          "efficiency": {
            "mechanical": 0.9,
            "hydraulics": 0.85,
            "rope_access": 1.05,
            "inspection": 1.2
          }
        },
        {
          "id": "w9",
          "name": "Ben Carter (Blade Tech / Fabrication)",
          "certifications": [
            "blade_repair",
            "rope_access",
            "rescue",
            "welding",
            "electrical",
            "safety"
          ],
          "hourly_cost": 46.0,
          "max_tasks": 3,
          "efficiency": {
            "blade_repair": 1.1,
            "rope_access": 1.1,
            "welding": 1.2,
            "electrical": 0.8
          }
        },
        {
          "id": "w10",
          "name": "Ingrid Valdez (Senior Mech/HV Engineer)",
          "certifications": [
            "mechanical",
            "hydraulics",
            "high_voltage",
            "electrical",
            "inspection",
            "safety"
          ],
          "hourly_cost": 60.0,
          "max_tasks": 3,
          "efficiency": {
            "mechanical": 1.3,
            "hydraulics": 1.25,
            "high_voltage": 1.05,
            "electrical": 1.0,
            "inspection": 1.05
          }
        }
      ],
      "tasks": [
        {
          "id": "t1",
          "name": "T07 HV cable termination & primary injection test",
          "task_type": "high_voltage",
          "required_certs": [
            "high_voltage",
            "electrical",
            "safety"
          ],
          "hours_needed": 14.0,
          "deadline": "2026-03-06",
          "priority": 1
        },
        {
          "id": "t2",
          "name": "T03 SCADA cabinet commissioning (network + signal validation)",
          "task_type": "scada",
          "required_certs": [
            "scada",
            "electrical",
            "safety"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-03-07",
          "priority": 1
        },
        {
          "id": "t3",
          "name": "T03 nacelle yaw drive inspection & backlash report-out",
          "task_type": "mechanical",
          "required_certs": [
            "mechanical",
            "inspection",
            "safety"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-03-10",
          "priority": 2
        },
        {
          "id": "t4",
          "name": "T05 hydraulic pitch system bleed + accumulator recharge",
          "task_type": "hydraulics",
          "required_certs": [
            "hydraulics",
            "mechanical",
            "safety"
          ],
          "hours_needed": 16.0,
          "deadline": "2026-03-09",
          "priority": 1
        },
        {
          "id": "t5",
          "name": "T02 blade leading-edge tape repair (rope access)",
          "task_type": "blade_repair",
          "required_certs": [
            "blade_repair",
            "rope_access",
            "rescue",
            "safety"
          ],
          "hours_needed": 22.0,
          "deadline": "2026-03-11",
          "priority": 2
        },
        {
          "id": "t6",
          "name": "Tower base confined-space ventilation fan replacement (T04)",
          "task_type": "mechanical",
          "required_certs": [
            "mechanical",
            "confined_space",
            "safety"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-03-08",
          "priority": 1
        },
        {
          "id": "t7",
          "name": "Substation LV auxiliary panel re-termination + IR scan follow-up",
          "task_type": "electrical",
          "required_certs": [
            "electrical",
            "safety"
          ],
          "hours_needed": 10.0,
          "deadline": "2026-03-12",
          "priority": 2
        },
        {
          "id": "t8",
          "name": "T06 condition monitoring sensor retrofit (nacelle route + validation)",
          "task_type": "electrical",
          "required_certs": [
            "electrical",
            "inspection",
            "safety"
          ],
          "hours_needed": 14.0,
          "deadline": "2026-03-15",
          "priority": 3
        },
        {
          "id": "t9",
          "name": "T01 hub bolt torque audit (rope access) + photographic evidence",
          "task_type": "inspection",
          "required_certs": [
            "inspection",
            "rope_access",
            "safety"
          ],
          "hours_needed": 10.0,
          "deadline": "2026-03-13",
          "priority": 3
        },
        {
          "id": "t10",
          "name": "T06 gearbox oil cooler hose swap + leak test",
          "task_type": "hydraulics",
          "required_certs": [
            "hydraulics",
            "mechanical",
            "safety"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-03-14",
          "priority": 2
        },
        {
          "id": "t11",
          "name": "Met mast anemometer & wind vane calibration + data sanity check",
          "task_type": "inspection",
          "required_certs": [
            "inspection",
            "safety"
          ],
          "hours_needed": 8.0,
          "deadline": "2026-03-16",
          "priority": 4
        },
        {
          "id": "t12",
          "name": "T05 nacelle fire suppression panel functional test (with first-aid coverage)",
          "task_type": "electrical",
          "required_certs": [
            "electrical",
            "first_aid",
            "safety"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-03-09",
          "priority": 1
        },
        {
          "id": "t13",
          "name": "T04 lightning receptor continuity test (blade access, rope rescue ready)",
          "task_type": "electrical",
          "required_certs": [
            "electrical",
            "rope_access",
            "rescue",
            "safety"
          ],
          "hours_needed": 11.0,
          "deadline": "2026-03-12",
          "priority": 2
        },
        {
          "id": "t14",
          "name": "Service shop fabrication: weld sensor-mount brackets for nacelle retrofits",
          "task_type": "welding",
          "required_certs": [
            "welding",
            "safety"
          ],
          "hours_needed": 6.0,
          "deadline": "2026-03-18",
          "priority": 4
        }
      ],
      "max_hours_per_worker": 40
    },
    "constraints": [
      {
        "description": "Workload should be balanced - no more than 9 hour difference between any two workers (forces using more of the team, not just the cheapest few).",
        "_spec": {
          "fn": "workload_balance",
          "args": [
            9
          ]
        }
      },
      {
        "description": "Each worker can handle at most 3 tasks (prevents dumping many small tasks onto the apparent best generalist).",
        "_spec": {
          "fn": "max_concurrent",
          "args": [
            3
          ]
        }
      },
      {
        "description": "Cap assigned hours at 34 per worker to preserve 15%+ slack against the scenario max of 40 (fatigue/safety buffer).",
        "_spec": {
          "fn": "max_hours",
          "args": [
            34
          ]
        }
      },
      {
        "description": "Task t1 must be assigned to a single worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t1"
          ]
        }
      },
      {
        "description": "Task t2 must be assigned to a single worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t2"
          ]
        }
      },
      {
        "description": "Task t3 must be assigned to a single worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t3"
          ]
        }
      },
      {
        "description": "Task t4 must be assigned to a single worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t4"
          ]
        }
      },
      {
        "description": "Task t5 must be assigned to a single worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t5"
          ]
        }
      },
      {
        "description": "Task t6 must be assigned to a single worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t6"
          ]
        }
      },
      {
        "description": "Task t7 must be assigned to a single worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t7"
          ]
        }
      },
      {
        "description": "Task t8 must be assigned to a single worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t8"
          ]
        }
      },
      {
        "description": "Task t9 must be assigned to a single worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t9"
          ]
        }
      },
      {
        "description": "Task t10 must be assigned to a single worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t10"
          ]
        }
      },
      {
        "description": "Task t11 must be assigned to a single worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t11"
          ]
        }
      },
      {
        "description": "Task t12 must be assigned to a single worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t12"
          ]
        }
      },
      {
        "description": "Task t13 must be assigned to a single worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t13"
          ]
        }
      },
      {
        "description": "Task t14 must be assigned to a single worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t14"
          ]
        }
      }
    ],
    "instruction": "Assign exactly one worker to each task to complete all work by the stated deadlines while respecting required certifications. Minimize total labor cost while accounting for worker efficiency by task_type (higher efficiency implies faster completion for that type), and satisfy workload balance, max tasks per worker, and max hours per worker constraints.",
    "feasible": true,
    "solution": {
      "domain": "crew_assignment",
      "assignments": [
        {
          "worker_id": "w1",
          "task_id": "t7",
          "hours": 10.0
        },
        {
          "worker_id": "w1",
          "task_id": "t12",
          "hours": 12.0
        },
        {
          "worker_id": "w2",
          "task_id": "t4",
          "hours": 16.0
        },
        {
          "worker_id": "w2",
          "task_id": "t6",
          "hours": 12.0
        },
        {
          "worker_id": "w3",
          "task_id": "t5",
          "hours": 22.0
        },
        {
          "worker_id": "w4",
          "task_id": "t9",
          "hours": 19.0
        },
        {
          "worker_id": "w5",
          "task_id": "t8",
          "hours": 19.0
        },
        {
          "worker_id": "w6",
          "task_id": "t1",
          "hours": 19.0
        },
        {
          "worker_id": "w7",
          "task_id": "t2",
          "hours": 19.0
        },
        {
          "worker_id": "w8",
          "task_id": "t3",
          "hours": 12.0
        },
        {
          "worker_id": "w8",
          "task_id": "t11",
          "hours": 8.0
        },
        {
          "worker_id": "w9",
          "task_id": "t13",
          "hours": 11.0
        },
        {
          "worker_id": "w9",
          "task_id": "t14",
          "hours": 8.0
        },
        {
          "worker_id": "w10",
          "task_id": "t10",
          "hours": 19.0
        }
      ],
      "total_cost": 10184.0,
      "total_hours": 206.0
    }
  },
  {
    "id": "crew_assignment_4cc19954",
    "difficulty": "expert",
    "scenario": {
      "domain": "crew_assignment",
      "description": "At Helios Ridge Nuclear Generating Station (HRNGS), a specialized maintenance crew must complete a bundle of radiologically-controlled and safety-critical work orders during an outage preparation window. The project manager must assign nuclear facility maintenance specialists to tasks while respecting certification requirements (e.g., Rad Worker, LOTO, confined space, NDT), leveraging task-type efficiency multipliers, balancing workload, and minimizing total labor cost without slipping task deadlines.",
      "start_date": "2026-01-06",
      "workers": [
        {
          "id": "w1",
          "name": "Ava Kwon (I&C Lead)",
          "certifications": [
            "instrumentation",
            "rad_protection",
            "lockout_tagout",
            "safety",
            "calibration"
          ],
          "hourly_cost": 68.0,
          "max_tasks": 3,
          "efficiency": {
            "instrumentation": 1.45,
            "electrical": 1.05,
            "mechanical": 0.85,
            "ndt": 0.75,
            "welding": 0.6,
            "valve": 0.8
          }
        },
        {
          "id": "w2",
          "name": "Miguel Santos (Senior Electrician)",
          "certifications": [
            "electrical",
            "rad_protection",
            "lockout_tagout",
            "safety",
            "arc_flash"
          ],
          "hourly_cost": 62.0,
          "max_tasks": 3,
          "efficiency": {
            "electrical": 1.35,
            "instrumentation": 0.95,
            "mechanical": 0.85,
            "ndt": 0.7,
            "welding": 0.6,
            "valve": 0.8
          }
        },
        {
          "id": "w3",
          "name": "Riley Chen (Mechanical Specialist)",
          "certifications": [
            "mechanical",
            "rad_protection",
            "confined_space",
            "safety",
            "rigging"
          ],
          "hourly_cost": 54.0,
          "max_tasks": 3,
          "efficiency": {
            "mechanical": 1.3,
            "valve": 1.05,
            "electrical": 0.7,
            "instrumentation": 0.75,
            "ndt": 0.85,
            "welding": 0.65
          }
        },
        {
          "id": "w4",
          "name": "Nina Patel (Valve Overhaul Tech)",
          "certifications": [
            "valve_maintenance",
            "mechanical",
            "rad_protection",
            "lockout_tagout",
            "safety"
          ],
          "hourly_cost": 60.0,
          "max_tasks": 3,
          "efficiency": {
            "valve": 1.4,
            "mechanical": 1.1,
            "electrical": 0.65,
            "instrumentation": 0.7,
            "ndt": 0.8,
            "welding": 0.6
          }
        },
        {
          "id": "w5",
          "name": "Omar Haddad (NDT Examiner)",
          "certifications": [
            "ndt",
            "rad_protection",
            "safety",
            "visual_testing",
            "ultrasonic_testing"
          ],
          "hourly_cost": 66.0,
          "max_tasks": 3,
          "efficiency": {
            "ndt": 1.5,
            "mechanical": 0.85,
            "electrical": 0.75,
            "instrumentation": 0.75,
            "welding": 0.65,
            "valve": 0.85
          }
        },
        {
          "id": "w6",
          "name": "Tasha Brooks (Weld / Hot-Work Specialist)",
          "certifications": [
            "welding",
            "hot_work",
            "rad_protection",
            "safety",
            "fire_watch_lead"
          ],
          "hourly_cost": 72.0,
          "max_tasks": 3,
          "efficiency": {
            "welding": 1.35,
            "mechanical": 0.95,
            "ndt": 0.8,
            "electrical": 0.6,
            "instrumentation": 0.6,
            "valve": 0.75
          }
        },
        {
          "id": "w7",
          "name": "Jordan Lee (Junior Electrician)",
          "certifications": [
            "electrical",
            "safety",
            "arc_flash"
          ],
          "hourly_cost": 38.0,
          "max_tasks": 3,
          "efficiency": {
            "electrical": 0.95,
            "instrumentation": 0.75,
            "mechanical": 0.8,
            "ndt": 0.6,
            "welding": 0.55,
            "valve": 0.7
          }
        },
        {
          "id": "w8",
          "name": "Priya Nair (Outage Generalist)",
          "certifications": [
            "mechanical",
            "electrical",
            "rad_protection",
            "lockout_tagout",
            "safety"
          ],
          "hourly_cost": 57.0,
          "max_tasks": 3,
          "efficiency": {
            "mechanical": 1.05,
            "electrical": 1.05,
            "instrumentation": 0.9,
            "ndt": 0.8,
            "welding": 0.7,
            "valve": 0.9
          }
        },
        {
          "id": "w9",
          "name": "Caleb Fischer (Seismic / Supports Inspector)",
          "certifications": [
            "mechanical",
            "seismic_restraint",
            "rad_protection",
            "confined_space",
            "safety"
          ],
          "hourly_cost": 52.0,
          "max_tasks": 3,
          "efficiency": {
            "mechanical": 1.15,
            "ndt": 0.9,
            "valve": 0.85,
            "electrical": 0.65,
            "instrumentation": 0.7,
            "welding": 0.6
          }
        },
        {
          "id": "w10",
          "name": "Harper Nguyen (I&C Technician)",
          "certifications": [
            "instrumentation",
            "electrical",
            "rad_protection",
            "safety",
            "calibration"
          ],
          "hourly_cost": 56.0,
          "max_tasks": 3,
          "efficiency": {
            "instrumentation": 1.2,
            "electrical": 1.1,
            "mechanical": 0.8,
            "ndt": 0.7,
            "welding": 0.6,
            "valve": 0.8
          }
        }
      ],
      "tasks": [
        {
          "id": "t1",
          "name": "RCP Vibration Transmitter Calibration (Train A)",
          "task_type": "instrumentation",
          "required_certs": [
            "instrumentation",
            "rad_protection",
            "calibration",
            "safety"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-01-24",
          "priority": 1
        },
        {
          "id": "t2",
          "name": "480V Safety Bus Breaker IR Scan & Torque Check",
          "task_type": "electrical",
          "required_certs": [
            "electrical",
            "arc_flash",
            "safety"
          ],
          "hours_needed": 16.0,
          "deadline": "2026-01-28",
          "priority": 2
        },
        {
          "id": "t3",
          "name": "Containment Penetration Seal Visual Inspection (RCA Entry)",
          "task_type": "mechanical",
          "required_certs": [
            "mechanical",
            "rad_protection",
            "confined_space",
            "safety"
          ],
          "hours_needed": 14.0,
          "deadline": "2026-02-04",
          "priority": 2
        },
        {
          "id": "t4",
          "name": "Emergency Diesel Generator Lube Oil System PM",
          "task_type": "mechanical",
          "required_certs": [
            "mechanical",
            "safety"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-02-10",
          "priority": 3
        },
        {
          "id": "t5",
          "name": "Safety Injection MOV Functional Check & Limit Switch Set",
          "task_type": "valve",
          "required_certs": [
            "valve_maintenance",
            "rad_protection",
            "lockout_tagout",
            "safety"
          ],
          "hours_needed": 20.0,
          "deadline": "2026-02-06",
          "priority": 1
        },
        {
          "id": "t6",
          "name": "Boric Acid Corrosion Walkdown (RCA) & Documentation",
          "task_type": "mechanical",
          "required_certs": [
            "mechanical",
            "rad_protection",
            "safety"
          ],
          "hours_needed": 10.0,
          "deadline": "2026-02-14",
          "priority": 2
        },
        {
          "id": "t7",
          "name": "Steam Generator Channel Head Pre-Inspection (VT Support)",
          "task_type": "ndt",
          "required_certs": [
            "ndt",
            "rad_protection",
            "visual_testing",
            "safety"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-02-03",
          "priority": 1
        },
        {
          "id": "t8",
          "name": "UT Spot Checks on Feedwater Elbow Indications (RCA)",
          "task_type": "ndt",
          "required_certs": [
            "ndt",
            "rad_protection",
            "ultrasonic_testing",
            "safety"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-02-08",
          "priority": 1
        },
        {
          "id": "t9",
          "name": "Spent Fuel Pool Gate Actuator Service (Confined Access)",
          "task_type": "mechanical",
          "required_certs": [
            "mechanical",
            "rad_protection",
            "confined_space",
            "safety"
          ],
          "hours_needed": 22.0,
          "deadline": "2026-02-18",
          "priority": 2
        },
        {
          "id": "t10",
          "name": "Seismic Restraint Walkdown (Cable Trays & Pipe Supports)",
          "task_type": "mechanical",
          "required_certs": [
            "mechanical",
            "seismic_restraint",
            "rad_protection",
            "safety"
          ],
          "hours_needed": 14.0,
          "deadline": "2026-02-20",
          "priority": 2
        },
        {
          "id": "t11",
          "name": "Condensate Line Hot-Work Weld Repair (WO 24-CCW-117)",
          "task_type": "welding",
          "required_certs": [
            "welding",
            "hot_work",
            "rad_protection",
            "safety"
          ],
          "hours_needed": 16.0,
          "deadline": "2026-02-05",
          "priority": 1
        },
        {
          "id": "t12",
          "name": "Control Rod Drive Power Cabinet Re-termination (LOTO)",
          "task_type": "electrical",
          "required_certs": [
            "electrical",
            "rad_protection",
            "lockout_tagout",
            "safety"
          ],
          "hours_needed": 20.0,
          "deadline": "2026-02-09",
          "priority": 1
        },
        {
          "id": "t13",
          "name": "Nuclear Instrumentation Channel Check (Post-Maintenance Verification)",
          "task_type": "instrumentation",
          "required_certs": [
            "instrumentation",
            "rad_protection",
            "lockout_tagout",
            "safety",
            "calibration"
          ],
          "hours_needed": 9.0,
          "deadline": "2026-03-10",
          "priority": 3
        }
      ],
      "max_hours_per_worker": 40
    },
    "constraints": [
      {
        "description": "Workload should be balanced - no more than 12 hour difference between any two workers (using effective hours after efficiency).",
        "_spec": {
          "fn": "workload_balance",
          "args": [
            12
          ]
        }
      },
      {
        "description": "Each worker can handle at most 3 tasks (prevents overloading scarce certified specialists).",
        "_spec": {
          "fn": "max_concurrent",
          "args": [
            3
          ]
        }
      },
      {
        "description": "No worker may be assigned more than 40 effective hours total across tasks.",
        "_spec": {
          "fn": "max_hours",
          "args": [
            40
          ]
        }
      },
      {
        "description": "Task t1 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t1"
          ]
        }
      },
      {
        "description": "Task t2 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t2"
          ]
        }
      },
      {
        "description": "Task t3 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t3"
          ]
        }
      },
      {
        "description": "Task t4 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t4"
          ]
        }
      },
      {
        "description": "Task t5 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t5"
          ]
        }
      },
      {
        "description": "Task t6 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t6"
          ]
        }
      },
      {
        "description": "Task t7 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t7"
          ]
        }
      },
      {
        "description": "Task t8 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t8"
          ]
        }
      },
      {
        "description": "Task t9 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t9"
          ]
        }
      },
      {
        "description": "Task t10 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t10"
          ]
        }
      },
      {
        "description": "Task t11 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t11"
          ]
        }
      },
      {
        "description": "Task t12 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t12"
          ]
        }
      },
      {
        "description": "Task t13 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t13"
          ]
        }
      }
    ],
    "instruction": "Assign exactly one qualified worker to each task. A worker is qualified only if they hold all required_certs for the task. Account for worker efficiency by treating effective_hours(task, worker) = hours_needed / efficiency[task_type] (if a task_type key is missing for a worker, treat them as ineligible). Minimize total labor cost (sum over tasks of effective_hours * worker hourly_cost) while ensuring all tasks meet their deadlines, no worker exceeds 40 effective hours total, no worker exceeds 3 assigned tasks, and workload balance keeps the max effective-hours difference between any two workers within 12 hours.",
    "feasible": true,
    "solution": {
      "domain": "crew_assignment",
      "assignments": [
        {
          "worker_id": "w1",
          "task_id": "t13",
          "hours": 18.0
        },
        {
          "worker_id": "w2",
          "task_id": "t12",
          "hours": 20.0
        },
        {
          "worker_id": "w3",
          "task_id": "t9",
          "hours": 22.0
        },
        {
          "worker_id": "w4",
          "task_id": "t5",
          "hours": 20.0
        },
        {
          "worker_id": "w5",
          "task_id": "t7",
          "hours": 12.0
        },
        {
          "worker_id": "w5",
          "task_id": "t8",
          "hours": 18.0
        },
        {
          "worker_id": "w6",
          "task_id": "t11",
          "hours": 18.0
        },
        {
          "worker_id": "w7",
          "task_id": "t2",
          "hours": 18.0
        },
        {
          "worker_id": "w8",
          "task_id": "t4",
          "hours": 12.0
        },
        {
          "worker_id": "w8",
          "task_id": "t6",
          "hours": 10.0
        },
        {
          "worker_id": "w9",
          "task_id": "t3",
          "hours": 14.0
        },
        {
          "worker_id": "w9",
          "task_id": "t10",
          "hours": 14.0
        },
        {
          "worker_id": "w10",
          "task_id": "t1",
          "hours": 18.0
        }
      ],
      "total_cost": 12530.0,
      "total_hours": 214.0
    }
  },
  {
    "id": "crew_assignment_9d1e79ba",
    "difficulty": "expert",
    "scenario": {
      "domain": "crew_assignment",
      "description": "SkyDock MRO Hangar is performing a compressed C-check on an Airbus A320-family aircraft. The project manager must assign certified hangar staff to inspections, avionics troubleshooting, powerplant work, structures repairs, and required IA sign-offs while balancing workload and minimizing total labor cost. Several tasks have tight due-dates and overlapping certification needs that create greedy traps (e.g., using the cheapest multi-skill tech early blocks critical sign-offs later).",
      "start_date": "2026-01-06",
      "workers": [
        {
          "id": "w1",
          "name": "Marta Quinlan",
          "certifications": [
            "A&P",
            "IA",
            "Powerplant",
            "Borescope",
            "Run-up",
            "NDT Level II",
            "Electrical Safety",
            "Fuel Systems",
            "Confined Space",
            "Oxygen"
          ],
          "hourly_cost": 52.0,
          "max_tasks": 3,
          "efficiency": {
            "powerplant": 1.25,
            "inspection": 1.15,
            "runup": 1.1,
            "hydraulics": 1.0,
            "fuel": 1.0,
            "electrical": 1.0,
            "ndt": 1.05
          }
        },
        {
          "id": "w2",
          "name": "Leo Park",
          "certifications": [
            "A&P",
            "Avionics",
            "Electrical Safety"
          ],
          "hourly_cost": 46.0,
          "max_tasks": 4,
          "efficiency": {
            "avionics": 1.35,
            "electrical": 1.2,
            "inspection": 0.75
          }
        },
        {
          "id": "w3",
          "name": "Priya Nair",
          "certifications": [
            "A&P",
            "NDT Level II",
            "Electrical Safety"
          ],
          "hourly_cost": 49.0,
          "max_tasks": 3,
          "efficiency": {
            "ndt": 1.4,
            "structures": 1.1,
            "inspection": 0.85
          }
        },
        {
          "id": "w4",
          "name": "Ben Alvarez",
          "certifications": [
            "A&P",
            "Structures",
            "Electrical Safety",
            "Composite Repair"
          ],
          "hourly_cost": 38.0,
          "max_tasks": 4,
          "efficiency": {
            "structures": 1.25,
            "composites": 0.95,
            "electrical": 0.95
          }
        },
        {
          "id": "w5",
          "name": "Hannah Cole",
          "certifications": [
            "A&P",
            "Hydraulics",
            "Fuel Systems",
            "Confined Space",
            "Electrical Safety"
          ],
          "hourly_cost": 41.0,
          "max_tasks": 4,
          "efficiency": {
            "hydraulics": 1.3,
            "fuel": 1.25,
            "electrical": 1.0
          }
        },
        {
          "id": "w6",
          "name": "Omar Haddad",
          "certifications": [
            "A&P",
            "Composite Repair",
            "Structures"
          ],
          "hourly_cost": 44.0,
          "max_tasks": 4,
          "efficiency": {
            "composites": 1.35,
            "structures": 1.05
          }
        },
        {
          "id": "w7",
          "name": "Sophie Lambert",
          "certifications": [
            "A&P",
            "Oxygen",
            "Confined Space",
            "Electrical Safety"
          ],
          "hourly_cost": 32.0,
          "max_tasks": 4,
          "efficiency": {
            "cabin": 1.3,
            "fuel": 0.9,
            "inspection": 0.8
          }
        },
        {
          "id": "w8",
          "name": "Derek Shaw",
          "certifications": [
            "A&P",
            "Powerplant",
            "Run-up",
            "Structures",
            "Electrical Safety",
            "Hydraulics"
          ],
          "hourly_cost": 29.0,
          "max_tasks": 3,
          "efficiency": {
            "powerplant": 0.95,
            "runup": 1.0,
            "structures": 0.9,
            "hydraulics": 0.95,
            "electrical": 0.95
          }
        },
        {
          "id": "w9",
          "name": "Mei Chen",
          "certifications": [
            "A&P",
            "IA",
            "Avionics",
            "NDT Level II",
            "Electrical Safety"
          ],
          "hourly_cost": 60.0,
          "max_tasks": 3,
          "efficiency": {
            "inspection": 1.3,
            "avionics": 1.05,
            "ndt": 1.05
          }
        }
      ],
      "tasks": [
        {
          "id": "t1",
          "name": "CFM56 Engine #2 Borescope & Trend Review",
          "task_type": "powerplant",
          "required_certs": [
            "A&P",
            "Powerplant",
            "Borescope"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-01-13",
          "priority": 1
        },
        {
          "id": "t2",
          "name": "Hydraulic Leak Isolation - Left MLG Actuator Circuit",
          "task_type": "hydraulics",
          "required_certs": [
            "A&P",
            "Hydraulics"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-01-11",
          "priority": 1
        },
        {
          "id": "t3",
          "name": "Avionics: ADS-B Out Fault Tracing (Transponder/WAAS Interface)",
          "task_type": "avionics",
          "required_certs": [
            "Avionics",
            "A&P",
            "Electrical Safety"
          ],
          "hours_needed": 16.0,
          "deadline": "2026-01-12",
          "priority": 1
        },
        {
          "id": "t4",
          "name": "NDT: Wing Lower Skin Eddy-Current Inspection (SB-EC-27)",
          "task_type": "ndt",
          "required_certs": [
            "NDT Level II",
            "A&P"
          ],
          "hours_needed": 20.0,
          "deadline": "2026-01-14",
          "priority": 1
        },
        {
          "id": "t5",
          "name": "Structures: Cargo Door Hinge Bracket Repair & Fit Check",
          "task_type": "structures",
          "required_certs": [
            "A&P",
            "Structures"
          ],
          "hours_needed": 14.0,
          "deadline": "2026-01-15",
          "priority": 2
        },
        {
          "id": "t6",
          "name": "Composite: Radome Erosion Patch, Cure, and Tap Test",
          "task_type": "composites",
          "required_certs": [
            "Composite Repair",
            "A&P"
          ],
          "hours_needed": 10.0,
          "deadline": "2026-01-16",
          "priority": 2
        },
        {
          "id": "t7",
          "name": "Fuel: Center Tank Boost Pump Replacement (Confined Entry Procedure)",
          "task_type": "fuel",
          "required_certs": [
            "A&P",
            "Fuel Systems",
            "Confined Space"
          ],
          "hours_needed": 22.0,
          "deadline": "2026-01-17",
          "priority": 1
        },
        {
          "id": "t8",
          "name": "Cabin/Oxygen: Crew Oxygen System Functional Check & Leak Test",
          "task_type": "cabin",
          "required_certs": [
            "A&P",
            "Oxygen"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-01-18",
          "priority": 2
        },
        {
          "id": "t9",
          "name": "Electrical: Battery Capacity Check and TRU Load Test",
          "task_type": "electrical",
          "required_certs": [
            "A&P",
            "Electrical Safety"
          ],
          "hours_needed": 8.0,
          "deadline": "2026-01-10",
          "priority": 1
        },
        {
          "id": "t10",
          "name": "IA: Return-to-Service Paperwork Package (C-Check Closeout)",
          "task_type": "inspection",
          "required_certs": [
            "IA"
          ],
          "hours_needed": 6.0,
          "deadline": "2026-01-19",
          "priority": 1
        },
        {
          "id": "t11",
          "name": "IA + NDT: NDT Report Review and Sign-Off for Wing EC Findings",
          "task_type": "inspection",
          "required_certs": [
            "IA",
            "NDT Level II"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-01-19",
          "priority": 1
        },
        {
          "id": "t12",
          "name": "Engine Ground Run: Post-Maintenance Run-up & Data Capture",
          "task_type": "runup",
          "required_certs": [
            "A&P",
            "Run-up"
          ],
          "hours_needed": 14.0,
          "deadline": "2026-01-20",
          "priority": 1
        },
        {
          "id": "t13",
          "name": "Structures/Electrical: Lightning Strike Bond Check and Repair (Zone 2A)",
          "task_type": "structures",
          "required_certs": [
            "A&P",
            "Structures",
            "Electrical Safety"
          ],
          "hours_needed": 24.0,
          "deadline": "2026-01-21",
          "priority": 1
        },
        {
          "id": "t14",
          "name": "Avionics: FDR/CVR Download, Health Check, and Archival Upload",
          "task_type": "avionics",
          "required_certs": [
            "Avionics"
          ],
          "hours_needed": 10.0,
          "deadline": "2026-01-22",
          "priority": 3
        }
      ],
      "max_hours_per_worker": 40
    },
    "constraints": [
      {
        "description": "Workload should be balanced - no more than 10 hour difference between any two workers",
        "_spec": {
          "fn": "workload_balance",
          "args": [
            10
          ]
        }
      },
      {
        "description": "Each worker can handle at most 3 tasks (limits task switching and tooling contention)",
        "_spec": {
          "fn": "max_concurrent",
          "args": [
            3
          ]
        }
      },
      {
        "description": "No worker may be assigned more than 40 hours in the planning window",
        "_spec": {
          "fn": "max_hours",
          "args": [
            40
          ]
        }
      },
      {
        "description": "Task t1 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t1"
          ]
        }
      },
      {
        "description": "Task t2 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t2"
          ]
        }
      },
      {
        "description": "Task t3 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t3"
          ]
        }
      },
      {
        "description": "Task t4 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t4"
          ]
        }
      },
      {
        "description": "Task t5 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t5"
          ]
        }
      },
      {
        "description": "Task t6 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t6"
          ]
        }
      },
      {
        "description": "Task t7 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t7"
          ]
        }
      },
      {
        "description": "Task t8 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t8"
          ]
        }
      },
      {
        "description": "Task t9 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t9"
          ]
        }
      },
      {
        "description": "Task t10 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t10"
          ]
        }
      },
      {
        "description": "Task t11 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t11"
          ]
        }
      },
      {
        "description": "Task t12 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t12"
          ]
        }
      },
      {
        "description": "Task t13 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t13"
          ]
        }
      },
      {
        "description": "Task t14 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t14"
          ]
        }
      }
    ],
    "instruction": "Minimize total labor cost while completing all aircraft maintenance tasks by their deadlines. Assign exactly one worker per task, ensuring each worker meets all required certifications for the task, respecting worker efficiency differentials by task_type (higher efficiency implies fewer effective hours), keeping each worker within the maximum hours limit, limiting task count per worker, and satisfying workload balance (max hours difference).",
    "feasible": true,
    "solution": {
      "domain": "crew_assignment",
      "assignments": [
        {
          "worker_id": "w1",
          "task_id": "t1",
          "hours": 18.0
        },
        {
          "worker_id": "w2",
          "task_id": "t3",
          "hours": 16.0
        },
        {
          "worker_id": "w2",
          "task_id": "t14",
          "hours": 10.0
        },
        {
          "worker_id": "w3",
          "task_id": "t4",
          "hours": 20.0
        },
        {
          "worker_id": "w4",
          "task_id": "t13",
          "hours": 24.0
        },
        {
          "worker_id": "w5",
          "task_id": "t7",
          "hours": 22.0
        },
        {
          "worker_id": "w6",
          "task_id": "t5",
          "hours": 14.0
        },
        {
          "worker_id": "w6",
          "task_id": "t6",
          "hours": 10.0
        },
        {
          "worker_id": "w7",
          "task_id": "t8",
          "hours": 18.0
        },
        {
          "worker_id": "w7",
          "task_id": "t9",
          "hours": 8.0
        },
        {
          "worker_id": "w8",
          "task_id": "t2",
          "hours": 12.0
        },
        {
          "worker_id": "w8",
          "task_id": "t12",
          "hours": 14.0
        },
        {
          "worker_id": "w9",
          "task_id": "t10",
          "hours": 6.0
        },
        {
          "worker_id": "w9",
          "task_id": "t11",
          "hours": 12.0
        }
      ],
      "total_cost": 8648.0,
      "total_hours": 204.0
    }
  },
  {
    "id": "crew_assignment_ca6da9be",
    "difficulty": "expert",
    "scenario": {
      "domain": "crew_assignment",
      "description": "Riverview Generating Station (650 MW combined-cycle) is entering a tightly scheduled spring reliability window. The project manager must assign the plant maintenance crew (electrical, mechanical, instrumentation, NDT, welding, HVAC) to corrective and preventive tasks while respecting certification requirements, varied worker efficiencies by task type, tight intermediate deadlines for compliance-critical work, workload balance rules (union fairness), and total labor cost minimization.",
      "start_date": "2026-03-02",
      "workers": [
        {
          "id": "w1",
          "name": "Maya Singh",
          "certifications": [
            "electrical_hv",
            "safety",
            "confined_space"
          ],
          "hourly_cost": 62.0,
          "max_tasks": 4,
          "efficiency": {
            "electrical_hv": 1.25,
            "electrical_lv": 1.05,
            "instrumentation": 0.75,
            "mechanical": 0.7,
            "welding": 0.6,
            "nondestructive_testing": 0.6,
            "hvac": 0.7
          }
        },
        {
          "id": "w2",
          "name": "Carlos Mendes",
          "certifications": [
            "electrical_lv",
            "instrumentation",
            "safety"
          ],
          "hourly_cost": 58.0,
          "max_tasks": 4,
          "efficiency": {
            "electrical_hv": 0.75,
            "electrical_lv": 1.1,
            "instrumentation": 1.2,
            "mechanical": 0.75,
            "welding": 0.6,
            "nondestructive_testing": 0.7,
            "hvac": 0.75
          }
        },
        {
          "id": "w3",
          "name": "Jenna Park",
          "certifications": [
            "mechanical",
            "rigging",
            "confined_space",
            "hvac",
            "safety"
          ],
          "hourly_cost": 52.0,
          "max_tasks": 4,
          "efficiency": {
            "electrical_hv": 0.65,
            "electrical_lv": 0.7,
            "instrumentation": 0.7,
            "mechanical": 1.15,
            "welding": 0.75,
            "nondestructive_testing": 0.75,
            "hvac": 0.9
          }
        },
        {
          "id": "w4",
          "name": "Owen Kline",
          "certifications": [
            "mechanical",
            "welding",
            "instrumentation",
            "safety"
          ],
          "hourly_cost": 49.0,
          "max_tasks": 4,
          "efficiency": {
            "electrical_hv": 0.7,
            "electrical_lv": 0.75,
            "instrumentation": 0.85,
            "mechanical": 0.95,
            "welding": 1.1,
            "nondestructive_testing": 0.8,
            "hvac": 0.75
          }
        },
        {
          "id": "w5",
          "name": "Fatima Al-Hassan",
          "certifications": [
            "instrumentation",
            "nondestructive_testing",
            "safety"
          ],
          "hourly_cost": 70.0,
          "max_tasks": 4,
          "efficiency": {
            "electrical_hv": 0.75,
            "electrical_lv": 0.8,
            "instrumentation": 1.35,
            "mechanical": 0.8,
            "welding": 0.65,
            "nondestructive_testing": 1.15,
            "hvac": 0.75
          }
        },
        {
          "id": "w6",
          "name": "Eli Rosen",
          "certifications": [
            "mechanical",
            "confined_space",
            "rigging",
            "safety"
          ],
          "hourly_cost": 45.0,
          "max_tasks": 4,
          "efficiency": {
            "electrical_hv": 0.6,
            "electrical_lv": 0.65,
            "instrumentation": 0.65,
            "mechanical": 0.95,
            "welding": 0.7,
            "nondestructive_testing": 0.7,
            "hvac": 0.65
          }
        },
        {
          "id": "w7",
          "name": "Priya Nair",
          "certifications": [
            "electrical_lv",
            "hvac",
            "safety"
          ],
          "hourly_cost": 44.0,
          "max_tasks": 4,
          "efficiency": {
            "electrical_hv": 0.65,
            "electrical_lv": 1.0,
            "instrumentation": 0.75,
            "mechanical": 0.7,
            "welding": 0.6,
            "nondestructive_testing": 0.65,
            "hvac": 1.2
          }
        },
        {
          "id": "w8",
          "name": "Grant Walker",
          "certifications": [
            "nondestructive_testing",
            "rigging",
            "safety"
          ],
          "hourly_cost": 60.0,
          "max_tasks": 4,
          "efficiency": {
            "electrical_hv": 0.65,
            "electrical_lv": 0.7,
            "instrumentation": 0.75,
            "mechanical": 0.8,
            "welding": 0.7,
            "nondestructive_testing": 1.25,
            "hvac": 0.7
          }
        },
        {
          "id": "w9",
          "name": "Hector Ruiz",
          "certifications": [
            "welding",
            "confined_space",
            "safety"
          ],
          "hourly_cost": 46.0,
          "max_tasks": 4,
          "efficiency": {
            "electrical_hv": 0.6,
            "electrical_lv": 0.65,
            "instrumentation": 0.65,
            "mechanical": 0.75,
            "welding": 0.9,
            "nondestructive_testing": 0.7,
            "hvac": 0.65
          }
        },
        {
          "id": "w10",
          "name": "Lena Volkov",
          "certifications": [
            "electrical_hv",
            "instrumentation",
            "safety",
            "confined_space"
          ],
          "hourly_cost": 78.0,
          "max_tasks": 4,
          "efficiency": {
            "electrical_hv": 1.4,
            "electrical_lv": 1.0,
            "instrumentation": 1.15,
            "mechanical": 0.75,
            "welding": 0.65,
            "nondestructive_testing": 0.7,
            "hvac": 0.75
          }
        }
      ],
      "tasks": [
        {
          "id": "t1",
          "name": "Main Switchgear IR Thermography (Unit Aux Bus)",
          "task_type": "electrical_hv",
          "required_certs": [
            "electrical_hv",
            "safety"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-03-09",
          "priority": 1
        },
        {
          "id": "t2",
          "name": "Turbine Lube Oil Pump Overhaul (A Train)",
          "task_type": "mechanical",
          "required_certs": [
            "mechanical",
            "safety"
          ],
          "hours_needed": 22.0,
          "deadline": "2026-03-23",
          "priority": 3
        },
        {
          "id": "t3",
          "name": "DCS Loop Calibration \u2013 Boiler Feedwater Control",
          "task_type": "instrumentation",
          "required_certs": [
            "instrumentation",
            "safety"
          ],
          "hours_needed": 16.0,
          "deadline": "2026-03-12",
          "priority": 1
        },
        {
          "id": "t4",
          "name": "Generator Exciter Brush Gear Inspection (Confined Access)",
          "task_type": "electrical_hv",
          "required_certs": [
            "electrical_hv",
            "confined_space",
            "safety"
          ],
          "hours_needed": 20.0,
          "deadline": "2026-03-16",
          "priority": 2
        },
        {
          "id": "t5",
          "name": "Condenser Waterbox Internal Inspection (Confined Space)",
          "task_type": "mechanical",
          "required_certs": [
            "mechanical",
            "confined_space",
            "safety"
          ],
          "hours_needed": 24.0,
          "deadline": "2026-03-14",
          "priority": 1
        },
        {
          "id": "t6",
          "name": "Boiler Feed Pump Laser Alignment (Rigging Support)",
          "task_type": "mechanical",
          "required_certs": [
            "mechanical",
            "rigging",
            "safety"
          ],
          "hours_needed": 14.0,
          "deadline": "2026-03-10",
          "priority": 1
        },
        {
          "id": "t7",
          "name": "MSR Casing Weld Crack Repair (Code Repair Prep)",
          "task_type": "welding",
          "required_certs": [
            "welding",
            "safety"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-03-20",
          "priority": 2
        },
        {
          "id": "t8",
          "name": "UT Thickness Survey \u2013 Economizer Tube Samples",
          "task_type": "nondestructive_testing",
          "required_certs": [
            "nondestructive_testing",
            "safety"
          ],
          "hours_needed": 15.0,
          "deadline": "2026-03-22",
          "priority": 2
        },
        {
          "id": "t9",
          "name": "CEMS Analyzer Calibration (Stack NOx/O2)",
          "task_type": "instrumentation",
          "required_certs": [
            "instrumentation",
            "safety"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-03-11",
          "priority": 1
        },
        {
          "id": "t10",
          "name": "Control Room HVAC Chiller Preventive Maintenance",
          "task_type": "hvac",
          "required_certs": [
            "hvac",
            "safety"
          ],
          "hours_needed": 16.0,
          "deadline": "2026-03-27",
          "priority": 3
        },
        {
          "id": "t11",
          "name": "Motor Control Center Breaker Racking & PM (MCC-2)",
          "task_type": "electrical_lv",
          "required_certs": [
            "electrical_lv",
            "safety"
          ],
          "hours_needed": 10.0,
          "deadline": "2026-03-08",
          "priority": 1
        },
        {
          "id": "t12",
          "name": "Instrument Air Compressor Coupling Replacement",
          "task_type": "mechanical",
          "required_certs": [
            "mechanical",
            "safety"
          ],
          "hours_needed": 20.0,
          "deadline": "2026-03-18",
          "priority": 2
        },
        {
          "id": "t13",
          "name": "Protection Relay Functional Test (GSU Differential + I/O Checks)",
          "task_type": "electrical_hv",
          "required_certs": [
            "electrical_hv",
            "instrumentation",
            "safety"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-03-13",
          "priority": 1
        },
        {
          "id": "t14",
          "name": "Safety Valve Set Pressure Verification (HRSG Drum PSV)",
          "task_type": "mechanical",
          "required_certs": [
            "mechanical",
            "instrumentation",
            "safety"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-03-24",
          "priority": 2
        }
      ],
      "max_hours_per_worker": 40
    },
    "constraints": [
      {
        "description": "Workload should be balanced - no more than 10 hour difference between any two workers (apply to effective hours after adjusting for efficiency by task_type).",
        "_spec": {
          "fn": "workload_balance",
          "args": [
            10
          ]
        }
      },
      {
        "description": "Each worker can handle at most 4 tasks (limits assignment fragmentation and creates tradeoffs for scarce multi-certified workers).",
        "_spec": {
          "fn": "max_concurrent",
          "args": [
            4
          ]
        }
      },
      {
        "description": "No worker may be assigned more than 40 effective hours across all tasks in the window.",
        "_spec": {
          "fn": "max_hours",
          "args": [
            40
          ]
        }
      },
      {
        "description": "Task t1 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t1"
          ]
        }
      },
      {
        "description": "Task t2 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t2"
          ]
        }
      },
      {
        "description": "Task t3 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t3"
          ]
        }
      },
      {
        "description": "Task t4 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t4"
          ]
        }
      },
      {
        "description": "Task t5 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t5"
          ]
        }
      },
      {
        "description": "Task t6 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t6"
          ]
        }
      },
      {
        "description": "Task t7 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t7"
          ]
        }
      },
      {
        "description": "Task t8 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t8"
          ]
        }
      },
      {
        "description": "Task t9 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t9"
          ]
        }
      },
      {
        "description": "Task t10 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t10"
          ]
        }
      },
      {
        "description": "Task t11 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t11"
          ]
        }
      },
      {
        "description": "Task t12 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t12"
          ]
        }
      },
      {
        "description": "Task t13 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t13"
          ]
        }
      },
      {
        "description": "Task t14 must be assigned to exactly one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t14"
          ]
        }
      }
    ],
    "instruction": "Assign exactly one qualified worker to each task. A worker is qualified only if they hold all required_certs for that task. Compute effective hours for an assignment as hours_needed / efficiency[task_type] (default 1.0 if not listed). All tasks must be completed by their deadlines. Minimize total labor cost (sum over tasks of effective_hours * worker_hourly_cost) while respecting max_hours, max_concurrent, and workload_balance constraints.",
    "feasible": true,
    "solution": {
      "domain": "crew_assignment",
      "assignments": [
        {
          "worker_id": "w1",
          "task_id": "t4",
          "hours": 28.0
        },
        {
          "worker_id": "w2",
          "task_id": "t9",
          "hours": 18.0
        },
        {
          "worker_id": "w2",
          "task_id": "t11",
          "hours": 10.0
        },
        {
          "worker_id": "w3",
          "task_id": "t2",
          "hours": 22.0
        },
        {
          "worker_id": "w3",
          "task_id": "t6",
          "hours": 14.0
        },
        {
          "worker_id": "w4",
          "task_id": "t12",
          "hours": 20.0
        },
        {
          "worker_id": "w4",
          "task_id": "t14",
          "hours": 18.0
        },
        {
          "worker_id": "w5",
          "task_id": "t3",
          "hours": 28.0
        },
        {
          "worker_id": "w6",
          "task_id": "t5",
          "hours": 28.0
        },
        {
          "worker_id": "w7",
          "task_id": "t10",
          "hours": 28.0
        },
        {
          "worker_id": "w8",
          "task_id": "t8",
          "hours": 28.0
        },
        {
          "worker_id": "w9",
          "task_id": "t7",
          "hours": 28.0
        },
        {
          "worker_id": "w10",
          "task_id": "t1",
          "hours": 18.0
        },
        {
          "worker_id": "w10",
          "task_id": "t13",
          "hours": 12.0
        }
      ],
      "total_cost": 16854.000000000025,
      "total_hours": 300.00000000000045
    }
  },
  {
    "id": "crew_assignment_708b3e09",
    "difficulty": "expert",
    "scenario": {
      "domain": "crew_assignment",
      "description": "Northspan Bridge Constructors is executing a critical phase of the Rivermile Crossing bridge project. The project manager must assign a mixed construction + inspection crew to marine/rigging setup, elevated welding, NDT testing, surveys, traffic control, and structural inspections under tight sequencing pressure. Workers differ in certifications, task-type efficiencies (speed multipliers), hourly cost, and task limits; deadlines create subtle interactions where the \u2018cheapest available\u2019 assignments can block rare multi-cert work later.",
      "start_date": "2026-03-02",
      "workers": [
        {
          "id": "w1",
          "name": "Marta Kline (QA/NDT Lead)",
          "certifications": [
            "structural_inspection",
            "NDT_ultrasonic",
            "fall_protection",
            "site_safety"
          ],
          "hourly_cost": 62.0,
          "max_tasks": 4,
          "efficiency": {
            "inspection": 1.3,
            "ndt": 1.4,
            "survey": 0.8
          }
        },
        {
          "id": "w2",
          "name": "Devin Cho (Field Weld Foreman)",
          "certifications": [
            "welding",
            "fall_protection",
            "rigging",
            "marine_work",
            "NDT_ultrasonic",
            "site_safety"
          ],
          "hourly_cost": 48.0,
          "max_tasks": 4,
          "efficiency": {
            "welding": 1.25,
            "rigging": 1.1,
            "marine_work": 1.0,
            "ndt": 0.95,
            "confined_space": 0.9
          }
        },
        {
          "id": "w3",
          "name": "Aisha Rahman (Concrete & Layout Tech)",
          "certifications": [
            "concrete",
            "survey",
            "site_safety"
          ],
          "hourly_cost": 38.0,
          "max_tasks": 4,
          "efficiency": {
            "concrete": 1.2,
            "survey": 1.0,
            "inspection": 0.85
          }
        },
        {
          "id": "w4",
          "name": "Luis Ortega (Access & MOT Specialist)",
          "certifications": [
            "traffic_control",
            "confined_space",
            "site_safety"
          ],
          "hourly_cost": 30.0,
          "max_tasks": 4,
          "efficiency": {
            "traffic_control": 1.1,
            "confined_space": 1.0,
            "rigging": 0.8
          }
        },
        {
          "id": "w5",
          "name": "Priya Nair (Drone/Inspection Tech)",
          "certifications": [
            "drone_pilot",
            "structural_inspection",
            "survey",
            "site_safety"
          ],
          "hourly_cost": 55.0,
          "max_tasks": 4,
          "efficiency": {
            "drone": 1.5,
            "inspection": 1.1,
            "survey": 1.05
          }
        },
        {
          "id": "w6",
          "name": "Ben Hawkins (Overwater Rigger/Welder)",
          "certifications": [
            "rigging",
            "marine_work",
            "fall_protection",
            "confined_space",
            "welding",
            "site_safety"
          ],
          "hourly_cost": 44.0,
          "max_tasks": 4,
          "efficiency": {
            "rigging": 1.2,
            "marine_work": 1.15,
            "welding": 0.95,
            "confined_space": 1.0
          }
        },
        {
          "id": "w7",
          "name": "Chen Wei (Welder/NDT Tech)",
          "certifications": [
            "welding",
            "fall_protection",
            "rigging",
            "NDT_ultrasonic",
            "site_safety"
          ],
          "hourly_cost": 46.0,
          "max_tasks": 4,
          "efficiency": {
            "welding": 1.1,
            "ndt": 1.2,
            "rigging": 0.95
          }
        },
        {
          "id": "w8",
          "name": "Sienna Brooks (Survey/Drone & MOT Support)",
          "certifications": [
            "survey",
            "drone_pilot",
            "traffic_control",
            "site_safety"
          ],
          "hourly_cost": 42.0,
          "max_tasks": 4,
          "efficiency": {
            "survey": 1.2,
            "drone": 1.3,
            "traffic_control": 1.0,
            "inspection": 0.9
          }
        },
        {
          "id": "w9",
          "name": "Omar Diallo (Confined Space & Concrete Hand)",
          "certifications": [
            "confined_space",
            "concrete",
            "site_safety"
          ],
          "hourly_cost": 34.0,
          "max_tasks": 4,
          "efficiency": {
            "confined_space": 1.2,
            "concrete": 1.0,
            "rigging": 0.85
          }
        },
        {
          "id": "w10",
          "name": "Grace Feldman (Bridge Inspector/Safety Rep)",
          "certifications": [
            "structural_inspection",
            "fall_protection",
            "traffic_control",
            "marine_work",
            "concrete",
            "drone_pilot",
            "site_safety"
          ],
          "hourly_cost": 50.0,
          "max_tasks": 4,
          "efficiency": {
            "inspection": 1.2,
            "traffic_control": 1.2,
            "marine_work": 0.9,
            "concrete": 0.85,
            "drone": 1.1
          }
        }
      ],
      "tasks": [
        {
          "id": "t1",
          "name": "Pier 2 Cofferdam Rigging Plan & Setup (Barge Assist)",
          "task_type": "marine_work",
          "required_certs": [
            "marine_work",
            "rigging",
            "site_safety"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-03-18",
          "priority": 1
        },
        {
          "id": "t2",
          "name": "Rebar Cage Placement QA Walkdown (Pier 3)",
          "task_type": "concrete",
          "required_certs": [
            "concrete",
            "site_safety"
          ],
          "hours_needed": 16.0,
          "deadline": "2026-03-22",
          "priority": 2
        },
        {
          "id": "t3",
          "name": "Girder Field Welds at Span B (Elevation Work)",
          "task_type": "welding",
          "required_certs": [
            "welding",
            "fall_protection",
            "site_safety"
          ],
          "hours_needed": 20.0,
          "deadline": "2026-03-25",
          "priority": 1
        },
        {
          "id": "t4",
          "name": "Confined-Space Box Girder Internal Access Prep",
          "task_type": "confined_space",
          "required_certs": [
            "confined_space",
            "site_safety"
          ],
          "hours_needed": 14.0,
          "deadline": "2026-03-20",
          "priority": 1
        },
        {
          "id": "t5",
          "name": "Ultrasonic NDT on Welded Splices (Span B)",
          "task_type": "ndt",
          "required_certs": [
            "NDT_ultrasonic",
            "site_safety"
          ],
          "hours_needed": 22.0,
          "deadline": "2026-03-28",
          "priority": 1
        },
        {
          "id": "t6",
          "name": "Drone Orthomosaic of Deck Formwork (Station 12+00 to 16+00)",
          "task_type": "drone",
          "required_certs": [
            "drone_pilot",
            "site_safety"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-03-21",
          "priority": 2
        },
        {
          "id": "t7",
          "name": "As-Built Survey: Bearing Seat Elevations (Span A/B)",
          "task_type": "survey",
          "required_certs": [
            "survey",
            "site_safety"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-03-24",
          "priority": 2
        },
        {
          "id": "t8",
          "name": "Traffic Control Field Implementation for Night Closure (Detour Setup/Teardown)",
          "task_type": "traffic_control",
          "required_certs": [
            "traffic_control",
            "site_safety"
          ],
          "hours_needed": 10.0,
          "deadline": "2026-03-19",
          "priority": 1
        },
        {
          "id": "t9",
          "name": "Structural Inspection: Temporary Works & Falsework Release",
          "task_type": "inspection",
          "required_certs": [
            "structural_inspection",
            "site_safety"
          ],
          "hours_needed": 24.0,
          "deadline": "2026-03-23",
          "priority": 1
        },
        {
          "id": "t10",
          "name": "Rigging Assist: Lifting Diaphragm Frames (Crane Picks)",
          "task_type": "rigging",
          "required_certs": [
            "rigging",
            "site_safety"
          ],
          "hours_needed": 14.0,
          "deadline": "2026-03-26",
          "priority": 2
        },
        {
          "id": "t11",
          "name": "Concrete Pour Monitoring: Pier Cap 3 (Thermal + Placement Checks)",
          "task_type": "concrete",
          "required_certs": [
            "concrete",
            "site_safety"
          ],
          "hours_needed": 16.0,
          "deadline": "2026-03-30",
          "priority": 1
        },
        {
          "id": "t12",
          "name": "Final Punchlist Walkdown (Access + Safety + QA)",
          "task_type": "inspection",
          "required_certs": [
            "structural_inspection",
            "fall_protection",
            "site_safety"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-04-05",
          "priority": 3
        },
        {
          "id": "t13",
          "name": "Marine Work: Fender System Bolt-Up Inspection from Barge",
          "task_type": "marine_work",
          "required_certs": [
            "marine_work",
            "site_safety"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-04-08",
          "priority": 2
        }
      ],
      "max_hours_per_worker": 40
    },
    "constraints": [
      {
        "description": "Workload should be balanced - no more than 10 hour difference between any two workers (using actual worked hours after applying efficiency).",
        "_spec": {
          "fn": "workload_balance",
          "args": [
            10
          ]
        }
      },
      {
        "description": "Each worker can handle at most 3 tasks (tight enough to create blocking if greedy assigns multi-cert workers too early).",
        "_spec": {
          "fn": "max_concurrent",
          "args": [
            3
          ]
        }
      },
      {
        "description": "No worker may be assigned more than 40 total hours (after accounting for efficiency).",
        "_spec": {
          "fn": "max_hours",
          "args": [
            40
          ]
        }
      },
      {
        "description": "Task t1 can only be assigned to one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t1"
          ]
        }
      },
      {
        "description": "Task t2 can only be assigned to one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t2"
          ]
        }
      },
      {
        "description": "Task t3 can only be assigned to one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t3"
          ]
        }
      },
      {
        "description": "Task t4 can only be assigned to one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t4"
          ]
        }
      },
      {
        "description": "Task t5 can only be assigned to one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t5"
          ]
        }
      },
      {
        "description": "Task t6 can only be assigned to one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t6"
          ]
        }
      },
      {
        "description": "Task t7 can only be assigned to one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t7"
          ]
        }
      },
      {
        "description": "Task t8 can only be assigned to one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t8"
          ]
        }
      },
      {
        "description": "Task t9 can only be assigned to one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t9"
          ]
        }
      },
      {
        "description": "Task t10 can only be assigned to one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t10"
          ]
        }
      },
      {
        "description": "Task t11 can only be assigned to one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t11"
          ]
        }
      },
      {
        "description": "Task t12 can only be assigned to one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t12"
          ]
        }
      },
      {
        "description": "Task t13 can only be assigned to one worker.",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t13"
          ]
        }
      }
    ],
    "instruction": "Minimize total labor cost while completing all bridge construction/inspection tasks by their deadlines, respecting worker certifications, task-type efficiency multipliers (actual hours = hours_needed / efficiency for that task_type), max hours, max concurrent tasks, and workload balance constraints.",
    "feasible": true,
    "solution": {
      "domain": "crew_assignment",
      "assignments": [
        {
          "worker_id": "w1",
          "task_id": "t5",
          "hours": 22.0
        },
        {
          "worker_id": "w2",
          "task_id": "t13",
          "hours": 22.0
        },
        {
          "worker_id": "w3",
          "task_id": "t2",
          "hours": 22.0
        },
        {
          "worker_id": "w4",
          "task_id": "t4",
          "hours": 14.0
        },
        {
          "worker_id": "w4",
          "task_id": "t8",
          "hours": 10.0
        },
        {
          "worker_id": "w5",
          "task_id": "t9",
          "hours": 24.0
        },
        {
          "worker_id": "w6",
          "task_id": "t1",
          "hours": 18.0
        },
        {
          "worker_id": "w6",
          "task_id": "t10",
          "hours": 14.0
        },
        {
          "worker_id": "w7",
          "task_id": "t3",
          "hours": 22.0
        },
        {
          "worker_id": "w8",
          "task_id": "t6",
          "hours": 12.0
        },
        {
          "worker_id": "w8",
          "task_id": "t7",
          "hours": 18.0
        },
        {
          "worker_id": "w9",
          "task_id": "t11",
          "hours": 22.0
        },
        {
          "worker_id": "w10",
          "task_id": "t12",
          "hours": 22.0
        }
      ],
      "total_cost": 10824.0,
      "total_hours": 242.0
    }
  },
  {
    "id": "crew_assignment_58fb41a2",
    "difficulty": "expert",
    "scenario": {
      "domain": "crew_assignment",
      "description": "Rivertown Repertory Theatre is mounting a new musical, 'Neon Masquerade'. The production manager must assign a technical crew (lighting, audio, rigging, carpentry, automation, and safety) to complete build-and-tech tasks before key milestones (focus, sound check, load-in, and final dress). Worker certifications and task-specific efficiency vary; some tasks appear cheap to staff but create downstream deadline and workload-balance failures.",
      "start_date": "2026-03-02",
      "workers": [
        {
          "id": "w1",
          "name": "Marisol Vega",
          "certifications": [
            "lighting",
            "safety",
            "power_distribution"
          ],
          "hourly_cost": 42.0,
          "max_tasks": 3,
          "efficiency": {
            "lighting": 1.35,
            "audio": 0.8,
            "rigging": 0.9,
            "carpentry": 0.9,
            "automation": 0.85,
            "props": 0.8
          }
        },
        {
          "id": "w2",
          "name": "Ethan Cho",
          "certifications": [
            "audio",
            "safety",
            "comms"
          ],
          "hourly_cost": 38.0,
          "max_tasks": 3,
          "efficiency": {
            "audio": 1.4,
            "lighting": 0.75,
            "rigging": 0.85,
            "carpentry": 0.8,
            "automation": 0.9,
            "props": 0.85
          }
        },
        {
          "id": "w3",
          "name": "Simone Hart",
          "certifications": [
            "rigging",
            "safety",
            "fall_protection"
          ],
          "hourly_cost": 45.0,
          "max_tasks": 3,
          "efficiency": {
            "rigging": 1.5,
            "lighting": 0.85,
            "audio": 0.8,
            "carpentry": 0.9,
            "automation": 0.95,
            "props": 0.75
          }
        },
        {
          "id": "w4",
          "name": "Noah Patel",
          "certifications": [
            "carpentry",
            "safety"
          ],
          "hourly_cost": 32.0,
          "max_tasks": 4,
          "efficiency": {
            "carpentry": 1.25,
            "props": 1.1,
            "lighting": 0.8,
            "audio": 0.85,
            "rigging": 0.75,
            "automation": 0.8
          }
        },
        {
          "id": "w5",
          "name": "Ivy Nguyen",
          "certifications": [
            "automation",
            "safety",
            "power_distribution"
          ],
          "hourly_cost": 50.0,
          "max_tasks": 2,
          "efficiency": {
            "automation": 1.6,
            "lighting": 0.95,
            "audio": 0.85,
            "rigging": 0.9,
            "carpentry": 0.85,
            "props": 0.8
          }
        },
        {
          "id": "w6",
          "name": "Caleb Morgan",
          "certifications": [
            "lighting",
            "audio",
            "safety"
          ],
          "hourly_cost": 36.0,
          "max_tasks": 4,
          "efficiency": {
            "lighting": 1.1,
            "audio": 1.05,
            "rigging": 0.8,
            "carpentry": 0.85,
            "automation": 0.85,
            "props": 0.9
          }
        },
        {
          "id": "w7",
          "name": "Aisha Rahman",
          "certifications": [
            "carpentry",
            "props",
            "safety"
          ],
          "hourly_cost": 29.0,
          "max_tasks": 4,
          "efficiency": {
            "props": 1.35,
            "carpentry": 1.05,
            "lighting": 0.8,
            "audio": 0.8,
            "rigging": 0.75,
            "automation": 0.75
          }
        },
        {
          "id": "w8",
          "name": "Gabe Sinclair",
          "certifications": [
            "rigging",
            "lighting",
            "safety",
            "fall_protection"
          ],
          "hourly_cost": 48.0,
          "max_tasks": 3,
          "efficiency": {
            "rigging": 1.25,
            "lighting": 1.15,
            "audio": 0.8,
            "carpentry": 0.9,
            "automation": 0.9,
            "props": 0.8
          }
        },
        {
          "id": "w9",
          "name": "Priya Desai",
          "certifications": [
            "audio",
            "comms",
            "safety"
          ],
          "hourly_cost": 34.0,
          "max_tasks": 4,
          "efficiency": {
            "audio": 1.15,
            "lighting": 0.8,
            "rigging": 0.85,
            "carpentry": 0.8,
            "automation": 0.85,
            "props": 0.9
          }
        },
        {
          "id": "w10",
          "name": "Jonah Brooks",
          "certifications": [
            "power_distribution",
            "safety",
            "lighting"
          ],
          "hourly_cost": 44.0,
          "max_tasks": 3,
          "efficiency": {
            "power_distribution": 1.5,
            "lighting": 1.05,
            "audio": 0.75,
            "rigging": 0.9,
            "carpentry": 0.85,
            "automation": 0.85
          }
        },
        {
          "id": "w11",
          "name": "Lena Kostova",
          "certifications": [
            "carpentry",
            "rigging",
            "safety"
          ],
          "hourly_cost": 40.0,
          "max_tasks": 3,
          "efficiency": {
            "rigging": 1.05,
            "carpentry": 1.1,
            "lighting": 0.85,
            "audio": 0.8,
            "automation": 0.85,
            "props": 0.9
          }
        },
        {
          "id": "w12",
          "name": "Owen Kim",
          "certifications": [
            "lighting",
            "comms",
            "safety"
          ],
          "hourly_cost": 31.0,
          "max_tasks": 4,
          "efficiency": {
            "lighting": 1.0,
            "audio": 0.9,
            "rigging": 0.8,
            "carpentry": 0.85,
            "automation": 0.8,
            "props": 0.85
          }
        },
        {
          "id": "w13",
          "name": "Talia Moreno",
          "certifications": [
            "automation",
            "rigging",
            "safety",
            "fall_protection"
          ],
          "hourly_cost": 46.0,
          "max_tasks": 3,
          "efficiency": {
            "automation": 1.25,
            "rigging": 1.2,
            "lighting": 0.85,
            "audio": 0.8,
            "carpentry": 0.85,
            "props": 0.8
          }
        }
      ],
      "tasks": [
        {
          "id": "t1",
          "name": "Hang FOH Lighting Truss (Balcony Rail)",
          "task_type": "rigging",
          "required_certs": [
            "rigging",
            "fall_protection",
            "safety"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-03-12",
          "priority": 1
        },
        {
          "id": "t2",
          "name": "Hang Overstage Electrics (Lineset 1\u20134)",
          "task_type": "rigging",
          "required_certs": [
            "rigging",
            "fall_protection",
            "safety"
          ],
          "hours_needed": 14.0,
          "deadline": "2026-03-13",
          "priority": 1
        },
        {
          "id": "t3",
          "name": "Patch & Address LED Wash Units",
          "task_type": "lighting",
          "required_certs": [
            "lighting",
            "safety"
          ],
          "hours_needed": 16.0,
          "deadline": "2026-03-14",
          "priority": 2
        },
        {
          "id": "t4",
          "name": "Dimmer Room Power Tie-in + Load Test",
          "task_type": "power_distribution",
          "required_certs": [
            "power_distribution",
            "safety"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-03-10",
          "priority": 1
        },
        {
          "id": "t5",
          "name": "Wireless Mic Coordination + Frequency Plot",
          "task_type": "audio",
          "required_certs": [
            "audio",
            "comms",
            "safety"
          ],
          "hours_needed": 10.0,
          "deadline": "2026-03-11",
          "priority": 1
        },
        {
          "id": "t6",
          "name": "PA Fly & Safety Points Verification",
          "task_type": "rigging",
          "required_certs": [
            "rigging",
            "safety"
          ],
          "hours_needed": 20.0,
          "deadline": "2026-03-12",
          "priority": 1
        },
        {
          "id": "t7",
          "name": "Program Lighting Console Cues (Act I)",
          "task_type": "lighting",
          "required_certs": [
            "lighting",
            "safety"
          ],
          "hours_needed": 18.0,
          "deadline": "2026-03-18",
          "priority": 2
        },
        {
          "id": "t8",
          "name": "Comms Beltpack Network + Backstage Antennas",
          "task_type": "comms",
          "required_certs": [
            "comms",
            "safety"
          ],
          "hours_needed": 14.0,
          "deadline": "2026-03-12",
          "priority": 2
        },
        {
          "id": "t9",
          "name": "Build Rolling Stair Unit (Deck Carpentry)",
          "task_type": "carpentry",
          "required_certs": [
            "carpentry",
            "safety"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-03-16",
          "priority": 2
        },
        {
          "id": "t10",
          "name": "Props: Neon Mask Painting + Seal",
          "task_type": "props",
          "required_certs": [
            "props",
            "safety"
          ],
          "hours_needed": 10.0,
          "deadline": "2026-03-17",
          "priority": 3
        },
        {
          "id": "t11",
          "name": "Automation: Revolve Drive Calibration",
          "task_type": "automation",
          "required_certs": [
            "automation",
            "safety"
          ],
          "hours_needed": 11.0,
          "deadline": "2026-03-15",
          "priority": 1
        },
        {
          "id": "t12",
          "name": "Automation: Safety Interlocks & E-Stop Test",
          "task_type": "automation",
          "required_certs": [
            "automation",
            "safety",
            "power_distribution"
          ],
          "hours_needed": 22.0,
          "deadline": "2026-03-13",
          "priority": 1
        },
        {
          "id": "t13",
          "name": "Sound Console Showfile + Snapshot Build",
          "task_type": "audio",
          "required_certs": [
            "audio",
            "safety"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-03-16",
          "priority": 2
        },
        {
          "id": "t14",
          "name": "Focus Session Prep: Labeling, Gel, Gobos",
          "task_type": "lighting",
          "required_certs": [
            "lighting",
            "safety"
          ],
          "hours_needed": 14.0,
          "deadline": "2026-03-13",
          "priority": 2
        },
        {
          "id": "t15",
          "name": "Rigging: Add Upstage Black Traveler Track",
          "task_type": "rigging",
          "required_certs": [
            "rigging",
            "safety"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-03-17",
          "priority": 2
        },
        {
          "id": "t16",
          "name": "Deck Finish: Marley Lay + Spike Rehearsal Marks",
          "task_type": "carpentry",
          "required_certs": [
            "carpentry",
            "safety"
          ],
          "hours_needed": 14.0,
          "deadline": "2026-03-14",
          "priority": 2
        },
        {
          "id": "t17",
          "name": "Backup Power & UPS Integration for Consoles",
          "task_type": "power_distribution",
          "required_certs": [
            "power_distribution",
            "safety"
          ],
          "hours_needed": 12.0,
          "deadline": "2026-03-12",
          "priority": 2
        }
      ],
      "max_hours_per_worker": 40
    },
    "constraints": [
      {
        "description": "Workload should be balanced - no more than 10 hour difference between any two workers",
        "_spec": {
          "fn": "workload_balance",
          "args": [
            10
          ]
        }
      },
      {
        "description": "Each worker can handle at most 4 concurrent tasks",
        "_spec": {
          "fn": "max_concurrent",
          "args": [
            4
          ]
        }
      },
      {
        "description": "Each worker can work at most 40 hours total in the planning horizon",
        "_spec": {
          "fn": "max_hours",
          "args": [
            40
          ]
        }
      },
      {
        "description": "Task t1 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t1"
          ]
        }
      },
      {
        "description": "Task t2 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t2"
          ]
        }
      },
      {
        "description": "Task t3 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t3"
          ]
        }
      },
      {
        "description": "Task t4 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t4"
          ]
        }
      },
      {
        "description": "Task t5 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t5"
          ]
        }
      },
      {
        "description": "Task t6 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t6"
          ]
        }
      },
      {
        "description": "Task t7 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t7"
          ]
        }
      },
      {
        "description": "Task t8 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t8"
          ]
        }
      },
      {
        "description": "Task t9 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t9"
          ]
        }
      },
      {
        "description": "Task t10 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t10"
          ]
        }
      },
      {
        "description": "Task t11 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t11"
          ]
        }
      },
      {
        "description": "Task t12 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t12"
          ]
        }
      },
      {
        "description": "Task t13 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t13"
          ]
        }
      },
      {
        "description": "Task t14 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t14"
          ]
        }
      },
      {
        "description": "Task t15 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t15"
          ]
        }
      },
      {
        "description": "Task t16 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t16"
          ]
        }
      },
      {
        "description": "Task t17 must be assigned to exactly one worker",
        "_spec": {
          "fn": "single_assignment",
          "args": [
            "t17"
          ]
        }
      }
    ],
    "instruction": "Minimize total labor cost while completing all tasks by their deadlines. Respect required certifications per task, worker max hours, and max concurrent tasks. Account for worker efficiency by treating effective time to complete a task as (hours_needed / worker_efficiency[task_type]) when that task_type exists in the worker's efficiency map (otherwise assume 1.0). Maintain workload balance so the difference between the most- and least-loaded workers does not exceed the workload_balance limit.",
    "feasible": true,
    "solution": {
      "domain": "crew_assignment",
      "assignments": [
        {
          "worker_id": "w1",
          "task_id": "t3",
          "hours": 16.0
        },
        {
          "worker_id": "w2",
          "task_id": "t5",
          "hours": 10.0
        },
        {
          "worker_id": "w2",
          "task_id": "t13",
          "hours": 12.0
        },
        {
          "worker_id": "w3",
          "task_id": "t1",
          "hours": 18.0
        },
        {
          "worker_id": "w4",
          "task_id": "t16",
          "hours": 14.0
        },
        {
          "worker_id": "w5",
          "task_id": "t12",
          "hours": 22.0
        },
        {
          "worker_id": "w6",
          "task_id": "t14",
          "hours": 14.0
        },
        {
          "worker_id": "w7",
          "task_id": "t9",
          "hours": 12.0
        },
        {
          "worker_id": "w7",
          "task_id": "t10",
          "hours": 10.0
        },
        {
          "worker_id": "w8",
          "task_id": "t2",
          "hours": 14.0
        },
        {
          "worker_id": "w9",
          "task_id": "t8",
          "hours": 14.0
        },
        {
          "worker_id": "w10",
          "task_id": "t4",
          "hours": 12.0
        },
        {
          "worker_id": "w10",
          "task_id": "t17",
          "hours": 12.0
        },
        {
          "worker_id": "w11",
          "task_id": "t6",
          "hours": 20.0
        },
        {
          "worker_id": "w12",
          "task_id": "t7",
          "hours": 18.0
        },
        {
          "worker_id": "w13",
          "task_id": "t11",
          "hours": 11.0
        },
        {
          "worker_id": "w13",
          "task_id": "t15",
          "hours": 12.0
        }
      ],
      "total_cost": 9627.999999999998,
      "total_hours": 240.99999999999991
    }
  },
  {
    "id": "facility_location_7ce62b6b",
    "difficulty": "expert",
    "scenario": {
      "domain": "facility_location",
      "description": "Regional distribution center network design for IronOak Retail (grocery + household essentials) across the Riverland Metro. Decide which candidate cross-docks/DCs to open and how to assign store clusters (customers) to minimize total fixed opening + per-unit handling/shipping costs while respecting capacity and a strict service-radius policy.",
      "max_facilities": 5,
      "max_distance": 42.0,
      "customers": [
        {
          "id": "c1",
          "name": "IronOak Store Cluster - Northgate",
          "x": 12.0,
          "y": 78.0,
          "demand": 90
        },
        {
          "id": "c2",
          "name": "IronOak Store Cluster - Pine Ridge",
          "x": 18.0,
          "y": 70.0,
          "demand": 85
        },
        {
          "id": "c3",
          "name": "IronOak Store Cluster - Lakeshore",
          "x": 26.0,
          "y": 82.0,
          "demand": 95
        },
        {
          "id": "c4",
          "name": "IronOak Store Cluster - Westhaven",
          "x": 6.0,
          "y": 66.0,
          "demand": 80
        },
        {
          "id": "c5",
          "name": "IronOak Store Cluster - Cedar Park",
          "x": 30.0,
          "y": 68.0,
          "demand": 90
        },
        {
          "id": "c6",
          "name": "IronOak Store Cluster - Stonebridge",
          "x": 22.0,
          "y": 60.0,
          "demand": 85
        },
        {
          "id": "c7",
          "name": "IronOak Store Cluster - Old Mill",
          "x": 10.0,
          "y": 58.0,
          "demand": 100
        },
        {
          "id": "c8",
          "name": "IronOak Store Cluster - Riverview North",
          "x": 40.0,
          "y": 72.0,
          "demand": 110
        },
        {
          "id": "c9",
          "name": "IronOak Store Cluster - Maple Junction",
          "x": 34.0,
          "y": 58.0,
          "demand": 105
        },
        {
          "id": "c10",
          "name": "IronOak Store Cluster - Eastcrest",
          "x": 46.0,
          "y": 60.0,
          "demand": 110
        },
        {
          "id": "c11",
          "name": "IronOak Store Cluster - Midvale",
          "x": 48.0,
          "y": 46.0,
          "demand": 95
        },
        {
          "id": "c12",
          "name": "IronOak Store Cluster - Brookfield",
          "x": 36.0,
          "y": 44.0,
          "demand": 90
        },
        {
          "id": "c13",
          "name": "IronOak Store Cluster - Harbor Point",
          "x": 60.0,
          "y": 50.0,
          "demand": 100
        },
        {
          "id": "c14",
          "name": "IronOak Store Cluster - Seaport",
          "x": 72.0,
          "y": 54.0,
          "demand": 85
        },
        {
          "id": "c15",
          "name": "IronOak Store Cluster - Windward",
          "x": 78.0,
          "y": 42.0,
          "demand": 80
        },
        {
          "id": "c16",
          "name": "IronOak Store Cluster - Fairview East",
          "x": 66.0,
          "y": 38.0,
          "demand": 90
        },
        {
          "id": "c17",
          "name": "IronOak Store Cluster - Southbay",
          "x": 58.0,
          "y": 28.0,
          "demand": 110
        },
        {
          "id": "c18",
          "name": "IronOak Store Cluster - Quarry District",
          "x": 70.0,
          "y": 24.0,
          "demand": 85
        },
        {
          "id": "c19",
          "name": "IronOak Store Cluster - Sunfield",
          "x": 84.0,
          "y": 26.0,
          "demand": 105
        },
        {
          "id": "c20",
          "name": "IronOak Store Cluster - Palmetto",
          "x": 88.0,
          "y": 40.0,
          "demand": 110
        },
        {
          "id": "c21",
          "name": "IronOak Store Cluster - Southridge",
          "x": 44.0,
          "y": 22.0,
          "demand": 100
        },
        {
          "id": "c22",
          "name": "IronOak Store Cluster - Glenbrook",
          "x": 32.0,
          "y": 22.0,
          "demand": 95
        },
        {
          "id": "c23",
          "name": "IronOak Store Cluster - Hillcrest",
          "x": 22.0,
          "y": 30.0,
          "demand": 105
        },
        {
          "id": "c24",
          "name": "IronOak Store Cluster - Westfield",
          "x": 14.0,
          "y": 20.0,
          "demand": 90
        },
        {
          "id": "c25",
          "name": "IronOak Store Cluster - Orchard South",
          "x": 26.0,
          "y": 12.0,
          "demand": 110
        },
        {
          "id": "c26",
          "name": "IronOak Store Cluster - Redwood Flats",
          "x": 10.0,
          "y": 8.0,
          "demand": 100
        },
        {
          "id": "c27",
          "name": "IronOak Store Cluster - Granite Springs",
          "x": 4.0,
          "y": 26.0,
          "demand": 90
        },
        {
          "id": "c28",
          "name": "IronOak Store Cluster - Bayside West",
          "x": 6.0,
          "y": 38.0,
          "demand": 110
        },
        {
          "id": "c29",
          "name": "IronOak Store Cluster - Meadowview",
          "x": 18.0,
          "y": 44.0,
          "demand": 95
        },
        {
          "id": "c30",
          "name": "IronOak Store Cluster - Riverbend Central",
          "x": 28.0,
          "y": 36.0,
          "demand": 105
        }
      ],
      "facilities": [
        {
          "id": "f1",
          "name": "IronOak DC - West Crossdock (Legacy)",
          "x": 8.0,
          "y": 52.0,
          "capacity": 900,
          "fixed_cost": 18000.0,
          "variable_cost_per_unit": 2.9
        },
        {
          "id": "f2",
          "name": "IronOak DC - North Consolidation Hub",
          "x": 22.0,
          "y": 74.0,
          "capacity": 750,
          "fixed_cost": 12000.0,
          "variable_cost_per_unit": 3.1
        },
        {
          "id": "f3",
          "name": "3PL Pop-Up - Midtown Micro-DC",
          "x": 30.0,
          "y": 50.0,
          "capacity": 450,
          "fixed_cost": 8000.0,
          "variable_cost_per_unit": 4.1
        },
        {
          "id": "f4",
          "name": "IronOak DC - Harbor Cold-Chain Annex",
          "x": 66.0,
          "y": 48.0,
          "capacity": 650,
          "fixed_cost": 13000.0,
          "variable_cost_per_unit": 3.0
        },
        {
          "id": "f5",
          "name": "3PL Crossdock - Seaport Yard",
          "x": 76.0,
          "y": 56.0,
          "capacity": 500,
          "fixed_cost": 11000.0,
          "variable_cost_per_unit": 3.8
        },
        {
          "id": "f6",
          "name": "IronOak DC - East Freight Terminal",
          "x": 56.0,
          "y": 40.0,
          "capacity": 600,
          "fixed_cost": 16000.0,
          "variable_cost_per_unit": 2.8
        },
        {
          "id": "f7",
          "name": "Brownstone Logistics - South Spur",
          "x": 54.0,
          "y": 18.0,
          "capacity": 500,
          "fixed_cost": 9000.0,
          "variable_cost_per_unit": 3.9
        },
        {
          "id": "f8",
          "name": "IronOak DC - Southwest Value Hub",
          "x": 16.0,
          "y": 18.0,
          "capacity": 550,
          "fixed_cost": 14000.0,
          "variable_cost_per_unit": 2.6
        },
        {
          "id": "f9",
          "name": "3PL Crossdock - Far South Siding",
          "x": 34.0,
          "y": 10.0,
          "capacity": 450,
          "fixed_cost": 7500.0,
          "variable_cost_per_unit": 4.0
        },
        {
          "id": "f10",
          "name": "IronOak DC - Central Sortation (Automation)",
          "x": 38.0,
          "y": 34.0,
          "capacity": 1000,
          "fixed_cost": 15000.0,
          "variable_cost_per_unit": 2.2
        },
        {
          "id": "f11",
          "name": "3PL Budget Shed - North Fringe",
          "x": 10.0,
          "y": 84.0,
          "capacity": 400,
          "fixed_cost": 6000.0,
          "variable_cost_per_unit": 4.4
        },
        {
          "id": "f12",
          "name": "IronOak DC - West Metro Pallet Yard",
          "x": 4.0,
          "y": 40.0,
          "capacity": 450,
          "fixed_cost": 10000.0,
          "variable_cost_per_unit": 3.3
        },
        {
          "id": "f13",
          "name": "IronOak DC - Coastal Megahub",
          "x": 80.0,
          "y": 36.0,
          "capacity": 850,
          "fixed_cost": 14000.0,
          "variable_cost_per_unit": 2.4
        },
        {
          "id": "f14",
          "name": "IronOak DC - East Inland Hub",
          "x": 60.0,
          "y": 28.0,
          "capacity": 750,
          "fixed_cost": 9000.0,
          "variable_cost_per_unit": 3.2
        }
      ]
    },
    "constraints": [
      {
        "description": "Keep the legacy West Crossdock operational due to long-term carrier contracts and existing pallet-return infrastructure.",
        "_spec": {
          "fn": "must_open",
          "args": [
            "f1"
          ]
        }
      },
      {
        "description": "Each store cluster must be supplied from a single DC to simplify appointment scheduling and reduce split-load receiving congestion.",
        "_spec": {
          "fn": "single_source",
          "args": []
        }
      },
      {
        "description": "Open at least 3 facilities to maintain redundancy during peak promotions and weather disruptions.",
        "_spec": {
          "fn": "min_facilities",
          "args": [
            3
          ]
        }
      },
      {
        "description": "Total fixed opening costs must not exceed the approved network budget (capex + lease commitments).",
        "_spec": {
          "fn": "budget_limit",
          "args": [
            59500
          ]
        }
      },
      {
        "description": "If the Harbor Cold-Chain Annex opens, the Seaport Yard must also open to provide dock-time slots for refrigerated imports.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f4",
            "f5"
          ]
        }
      },
      {
        "description": "If the Seaport Yard opens, the Coastal Megahub must also open to provide linehaul consolidation and inventory buffering.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f5",
            "f13"
          ]
        }
      },
      {
        "description": "If the East Inland Hub opens, the East Freight Terminal must also open to provide drayage capacity and trailer storage.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f14",
            "f6"
          ]
        }
      },
      {
        "description": "If the East Freight Terminal opens, the Harbor Cold-Chain Annex must also open to ensure temperature-controlled backhaul lanes.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f6",
            "f4"
          ]
        }
      },
      {
        "description": "At most one of the Midtown Micro-DC and Central Sortation can be opened (they share the same municipal automation tax credit program slot).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f3",
              "f10"
            ]
          ]
        }
      },
      {
        "description": "At most one of the North Consolidation Hub and the Budget Shed - North Fringe can be opened (both rely on the same leased rail spur).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f2",
              "f11"
            ]
          ]
        }
      },
      {
        "description": "At most one of the Southwest Value Hub and Far South Siding can be opened (conflicting union jurisdiction for the same yard).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f8",
              "f9"
            ]
          ]
        }
      },
      {
        "description": "At most one of the East Freight Terminal and Coastal Megahub can be opened (exclusive rights to the same ocean-to-rail transload operator).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f6",
              "f13"
            ]
          ]
        }
      },
      {
        "description": "The Central Sortation (Automation) site cannot be opened due to a pending zoning appeal on conveyor noise limits.",
        "_spec": {
          "fn": "must_close",
          "args": [
            "f10"
          ]
        }
      },
      {
        "description": "The Midtown Micro-DC must remain closed because its short-term lease was not renewed for the upcoming retail season.",
        "_spec": {
          "fn": "must_close",
          "args": [
            "f3"
          ]
        }
      },
      {
        "description": "The West Metro Pallet Yard must remain open to support reverse logistics (returns, totes, and pallet repair) for the region.",
        "_spec": {
          "fn": "must_open",
          "args": [
            "f12"
          ]
        }
      },
      {
        "description": "The Far South Siding must remain closed due to a bridge weight restriction on the only access route.",
        "_spec": {
          "fn": "must_close",
          "args": [
            "f9"
          ]
        }
      }
    ],
    "instruction": "Minimize total cost (sum of fixed costs for opened facilities plus variable cost per unit shipped) while serving every IronOak store cluster (customer) from exactly one open facility within the maximum distance (42.0). Respect each facility's capacity (sum of demands assigned to it cannot exceed its capacity), do not open more than max_facilities=5 sites, and satisfy all listed constraints (must_open/must_close/min_facilities/exclusion/conditional/budget_limit).",
    "analysis": {
      "anti_patterns": [
        "Greedy trap: opening the lowest fixed-cost sites (e.g., f11, f14, f7) looks cheap, but f14 triggers a costly conditional chain (f14\u2192f6\u2192f4\u2192f5\u2192f13) that becomes impossible due to the f6 vs f13 exclusion and can also blow the budget.",
        "Decoy option: f14 (East Inland Hub) has a very attractive fixed cost and seems to neatly cover the southeast customers, but it is a constraint landmine because it forces f6, which forces f4, which forces f5, which forces f13\u2014then conflicts with exclusion (f6, f13).",
        "Hidden interaction: the network appears separable into north/west/east, but the conditional chains + exclusions couple east-coast decisions to the overall feasibility (you may be forced away from the 'best' east facility and instead cover the coast via higher variable-cost 3PL sites).",
        "Cascading effects: choosing f2 for the north (good variable costs) blocks the even cheaper-to-open f11; if you then try to compensate by adding an east facility you can accidentally exceed the fixed-cost budget and/or hit the max_facilities cap.",
        "Counterintuitive optimum: a higher fixed-cost hub with lower variable cost (e.g., f8 or f6) might be best in isolation, but exclusions/conditionals can force a solution where a more expensive-per-unit 3PL (f5 or f7) is necessary to maintain coverage within 42 units without violating chain constraints."
      ],
      "strategic_insights": [
        "First, satisfy feasibility under conditionals/exclusions: eliminate facilities that trigger impossible chains (notably f14 given f6\u2194f13 exclusion) before doing any cost comparison.",
        "Treat the geography as three clusters (northwest, central/southwest, coastal/southeast) but remember the budget and max_facilities constraints: you likely need one 'bridge' facility that covers mixed clusters within 42 units.",
        "Use must_open sites (f1, f12) as anchors; then pick complementary sites that cover far-east coastal customers without relying on forbidden/closed nodes (f3, f10) and without triggering impossible conditionals.",
        "When evaluating candidates, compare total landed cost (fixed + variable) under capacity limits; a slightly higher fixed-cost site can reduce the number of facilities needed (saving fixed costs) and avoid breaking the 5-facility cap."
      ],
      "expected_difficulty": "Expert: Feasibility hinges on navigating two interacting conditional chains, multiple exclusions (including one that makes a tempting conditional chain impossible), tight-ish aggregate capacity (~130% of demand), a strict 42-unit service radius, and a budget set to ~85% of the cheapest 5 fixed costs\u2014forcing non-greedy tradeoffs between coverage, capacity, and total cost."
    },
    "feasible": true,
    "solution": {
      "domain": "facility_location",
      "open_facilities": [
        "f1",
        "f7",
        "f11",
        "f12",
        "f13"
      ],
      "assignments": [
        {
          "customer_id": "c1",
          "facility_id": "f11",
          "amount": 90.0
        },
        {
          "customer_id": "c2",
          "facility_id": "f11",
          "amount": 85.0
        },
        {
          "customer_id": "c3",
          "facility_id": "f11",
          "amount": 95.0
        },
        {
          "customer_id": "c4",
          "facility_id": "f1",
          "amount": 80.0
        },
        {
          "customer_id": "c5",
          "facility_id": "f1",
          "amount": 90.0
        },
        {
          "customer_id": "c6",
          "facility_id": "f1",
          "amount": 85.0
        },
        {
          "customer_id": "c7",
          "facility_id": "f1",
          "amount": 100.0
        },
        {
          "customer_id": "c8",
          "facility_id": "f11",
          "amount": 110.0
        },
        {
          "customer_id": "c9",
          "facility_id": "f1",
          "amount": 105.0
        },
        {
          "customer_id": "c10",
          "facility_id": "f13",
          "amount": 110.0
        },
        {
          "customer_id": "c11",
          "facility_id": "f13",
          "amount": 95.0
        },
        {
          "customer_id": "c12",
          "facility_id": "f1",
          "amount": 90.0
        },
        {
          "customer_id": "c13",
          "facility_id": "f13",
          "amount": 100.0
        },
        {
          "customer_id": "c14",
          "facility_id": "f13",
          "amount": 85.0
        },
        {
          "customer_id": "c15",
          "facility_id": "f13",
          "amount": 80.0
        },
        {
          "customer_id": "c16",
          "facility_id": "f13",
          "amount": 90.0
        },
        {
          "customer_id": "c17",
          "facility_id": "f7",
          "amount": 110.0
        },
        {
          "customer_id": "c18",
          "facility_id": "f7",
          "amount": 85.0
        },
        {
          "customer_id": "c19",
          "facility_id": "f13",
          "amount": 105.0
        },
        {
          "customer_id": "c20",
          "facility_id": "f13",
          "amount": 110.0
        },
        {
          "customer_id": "c21",
          "facility_id": "f7",
          "amount": 100.0
        },
        {
          "customer_id": "c22",
          "facility_id": "f7",
          "amount": 95.0
        },
        {
          "customer_id": "c23",
          "facility_id": "f1",
          "amount": 105.0
        },
        {
          "customer_id": "c24",
          "facility_id": "f12",
          "amount": 90.0
        },
        {
          "customer_id": "c25",
          "facility_id": "f7",
          "amount": 110.0
        },
        {
          "customer_id": "c26",
          "facility_id": "f12",
          "amount": 100.0
        },
        {
          "customer_id": "c27",
          "facility_id": "f12",
          "amount": 90.0
        },
        {
          "customer_id": "c28",
          "facility_id": "f12",
          "amount": 110.0
        },
        {
          "customer_id": "c29",
          "facility_id": "f1",
          "amount": 95.0
        },
        {
          "customer_id": "c30",
          "facility_id": "f1",
          "amount": 105.0
        }
      ],
      "total_fixed_cost": 57000.0,
      "total_variable_cost": 9248.5,
      "total_distance": 56274.87
    }
  },
  {
    "id": "facility_location_147a9f69",
    "difficulty": "expert",
    "scenario": {
      "domain": "facility_location",
      "description": "Bean & Bloom Coffee is planning a multi-neighborhood expansion and must choose which production/retail sites (roasteries, commissaries, caf\u00e9s, kiosks) to open to supply coffee and pastries to 30 high-volume partner pickup points (office towers, campuses, markets, and event venues). Each customer must be served by exactly one open facility within a strict delivery radius, while respecting facility capacities and minimizing fixed + per-unit service costs.",
      "max_facilities": 5,
      "max_distance": 42.0,
      "customers": [
        {
          "id": "c1",
          "name": "Cedar Loft Offices (West End)",
          "x": 15.0,
          "y": 65.0,
          "demand": 75
        },
        {
          "id": "c2",
          "name": "Steamline Co-Working (West End)",
          "x": 25.0,
          "y": 70.0,
          "demand": 70
        },
        {
          "id": "c3",
          "name": "RoastRow Food Hall (Old West)",
          "x": 10.0,
          "y": 55.0,
          "demand": 80
        },
        {
          "id": "c4",
          "name": "Biscotti Blvd Retail Strip (West)",
          "x": 30.0,
          "y": 60.0,
          "demand": 65
        },
        {
          "id": "c5",
          "name": "Cortado Court Apartments (West)",
          "x": 22.0,
          "y": 45.0,
          "demand": 60
        },
        {
          "id": "c6",
          "name": "BaristaWorks HQ (Far West)",
          "x": 5.0,
          "y": 70.0,
          "demand": 90
        },
        {
          "id": "c7",
          "name": "Uptake Art Center (Northwest)",
          "x": 35.0,
          "y": 75.0,
          "demand": 55
        },
        {
          "id": "c8",
          "name": "Crema Corner Grocer (West)",
          "x": 28.0,
          "y": 48.0,
          "demand": 70
        },
        {
          "id": "c9",
          "name": "BeanBridge Library (Northwest)",
          "x": 12.0,
          "y": 78.0,
          "demand": 60
        },
        {
          "id": "c10",
          "name": "Union Espresso Plaza (Midtown West)",
          "x": 40.0,
          "y": 62.0,
          "demand": 75
        },
        {
          "id": "c11",
          "name": "Midtown Transit Hub Kiosk Row",
          "x": 60.0,
          "y": 55.0,
          "demand": 70
        },
        {
          "id": "c12",
          "name": "Caffeine & Code Tower (Midtown)",
          "x": 70.0,
          "y": 40.0,
          "demand": 65
        },
        {
          "id": "c13",
          "name": "East Market Hall (East)",
          "x": 82.0,
          "y": 58.0,
          "demand": 80
        },
        {
          "id": "c14",
          "name": "Ridgeway Retail Park (Far East)",
          "x": 90.0,
          "y": 45.0,
          "demand": 55
        },
        {
          "id": "c15",
          "name": "Northloop Fitness Complex (Northeast)",
          "x": 65.0,
          "y": 65.0,
          "demand": 60
        },
        {
          "id": "c16",
          "name": "Southrail Station (Southeast)",
          "x": 78.0,
          "y": 32.0,
          "demand": 80
        },
        {
          "id": "c17",
          "name": "BrewLab Startup Campus (Midtown)",
          "x": 55.0,
          "y": 45.0,
          "demand": 75
        },
        {
          "id": "c18",
          "name": "Eastgate Convention Center",
          "x": 88.0,
          "y": 60.0,
          "demand": 70
        },
        {
          "id": "c19",
          "name": "Summit University Quad (North)",
          "x": 80.0,
          "y": 88.0,
          "demand": 85
        },
        {
          "id": "c20",
          "name": "Pinecrest Medical Pavilion (North)",
          "x": 95.0,
          "y": 82.0,
          "demand": 60
        },
        {
          "id": "c21",
          "name": "Maple Tech Park (North)",
          "x": 70.0,
          "y": 80.0,
          "demand": 70
        },
        {
          "id": "c22",
          "name": "Northline Mall Food Court",
          "x": 90.0,
          "y": 72.0,
          "demand": 65
        },
        {
          "id": "c23",
          "name": "Skyview Stadium (North Edge)",
          "x": 100.0,
          "y": 90.0,
          "demand": 95
        },
        {
          "id": "c24",
          "name": "Hilltop Community College (Northwest)",
          "x": 65.0,
          "y": 92.0,
          "demand": 85
        },
        {
          "id": "c25",
          "name": "Crescent Suburb Center (Northeast)",
          "x": 92.0,
          "y": 95.0,
          "demand": 70
        },
        {
          "id": "c26",
          "name": "Harbor Promenade Shops (South)",
          "x": 60.0,
          "y": 18.0,
          "demand": 75
        },
        {
          "id": "c27",
          "name": "Marina Office Pier (South)",
          "x": 80.0,
          "y": 8.0,
          "demand": 80
        },
        {
          "id": "c28",
          "name": "Dockside Night Market (Southwest Harbor)",
          "x": 55.0,
          "y": 5.0,
          "demand": 55
        },
        {
          "id": "c29",
          "name": "Seaport Logistics Admin (Southeast Harbor)",
          "x": 90.0,
          "y": 20.0,
          "demand": 50
        },
        {
          "id": "c30",
          "name": "Boardwalk Event Lawn (South)",
          "x": 75.0,
          "y": 25.0,
          "demand": 55
        }
      ],
      "facilities": [
        {
          "id": "f1",
          "name": "Bean & Bloom Flagship Roastery Caf\u00e9 (Downtown Core)",
          "x": 48.0,
          "y": 52.0,
          "capacity": 520,
          "fixed_cost": 14000.0,
          "variable_cost_per_unit": 1.5
        },
        {
          "id": "f2",
          "name": "VelvetShot Downtown Espresso Bar (Prime Corner)",
          "x": 40.0,
          "y": 55.0,
          "capacity": 420,
          "fixed_cost": 9000.0,
          "variable_cost_per_unit": 1.4
        },
        {
          "id": "f3",
          "name": "Riverside Cold Brew & Bottling Kitchen",
          "x": 60.0,
          "y": 60.0,
          "capacity": 520,
          "fixed_cost": 9800.0,
          "variable_cost_per_unit": 1.6
        },
        {
          "id": "f4",
          "name": "Uptown Training Caf\u00e9 (Barista Academy)",
          "x": 35.0,
          "y": 75.0,
          "capacity": 450,
          "fixed_cost": 7800.0,
          "variable_cost_per_unit": 1.7
        },
        {
          "id": "f5",
          "name": "Old Town Micro-Kiosk (Walk-up Window)",
          "x": 30.0,
          "y": 50.0,
          "capacity": 300,
          "fixed_cost": 6500.0,
          "variable_cost_per_unit": 2.1
        },
        {
          "id": "f6",
          "name": "Eastside Drive\u2011Thru & Pickup Hub",
          "x": 75.0,
          "y": 50.0,
          "capacity": 600,
          "fixed_cost": 7600.0,
          "variable_cost_per_unit": 1.8
        },
        {
          "id": "f7",
          "name": "North Campus Cart Garage (Mobile Cart Hub)",
          "x": 55.0,
          "y": 85.0,
          "capacity": 320,
          "fixed_cost": 7000.0,
          "variable_cost_per_unit": 2.0
        },
        {
          "id": "f8",
          "name": "Airport Concourse Kiosk (Terminal B)",
          "x": 95.0,
          "y": 60.0,
          "capacity": 380,
          "fixed_cost": 12000.0,
          "variable_cost_per_unit": 1.3
        },
        {
          "id": "f9",
          "name": "South Market Pop\u2011Up (Weekend Only Buildout)",
          "x": 50.0,
          "y": 20.0,
          "capacity": 360,
          "fixed_cost": 6800.0,
          "variable_cost_per_unit": 2.2
        },
        {
          "id": "f10",
          "name": "Westside Roast & Bake Hub (Commissary + Mini Roaster)",
          "x": 20.0,
          "y": 60.0,
          "capacity": 800,
          "fixed_cost": 7200.0,
          "variable_cost_per_unit": 2.4
        },
        {
          "id": "f11",
          "name": "Suburban Commissary (Dough + Milk Staging)",
          "x": 85.0,
          "y": 75.0,
          "capacity": 650,
          "fixed_cost": 6500.0,
          "variable_cost_per_unit": 1.9
        },
        {
          "id": "f12",
          "name": "Harborfront Caf\u00e9 & Pickup Counter",
          "x": 70.0,
          "y": 10.0,
          "capacity": 500,
          "fixed_cost": 8200.0,
          "variable_cost_per_unit": 1.6
        },
        {
          "id": "f13",
          "name": "Hillside Eco Caf\u00e9 (Solar Retrofit Site)",
          "x": 10.0,
          "y": 85.0,
          "capacity": 420,
          "fixed_cost": 8600.0,
          "variable_cost_per_unit": 1.5
        },
        {
          "id": "f14",
          "name": "Industrial Park Pickup Window (Bulk Dispatch)",
          "x": 90.0,
          "y": 35.0,
          "capacity": 520,
          "fixed_cost": 9500.0,
          "variable_cost_per_unit": 1.7
        }
      ]
    },
    "constraints": [
      {
        "description": "The Westside Roast & Bake Hub is already leased and must be operated as the baseline production site.",
        "_spec": {
          "fn": "must_open",
          "args": [
            "f10"
          ]
        }
      },
      {
        "description": "Open at least 3 facilities to ensure redundancy across roasting/baking, cold storage, and last-mile pickup.",
        "_spec": {
          "fn": "min_facilities",
          "args": [
            3
          ]
        }
      },
      {
        "description": "Each customer location must be served by exactly one facility (no split shipments for freshness control).",
        "_spec": {
          "fn": "single_source",
          "args": []
        }
      },
      {
        "description": "Total fixed opening costs must not exceed the expansion cap (permits + equipment budget).",
        "_spec": {
          "fn": "budget_limit",
          "args": [
            29500
          ]
        }
      },
      {
        "description": "The Flagship Roastery Caf\u00e9 is undergoing a long renovation and cannot be opened this cycle (looks attractive but is unavailable).",
        "_spec": {
          "fn": "must_close",
          "args": [
            "f1"
          ]
        }
      },
      {
        "description": "The North Campus Cart Garage is blocked by campus construction and must remain closed.",
        "_spec": {
          "fn": "must_close",
          "args": [
            "f7"
          ]
        }
      },
      {
        "description": "Zoning prevents operating both the Westside Roast & Bake Hub and the Downtown Espresso Bar simultaneously (roasting emissions cap in paired districts).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f2",
              "f10"
            ]
          ]
        }
      },
      {
        "description": "The Airport Concourse Kiosk and Eastside Drive\u2011Thru cannot both be opened due to a mutually exclusive refrigerated-delivery contract.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f6",
              "f8"
            ]
          ]
        }
      },
      {
        "description": "The Harborfront Caf\u00e9 and the South Market Pop\u2011Up compete for the same waterfront vending permit (choose at most one).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f12",
              "f9"
            ]
          ]
        }
      },
      {
        "description": "The Uptown Training Caf\u00e9 and Hillside Eco Caf\u00e9 cannot both open due to a single specialized espresso-machine commissioning team.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f13",
              "f4"
            ]
          ]
        }
      },
      {
        "description": "If the Eastside Drive\u2011Thru opens, the Suburban Commissary must also open to stage dairy and pastry dough overnight.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f6",
            "f11"
          ]
        }
      },
      {
        "description": "If the Harborfront Caf\u00e9 opens, the Suburban Commissary must also open to support early-morning harbor demand.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f12",
            "f11"
          ]
        }
      },
      {
        "description": "If the Suburban Commissary opens, the Westside Roast & Bake Hub must also be open to supply base pastry and roast components.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f11",
            "f10"
          ]
        }
      },
      {
        "description": "If the Airport Concourse Kiosk opens, the Industrial Park Pickup Window must also open to handle TSA-compliant bulk dispatching.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f8",
            "f14"
          ]
        }
      },
      {
        "description": "If the Industrial Park Pickup Window opens, the Suburban Commissary must also open for cold-chain staging.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f14",
            "f11"
          ]
        }
      },
      {
        "description": "If the Downtown Espresso Bar were to open, it would require the (currently closed) Flagship Roastery Caf\u00e9 for brand and training oversight\u2014making it a subtle decoy under the renovation constraint.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f2",
            "f1"
          ]
        }
      }
    ],
    "instruction": "Minimize total cost (fixed facility opening costs plus per-unit variable service costs) while serving every customer from exactly one open facility within the maximum distance limit, without exceeding facility capacities, respecting the maximum number of facilities, and satisfying all listed logical and budget constraints.",
    "analysis": {
      "anti_patterns": [
        "Greedy 'open the lowest variable-cost sites' fails because the best per-unit option set includes decoys that are blocked by exclusion + conditional + must_close interactions (e.g., f2 looks great but is infeasible).",
        "Greedy 'open the cheapest fixed-cost sites first' tends to select multiple small/central options that cannot cover the full geography within the distance limit without blowing the max_facilities cap or running out of capacity.",
        "Local fixes cascade: swapping in a facility to reduce variable cost can trigger a conditional chain (e.g., f8 -> f14 -> f11) and then collide with an exclusion (f6 vs f8) or the budget ceiling."
      ],
      "strategic_insights": [
        "Treat conditional chains as bundle decisions and price them as packages; several seemingly optional facilities become mandatory add-ons once a trigger facility is chosen.",
        "Budget is calibrated against the cheapest five sites, but feasibility hinges on covering north + south + east simultaneously; the optimal solution often uses a higher-variable, low-fixed hub (f10) because it enables a budget-feasible capacity/coverage backbone.",
        "Start by identifying customers that are only cheaply/robustly covered by specific regions (harbor and far-north), then choose the minimum set of region-covering facilities that still respects the exclusion constraints."
      ],
      "expected_difficulty": "Expert: requires jointly reasoning about distance coverage, tight-ish capacity allocation under single-sourcing, a binding fixed-cost budget calibrated to cheap decoys, and multiple interacting conditional/exclusion constraints that create non-obvious infeasibilities and counterintuitive optima."
    },
    "feasible": true,
    "solution": {
      "domain": "facility_location",
      "open_facilities": [
        "f6",
        "f10",
        "f11",
        "f12"
      ],
      "assignments": [
        {
          "customer_id": "c1",
          "facility_id": "f10",
          "amount": 75.0
        },
        {
          "customer_id": "c2",
          "facility_id": "f10",
          "amount": 70.0
        },
        {
          "customer_id": "c3",
          "facility_id": "f10",
          "amount": 80.0
        },
        {
          "customer_id": "c4",
          "facility_id": "f10",
          "amount": 65.0
        },
        {
          "customer_id": "c5",
          "facility_id": "f10",
          "amount": 60.0
        },
        {
          "customer_id": "c6",
          "facility_id": "f10",
          "amount": 90.0
        },
        {
          "customer_id": "c7",
          "facility_id": "f10",
          "amount": 55.0
        },
        {
          "customer_id": "c8",
          "facility_id": "f10",
          "amount": 70.0
        },
        {
          "customer_id": "c9",
          "facility_id": "f10",
          "amount": 60.0
        },
        {
          "customer_id": "c10",
          "facility_id": "f10",
          "amount": 75.0
        },
        {
          "customer_id": "c11",
          "facility_id": "f6",
          "amount": 70.0
        },
        {
          "customer_id": "c12",
          "facility_id": "f6",
          "amount": 65.0
        },
        {
          "customer_id": "c13",
          "facility_id": "f6",
          "amount": 80.0
        },
        {
          "customer_id": "c14",
          "facility_id": "f6",
          "amount": 55.0
        },
        {
          "customer_id": "c15",
          "facility_id": "f6",
          "amount": 60.0
        },
        {
          "customer_id": "c16",
          "facility_id": "f6",
          "amount": 80.0
        },
        {
          "customer_id": "c17",
          "facility_id": "f6",
          "amount": 75.0
        },
        {
          "customer_id": "c18",
          "facility_id": "f11",
          "amount": 70.0
        },
        {
          "customer_id": "c19",
          "facility_id": "f11",
          "amount": 85.0
        },
        {
          "customer_id": "c20",
          "facility_id": "f11",
          "amount": 60.0
        },
        {
          "customer_id": "c21",
          "facility_id": "f11",
          "amount": 70.0
        },
        {
          "customer_id": "c22",
          "facility_id": "f11",
          "amount": 65.0
        },
        {
          "customer_id": "c23",
          "facility_id": "f11",
          "amount": 95.0
        },
        {
          "customer_id": "c24",
          "facility_id": "f11",
          "amount": 85.0
        },
        {
          "customer_id": "c25",
          "facility_id": "f11",
          "amount": 70.0
        },
        {
          "customer_id": "c26",
          "facility_id": "f12",
          "amount": 75.0
        },
        {
          "customer_id": "c27",
          "facility_id": "f12",
          "amount": 80.0
        },
        {
          "customer_id": "c28",
          "facility_id": "f12",
          "amount": 55.0
        },
        {
          "customer_id": "c29",
          "facility_id": "f12",
          "amount": 50.0
        },
        {
          "customer_id": "c30",
          "facility_id": "f12",
          "amount": 55.0
        }
      ],
      "total_fixed_cost": 29500.0,
      "total_variable_cost": 4197.0,
      "total_distance": 32730.9
    }
  },
  {
    "id": "facility_location_2d39a985",
    "difficulty": "expert",
    "scenario": {
      "domain": "facility_location",
      "description": "VoltRoute Charging must expand its regional EV fast-charging network across the Metrovale area. The company must choose which candidate charging sites to open and assign each fleet/customer depot to exactly one open site, minimizing total cost while respecting charger throughput (capacity) and a strict service-radius limit driven by driver detour constraints and SLA penalties.",
      "max_facilities": 6,
      "max_distance": 42.0,
      "customers": [
        {
          "id": "c1",
          "name": "GreenCab Dispatch - Downtown",
          "x": 47.0,
          "y": 52.0,
          "demand": 55
        },
        {
          "id": "c2",
          "name": "ParcelPulse Micro-Depot A",
          "x": 53.0,
          "y": 49.0,
          "demand": 60
        },
        {
          "id": "c3",
          "name": "CityWorks EV Pool - Central",
          "x": 50.0,
          "y": 55.0,
          "demand": 50
        },
        {
          "id": "c4",
          "name": "RideWave Staging Lot 3",
          "x": 45.0,
          "y": 47.0,
          "demand": 45
        },
        {
          "id": "c5",
          "name": "MedLink Mobile Clinic Fleet",
          "x": 58.0,
          "y": 53.0,
          "demand": 65
        },
        {
          "id": "c6",
          "name": "AeroCourier Sort Center - Core",
          "x": 52.0,
          "y": 44.0,
          "demand": 70
        },
        {
          "id": "c7",
          "name": "NorthRidge HOA Shuttle",
          "x": 48.0,
          "y": 88.0,
          "demand": 60
        },
        {
          "id": "c8",
          "name": "PolarGrocer DC - North",
          "x": 54.0,
          "y": 92.0,
          "demand": 55
        },
        {
          "id": "c9",
          "name": "UniLoop Campus Transit",
          "x": 44.0,
          "y": 80.0,
          "demand": 50
        },
        {
          "id": "c10",
          "name": "SummitEV Fleet Services",
          "x": 60.0,
          "y": 86.0,
          "demand": 70
        },
        {
          "id": "c11",
          "name": "Evergreen School District Buses",
          "x": 38.0,
          "y": 90.0,
          "demand": 65
        },
        {
          "id": "c12",
          "name": "HarborHaul Drayage - East",
          "x": 82.0,
          "y": 60.0,
          "demand": 45
        },
        {
          "id": "c13",
          "name": "ByteDrop Same-Day Hub",
          "x": 88.0,
          "y": 54.0,
          "demand": 60
        },
        {
          "id": "c14",
          "name": "Sunset Mall Valet EVs",
          "x": 78.0,
          "y": 50.0,
          "demand": 55
        },
        {
          "id": "c15",
          "name": "EastGate Delivery Cooperative",
          "x": 90.0,
          "y": 62.0,
          "demand": 70
        },
        {
          "id": "c16",
          "name": "CivicLight Utility Patrol EVs",
          "x": 76.0,
          "y": 66.0,
          "demand": 50
        },
        {
          "id": "c17",
          "name": "Westhaven Maintenance Yard",
          "x": 20.0,
          "y": 60.0,
          "demand": 45
        },
        {
          "id": "c18",
          "name": "Brickline Food Logistics - West",
          "x": 12.0,
          "y": 54.0,
          "demand": 65
        },
        {
          "id": "c19",
          "name": "MetroWaste Electric Collection",
          "x": 26.0,
          "y": 50.0,
          "demand": 55
        },
        {
          "id": "c20",
          "name": "WestLoop Rideshare Overflow",
          "x": 16.0,
          "y": 70.0,
          "demand": 60
        },
        {
          "id": "c21",
          "name": "SouthPort EV Taxi Stand",
          "x": 54.0,
          "y": 22.0,
          "demand": 70
        },
        {
          "id": "c22",
          "name": "Riverbend Last-Mile Depot",
          "x": 48.0,
          "y": 12.0,
          "demand": 65
        },
        {
          "id": "c23",
          "name": "ForgeWorks Service Vans - South",
          "x": 60.0,
          "y": 16.0,
          "demand": 55
        },
        {
          "id": "c24",
          "name": "CanyonCare Home Health Fleet",
          "x": 42.0,
          "y": 20.0,
          "demand": 60
        },
        {
          "id": "c25",
          "name": "TransitFlex Night Shuttle",
          "x": 56.0,
          "y": 8.0,
          "demand": 50
        },
        {
          "id": "c26",
          "name": "LoopRing Suburban Depot",
          "x": 70.0,
          "y": 34.0,
          "demand": 45
        },
        {
          "id": "c27",
          "name": "Skybridge Facilities EVs",
          "x": 66.0,
          "y": 26.0,
          "demand": 60
        },
        {
          "id": "c28",
          "name": "Midtown Trades EV Vans",
          "x": 34.0,
          "y": 66.0,
          "demand": 55
        },
        {
          "id": "c29",
          "name": "QuarryPoint Service Area",
          "x": 28.0,
          "y": 38.0,
          "demand": 50
        },
        {
          "id": "c30",
          "name": "Crescent Events Logistics",
          "x": 62.0,
          "y": 58.0,
          "demand": 60
        }
      ],
      "facilities": [
        {
          "id": "f1",
          "name": "VoltRoute Legacy Depot - Central DCFC",
          "x": 48.0,
          "y": 48.0,
          "capacity": 450,
          "fixed_cost": 155.0,
          "variable_cost_per_unit": 2.6
        },
        {
          "id": "f2",
          "name": "ChargeBudget Downtown Micro-Site (150kW)",
          "x": 52.0,
          "y": 52.0,
          "capacity": 220,
          "fixed_cost": 120.0,
          "variable_cost_per_unit": 3.3
        },
        {
          "id": "f3",
          "name": "Riverside Pop-Up Chargers (temporary)",
          "x": 56.0,
          "y": 46.0,
          "capacity": 220,
          "fixed_cost": 125.0,
          "variable_cost_per_unit": 3.2
        },
        {
          "id": "f4",
          "name": "EonGrid North Service Yard (350kW bank)",
          "x": 50.0,
          "y": 82.0,
          "capacity": 330,
          "fixed_cost": 140.0,
          "variable_cost_per_unit": 2.4
        },
        {
          "id": "f5",
          "name": "Uptown Budget Micro-Site (150kW)",
          "x": 46.0,
          "y": 60.0,
          "capacity": 240,
          "fixed_cost": 130.0,
          "variable_cost_per_unit": 3.1
        },
        {
          "id": "f6",
          "name": "Interstate I-7 SuperHub (ultra-fast)",
          "x": 78.0,
          "y": 22.0,
          "capacity": 360,
          "fixed_cost": 200.0,
          "variable_cost_per_unit": 1.9
        },
        {
          "id": "f7",
          "name": "WestMall Parking-Canopy Chargers",
          "x": 18.0,
          "y": 58.0,
          "capacity": 260,
          "fixed_cost": 135.0,
          "variable_cost_per_unit": 2.7
        },
        {
          "id": "f8",
          "name": "HarborFast DC Megacharge Plaza",
          "x": 84.0,
          "y": 56.0,
          "capacity": 340,
          "fixed_cost": 125.0,
          "variable_cost_per_unit": 2.0
        },
        {
          "id": "f9",
          "name": "DesertEdge Utility-Corridor Site",
          "x": 90.0,
          "y": 14.0,
          "capacity": 300,
          "fixed_cost": 175.0,
          "variable_cost_per_unit": 2.1
        },
        {
          "id": "f10",
          "name": "Southport Park-and-Ride Charging Lot",
          "x": 52.0,
          "y": 18.0,
          "capacity": 280,
          "fixed_cost": 145.0,
          "variable_cost_per_unit": 2.5
        },
        {
          "id": "f11",
          "name": "GridLink East Substation Interconnect (DCFC-ready)",
          "x": 72.0,
          "y": 72.0,
          "capacity": 380,
          "fixed_cost": 115.0,
          "variable_cost_per_unit": 2.2
        },
        {
          "id": "f12",
          "name": "Community Solar-Lot Chargers (NW)",
          "x": 30.0,
          "y": 88.0,
          "capacity": 250,
          "fixed_cost": 150.0,
          "variable_cost_per_unit": 2.8
        },
        {
          "id": "f13",
          "name": "Airport Express FastCharge (premium tariff)",
          "x": 90.0,
          "y": 70.0,
          "capacity": 320,
          "fixed_cost": 190.0,
          "variable_cost_per_unit": 1.8
        },
        {
          "id": "f14",
          "name": "Network Operations Center + Spares Warehouse (NOC)",
          "x": 60.0,
          "y": 40.0,
          "capacity": 360,
          "fixed_cost": 140.0,
          "variable_cost_per_unit": 2.3
        }
      ]
    },
    "constraints": [
      {
        "description": "VoltRoute must keep the Central legacy depot operational to satisfy an existing municipal charging SLA.",
        "_spec": {
          "fn": "must_open",
          "args": [
            "f1"
          ]
        }
      },
      {
        "description": "EonGrid requires the North Service Yard site to be energized as part of a grid-upgrade cost-share agreement.",
        "_spec": {
          "fn": "must_open",
          "args": [
            "f4"
          ]
        }
      },
      {
        "description": "The Riverside pop-up site is unavailable this year due to floodplain remediation and cannot be opened.",
        "_spec": {
          "fn": "must_close",
          "args": [
            "f3"
          ]
        }
      },
      {
        "description": "Open at least 5 facilities to provide redundancy for charger downtime and transformer maintenance events.",
        "_spec": {
          "fn": "min_facilities",
          "args": [
            5
          ]
        }
      },
      {
        "description": "Each customer depot/fleet must be assigned to exactly one charging facility (no splitting demand).",
        "_spec": {
          "fn": "single_source",
          "args": []
        }
      },
      {
        "description": "If HarborFast DC Megacharge Plaza is opened, GridLink East Substation Interconnect must also be opened (interconnect dependency).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f8",
            "f11"
          ]
        }
      },
      {
        "description": "If GridLink East Substation Interconnect is opened, the NOC & Spares Warehouse must also be opened (monitoring, spares, and response-time requirement).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f11",
            "f14"
          ]
        }
      },
      {
        "description": "If Interstate I-7 SuperHub is opened, the DesertEdge Utility-Corridor Site must also be opened (paired utility corridor lease).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f6",
            "f9"
          ]
        }
      },
      {
        "description": "If DesertEdge Utility-Corridor Site is opened, the NOC & Spares Warehouse must also be opened (remote operations and on-call parts staging).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f9",
            "f14"
          ]
        }
      },
      {
        "description": "Airport Express FastCharge and the NOC & Spares Warehouse cannot both be opened due to a mutually exclusive telecom backhaul contract.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f13",
              "f14"
            ]
          ]
        }
      },
      {
        "description": "EonGrid North Service Yard and the Community Solar-Lot site cannot both be opened due to exclusive utility territory agreements.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f4",
              "f12"
            ]
          ]
        }
      },
      {
        "description": "ChargeBudget Downtown Micro-Site and Uptown Budget Micro-Site cannot both be opened because they require the same constrained low-voltage feeder upgrade.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f2",
              "f5"
            ]
          ]
        }
      },
      {
        "description": "Interstate I-7 SuperHub and HarborFast DC Megacharge Plaza cannot both be opened this year because the utility will fund only one major 10MW service upgrade.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f6",
              "f8"
            ]
          ]
        }
      },
      {
        "description": "WestMall Parking-Canopy and Southport Park-and-Ride cannot both be opened due to a single shared parking concession contract.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f7",
              "f10"
            ]
          ]
        }
      },
      {
        "description": "GridLink East Substation Interconnect and Community Solar-Lot site cannot both be opened due to interconnection queue conflicts at the same feeder head.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f11",
              "f12"
            ]
          ]
        }
      },
      {
        "description": "Total fixed opening costs of the chosen facilities must not exceed the annual capex budget of 675 (in $k-equivalent units).",
        "_spec": {
          "fn": "budget_limit",
          "args": [
            675
          ]
        }
      }
    ],
    "instruction": "Minimize total cost = (sum of fixed_cost for opened facilities) + (sum over customers of demand * variable_cost_per_unit of the serving facility), subject to: (1) each customer is assigned to exactly one open facility, (2) each customer must be served by a facility within max_distance = 42, (3) facility capacity cannot be exceeded by assigned customer demand, (4) open at least 5 and at most 6 facilities, and (5) satisfy all listed logical (conditional/exclusion) and budget constraints.",
    "analysis": {
      "anti_patterns": [
        "Greedy by lowest fixed-cost facilities fails: the 6 cheapest sites do not have enough combined capacity to cover total demand, so the solution dead-ends after \u2018cheap\u2019 choices.",
        "Greedy by lowest variable-cost facility fails: the Airport Express site looks best on variable cost but is mutually exclusive with the NOC; opening it blocks the substation/NOC dependency chain needed for high-capacity East coverage under the tight budget.",
        "Treating conditionals independently fails: opening HarborFast seems like one decision, but it silently forces GridLink and then the NOC, consuming almost all remaining budget and facility-count slack."
      ],
      "strategic_insights": [
        "Look for forced bundles created by conditional chains (e.g., f8 \u2192 f11 \u2192 f14) and evaluate them as a single composite option against budget, facility-count, and capacity tightness.",
        "Because demand is tight relative to the best 6-facility capacity, feasibility hinges on selecting at least one high-capacity node while avoiding exclusions that remove \u2018required-by-chain\u2019 infrastructure.",
        "Counterintuitive optimum: accepting an extra fixed-cost burden (mandatory operations + monitoring) can still minimize total cost by enabling lower variable-cost service for the largest-demand East and mixed-corridor customers without violating the distance limit."
      ],
      "expected_difficulty": "Expert: Tight capacity with single-sourcing, a binding budget set below the naive \u2018open the cheapest max_facilities\u2019 plan, and interacting conditional chains + exclusions that create decoy low-variable and low-fixed options. Solving requires global reasoning over bundled openings, not local greedy choices."
    },
    "feasible": true,
    "solution": {
      "domain": "facility_location",
      "open_facilities": [
        "f1",
        "f4",
        "f8",
        "f11",
        "f14"
      ],
      "assignments": [
        {
          "customer_id": "c1",
          "facility_id": "f1",
          "amount": 55.0
        },
        {
          "customer_id": "c2",
          "facility_id": "f1",
          "amount": 60.0
        },
        {
          "customer_id": "c3",
          "facility_id": "f1",
          "amount": 50.0
        },
        {
          "customer_id": "c4",
          "facility_id": "f1",
          "amount": 45.0
        },
        {
          "customer_id": "c5",
          "facility_id": "f11",
          "amount": 65.0
        },
        {
          "customer_id": "c6",
          "facility_id": "f1",
          "amount": 70.0
        },
        {
          "customer_id": "c7",
          "facility_id": "f11",
          "amount": 60.0
        },
        {
          "customer_id": "c8",
          "facility_id": "f4",
          "amount": 55.0
        },
        {
          "customer_id": "c9",
          "facility_id": "f4",
          "amount": 50.0
        },
        {
          "customer_id": "c10",
          "facility_id": "f11",
          "amount": 70.0
        },
        {
          "customer_id": "c11",
          "facility_id": "f4",
          "amount": 65.0
        },
        {
          "customer_id": "c12",
          "facility_id": "f8",
          "amount": 45.0
        },
        {
          "customer_id": "c13",
          "facility_id": "f8",
          "amount": 60.0
        },
        {
          "customer_id": "c14",
          "facility_id": "f8",
          "amount": 55.0
        },
        {
          "customer_id": "c15",
          "facility_id": "f8",
          "amount": 70.0
        },
        {
          "customer_id": "c16",
          "facility_id": "f11",
          "amount": 50.0
        },
        {
          "customer_id": "c17",
          "facility_id": "f4",
          "amount": 45.0
        },
        {
          "customer_id": "c18",
          "facility_id": "f1",
          "amount": 65.0
        },
        {
          "customer_id": "c19",
          "facility_id": "f1",
          "amount": 55.0
        },
        {
          "customer_id": "c20",
          "facility_id": "f4",
          "amount": 60.0
        },
        {
          "customer_id": "c21",
          "facility_id": "f14",
          "amount": 70.0
        },
        {
          "customer_id": "c22",
          "facility_id": "f14",
          "amount": 65.0
        },
        {
          "customer_id": "c23",
          "facility_id": "f14",
          "amount": 55.0
        },
        {
          "customer_id": "c24",
          "facility_id": "f14",
          "amount": 60.0
        },
        {
          "customer_id": "c25",
          "facility_id": "f14",
          "amount": 50.0
        },
        {
          "customer_id": "c26",
          "facility_id": "f8",
          "amount": 45.0
        },
        {
          "customer_id": "c27",
          "facility_id": "f14",
          "amount": 60.0
        },
        {
          "customer_id": "c28",
          "facility_id": "f4",
          "amount": 55.0
        },
        {
          "customer_id": "c29",
          "facility_id": "f1",
          "amount": 50.0
        },
        {
          "customer_id": "c30",
          "facility_id": "f11",
          "amount": 60.0
        }
      ],
      "total_fixed_cost": 675.0,
      "total_variable_cost": 4011.0,
      "total_distance": 30489.29
    }
  },
  {
    "id": "facility_location_a0aa43f1",
    "difficulty": "expert",
    "scenario": {
      "domain": "facility_location",
      "description": "Riverview Unified School District is redesigning its K-12 school meal production network (central commissaries, prep hubs, and distribution/reheat centers). Each school must be supplied by exactly one open facility, within a maximum travel distance, while respecting kitchen throughput (capacity) and minimizing total cost (facility fixed costs + per-meal variable costs).",
      "max_facilities": 6,
      "max_distance": 45.0,
      "customers": [
        {
          "id": "c1",
          "name": "Maple Grove Elementary",
          "x": 18.0,
          "y": 62.0,
          "demand": 95
        },
        {
          "id": "c2",
          "name": "Canyon View Elementary",
          "x": 24.0,
          "y": 55.0,
          "demand": 110
        },
        {
          "id": "c3",
          "name": "Oak Ridge Elementary",
          "x": 28.0,
          "y": 42.0,
          "demand": 110
        },
        {
          "id": "c4",
          "name": "Lincoln Middle School",
          "x": 22.0,
          "y": 35.0,
          "demand": 105
        },
        {
          "id": "c5",
          "name": "Sunset Valley K-8",
          "x": 30.0,
          "y": 70.0,
          "demand": 105
        },
        {
          "id": "c6",
          "name": "Riverview High School",
          "x": 45.0,
          "y": 58.0,
          "demand": 100
        },
        {
          "id": "c7",
          "name": "Cedar Creek Elementary",
          "x": 52.0,
          "y": 66.0,
          "demand": 120
        },
        {
          "id": "c8",
          "name": "Brookside Elementary",
          "x": 58.0,
          "y": 52.0,
          "demand": 95
        },
        {
          "id": "c9",
          "name": "Pioneer Middle School",
          "x": 62.0,
          "y": 44.0,
          "demand": 110
        },
        {
          "id": "c10",
          "name": "Hawthorne Elementary",
          "x": 72.0,
          "y": 58.0,
          "demand": 105
        },
        {
          "id": "c11",
          "name": "Meadow Park Elementary",
          "x": 84.0,
          "y": 52.0,
          "demand": 100
        },
        {
          "id": "c12",
          "name": "Eastgate Middle School",
          "x": 78.0,
          "y": 40.0,
          "demand": 115
        },
        {
          "id": "c13",
          "name": "Desert Bloom Elementary",
          "x": 86.0,
          "y": 34.0,
          "demand": 90
        },
        {
          "id": "c14",
          "name": "Summit Ridge High School",
          "x": 68.0,
          "y": 76.0,
          "demand": 130
        },
        {
          "id": "c15",
          "name": "Northview Middle School",
          "x": 52.0,
          "y": 86.0,
          "demand": 125
        },
        {
          "id": "c16",
          "name": "Evergreen Elementary",
          "x": 44.0,
          "y": 80.0,
          "demand": 110
        },
        {
          "id": "c17",
          "name": "Skyline Elementary",
          "x": 32.0,
          "y": 78.0,
          "demand": 105
        },
        {
          "id": "c18",
          "name": "Heritage K-8 Academy",
          "x": 40.0,
          "y": 50.0,
          "demand": 95
        },
        {
          "id": "c19",
          "name": "Lakeside Elementary",
          "x": 60.0,
          "y": 28.0,
          "demand": 120
        },
        {
          "id": "c20",
          "name": "Southridge Middle School",
          "x": 50.0,
          "y": 16.0,
          "demand": 100
        },
        {
          "id": "c21",
          "name": "Vermilion Elementary",
          "x": 36.0,
          "y": 22.0,
          "demand": 120
        },
        {
          "id": "c22",
          "name": "Roosevelt High School",
          "x": 24.0,
          "y": 26.0,
          "demand": 115
        },
        {
          "id": "c23",
          "name": "Willow Creek Elementary",
          "x": 66.0,
          "y": 18.0,
          "demand": 100
        },
        {
          "id": "c24",
          "name": "Juniper Elementary",
          "x": 80.0,
          "y": 22.0,
          "demand": 90
        },
        {
          "id": "c25",
          "name": "Coral Sands K-8",
          "x": 88.0,
          "y": 60.0,
          "demand": 110
        },
        {
          "id": "c26",
          "name": "Parkside Elementary",
          "x": 56.0,
          "y": 40.0,
          "demand": 105
        },
        {
          "id": "c27",
          "name": "Downtown Magnet School",
          "x": 46.0,
          "y": 46.0,
          "demand": 95
        },
        {
          "id": "c28",
          "name": "Harbor View Elementary",
          "x": 70.0,
          "y": 66.0,
          "demand": 110
        },
        {
          "id": "c29",
          "name": "Aspen Grove Elementary",
          "x": 60.0,
          "y": 84.0,
          "demand": 120
        },
        {
          "id": "c30",
          "name": "Stonebrook Elementary",
          "x": 14.0,
          "y": 44.0,
          "demand": 90
        }
      ],
      "facilities": [
        {
          "id": "f1",
          "name": "Downtown Central Production Campus (New Build Option)",
          "x": 52.0,
          "y": 52.0,
          "capacity": 660,
          "fixed_cost": 62000.0,
          "variable_cost_per_unit": 1.8
        },
        {
          "id": "f2",
          "name": "Old Home-Ec Satellite Kitchen (Roosevelt HS)",
          "x": 35.0,
          "y": 60.0,
          "capacity": 30,
          "fixed_cost": 44000.0,
          "variable_cost_per_unit": 3.4
        },
        {
          "id": "f3",
          "name": "Northside Fresh Prep Hub",
          "x": 50.0,
          "y": 85.0,
          "capacity": 700,
          "fixed_cost": 48000.0,
          "variable_cost_per_unit": 2.2
        },
        {
          "id": "f4",
          "name": "West Distribution & Reheat Center",
          "x": 20.0,
          "y": 50.0,
          "capacity": 590,
          "fixed_cost": 46000.0,
          "variable_cost_per_unit": 2.1
        },
        {
          "id": "f5",
          "name": "East Fresh Prep Hub",
          "x": 80.0,
          "y": 50.0,
          "capacity": 620,
          "fixed_cost": 50000.0,
          "variable_cost_per_unit": 1.9
        },
        {
          "id": "f6",
          "name": "South Late-Run Dispatch Kitchen",
          "x": 50.0,
          "y": 20.0,
          "capacity": 670,
          "fixed_cost": 49000.0,
          "variable_cost_per_unit": 2.0
        },
        {
          "id": "f7",
          "name": "Riverside Mobile Serving Unit Bay (Temporary)",
          "x": 65.0,
          "y": 35.0,
          "capacity": 25,
          "fixed_cost": 45000.0,
          "variable_cost_per_unit": 3.6
        },
        {
          "id": "f8",
          "name": "Charter Co-op Kitchen (Pine Tech)",
          "x": 78.0,
          "y": 78.0,
          "capacity": 25,
          "fixed_cost": 51000.0,
          "variable_cost_per_unit": 1.6
        },
        {
          "id": "f9",
          "name": "Northeast Cold Storage Annex",
          "x": 70.0,
          "y": 82.0,
          "capacity": 35,
          "fixed_cost": 47000.0,
          "variable_cost_per_unit": 2.7
        },
        {
          "id": "f10",
          "name": "Automated Cook-Chill Plant (Proposed)",
          "x": 10.0,
          "y": 60.0,
          "capacity": 35,
          "fixed_cost": 60000.0,
          "variable_cost_per_unit": 1.5
        },
        {
          "id": "f11",
          "name": "Leased Commissary (Industrial Park)",
          "x": 55.0,
          "y": 10.0,
          "capacity": 40,
          "fixed_cost": 58000.0,
          "variable_cost_per_unit": 2.3
        },
        {
          "id": "f12",
          "name": "Existing Central Commissary (District-Owned)",
          "x": 50.0,
          "y": 50.0,
          "capacity": 680,
          "fixed_cost": 45000.0,
          "variable_cost_per_unit": 2.4
        },
        {
          "id": "f13",
          "name": "Food Safety Training & QA Center (Light Production)",
          "x": 40.0,
          "y": 78.0,
          "capacity": 25,
          "fixed_cost": 53000.0,
          "variable_cost_per_unit": 2.6
        },
        {
          "id": "f14",
          "name": "Eastside Shared-Use Culinary Lab (Light Production)",
          "x": 92.0,
          "y": 55.0,
          "capacity": 30,
          "fixed_cost": 55000.0,
          "variable_cost_per_unit": 2.2
        }
      ]
    },
    "constraints": [
      {
        "description": "The district-owned central commissary must remain operational to meet existing vendor and inspection commitments.",
        "_spec": {
          "fn": "must_open",
          "args": [
            "f12"
          ]
        }
      },
      {
        "description": "Each school must be supplied by exactly one facility to simplify HACCP accountability and delivery routing.",
        "_spec": {
          "fn": "single_source",
          "args": []
        }
      },
      {
        "description": "Open at least 4 facilities to ensure redundancy for snow days, equipment downtime, and menu-cycle peaks.",
        "_spec": {
          "fn": "min_facilities",
          "args": [
            4
          ]
        }
      },
      {
        "description": "Capital authorization: total fixed (opening) costs of all opened facilities must not exceed $240,000.",
        "_spec": {
          "fn": "budget_limit",
          "args": [
            240000
          ]
        }
      },
      {
        "description": "Union jurisdiction boundary: the West Distribution & Reheat Center and the Automated Cook-Chill Plant cannot both operate simultaneously.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f4",
              "f10"
            ]
          ]
        }
      },
      {
        "description": "Cold-storage lease exclusivity: the South Late-Run Dispatch Kitchen and the Leased Commissary cannot both operate in the same plan year.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f6",
              "f11"
            ]
          ]
        }
      },
      {
        "description": "Planned building modernization: Northside Fresh Prep Hub and the Charter Co-op Kitchen cannot both be opened this year (shared contractor schedule).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f3",
              "f8"
            ]
          ]
        }
      },
      {
        "description": "Traffic and curb-space mitigation: East Fresh Prep Hub and the Eastside Shared-Use Culinary Lab cannot both be opened (adjacent arterial corridor study).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f5",
              "f14"
            ]
          ]
        }
      },
      {
        "description": "Food safety governance: if the Northside Fresh Prep Hub is opened, the Existing Central Commissary must also be opened for QA oversight.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f3",
            "f12"
          ]
        }
      },
      {
        "description": "Distribution staging policy: if the Existing Central Commissary is opened, the West Distribution & Reheat Center must also be opened for cross-dock staging.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f12",
            "f4"
          ]
        }
      },
      {
        "description": "Late-run coverage: if the East Fresh Prep Hub is opened, the South Late-Run Dispatch Kitchen must also be opened to cover afternoon delivery waves.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f5",
            "f6"
          ]
        }
      },
      {
        "description": "Maintenance and fleet policy: if the South Late-Run Dispatch Kitchen is opened, the West Distribution & Reheat Center must also be opened (shared mechanics).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f6",
            "f4"
          ]
        }
      },
      {
        "description": "Compliance integration: if the Automated Cook-Chill Plant is opened, the Northside Fresh Prep Hub must also be opened (required validation kitchen).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f10",
            "f3"
          ]
        }
      },
      {
        "description": "Menu standardization: if the Charter Co-op Kitchen is opened, the East Fresh Prep Hub must also be opened (shared recipe/ingredient standards).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f8",
            "f5"
          ]
        }
      },
      {
        "description": "The Riverside Mobile Serving Unit Bay is out of service due to a floodplain remediation order and must remain closed.",
        "_spec": {
          "fn": "must_close",
          "args": [
            "f7"
          ]
        }
      },
      {
        "description": "The Food Safety Training & QA Center is scheduled for a state audit; it must remain closed to avoid production activity during the audit window.",
        "_spec": {
          "fn": "must_close",
          "args": [
            "f13"
          ]
        }
      }
    ],
    "instruction": "Minimize total cost (fixed facility opening costs plus variable per-meal service costs) while ensuring all schools are served within the maximum distance limit, respecting facility capacity constraints, the single-source requirement, the facility-count constraints, and all logical (conditional/exclusion) and budget constraints.",
    "analysis": {
      "anti_patterns": [
        "Greedy selection by lowest variable cost fails because some low-variable sites are mutually exclusive with required facilities or trigger conditional chains that blow the budget.",
        "Greedy selection by lowest fixed cost fails because several low-fixed facilities have tiny capacity and cannot cover district-wide demand within the max-facilities limit.",
        "Picking facilities solely to satisfy distance coverage can create cascading conditional requirements (e.g., opening an east hub forces a south hub, which forces the west center), turning an apparently feasible set into a budget or max-facilities violation."
      ],
      "strategic_insights": [
        "Start by satisfying the forced implications (must_open plus conditionals) to compute the \u2018closure\u2019 of any candidate set; evaluate feasibility only after closure under conditionals.",
        "Because capacities are tight (~130% total system capacity vs demand), the plan must include multiple high-capacity hubs; excluding one high-capacity hub often forces adding two smaller sites, which is impossible under max_facilities and budget simultaneously.",
        "Counterintuitive optimum is likely to include a slightly higher-variable but low fixed-cost high-capacity hub, because it avoids opening an extra facility to meet capacity, which would add a large fixed cost and may violate the budget."
      ],
      "expected_difficulty": "Expert: tight capacity-to-demand ratio, strict distance bound, max-facilities cap, and interacting conditional chains with exclusions create non-obvious feasibility \u2018closures\u2019 that defeat naive greedy heuristics."
    },
    "feasible": true,
    "solution": {
      "domain": "facility_location",
      "open_facilities": [
        "f3",
        "f4",
        "f5",
        "f6",
        "f12"
      ],
      "assignments": [
        {
          "customer_id": "c1",
          "facility_id": "f4",
          "amount": 95.0
        },
        {
          "customer_id": "c2",
          "facility_id": "f4",
          "amount": 110.0
        },
        {
          "customer_id": "c3",
          "facility_id": "f6",
          "amount": 110.0
        },
        {
          "customer_id": "c4",
          "facility_id": "f4",
          "amount": 105.0
        },
        {
          "customer_id": "c5",
          "facility_id": "f3",
          "amount": 105.0
        },
        {
          "customer_id": "c6",
          "facility_id": "f12",
          "amount": 100.0
        },
        {
          "customer_id": "c7",
          "facility_id": "f12",
          "amount": 120.0
        },
        {
          "customer_id": "c8",
          "facility_id": "f12",
          "amount": 95.0
        },
        {
          "customer_id": "c9",
          "facility_id": "f12",
          "amount": 110.0
        },
        {
          "customer_id": "c10",
          "facility_id": "f5",
          "amount": 105.0
        },
        {
          "customer_id": "c11",
          "facility_id": "f5",
          "amount": 100.0
        },
        {
          "customer_id": "c12",
          "facility_id": "f5",
          "amount": 115.0
        },
        {
          "customer_id": "c13",
          "facility_id": "f5",
          "amount": 90.0
        },
        {
          "customer_id": "c14",
          "facility_id": "f3",
          "amount": 130.0
        },
        {
          "customer_id": "c15",
          "facility_id": "f3",
          "amount": 125.0
        },
        {
          "customer_id": "c16",
          "facility_id": "f3",
          "amount": 110.0
        },
        {
          "customer_id": "c17",
          "facility_id": "f3",
          "amount": 105.0
        },
        {
          "customer_id": "c18",
          "facility_id": "f4",
          "amount": 95.0
        },
        {
          "customer_id": "c19",
          "facility_id": "f6",
          "amount": 120.0
        },
        {
          "customer_id": "c20",
          "facility_id": "f6",
          "amount": 100.0
        },
        {
          "customer_id": "c21",
          "facility_id": "f6",
          "amount": 120.0
        },
        {
          "customer_id": "c22",
          "facility_id": "f6",
          "amount": 115.0
        },
        {
          "customer_id": "c23",
          "facility_id": "f6",
          "amount": 100.0
        },
        {
          "customer_id": "c24",
          "facility_id": "f5",
          "amount": 90.0
        },
        {
          "customer_id": "c25",
          "facility_id": "f5",
          "amount": 110.0
        },
        {
          "customer_id": "c26",
          "facility_id": "f12",
          "amount": 105.0
        },
        {
          "customer_id": "c27",
          "facility_id": "f4",
          "amount": 95.0
        },
        {
          "customer_id": "c28",
          "facility_id": "f12",
          "amount": 110.0
        },
        {
          "customer_id": "c29",
          "facility_id": "f3",
          "amount": 120.0
        },
        {
          "customer_id": "c30",
          "facility_id": "f4",
          "amount": 90.0
        }
      ],
      "total_fixed_cost": 238000.0,
      "total_variable_cost": 6793.0,
      "total_distance": 47416.63
    }
  },
  {
    "id": "facility_location_017dd11c",
    "difficulty": "expert",
    "scenario": {
      "domain": "facility_location",
      "description": "A metropolitan public library system is redesigning its branch network (full branches plus small kiosks/annexes) to serve neighborhood patron-demand zones. The city requires each zone to be assigned to exactly one open branch/kiosk within a maximum travel distance, while respecting branch capacities and minimizing total annualized cost (fixed facility operating costs + per-patron service costs).",
      "max_facilities": 6,
      "max_distance": 42.0,
      "customers": [
        {
          "id": "c1",
          "name": "Maplewood Apartments Patron Zone",
          "x": 8.0,
          "y": 52.0,
          "demand": 60
        },
        {
          "id": "c2",
          "name": "Pinecrest Senior Center Patron Zone",
          "x": 12.0,
          "y": 58.0,
          "demand": 55
        },
        {
          "id": "c3",
          "name": "Northgate High School Patron Zone",
          "x": 22.0,
          "y": 54.0,
          "demand": 40
        },
        {
          "id": "c4",
          "name": "Lakeside Park Patron Zone",
          "x": 18.0,
          "y": 47.0,
          "demand": 50
        },
        {
          "id": "c5",
          "name": "Riverbend Townhomes Patron Zone",
          "x": 6.0,
          "y": 40.0,
          "demand": 45
        },
        {
          "id": "c6",
          "name": "Westbrook Community Center Patron Zone",
          "x": 3.0,
          "y": 28.0,
          "demand": 35
        },
        {
          "id": "c7",
          "name": "Old Town Lofts Patron Zone",
          "x": 16.0,
          "y": 32.0,
          "demand": 50
        },
        {
          "id": "c8",
          "name": "City Hall Plaza Patron Zone",
          "x": 22.0,
          "y": 26.0,
          "demand": 40
        },
        {
          "id": "c9",
          "name": "Downtown Arts District Patron Zone",
          "x": 28.0,
          "y": 24.0,
          "demand": 55
        },
        {
          "id": "c10",
          "name": "University Quarter Patron Zone",
          "x": 34.0,
          "y": 38.0,
          "demand": 35
        },
        {
          "id": "c11",
          "name": "East Market Row Patron Zone",
          "x": 48.0,
          "y": 34.0,
          "demand": 70
        },
        {
          "id": "c12",
          "name": "Tech Corridor Offices Patron Zone",
          "x": 56.0,
          "y": 28.0,
          "demand": 55
        },
        {
          "id": "c13",
          "name": "Cedarview Elementary Patron Zone",
          "x": 52.0,
          "y": 18.0,
          "demand": 45
        },
        {
          "id": "c14",
          "name": "Harborview Condos Patron Zone",
          "x": 42.0,
          "y": 16.0,
          "demand": 60
        },
        {
          "id": "c15",
          "name": "Southgate Mall Patron Zone",
          "x": 30.0,
          "y": 10.0,
          "demand": 50
        },
        {
          "id": "c16",
          "name": "Hilltop Clinic Patron Zone",
          "x": 14.0,
          "y": 14.0,
          "demand": 45
        },
        {
          "id": "c17",
          "name": "West Industrial Breakroom Cluster Patron Zone",
          "x": 4.0,
          "y": 12.0,
          "demand": 65
        },
        {
          "id": "c18",
          "name": "Elm Street Homes Patron Zone",
          "x": 10.0,
          "y": 6.0,
          "demand": 60
        },
        {
          "id": "c19",
          "name": "Garden District Patron Zone",
          "x": 18.0,
          "y": 8.0,
          "demand": 50
        },
        {
          "id": "c20",
          "name": "Midtown Transit Hub Patron Zone",
          "x": 24.0,
          "y": 18.0,
          "demand": 55
        },
        {
          "id": "c21",
          "name": "Eastside Apartments Patron Zone",
          "x": 58.0,
          "y": 40.0,
          "demand": 45
        },
        {
          "id": "c22",
          "name": "Creekstone Homes Patron Zone",
          "x": 50.0,
          "y": 46.0,
          "demand": 40
        },
        {
          "id": "c23",
          "name": "Airport Hotels Patron Zone",
          "x": 60.0,
          "y": 52.0,
          "demand": 60
        },
        {
          "id": "c24",
          "name": "Stadium Neighborhood Patron Zone",
          "x": 32.0,
          "y": 58.0,
          "demand": 45
        },
        {
          "id": "c25",
          "name": "East River Estates Patron Zone",
          "x": 46.0,
          "y": 52.0,
          "demand": 55
        },
        {
          "id": "c26",
          "name": "South Ridge Homes Patron Zone",
          "x": 24.0,
          "y": 2.0,
          "demand": 50
        },
        {
          "id": "c27",
          "name": "West Docks Patron Zone",
          "x": 0.0,
          "y": 6.0,
          "demand": 35
        },
        {
          "id": "c28",
          "name": "Industrial Park Patron Zone",
          "x": 58.0,
          "y": 8.0,
          "demand": 70
        },
        {
          "id": "c29",
          "name": "Quarry Road Patron Zone",
          "x": 38.0,
          "y": 6.0,
          "demand": 40
        },
        {
          "id": "c30",
          "name": "Sunrise Subdivision Patron Zone",
          "x": 40.0,
          "y": 54.0,
          "demand": 55
        }
      ],
      "facilities": [
        {
          "id": "f1",
          "name": "Grand Oak Central Library (Full Branch)",
          "x": 20.0,
          "y": 20.0,
          "capacity": 650,
          "fixed_cost": 130000.0,
          "variable_cost_per_unit": 2.7
        },
        {
          "id": "f2",
          "name": "Riverside Reading Room (Kiosk)",
          "x": 5.0,
          "y": 35.0,
          "capacity": 25,
          "fixed_cost": 95000.0,
          "variable_cost_per_unit": 4.4
        },
        {
          "id": "f3",
          "name": "Southgate Bookmobile Hub (Service Depot)",
          "x": 28.0,
          "y": 5.0,
          "capacity": 20,
          "fixed_cost": 98000.0,
          "variable_cost_per_unit": 4.6
        },
        {
          "id": "f4",
          "name": "Downtown Express Hold-Locker (Micro Site)",
          "x": 24.0,
          "y": 22.0,
          "capacity": 30,
          "fixed_cost": 100000.0,
          "variable_cost_per_unit": 4.1
        },
        {
          "id": "f5",
          "name": "North Hills Branch Library (Full Branch)",
          "x": 15.0,
          "y": 55.0,
          "capacity": 520,
          "fixed_cost": 110000.0,
          "variable_cost_per_unit": 2.2
        },
        {
          "id": "f6",
          "name": "West End Study Pod (Kiosk)",
          "x": 0.0,
          "y": 15.0,
          "capacity": 15,
          "fixed_cost": 102000.0,
          "variable_cost_per_unit": 5.0
        },
        {
          "id": "f7",
          "name": "Civic Center Pop-up Library (Seasonal Site)",
          "x": 12.0,
          "y": 48.0,
          "capacity": 20,
          "fixed_cost": 105000.0,
          "variable_cost_per_unit": 4.3
        },
        {
          "id": "f8",
          "name": "Eastside Innovation Library (Full Branch)",
          "x": 55.0,
          "y": 30.0,
          "capacity": 550,
          "fixed_cost": 115000.0,
          "variable_cost_per_unit": 1.9
        },
        {
          "id": "f9",
          "name": "Harbor Children's Corner (Kiosk)",
          "x": 8.0,
          "y": 10.0,
          "capacity": 15,
          "fixed_cost": 108000.0,
          "variable_cost_per_unit": 5.2
        },
        {
          "id": "f10",
          "name": "Community College Micro-Branch (Partner Site)",
          "x": 40.0,
          "y": 40.0,
          "capacity": 30,
          "fixed_cost": 120000.0,
          "variable_cost_per_unit": 1.8
        },
        {
          "id": "f11",
          "name": "City Museum Reading Annex (Annex)",
          "x": 48.0,
          "y": 18.0,
          "capacity": 25,
          "fixed_cost": 125000.0,
          "variable_cost_per_unit": 4.0
        },
        {
          "id": "f12",
          "name": "Airport Quiet Library (Mini Branch)",
          "x": 60.0,
          "y": 55.0,
          "capacity": 30,
          "fixed_cost": 135000.0,
          "variable_cost_per_unit": 3.8
        },
        {
          "id": "f13",
          "name": "Stadium Event Kiosk (Pop-up)",
          "x": 33.0,
          "y": 60.0,
          "capacity": 15,
          "fixed_cost": 90000.0,
          "variable_cost_per_unit": 6.0
        },
        {
          "id": "f14",
          "name": "Industrial Park Digital Kiosk (Worksite Site)",
          "x": 58.0,
          "y": 8.0,
          "capacity": 20,
          "fixed_cost": 112000.0,
          "variable_cost_per_unit": 4.2
        }
      ]
    },
    "constraints": [
      {
        "description": "Grand Oak Central Library must remain open because it houses the city archives and interlibrary loan sorting.",
        "_spec": {
          "fn": "must_open",
          "args": [
            "f1"
          ]
        }
      },
      {
        "description": "Open at least 4 sites to satisfy the city council's redundancy and equitable-access policy.",
        "_spec": {
          "fn": "min_facilities",
          "args": [
            4
          ]
        }
      },
      {
        "description": "Each patron-demand zone must be served by exactly one open library site (no splitting a zone across multiple sites).",
        "_spec": {
          "fn": "single_source",
          "args": []
        }
      },
      {
        "description": "Annual fixed operating costs for all opened sites must not exceed the approved budget cap.",
        "_spec": {
          "fn": "budget_limit",
          "args": [
            505000
          ]
        }
      },
      {
        "description": "Eastside Innovation Library and Airport Quiet Library cannot both be operated this year due to a shared, capacity-limited IT backbone contract.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f8",
              "f12"
            ]
          ]
        }
      },
      {
        "description": "If the Community College Micro-Branch is opened, the City Museum Reading Annex must also be opened (joint programming agreement).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f10",
            "f11"
          ]
        }
      },
      {
        "description": "If the City Museum Reading Annex is opened, the Airport Quiet Library must also be opened (shared security and staffing package).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f11",
            "f12"
          ]
        }
      },
      {
        "description": "North Hills Branch Library and the Civic Center Pop-up cannot both operate (they compete for the same leased parking footprint).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f5",
              "f7"
            ]
          ]
        }
      },
      {
        "description": "If the Stadium Event Kiosk is opened, the West End Study Pod must also be opened (mobile shelving and event-storage requirement).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f13",
            "f6"
          ]
        }
      },
      {
        "description": "If the West End Study Pod is opened, the Riverside Reading Room must also be opened (shared supervision model).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f6",
            "f2"
          ]
        }
      },
      {
        "description": "Riverside Reading Room and Harbor Children's Corner cannot both be opened due to floodplain mitigation rules limiting operations to one waterfront site.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f2",
              "f9"
            ]
          ]
        }
      },
      {
        "description": "Harbor Children's Corner must remain closed this year due to seawall construction at the pier.",
        "_spec": {
          "fn": "must_close",
          "args": [
            "f9"
          ]
        }
      },
      {
        "description": "Southgate Bookmobile Hub and Industrial Park Digital Kiosk cannot both operate because they require the same specialized roaming tech-support team.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f3",
              "f14"
            ]
          ]
        }
      },
      {
        "description": "If the Downtown Express Hold-Locker is opened, the Southgate Bookmobile Hub must also be opened (daily replenishment route requirement).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f4",
            "f3"
          ]
        }
      },
      {
        "description": "Southgate Bookmobile Hub and Eastside Innovation Library cannot both be opened due to an exclusivity clause in the contracted delivery-route vendor's service territory.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f3",
              "f8"
            ]
          ]
        }
      },
      {
        "description": "Riverside Reading Room and Southgate Bookmobile Hub cannot both be opened due to mutually exclusive curb-access permits for their loading zones.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f2",
              "f3"
            ]
          ]
        }
      }
    ],
    "instruction": "Minimize total cost (sum of fixed costs for opened library sites plus variable per-patron service costs for assigned demand) while serving every customer zone within max_distance = 42.0 of its assigned open facility, respecting facility capacity limits, the max_facilities limit, and all listed constraints (including conditional and exclusion rules).",
    "analysis": {
      "anti_patterns": [
        "Opening the lowest fixed-cost sites first (e.g., pop-ups/kiosks) fails because their small capacities force additional openings that either exceed max_facilities or blow the budget.",
        "Chasing the lowest variable-cost site (e.g., the Community College Micro-Branch) is a decoy: opening it triggers a conditional chain that forces the Airport site, which is mutually exclusive with the Eastside full branch.",
        "Treating exclusions independently leads to dead ends: selecting a site to satisfy one neighborhood can silently block the only cost-effective way to cover another neighborhood due to chained conditionals plus exclusions."
      ],
      "strategic_insights": [
        "Work backwards from conditional chains: avoid choices that force f12 if f8 is needed for economical high-demand east-side coverage.",
        "Use capacity as a global coupling constraint: one 'cheap' kiosk that looks like a minor add-on can force opening another site (via conditionals) and crowd out a high-capacity/low-variable branch under the budget cap.",
        "The cost-minimizing solution is likely counterintuitive: paying higher fixed costs for a major branch can reduce variable cost across multiple high-demand zones enough to beat a kiosk-heavy plan."
      ],
      "expected_difficulty": "Expert: requires simultaneously balancing tight fixed-cost budget pressure, single-source assignment, capacity feasibility, max-distance feasibility, and two interacting conditional chains that conflict with exclusions\u2014creating multiple greedy traps and cascading constraint interactions."
    },
    "feasible": true,
    "solution": {
      "domain": "facility_location",
      "open_facilities": [
        "f1",
        "f2",
        "f5",
        "f8"
      ],
      "assignments": [
        {
          "customer_id": "c1",
          "facility_id": "f5",
          "amount": 60.0
        },
        {
          "customer_id": "c2",
          "facility_id": "f5",
          "amount": 55.0
        },
        {
          "customer_id": "c3",
          "facility_id": "f5",
          "amount": 40.0
        },
        {
          "customer_id": "c4",
          "facility_id": "f5",
          "amount": 50.0
        },
        {
          "customer_id": "c5",
          "facility_id": "f5",
          "amount": 45.0
        },
        {
          "customer_id": "c6",
          "facility_id": "f1",
          "amount": 35.0
        },
        {
          "customer_id": "c7",
          "facility_id": "f1",
          "amount": 50.0
        },
        {
          "customer_id": "c8",
          "facility_id": "f1",
          "amount": 40.0
        },
        {
          "customer_id": "c9",
          "facility_id": "f1",
          "amount": 55.0
        },
        {
          "customer_id": "c10",
          "facility_id": "f8",
          "amount": 35.0
        },
        {
          "customer_id": "c11",
          "facility_id": "f8",
          "amount": 70.0
        },
        {
          "customer_id": "c12",
          "facility_id": "f8",
          "amount": 55.0
        },
        {
          "customer_id": "c13",
          "facility_id": "f8",
          "amount": 45.0
        },
        {
          "customer_id": "c14",
          "facility_id": "f8",
          "amount": 60.0
        },
        {
          "customer_id": "c15",
          "facility_id": "f1",
          "amount": 50.0
        },
        {
          "customer_id": "c16",
          "facility_id": "f1",
          "amount": 45.0
        },
        {
          "customer_id": "c17",
          "facility_id": "f1",
          "amount": 65.0
        },
        {
          "customer_id": "c18",
          "facility_id": "f1",
          "amount": 60.0
        },
        {
          "customer_id": "c19",
          "facility_id": "f1",
          "amount": 50.0
        },
        {
          "customer_id": "c20",
          "facility_id": "f1",
          "amount": 55.0
        },
        {
          "customer_id": "c21",
          "facility_id": "f8",
          "amount": 45.0
        },
        {
          "customer_id": "c22",
          "facility_id": "f8",
          "amount": 40.0
        },
        {
          "customer_id": "c23",
          "facility_id": "f8",
          "amount": 60.0
        },
        {
          "customer_id": "c24",
          "facility_id": "f5",
          "amount": 45.0
        },
        {
          "customer_id": "c25",
          "facility_id": "f8",
          "amount": 55.0
        },
        {
          "customer_id": "c26",
          "facility_id": "f1",
          "amount": 50.0
        },
        {
          "customer_id": "c27",
          "facility_id": "f1",
          "amount": 35.0
        },
        {
          "customer_id": "c28",
          "facility_id": "f8",
          "amount": 70.0
        },
        {
          "customer_id": "c29",
          "facility_id": "f1",
          "amount": 40.0
        },
        {
          "customer_id": "c30",
          "facility_id": "f5",
          "amount": 55.0
        }
      ],
      "total_fixed_cost": 450000.0,
      "total_variable_cost": 3487.5,
      "total_distance": 21734.54
    }
  },
  {
    "id": "facility_location_c768ce60",
    "difficulty": "expert",
    "scenario": {
      "domain": "facility_location",
      "description": "PulseForge Fitness (a boutique fitness center franchise) is expanding its network of clubs, micro-studios, and performance centers across Metrovale. The goal is to decide which sites to open and how to assign each corporate-wellness and residential partner account (customers) to an open site, minimizing total fixed opening costs plus per-member (variable) servicing costs, while meeting distance and capacity limits.",
      "max_facilities": 6,
      "max_distance": 45.0,
      "customers": [
        {
          "id": "c1",
          "name": "CoreTower Offices (Corporate Wellness)",
          "x": 42.0,
          "y": 44.0,
          "demand": 95
        },
        {
          "id": "c2",
          "name": "Riverfront Lofts (Resident Memberships)",
          "x": 38.0,
          "y": 41.0,
          "demand": 80
        },
        {
          "id": "c3",
          "name": "Union Station Retail Staff (Shift Passes)",
          "x": 45.0,
          "y": 39.0,
          "demand": 90
        },
        {
          "id": "c4",
          "name": "Civic Center Employees (Wellness Stipends)",
          "x": 41.0,
          "y": 37.0,
          "demand": 85
        },
        {
          "id": "c5",
          "name": "Arts District Residents (Class Packs)",
          "x": 48.0,
          "y": 45.0,
          "demand": 70
        },
        {
          "id": "c6",
          "name": "Market Street Hotels (Guest Fitness Access)",
          "x": 36.0,
          "y": 46.0,
          "demand": 75
        },
        {
          "id": "c7",
          "name": "PulseSpin Partner Studio Members",
          "x": 44.0,
          "y": 48.0,
          "demand": 85
        },
        {
          "id": "c8",
          "name": "TechHub Campus (Employer Plan)",
          "x": 50.0,
          "y": 42.0,
          "demand": 80
        },
        {
          "id": "c9",
          "name": "Westgate Mall Staff (Retail Worker Plan)",
          "x": 20.0,
          "y": 47.0,
          "demand": 90
        },
        {
          "id": "c10",
          "name": "Bayside Breweries Shift Crew",
          "x": 16.0,
          "y": 43.0,
          "demand": 70
        },
        {
          "id": "c11",
          "name": "Harborview Condos (HOA Partnership)",
          "x": 22.0,
          "y": 52.0,
          "demand": 95
        },
        {
          "id": "c12",
          "name": "OldTown Fire Station (Responder Fitness)",
          "x": 14.0,
          "y": 49.0,
          "demand": 80
        },
        {
          "id": "c13",
          "name": "Crescent Park Residents (Neighborhood Plan)",
          "x": 24.0,
          "y": 44.0,
          "demand": 85
        },
        {
          "id": "c14",
          "name": "Eastline University Admin Staff",
          "x": 70.0,
          "y": 44.0,
          "demand": 70
        },
        {
          "id": "c15",
          "name": "Summit Medical Center Nurses (Night/Day Shifts)",
          "x": 76.0,
          "y": 40.0,
          "demand": 90
        },
        {
          "id": "c16",
          "name": "Canyon Business Park (Corporate Contract)",
          "x": 68.0,
          "y": 36.0,
          "demand": 75
        },
        {
          "id": "c17",
          "name": "Sunrise Apartments (Resident Add-on)",
          "x": 74.0,
          "y": 50.0,
          "demand": 100
        },
        {
          "id": "c18",
          "name": "Metro Airport Crew Center (Airline Staff)",
          "x": 80.0,
          "y": 34.0,
          "demand": 85
        },
        {
          "id": "c19",
          "name": "Greenway Logistics Staff (Warehouse Wellness)",
          "x": 66.0,
          "y": 52.0,
          "demand": 90
        },
        {
          "id": "c20",
          "name": "Southport Marina Staff (Seasonal Workers)",
          "x": 52.0,
          "y": 12.0,
          "demand": 75
        },
        {
          "id": "c21",
          "name": "Seabreeze Resorts (Hospitality Employees)",
          "x": 60.0,
          "y": 8.0,
          "demand": 80
        },
        {
          "id": "c22",
          "name": "Docklands Warehouse Team (Shift Passes)",
          "x": 58.0,
          "y": 18.0,
          "demand": 70
        },
        {
          "id": "c23",
          "name": "Lakeshore Community College (Student/Staff)",
          "x": 44.0,
          "y": 9.0,
          "demand": 85
        },
        {
          "id": "c24",
          "name": "Harbor Health Clinic Staff (Wellness Partnership)",
          "x": 40.0,
          "y": 16.0,
          "demand": 80
        },
        {
          "id": "c25",
          "name": "Northgate High Teachers (After-school)",
          "x": 40.0,
          "y": 78.0,
          "demand": 75
        },
        {
          "id": "c26",
          "name": "Hillside Estates HOA (Resident Memberships)",
          "x": 50.0,
          "y": 82.0,
          "demand": 70
        },
        {
          "id": "c27",
          "name": "Pinecrest Research Lab (Corporate Contract)",
          "x": 46.0,
          "y": 72.0,
          "demand": 90
        },
        {
          "id": "c28",
          "name": "Ridgeview Corporate Park (Employer Plan)",
          "x": 86.0,
          "y": 76.0,
          "demand": 80
        },
        {
          "id": "c29",
          "name": "Cedar Ridge Apartments (Resident Class Packs)",
          "x": 92.0,
          "y": 84.0,
          "demand": 75
        },
        {
          "id": "c30",
          "name": "Trailhead Outdoor Retail Staff (Shift Passes)",
          "x": 84.0,
          "y": 88.0,
          "demand": 70
        }
      ],
      "facilities": [
        {
          "id": "f1",
          "name": "PulseForge Flagship Club - Downtown",
          "x": 42.0,
          "y": 42.0,
          "capacity": 900,
          "fixed_cost": 19000.0,
          "variable_cost_per_unit": 1.9
        },
        {
          "id": "f2",
          "name": "FlexSaver Club - Westside (Discount)",
          "x": 18.0,
          "y": 45.0,
          "capacity": 650,
          "fixed_cost": 16500.0,
          "variable_cost_per_unit": 3.2
        },
        {
          "id": "f3",
          "name": "FlexSaver Club - Eastside (Discount)",
          "x": 72.0,
          "y": 38.0,
          "capacity": 650,
          "fixed_cost": 16800.0,
          "variable_cost_per_unit": 3.1
        },
        {
          "id": "f4",
          "name": "PeakPerformance Club - North Hills (Premium)",
          "x": 48.0,
          "y": 78.0,
          "capacity": 500,
          "fixed_cost": 20100.0,
          "variable_cost_per_unit": 1.7
        },
        {
          "id": "f5",
          "name": "HarborLite Studio - South Bay (Value)",
          "x": 46.0,
          "y": 12.0,
          "capacity": 700,
          "fixed_cost": 17200.0,
          "variable_cost_per_unit": 2.0
        },
        {
          "id": "f6",
          "name": "RecoverX Lounge - Mid-West (Add-on Site)",
          "x": 25.0,
          "y": 60.0,
          "capacity": 500,
          "fixed_cost": 23000.0,
          "variable_cost_per_unit": 2.8
        },
        {
          "id": "f7",
          "name": "PulseForge Performance Center - East Premium",
          "x": 78.0,
          "y": 55.0,
          "capacity": 500,
          "fixed_cost": 27000.0,
          "variable_cost_per_unit": 1.4
        },
        {
          "id": "f8",
          "name": "RhythmRide Micro-Spin - Northeast Ridge (Micro)",
          "x": 88.0,
          "y": 78.0,
          "capacity": 350,
          "fixed_cost": 30500.0,
          "variable_cost_per_unit": 1.6
        },
        {
          "id": "f9",
          "name": "StrengthLab Performance Hub - Southport (Premium)",
          "x": 60.0,
          "y": 18.0,
          "capacity": 600,
          "fixed_cost": 25500.0,
          "variable_cost_per_unit": 1.6
        },
        {
          "id": "f10",
          "name": "YogaPods Micro-Studio - Midtown (Micro)",
          "x": 40.0,
          "y": 55.0,
          "capacity": 450,
          "fixed_cost": 16000.0,
          "variable_cost_per_unit": 3.3
        },
        {
          "id": "f11",
          "name": "CoachCraft Academy - North Gate (Training)",
          "x": 35.0,
          "y": 85.0,
          "capacity": 450,
          "fixed_cost": 28500.0,
          "variable_cost_per_unit": 2.4
        },
        {
          "id": "f12",
          "name": "Boardwalk Pop-up Studio - Shoreline (Seasonal)",
          "x": 30.0,
          "y": 5.0,
          "capacity": 400,
          "fixed_cost": 21500.0,
          "variable_cost_per_unit": 2.2
        },
        {
          "id": "f13",
          "name": "Northeast Support Hub - Cedar Ridge (Premium)",
          "x": 90.0,
          "y": 65.0,
          "capacity": 600,
          "fixed_cost": 29500.0,
          "variable_cost_per_unit": 1.5
        },
        {
          "id": "f14",
          "name": "East Logistics + Parking Annex (Support)",
          "x": 65.0,
          "y": 25.0,
          "capacity": 550,
          "fixed_cost": 24000.0,
          "variable_cost_per_unit": 2.9
        }
      ]
    },
    "constraints": [
      {
        "description": "The Downtown Flagship Club is already under a long-term lease and must be operated.",
        "_spec": {
          "fn": "must_open",
          "args": [
            "f1"
          ]
        }
      },
      {
        "description": "Open at least 4 sites to provide schedule redundancy and class-type variety across the city.",
        "_spec": {
          "fn": "min_facilities",
          "args": [
            4
          ]
        }
      },
      {
        "description": "Each customer account must be served by exactly one open site (single contract + consistent member experience).",
        "_spec": {
          "fn": "single_source",
          "args": []
        }
      },
      {
        "description": "Total fixed opening costs must not exceed the annual expansion budget cap.",
        "_spec": {
          "fn": "budget_limit",
          "args": [
            89000
          ]
        }
      },
      {
        "description": "Brand positioning rule: the two discount-format FlexSaver clubs cannot both operate at the same time.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f2",
              "f3"
            ]
          ]
        }
      },
      {
        "description": "If FlexSaver Westside opens, RecoverX Lounge must also open to handle high injury-risk volume (required service bundle).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f2",
            "f6"
          ]
        }
      },
      {
        "description": "If RecoverX Lounge opens, CoachCraft Academy must also open to supply certified coaches for the recovery programs.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f6",
            "f11"
          ]
        }
      },
      {
        "description": "Marketing conflict: CoachCraft Academy and StrengthLab Southport cannot both be open this year (single coaching team constraint).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f11",
              "f9"
            ]
          ]
        }
      },
      {
        "description": "If FlexSaver Eastside opens, the East Logistics + Parking Annex must also open (required due to limited parking at the discount site).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f3",
            "f14"
          ]
        }
      },
      {
        "description": "Zoning restriction: the East Logistics + Parking Annex and the East Premium Performance Center cannot both be open.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f14",
              "f7"
            ]
          ]
        }
      },
      {
        "description": "If the Northeast micro-spin site opens, the Northeast Support Hub must also open (operations + staffing backbone).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f8",
            "f13"
          ]
        }
      },
      {
        "description": "If the Northeast Support Hub opens, PeakPerformance North Hills must also open (instructor pipeline + specialty equipment).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f13",
            "f4"
          ]
        }
      },
      {
        "description": "Equipment fleet constraint: PeakPerformance North Hills and HarborLite South Bay cannot both be open (shared specialized reformers).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f4",
              "f5"
            ]
          ]
        }
      },
      {
        "description": "If the Midtown YogaPods micro-studio opens, it must be administratively tied to the Downtown Flagship (co-managed).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f10",
            "f1"
          ]
        }
      },
      {
        "description": "Boardwalk Pop-up Studio is closed for renovation during the planning horizon and cannot be opened.",
        "_spec": {
          "fn": "must_close",
          "args": [
            "f12"
          ]
        }
      },
      {
        "description": "Territory coordination: FlexSaver Westside and StrengthLab Southport cannot both run simultaneously (single field sales team for those districts).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f2",
              "f9"
            ]
          ]
        }
      }
    ],
    "instruction": "Minimize total cost (sum of fixed costs for opened facilities + variable service costs per unit of demand assigned) while serving every customer within the scenario max_distance, respecting facility capacity limits, obeying single-source assignment, staying within the fixed-cost budget_limit, and satisfying all logical constraints (must_open/must_close, min_facilities, exclusions, and conditional chains).",
    "analysis": {
      "anti_patterns": [
        "Opening the lowest fixed-cost sites first (e.g., micro-studios and discount clubs) backfires because conditionals force additional openings that consume the budget and/or trigger exclusions that remove a needed high-capacity or low-variable-cost site.",
        "Treating constraints as independent fails: choosing a discount club can silently force a training academy, which then forbids a key south-side hub, causing a late-stage capacity/coverage scramble.",
        "Selecting a facility that looks perfect for a geographic pocket (e.g., Northeast micro-site) can be a decoy: conditional dependencies make it infeasible under the budget even though it appears locally optimal on distance and variable cost."
      ],
      "strategic_insights": [
        "Expect the optimal plan to use at least one higher fixed-cost, low variable-cost performance center to serve dense demand economically; minimizing fixed cost alone is typically dominated by variable-cost savings at scale.",
        "Watch conditional\u2192conditional chains that collide with exclusions; feasibility and cost can hinge on avoiding a single trigger facility that forces an expensive cascade.",
        "Use geography to decide which site should absorb \u201cswing\u201d customers near boundaries (e.g., downtown/south and east/northeast) to avoid exceeding capacity at the must-open flagship without opening extra sites."
      ],
      "expected_difficulty": "Expert: tight budget relative to the cheapest feasible-looking combinations, interacting conditional chains with exclusions, and capacity/distance tradeoffs that punish greedy fixed-cost minimization and require multi-step lookahead."
    },
    "feasible": true,
    "solution": {
      "domain": "facility_location",
      "open_facilities": [
        "f1",
        "f5",
        "f7",
        "f10"
      ],
      "assignments": [
        {
          "customer_id": "c1",
          "facility_id": "f1",
          "amount": 95.0
        },
        {
          "customer_id": "c2",
          "facility_id": "f1",
          "amount": 80.0
        },
        {
          "customer_id": "c3",
          "facility_id": "f1",
          "amount": 90.0
        },
        {
          "customer_id": "c4",
          "facility_id": "f1",
          "amount": 85.0
        },
        {
          "customer_id": "c5",
          "facility_id": "f1",
          "amount": 70.0
        },
        {
          "customer_id": "c6",
          "facility_id": "f1",
          "amount": 75.0
        },
        {
          "customer_id": "c7",
          "facility_id": "f1",
          "amount": 85.0
        },
        {
          "customer_id": "c8",
          "facility_id": "f1",
          "amount": 80.0
        },
        {
          "customer_id": "c9",
          "facility_id": "f10",
          "amount": 90.0
        },
        {
          "customer_id": "c10",
          "facility_id": "f1",
          "amount": 70.0
        },
        {
          "customer_id": "c11",
          "facility_id": "f10",
          "amount": 95.0
        },
        {
          "customer_id": "c12",
          "facility_id": "f1",
          "amount": 80.0
        },
        {
          "customer_id": "c13",
          "facility_id": "f1",
          "amount": 85.0
        },
        {
          "customer_id": "c14",
          "facility_id": "f7",
          "amount": 70.0
        },
        {
          "customer_id": "c15",
          "facility_id": "f5",
          "amount": 90.0
        },
        {
          "customer_id": "c16",
          "facility_id": "f5",
          "amount": 75.0
        },
        {
          "customer_id": "c17",
          "facility_id": "f7",
          "amount": 100.0
        },
        {
          "customer_id": "c18",
          "facility_id": "f5",
          "amount": 85.0
        },
        {
          "customer_id": "c19",
          "facility_id": "f7",
          "amount": 90.0
        },
        {
          "customer_id": "c20",
          "facility_id": "f5",
          "amount": 75.0
        },
        {
          "customer_id": "c21",
          "facility_id": "f5",
          "amount": 80.0
        },
        {
          "customer_id": "c22",
          "facility_id": "f5",
          "amount": 70.0
        },
        {
          "customer_id": "c23",
          "facility_id": "f5",
          "amount": 85.0
        },
        {
          "customer_id": "c24",
          "facility_id": "f5",
          "amount": 80.0
        },
        {
          "customer_id": "c25",
          "facility_id": "f10",
          "amount": 75.0
        },
        {
          "customer_id": "c26",
          "facility_id": "f10",
          "amount": 70.0
        },
        {
          "customer_id": "c27",
          "facility_id": "f10",
          "amount": 90.0
        },
        {
          "customer_id": "c28",
          "facility_id": "f7",
          "amount": 80.0
        },
        {
          "customer_id": "c29",
          "facility_id": "f7",
          "amount": 75.0
        },
        {
          "customer_id": "c30",
          "facility_id": "f7",
          "amount": 70.0
        }
      ],
      "total_fixed_cost": 79200.0,
      "total_variable_cost": 5045.5,
      "total_distance": 40509.17
    }
  },
  {
    "id": "facility_location_8fdd60ec",
    "difficulty": "expert",
    "scenario": {
      "domain": "facility_location",
      "description": "FuelMart is redesigning its gas station + convenience store replenishment network across the Metrovale region. Each demand point represents a retail micro-market (fuel + c-store inventory) that must be served from exactly one opened station\u2019s backroom/yard. The company must choose which stations to keep open as replenishment-capable facilities to minimize total fixed + per-unit handling/transfer cost, while respecting capacity limits and a strict maximum service distance.",
      "max_facilities": 6,
      "max_distance": 45.0,
      "customers": [
        {
          "id": "c1",
          "name": "Pine Ridge Commuter Corridor",
          "x": 30.0,
          "y": 92.0,
          "demand": 70
        },
        {
          "id": "c2",
          "name": "Northcrest Suburban C-Stores",
          "x": 20.0,
          "y": 85.0,
          "demand": 60
        },
        {
          "id": "c3",
          "name": "Hilltop Fleet Card Users",
          "x": 40.0,
          "y": 88.0,
          "demand": 55
        },
        {
          "id": "c4",
          "name": "Maple Heights Morning Rush Zone",
          "x": 25.0,
          "y": 78.0,
          "demand": 65
        },
        {
          "id": "c5",
          "name": "Lakeside Weekend Travel Strip",
          "x": 45.0,
          "y": 80.0,
          "demand": 50
        },
        {
          "id": "c6",
          "name": "Cedar Junction Convenience Cluster",
          "x": 15.0,
          "y": 72.0,
          "demand": 45
        },
        {
          "id": "c7",
          "name": "Northline Highway On-Ramps",
          "x": 35.0,
          "y": 75.0,
          "demand": 80
        },
        {
          "id": "c8",
          "name": "Downtown Office Fuel Demand",
          "x": 50.0,
          "y": 55.0,
          "demand": 75
        },
        {
          "id": "c9",
          "name": "Midtown Grocery + Fuel Bundle",
          "x": 32.0,
          "y": 48.0,
          "demand": 70
        },
        {
          "id": "c10",
          "name": "Warehouse District Diesel Demand",
          "x": 28.0,
          "y": 35.0,
          "demand": 65
        },
        {
          "id": "c11",
          "name": "Stadium Event-Day Convenience Pull",
          "x": 45.0,
          "y": 30.0,
          "demand": 55
        },
        {
          "id": "c12",
          "name": "Old Town Neighborhood Fill-Ups",
          "x": 38.0,
          "y": 42.0,
          "demand": 60
        },
        {
          "id": "c13",
          "name": "Riverside Mixed Retail Strip",
          "x": 55.0,
          "y": 40.0,
          "demand": 50
        },
        {
          "id": "c14",
          "name": "Medical Campus 24/7 C-Store Needs",
          "x": 47.0,
          "y": 47.0,
          "demand": 45
        },
        {
          "id": "c15",
          "name": "South Midtown Commuter Pumps",
          "x": 30.0,
          "y": 25.0,
          "demand": 60
        },
        {
          "id": "c16",
          "name": "Eastgate Shopping + Fuel Hub",
          "x": 78.0,
          "y": 62.0,
          "demand": 55
        },
        {
          "id": "c17",
          "name": "Tech Park Fleet Accounts",
          "x": 92.0,
          "y": 60.0,
          "demand": 65
        },
        {
          "id": "c18",
          "name": "Elm Industrial Park Diesel Pull",
          "x": 100.0,
          "y": 52.0,
          "demand": 55
        },
        {
          "id": "c19",
          "name": "I-17 Eastbound Service Plazas",
          "x": 110.0,
          "y": 45.0,
          "demand": 60
        },
        {
          "id": "c20",
          "name": "East Ridge Commuter Corridor",
          "x": 118.0,
          "y": 58.0,
          "demand": 50
        },
        {
          "id": "c21",
          "name": "Civic Center Convenience Demand",
          "x": 105.0,
          "y": 35.0,
          "demand": 45
        },
        {
          "id": "c22",
          "name": "South-East Wholesale Clubs Fuel",
          "x": 95.0,
          "y": 30.0,
          "demand": 55
        },
        {
          "id": "c23",
          "name": "Far East Retail Pocket",
          "x": 120.0,
          "y": 45.0,
          "demand": 40
        },
        {
          "id": "c24",
          "name": "Southbelt Logistics Diesel Lane",
          "x": 55.0,
          "y": 18.0,
          "demand": 60
        },
        {
          "id": "c25",
          "name": "Sunset Boulevard C-Store Run",
          "x": 70.0,
          "y": 15.0,
          "demand": 55
        },
        {
          "id": "c26",
          "name": "Creekside Neighborhood Fill-Ups",
          "x": 62.0,
          "y": -3.0,
          "demand": 50
        },
        {
          "id": "c27",
          "name": "South Terminal Commuter Pumps",
          "x": 48.0,
          "y": 8.0,
          "demand": 45
        },
        {
          "id": "c28",
          "name": "Outlet Mall Gas Demand",
          "x": 75.0,
          "y": 5.0,
          "demand": 55
        },
        {
          "id": "c29",
          "name": "SE Beltway Night Shift Demand",
          "x": 82.0,
          "y": 12.0,
          "demand": 40
        },
        {
          "id": "c30",
          "name": "Truck-Friendly Rest Pull-Offs",
          "x": 90.0,
          "y": 10.0,
          "demand": 65
        }
      ],
      "facilities": [
        {
          "id": "f1",
          "name": "FuelMart Hub \u2014 Downtown Terminal",
          "x": 40.0,
          "y": 40.0,
          "capacity": 540,
          "fixed_cost": 14000.0,
          "variable_cost_per_unit": 1.9
        },
        {
          "id": "f2",
          "name": "QuickPump \u2014 Central Kiosk Site",
          "x": 42.0,
          "y": 38.0,
          "capacity": 300,
          "fixed_cost": 10500.0,
          "variable_cost_per_unit": 2.6
        },
        {
          "id": "f3",
          "name": "EconoFill \u2014 Central Kiosk Site",
          "x": 38.0,
          "y": 42.0,
          "capacity": 320,
          "fixed_cost": 10800.0,
          "variable_cost_per_unit": 2.5
        },
        {
          "id": "f4",
          "name": "FuelMart \u2014 Northside Plaza",
          "x": 35.0,
          "y": 70.0,
          "capacity": 520,
          "fixed_cost": 11200.0,
          "variable_cost_per_unit": 2.1
        },
        {
          "id": "f5",
          "name": "FuelMart \u2014 Eastgate Superstop",
          "x": 85.0,
          "y": 45.0,
          "capacity": 560,
          "fixed_cost": 11800.0,
          "variable_cost_per_unit": 1.8
        },
        {
          "id": "f6",
          "name": "ValueStop \u2014 Midtown Corner",
          "x": 45.0,
          "y": 35.0,
          "capacity": 400,
          "fixed_cost": 12000.0,
          "variable_cost_per_unit": 2.4
        },
        {
          "id": "f7",
          "name": "ValueStop \u2014 Airport Spur",
          "x": 70.0,
          "y": 20.0,
          "capacity": 430,
          "fixed_cost": 12500.0,
          "variable_cost_per_unit": 2.2
        },
        {
          "id": "f8",
          "name": "FuelMart \u2014 Southbelt Cross-Dock",
          "x": 60.0,
          "y": 5.0,
          "capacity": 590,
          "fixed_cost": 15000.0,
          "variable_cost_per_unit": 1.7
        },
        {
          "id": "f9",
          "name": "HighwayStar \u2014 West/North Connector",
          "x": 10.0,
          "y": 75.0,
          "capacity": 450,
          "fixed_cost": 16000.0,
          "variable_cost_per_unit": 2.0
        },
        {
          "id": "f10",
          "name": "RiverRun \u2014 Northeast Express",
          "x": 95.0,
          "y": 70.0,
          "capacity": 480,
          "fixed_cost": 13000.0,
          "variable_cost_per_unit": 2.3
        },
        {
          "id": "f11",
          "name": "RiverRun \u2014 East Loop Megasite",
          "x": 115.0,
          "y": 55.0,
          "capacity": 650,
          "fixed_cost": 18000.0,
          "variable_cost_per_unit": 1.6
        },
        {
          "id": "f12",
          "name": "CanyonFuel \u2014 Southwest Outpost",
          "x": 10.0,
          "y": 10.0,
          "capacity": 350,
          "fixed_cost": 15500.0,
          "variable_cost_per_unit": 2.7
        },
        {
          "id": "f13",
          "name": "BargainGas \u2014 Brownfield Special (Too Good To Be True)",
          "x": 55.0,
          "y": 55.0,
          "capacity": 700,
          "fixed_cost": 9000.0,
          "variable_cost_per_unit": 1.5
        },
        {
          "id": "f14",
          "name": "FleetCard Depot \u2014 East Industrial Yard",
          "x": 120.0,
          "y": 20.0,
          "capacity": 600,
          "fixed_cost": 17000.0,
          "variable_cost_per_unit": 1.9
        }
      ]
    },
    "constraints": [
      {
        "description": "FuelMart Hub \u2014 Downtown Terminal must remain open due to existing supply contracts and brand commitments.",
        "_spec": {
          "fn": "must_open",
          "args": [
            "f1"
          ]
        }
      },
      {
        "description": "Open at least 4 replenishment-capable stations to maintain redundancy for fuel deliveries and c-store inventory staging.",
        "_spec": {
          "fn": "min_facilities",
          "args": [
            4
          ]
        }
      },
      {
        "description": "Each demand zone must be served by exactly one opened facility (no split shipments).",
        "_spec": {
          "fn": "single_source",
          "args": []
        }
      },
      {
        "description": "Total fixed opening costs must not exceed the capital plan for this redesign.",
        "_spec": {
          "fn": "budget_limit",
          "args": [
            59000
          ]
        }
      },
      {
        "description": "BargainGas \u2014 Brownfield Special is shut down for environmental remediation; it cannot be used despite very attractive costs.",
        "_spec": {
          "fn": "must_close",
          "args": [
            "f13"
          ]
        }
      },
      {
        "description": "QuickPump \u2014 Central Kiosk Site and EconoFill \u2014 Central Kiosk Site cannot both operate due to exclusive property covenants in the shared lot.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f2",
              "f3"
            ]
          ]
        }
      },
      {
        "description": "If QuickPump \u2014 Central Kiosk Site is opened, EconoFill \u2014 Central Kiosk Site must also be opened to share mandated on-site compliance staffing (a subtle trap given the exclusion).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f2",
            "f3"
          ]
        }
      },
      {
        "description": "If EconoFill \u2014 Central Kiosk Site is opened, QuickPump \u2014 Central Kiosk Site must also be opened (the two were designed as a paired kiosk build-out).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f3",
            "f2"
          ]
        }
      },
      {
        "description": "If FuelMart \u2014 Northside Plaza is opened, FuelMart \u2014 Eastgate Superstop must also be opened to provide overnight pallet staging for the northern route.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f4",
            "f5"
          ]
        }
      },
      {
        "description": "If FuelMart \u2014 Eastgate Superstop is opened, FuelMart \u2014 Southbelt Cross-Dock must also be opened because Eastgate\u2019s backroom is being repurposed and requires Southbelt as the primary cross-dock.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f5",
            "f8"
          ]
        }
      },
      {
        "description": "FuelMart \u2014 Southbelt Cross-Dock and RiverRun \u2014 Northeast Express cannot both be opened due to conflicting wholesale distributor exclusivity terms.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f8",
              "f10"
            ]
          ]
        }
      },
      {
        "description": "If RiverRun \u2014 Northeast Express is opened, RiverRun \u2014 East Loop Megasite must also be opened to support its refrigeration and backhaul requirements.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f10",
            "f11"
          ]
        }
      },
      {
        "description": "If RiverRun \u2014 East Loop Megasite is opened, FleetCard Depot \u2014 East Industrial Yard must also be opened for fleet-card reconciliation and bulk diesel storage.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f11",
            "f14"
          ]
        }
      },
      {
        "description": "FuelMart \u2014 Eastgate Superstop and RiverRun \u2014 East Loop Megasite cannot both be opened due to competing loyalty/point-of-sale platforms in the same catchment.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f5",
              "f11"
            ]
          ]
        }
      },
      {
        "description": "ValueStop \u2014 Midtown Corner and ValueStop \u2014 Airport Spur cannot both be opened due to municipal zoning limits on illuminated canopy signage (single-permit rule).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f6",
              "f7"
            ]
          ]
        }
      },
      {
        "description": "If ValueStop \u2014 Midtown Corner is opened, ValueStop \u2014 Airport Spur must also be opened to meet the landlord\u2019s multi-site lease clause (creating a cascading feasibility issue with the exclusion).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f6",
            "f7"
          ]
        }
      }
    ],
    "instruction": "Minimize total cost (fixed facility opening costs plus variable per-unit service costs) while ensuring every customer demand zone is assigned to exactly one opened facility within the scenario maximum distance (45.0), without exceeding any opened facility\u2019s capacity, opening no more than 6 facilities total, and satisfying all listed constraints.",
    "analysis": {
      "anti_patterns": [
        "Opening the lowest fixed-cost sites first (e.g., kiosk-style central sites) fails because mutually-dependent conditionals collide with an exclusion, making the \u201ccheap pair\u201d infeasible.",
        "Chasing the lowest variable-cost megasite in the far east looks attractive, but triggers a conditional chain that forces additional expensive facilities and/or collides with an exclusion\u2014blowing the budget.",
        "Trying to fix distance coverage by swapping in a seemingly well-located site can cascade into forced openings (conditional chains) that consume the limited budget and crowd out needed geographic coverage."
      ],
      "strategic_insights": [
        "Treat conditional chains as \u201cbundle costs\u201d: opening one facility may implicitly require opening 1\u20132 more, so compare bundles (fixed + variable) rather than single facilities.",
        "Budget tightness relative to the cheapest-possible portfolio means you must avoid decoy facilities that are cheap in isolation but infeasible or expansionary when constraints activate.",
        "Look for a geographically balanced set that covers north/central/east/south within 45 while keeping each facility\u2019s assigned demand under capacity; the best solution may avoid a facility with slightly better unit cost if it forces extra fixed costs elsewhere."
      ],
      "expected_difficulty": "Expert: requires simultaneously managing distance feasibility, tight total capacity (~130% of demand), a tight fixed-cost budget, single-sourcing, and multiple interacting conditional chains that create decoy and cascading infeasibilities."
    },
    "feasible": true,
    "solution": {
      "domain": "facility_location",
      "open_facilities": [
        "f1",
        "f4",
        "f5",
        "f8"
      ],
      "assignments": [
        {
          "customer_id": "c1",
          "facility_id": "f4",
          "amount": 70.0
        },
        {
          "customer_id": "c2",
          "facility_id": "f4",
          "amount": 60.0
        },
        {
          "customer_id": "c3",
          "facility_id": "f4",
          "amount": 55.0
        },
        {
          "customer_id": "c4",
          "facility_id": "f4",
          "amount": 65.0
        },
        {
          "customer_id": "c5",
          "facility_id": "f4",
          "amount": 50.0
        },
        {
          "customer_id": "c6",
          "facility_id": "f4",
          "amount": 45.0
        },
        {
          "customer_id": "c7",
          "facility_id": "f4",
          "amount": 80.0
        },
        {
          "customer_id": "c8",
          "facility_id": "f1",
          "amount": 75.0
        },
        {
          "customer_id": "c9",
          "facility_id": "f1",
          "amount": 70.0
        },
        {
          "customer_id": "c10",
          "facility_id": "f1",
          "amount": 65.0
        },
        {
          "customer_id": "c11",
          "facility_id": "f1",
          "amount": 55.0
        },
        {
          "customer_id": "c12",
          "facility_id": "f1",
          "amount": 60.0
        },
        {
          "customer_id": "c13",
          "facility_id": "f1",
          "amount": 50.0
        },
        {
          "customer_id": "c14",
          "facility_id": "f1",
          "amount": 45.0
        },
        {
          "customer_id": "c15",
          "facility_id": "f1",
          "amount": 60.0
        },
        {
          "customer_id": "c16",
          "facility_id": "f5",
          "amount": 55.0
        },
        {
          "customer_id": "c17",
          "facility_id": "f5",
          "amount": 65.0
        },
        {
          "customer_id": "c18",
          "facility_id": "f5",
          "amount": 55.0
        },
        {
          "customer_id": "c19",
          "facility_id": "f5",
          "amount": 60.0
        },
        {
          "customer_id": "c20",
          "facility_id": "f5",
          "amount": 50.0
        },
        {
          "customer_id": "c21",
          "facility_id": "f5",
          "amount": 45.0
        },
        {
          "customer_id": "c22",
          "facility_id": "f5",
          "amount": 55.0
        },
        {
          "customer_id": "c23",
          "facility_id": "f5",
          "amount": 40.0
        },
        {
          "customer_id": "c24",
          "facility_id": "f8",
          "amount": 60.0
        },
        {
          "customer_id": "c25",
          "facility_id": "f8",
          "amount": 55.0
        },
        {
          "customer_id": "c26",
          "facility_id": "f8",
          "amount": 50.0
        },
        {
          "customer_id": "c27",
          "facility_id": "f8",
          "amount": 45.0
        },
        {
          "customer_id": "c28",
          "facility_id": "f8",
          "amount": 55.0
        },
        {
          "customer_id": "c29",
          "facility_id": "f8",
          "amount": 40.0
        },
        {
          "customer_id": "c30",
          "facility_id": "f8",
          "amount": 65.0
        }
      ],
      "total_fixed_cost": 52000.0,
      "total_variable_cost": 3198.5,
      "total_distance": 28750.87
    }
  },
  {
    "id": "facility_location_d6b84e32",
    "difficulty": "expert",
    "scenario": {
      "domain": "facility_location",
      "description": "A regional clinical diagnostics provider (phlebotomy + specimen logistics for PCR, chemistry, and anatomic pathology send-outs) is redesigning its network of medical laboratory collection sites and courier cross-docks across a metro area. The company must choose which collection sites/logistics nodes to open and assign each clinic\u2019s daily specimen volume to exactly one open site, minimizing fixed opening costs plus per-specimen handling costs, while respecting capacity and a strict maximum patient/courier travel distance.",
      "max_facilities": 6,
      "max_distance": 42.0,
      "customers": [
        {
          "id": "c1",
          "name": "Oakview Family Practice",
          "x": 26.0,
          "y": 54.0,
          "demand": 80
        },
        {
          "id": "c2",
          "name": "Riverside Dialysis Center",
          "x": 32.0,
          "y": 48.0,
          "demand": 75
        },
        {
          "id": "c3",
          "name": "Starlight Pediatrics Clinic",
          "x": 24.0,
          "y": 46.0,
          "demand": 85
        },
        {
          "id": "c4",
          "name": "Maple Urgent Care - West",
          "x": 18.0,
          "y": 52.0,
          "demand": 80
        },
        {
          "id": "c5",
          "name": "Canyon Orthopedics",
          "x": 28.0,
          "y": 60.0,
          "demand": 80
        },
        {
          "id": "c6",
          "name": "Willow Women\u2019s Health",
          "x": 34.0,
          "y": 58.0,
          "demand": 75
        },
        {
          "id": "c7",
          "name": "GreenCross Pharmacy - Midtown",
          "x": 38.0,
          "y": 44.0,
          "demand": 75
        },
        {
          "id": "c8",
          "name": "Lakeside Endocrinology",
          "x": 40.0,
          "y": 60.0,
          "demand": 140
        },
        {
          "id": "c9",
          "name": "Metro EMS Standby Clinic",
          "x": 36.0,
          "y": 38.0,
          "demand": 120
        },
        {
          "id": "c10",
          "name": "Sunset Imaging Center",
          "x": 22.0,
          "y": 40.0,
          "demand": 110
        },
        {
          "id": "c11",
          "name": "Northgate Community Hospital OP Lab",
          "x": 50.0,
          "y": 78.0,
          "demand": 130
        },
        {
          "id": "c12",
          "name": "Pinecrest Senior Living",
          "x": 46.0,
          "y": 84.0,
          "demand": 70
        },
        {
          "id": "c13",
          "name": "BrightPath Oncology Infusion",
          "x": 58.0,
          "y": 76.0,
          "demand": 60
        },
        {
          "id": "c14",
          "name": "Skyline Cardiology Associates",
          "x": 62.0,
          "y": 82.0,
          "demand": 70
        },
        {
          "id": "c15",
          "name": "Evergreen Neurology Clinic",
          "x": 40.0,
          "y": 72.0,
          "demand": 140
        },
        {
          "id": "c16",
          "name": "Cedar Ridge Primary Care",
          "x": 54.0,
          "y": 88.0,
          "demand": 120
        },
        {
          "id": "c17",
          "name": "Hilltop Prenatal Clinic",
          "x": 44.0,
          "y": 76.0,
          "demand": 130
        },
        {
          "id": "c18",
          "name": "Eastgate Urgent Care",
          "x": 78.0,
          "y": 54.0,
          "demand": 140
        },
        {
          "id": "c19",
          "name": "Bayview Pediatrics - East",
          "x": 82.0,
          "y": 66.0,
          "demand": 120
        },
        {
          "id": "c20",
          "name": "Seaside Orthopedics",
          "x": 88.0,
          "y": 62.0,
          "demand": 90
        },
        {
          "id": "c21",
          "name": "Harbor Point Internal Medicine",
          "x": 92.0,
          "y": 54.0,
          "demand": 80
        },
        {
          "id": "c22",
          "name": "Portside Dialysis Center",
          "x": 86.0,
          "y": 48.0,
          "demand": 90
        },
        {
          "id": "c23",
          "name": "Marina Women\u2019s Health",
          "x": 80.0,
          "y": 58.0,
          "demand": 90
        },
        {
          "id": "c24",
          "name": "Eastline Workplace Screening",
          "x": 74.0,
          "y": 46.0,
          "demand": 90
        },
        {
          "id": "c25",
          "name": "Coastal Imaging - East",
          "x": 90.0,
          "y": 70.0,
          "demand": 95
        },
        {
          "id": "c26",
          "name": "Southridge Urgent Care",
          "x": 58.0,
          "y": 18.0,
          "demand": 85
        },
        {
          "id": "c27",
          "name": "Crescent Home Health Hub",
          "x": 70.0,
          "y": 14.0,
          "demand": 100
        },
        {
          "id": "c28",
          "name": "I-8 Truckers Clinic",
          "x": 94.0,
          "y": 18.0,
          "demand": 90
        },
        {
          "id": "c29",
          "name": "DesertLine Community Health",
          "x": 98.0,
          "y": 8.0,
          "demand": 95
        },
        {
          "id": "c30",
          "name": "Coastal Fertility Center",
          "x": 84.0,
          "y": 28.0,
          "demand": 95
        }
      ],
      "facilities": [
        {
          "id": "f1",
          "name": "MetroCore Accession Hub (Central)",
          "x": 45.0,
          "y": 50.0,
          "capacity": 900,
          "fixed_cost": 6500.0,
          "variable_cost_per_unit": 2.8
        },
        {
          "id": "f2",
          "name": "OldTown Phlebotomy Annex (Central-North)",
          "x": 42.0,
          "y": 52.0,
          "capacity": 550,
          "fixed_cost": 7000.0,
          "variable_cost_per_unit": 2.6
        },
        {
          "id": "f3",
          "name": "Riverside Collection Depot (West-Central)",
          "x": 30.0,
          "y": 45.0,
          "capacity": 750,
          "fixed_cost": 7200.0,
          "variable_cost_per_unit": 2.4
        },
        {
          "id": "f4",
          "name": "Eastgate STAT Lab Pod (East)",
          "x": 85.0,
          "y": 55.0,
          "capacity": 450,
          "fixed_cost": 7600.0,
          "variable_cost_per_unit": 1.7
        },
        {
          "id": "f5",
          "name": "Coastal Courier Crossdock (Southeast)",
          "x": 92.0,
          "y": 30.0,
          "capacity": 450,
          "fixed_cost": 8200.0,
          "variable_cost_per_unit": 1.6
        },
        {
          "id": "f6",
          "name": "Southridge Mobile Draw Base (South)",
          "x": 60.0,
          "y": 5.0,
          "capacity": 420,
          "fixed_cost": 8800.0,
          "variable_cost_per_unit": 1.9
        },
        {
          "id": "f7",
          "name": "NorthHill Pediatrics Draw Center (North)",
          "x": 55.0,
          "y": 86.0,
          "capacity": 80,
          "fixed_cost": 9000.0,
          "variable_cost_per_unit": 1.5
        },
        {
          "id": "f8",
          "name": "University Hospital Outreach Draw Suite (Northwest)",
          "x": 20.0,
          "y": 78.0,
          "capacity": 70,
          "fixed_cost": 9000.0,
          "variable_cost_per_unit": 1.3
        },
        {
          "id": "f9",
          "name": "Industrial Park Screening Site (Southwest)",
          "x": 12.0,
          "y": 22.0,
          "capacity": 60,
          "fixed_cost": 9800.0,
          "variable_cost_per_unit": 1.4
        },
        {
          "id": "f10",
          "name": "Airport Cold-Chain Node (East-Central Logistics)",
          "x": 72.0,
          "y": 42.0,
          "capacity": 70,
          "fixed_cost": 11500.0,
          "variable_cost_per_unit": 1.2
        },
        {
          "id": "f11",
          "name": "Harborview Reference Send-Out Center (Far East)",
          "x": 98.0,
          "y": 60.0,
          "capacity": 50,
          "fixed_cost": 14500.0,
          "variable_cost_per_unit": 1.1
        },
        {
          "id": "f12",
          "name": "Mountainview Rural Clinic Spoke (Far Northwest)",
          "x": 8.0,
          "y": 92.0,
          "capacity": 40,
          "fixed_cost": 16000.0,
          "variable_cost_per_unit": 1.0
        },
        {
          "id": "f13",
          "name": "DesertLine I-8 Corridor Site (Far Southeast)",
          "x": 100.0,
          "y": 12.0,
          "capacity": 50,
          "fixed_cost": 13000.0,
          "variable_cost_per_unit": 1.8
        }
      ]
    },
    "constraints": [
      {
        "description": "MetroCore Accession Hub must remain open due to existing payer contracts and LIS connectivity commitments.",
        "_spec": {
          "fn": "must_open",
          "args": [
            "f1"
          ]
        }
      },
      {
        "description": "Open at least 4 facilities to maintain redundancy for specimen stability windows and weekend coverage.",
        "_spec": {
          "fn": "min_facilities",
          "args": [
            4
          ]
        }
      },
      {
        "description": "Each clinic/customer must be served by exactly one open collection site (no splitting a clinic\u2019s daily specimens across sites).",
        "_spec": {
          "fn": "single_source",
          "args": []
        }
      },
      {
        "description": "Total fixed opening costs must not exceed $39,500 (capex freeze for the quarter).",
        "_spec": {
          "fn": "budget_limit",
          "args": [
            39500
          ]
        }
      },
      {
        "description": "OldTown Annex and Riverside Depot cannot both operate due to a jurisdictional staffing/union allocation rule (shared phlebotomy team).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f2",
              "f3"
            ]
          ]
        }
      },
      {
        "description": "Airport Cold-Chain Node and Southridge Mobile Draw Base cannot both operate (mutually exclusive courier vendor contracts).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f10",
              "f6"
            ]
          ]
        }
      },
      {
        "description": "Harborview Reference Send-Out Center cannot be run concurrently with the Coastal Courier Crossdock (exclusive carrier agreement for outbound reference shipments).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f11",
              "f5"
            ]
          ]
        }
      },
      {
        "description": "NorthHill Pediatrics Draw Center and University Hospital Outreach Draw Suite cannot both be opened (they share a specialized pediatric phlebotomy team).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "f7",
              "f8"
            ]
          ]
        }
      },
      {
        "description": "Mountainview Rural Clinic Spoke is temporarily offline (building remediation), so it must remain closed.",
        "_spec": {
          "fn": "must_close",
          "args": [
            "f12"
          ]
        }
      },
      {
        "description": "Industrial Park Screening Site is under renovation and must remain closed.",
        "_spec": {
          "fn": "must_close",
          "args": [
            "f9"
          ]
        }
      },
      {
        "description": "If the Coastal Courier Crossdock is opened, the Southridge Mobile Draw Base must also be opened to support late pickups and temperature-controlled handoff.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f5",
            "f6"
          ]
        }
      },
      {
        "description": "If the Southridge Mobile Draw Base is opened, Riverside Collection Depot must also be opened (it provides the required on-site centrifugation and accessioning oversight for that route).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f6",
            "f3"
          ]
        }
      },
      {
        "description": "If the OldTown Phlebotomy Annex is opened, the Eastgate STAT Lab Pod must also be opened (overflow routing agreement for STAT stability limits).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f2",
            "f4"
          ]
        }
      },
      {
        "description": "If the Airport Cold-Chain Node is opened, the OldTown Phlebotomy Annex must also be opened (TSA-compliant staffing and chain-of-custody procedures are housed there).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f10",
            "f2"
          ]
        }
      },
      {
        "description": "If the NorthHill Pediatrics Draw Center is opened, MetroCore Accession Hub must also be open for pediatric specimen processing (already required, but reinforces routing).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "f7",
            "f1"
          ]
        }
      }
    ],
    "instruction": "Minimize total cost (sum of fixed costs for opened facilities plus variable per-unit handling costs for all assigned customer demand) while ensuring: (1) every customer is assigned to exactly one open facility, (2) assignments respect the maximum distance limit (42.0), (3) no facility exceeds its capacity, (4) no more than 6 facilities are opened, and (5) all listed logical/budget constraints are satisfied.",
    "analysis": {
      "anti_patterns": [
        "Greedy by fixed cost fails: selecting the cheapest-looking central facilities first can block the only feasible way to serve the southeast because opening the Coastal Courier Crossdock triggers a conditional chain (f5\u2192f6\u2192f3) that consumes both budget and facility slots.",
        "Greedy by variable cost fails: low variable-cost \u2018logistics\u2019 options (e.g., Airport Cold-Chain Node) appear attractive but activate conditionals (f10\u2192f2\u2192f4) that collide with exclusions (notably f2 \u27c2 f3) and can eliminate the ability to open the required southeast support chain.",
        "Ignoring interaction effects fails: treating distance coverage, capacity, and the conditional/exclusion logic as independent often leads to cascades where fixing east coverage breaks southeast feasibility (or vice versa) under the budget cap."
      ],
      "strategic_insights": [
        "Start by identifying customers that are distance-constrained to the east/southeast and work backward through the conditional chains to see what they force you to open; then test whether remaining capacity can cover the central/north load.",
        "Because single-sourcing and tight total capacity make load-balancing brittle, you often need to reserve capacity in central hubs for \u2018spillover\u2019 customers near the 42-distance boundary who can be reassigned if an east facility hits capacity.",
        "Counterintuitive optimum behavior is likely: a facility with a higher fixed cost but better variable cost (or better geographic placement) can reduce total cost, but only if it doesn\u2019t trigger a conditional chain that forces an excluded or unaffordable companion facility."
      ],
      "expected_difficulty": "Expert: tight capacity relative to demand, strict distance feasibility, a binding fixed-cost budget set below the sum of the 6 cheapest sites, and two interacting conditional chains with exclusions create multiple greedy traps and cascading constraint interactions."
    },
    "feasible": true,
    "solution": {
      "domain": "facility_location",
      "open_facilities": [
        "f1",
        "f3",
        "f4",
        "f5",
        "f6"
      ],
      "assignments": [
        {
          "customer_id": "c1",
          "facility_id": "f3",
          "amount": 80.0
        },
        {
          "customer_id": "c2",
          "facility_id": "f3",
          "amount": 75.0
        },
        {
          "customer_id": "c3",
          "facility_id": "f3",
          "amount": 85.0
        },
        {
          "customer_id": "c4",
          "facility_id": "f3",
          "amount": 80.0
        },
        {
          "customer_id": "c5",
          "facility_id": "f1",
          "amount": 80.0
        },
        {
          "customer_id": "c6",
          "facility_id": "f1",
          "amount": 75.0
        },
        {
          "customer_id": "c7",
          "facility_id": "f1",
          "amount": 75.0
        },
        {
          "customer_id": "c8",
          "facility_id": "f1",
          "amount": 140.0
        },
        {
          "customer_id": "c9",
          "facility_id": "f3",
          "amount": 120.0
        },
        {
          "customer_id": "c10",
          "facility_id": "f3",
          "amount": 110.0
        },
        {
          "customer_id": "c11",
          "facility_id": "f1",
          "amount": 130.0
        },
        {
          "customer_id": "c12",
          "facility_id": "f1",
          "amount": 70.0
        },
        {
          "customer_id": "c13",
          "facility_id": "f3",
          "amount": 60.0
        },
        {
          "customer_id": "c14",
          "facility_id": "f1",
          "amount": 70.0
        },
        {
          "customer_id": "c15",
          "facility_id": "f3",
          "amount": 140.0
        },
        {
          "customer_id": "c16",
          "facility_id": "f1",
          "amount": 120.0
        },
        {
          "customer_id": "c17",
          "facility_id": "f1",
          "amount": 130.0
        },
        {
          "customer_id": "c18",
          "facility_id": "f4",
          "amount": 140.0
        },
        {
          "customer_id": "c19",
          "facility_id": "f4",
          "amount": 120.0
        },
        {
          "customer_id": "c20",
          "facility_id": "f4",
          "amount": 90.0
        },
        {
          "customer_id": "c21",
          "facility_id": "f5",
          "amount": 80.0
        },
        {
          "customer_id": "c22",
          "facility_id": "f5",
          "amount": 90.0
        },
        {
          "customer_id": "c23",
          "facility_id": "f5",
          "amount": 90.0
        },
        {
          "customer_id": "c24",
          "facility_id": "f5",
          "amount": 90.0
        },
        {
          "customer_id": "c25",
          "facility_id": "f4",
          "amount": 95.0
        },
        {
          "customer_id": "c26",
          "facility_id": "f6",
          "amount": 85.0
        },
        {
          "customer_id": "c27",
          "facility_id": "f6",
          "amount": 100.0
        },
        {
          "customer_id": "c28",
          "facility_id": "f6",
          "amount": 90.0
        },
        {
          "customer_id": "c29",
          "facility_id": "f6",
          "amount": 95.0
        },
        {
          "customer_id": "c30",
          "facility_id": "f5",
          "amount": 95.0
        }
      ],
      "total_fixed_cost": 38300.0,
      "total_variable_cost": 6463.5,
      "total_distance": 56133.06
    }
  },
  {
    "id": "job_shop_9056bd5a",
    "difficulty": "expert",
    "scenario": {
      "domain": "job_shop",
      "description": "Vulcan Ridge Elastomers (a rubber & plastics molding shop) is scheduling a mixed run of injection/compression-molded components (seals, caps, valves, bumpers). Jobs compete for two molding presses, two drying hoppers, a Banbury mixer, a cryo deflash cell, pad printing, ultrasonic welding, and a combined QA/packout station. The planner must respect mold-prep material flow (compound/dry before molding), tight sequencing rules for select jobs, and coordinated back-to-back press runs required to avoid costly purging and mold-change scrap.",
      "horizon": 100,
      "machines": [
        {
          "id": "m1",
          "name": "Arburg Allrounder Press #1",
          "capabilities": [
            "injection_molding",
            "compression_molding"
          ]
        },
        {
          "id": "m9",
          "name": "Sumitomo SHI Demag Press #2",
          "capabilities": [
            "injection_molding",
            "compression_molding"
          ]
        },
        {
          "id": "m2",
          "name": "Wittmann Drying Hopper A (and Micro-Blend Feeder)",
          "capabilities": [
            "drying",
            "compounding"
          ]
        },
        {
          "id": "m8",
          "name": "Novatec Drying Hopper B",
          "capabilities": [
            "drying"
          ]
        },
        {
          "id": "m3",
          "name": "Banbury Internal Mixer / Regrind Station",
          "capabilities": [
            "compounding",
            "regrind"
          ]
        },
        {
          "id": "m6",
          "name": "Cryo Deflash & Trim Cell",
          "capabilities": [
            "trimming",
            "deflashing"
          ]
        },
        {
          "id": "m5",
          "name": "Teca-Print Pad Printer (2-color)",
          "capabilities": [
            "pad_printing"
          ]
        },
        {
          "id": "m4",
          "name": "Branson Ultrasonic Welder",
          "capabilities": [
            "ultrasonic_welding"
          ]
        },
        {
          "id": "m7",
          "name": "Keyence Vision QA + Packout Bench",
          "capabilities": [
            "QA_inspection",
            "packaging"
          ]
        }
      ],
      "jobs": [
        {
          "id": "j1",
          "name": "VulcanSeal\u2122 Gasket Rings (NBR)",
          "due_time": 85,
          "priority": 1,
          "operations": [
            {
              "id": "j1_op1",
              "job_id": "j1",
              "operation_type": "compounding",
              "duration": 8,
              "predecessors": []
            },
            {
              "id": "j1_op2",
              "job_id": "j1",
              "operation_type": "drying",
              "duration": 7,
              "predecessors": [
                "j1_op1"
              ]
            },
            {
              "id": "j1_op3",
              "job_id": "j1",
              "operation_type": "injection_molding",
              "duration": 16,
              "predecessors": [
                "j1_op2"
              ]
            },
            {
              "id": "j1_op4",
              "job_id": "j1",
              "operation_type": "deflashing",
              "duration": 5,
              "predecessors": [
                "j1_op3"
              ]
            },
            {
              "id": "j1_op5",
              "job_id": "j1",
              "operation_type": "QA_inspection",
              "duration": 4,
              "predecessors": [
                "j1_op4"
              ]
            }
          ]
        },
        {
          "id": "j2",
          "name": "PolyFlex\u2122 Valve Diaphragm (TPE)",
          "due_time": 88,
          "priority": 2,
          "operations": [
            {
              "id": "j2_op1",
              "job_id": "j2",
              "operation_type": "compounding",
              "duration": 6,
              "predecessors": []
            },
            {
              "id": "j2_op2",
              "job_id": "j2",
              "operation_type": "drying",
              "duration": 6,
              "predecessors": [
                "j2_op1"
              ]
            },
            {
              "id": "j2_op3",
              "job_id": "j2",
              "operation_type": "injection_molding",
              "duration": 18,
              "predecessors": [
                "j2_op2"
              ]
            },
            {
              "id": "j2_op4",
              "job_id": "j2",
              "operation_type": "deflashing",
              "duration": 4,
              "predecessors": [
                "j2_op3"
              ]
            },
            {
              "id": "j2_op5",
              "job_id": "j2",
              "operation_type": "packaging",
              "duration": 3,
              "predecessors": [
                "j2_op4"
              ]
            }
          ]
        },
        {
          "id": "j3",
          "name": "ClearGuard\u2122 Sight Cap (Clear PP)",
          "due_time": 90,
          "priority": 2,
          "operations": [
            {
              "id": "j3_op1",
              "job_id": "j3",
              "operation_type": "compounding",
              "duration": 10,
              "predecessors": []
            },
            {
              "id": "j3_op2",
              "job_id": "j3",
              "operation_type": "drying",
              "duration": 8,
              "predecessors": [
                "j3_op1"
              ]
            },
            {
              "id": "j3_op3",
              "job_id": "j3",
              "operation_type": "injection_molding",
              "duration": 14,
              "predecessors": [
                "j3_op2"
              ]
            },
            {
              "id": "j3_op4",
              "job_id": "j3",
              "operation_type": "pad_printing",
              "duration": 6,
              "predecessors": [
                "j3_op3"
              ]
            },
            {
              "id": "j3_op5",
              "job_id": "j3",
              "operation_type": "packaging",
              "duration": 4,
              "predecessors": [
                "j3_op4"
              ]
            }
          ]
        },
        {
          "id": "j4",
          "name": "ThermoSnap\u2122 Clip Set (Glass-filled Nylon)",
          "due_time": 75,
          "priority": 1,
          "operations": [
            {
              "id": "j4_op1",
              "job_id": "j4",
              "operation_type": "drying",
              "duration": 7,
              "predecessors": []
            },
            {
              "id": "j4_op2",
              "job_id": "j4",
              "operation_type": "compression_molding",
              "duration": 20,
              "predecessors": [
                "j4_op1"
              ]
            },
            {
              "id": "j4_op3",
              "job_id": "j4",
              "operation_type": "trimming",
              "duration": 5,
              "predecessors": [
                "j4_op2"
              ]
            },
            {
              "id": "j4_op4",
              "job_id": "j4",
              "operation_type": "ultrasonic_welding",
              "duration": 3,
              "predecessors": [
                "j4_op3"
              ]
            },
            {
              "id": "j4_op5",
              "job_id": "j4",
              "operation_type": "QA_inspection",
              "duration": 4,
              "predecessors": [
                "j4_op4"
              ]
            }
          ]
        },
        {
          "id": "j5",
          "name": "NBR O-Ring Service Kit (Assorted)",
          "due_time": 92,
          "priority": 2,
          "operations": [
            {
              "id": "j5_op1",
              "job_id": "j5",
              "operation_type": "compounding",
              "duration": 12,
              "predecessors": []
            },
            {
              "id": "j5_op2",
              "job_id": "j5",
              "operation_type": "drying",
              "duration": 9,
              "predecessors": [
                "j5_op1"
              ]
            },
            {
              "id": "j5_op3",
              "job_id": "j5",
              "operation_type": "injection_molding",
              "duration": 12,
              "predecessors": [
                "j5_op2"
              ]
            },
            {
              "id": "j5_op4",
              "job_id": "j5",
              "operation_type": "deflashing",
              "duration": 6,
              "predecessors": [
                "j5_op3"
              ]
            },
            {
              "id": "j5_op5",
              "job_id": "j5",
              "operation_type": "packaging",
              "duration": 5,
              "predecessors": [
                "j5_op4"
              ]
            }
          ]
        },
        {
          "id": "j6",
          "name": "Regrind-Tolerant Spacer (Black PP, 20% regrind)",
          "due_time": 93,
          "priority": 3,
          "operations": [
            {
              "id": "j6_op1",
              "job_id": "j6",
              "operation_type": "regrind",
              "duration": 7,
              "predecessors": []
            },
            {
              "id": "j6_op2",
              "job_id": "j6",
              "operation_type": "compounding",
              "duration": 18,
              "predecessors": [
                "j6_op1"
              ]
            },
            {
              "id": "j6_op3",
              "job_id": "j6",
              "operation_type": "injection_molding",
              "duration": 8,
              "predecessors": [
                "j6_op2"
              ]
            },
            {
              "id": "j6_op4",
              "job_id": "j6",
              "operation_type": "QA_inspection",
              "duration": 4,
              "predecessors": [
                "j6_op3"
              ]
            },
            {
              "id": "j6_op5",
              "job_id": "j6",
              "operation_type": "packaging",
              "duration": 5,
              "predecessors": [
                "j6_op4"
              ]
            }
          ]
        },
        {
          "id": "j7",
          "name": "Silicone Duckbill Valve (LSR)",
          "due_time": 87,
          "priority": 2,
          "operations": [
            {
              "id": "j7_op1",
              "job_id": "j7",
              "operation_type": "drying",
              "duration": 15,
              "predecessors": []
            },
            {
              "id": "j7_op2",
              "job_id": "j7",
              "operation_type": "injection_molding",
              "duration": 7,
              "predecessors": [
                "j7_op1"
              ]
            },
            {
              "id": "j7_op3",
              "job_id": "j7",
              "operation_type": "trimming",
              "duration": 6,
              "predecessors": [
                "j7_op2"
              ]
            },
            {
              "id": "j7_op4",
              "job_id": "j7",
              "operation_type": "pad_printing",
              "duration": 3,
              "predecessors": [
                "j7_op3"
              ]
            },
            {
              "id": "j7_op5",
              "job_id": "j7",
              "operation_type": "packaging",
              "duration": 4,
              "predecessors": [
                "j7_op4"
              ]
            }
          ]
        },
        {
          "id": "j8",
          "name": "Med-Lock\u2122 Luer Cap (Medical-grade HDPE)",
          "due_time": 89,
          "priority": 1,
          "operations": [
            {
              "id": "j8_op1",
              "job_id": "j8",
              "operation_type": "compounding",
              "duration": 9,
              "predecessors": []
            },
            {
              "id": "j8_op2",
              "job_id": "j8",
              "operation_type": "drying",
              "duration": 9,
              "predecessors": [
                "j8_op1"
              ]
            },
            {
              "id": "j8_op3",
              "job_id": "j8",
              "operation_type": "injection_molding",
              "duration": 16,
              "predecessors": [
                "j8_op2"
              ]
            },
            {
              "id": "j8_op4",
              "job_id": "j8",
              "operation_type": "QA_inspection",
              "duration": 3,
              "predecessors": [
                "j8_op3"
              ]
            },
            {
              "id": "j8_op5",
              "job_id": "j8",
              "operation_type": "packaging",
              "duration": 5,
              "predecessors": [
                "j8_op4"
              ]
            }
          ]
        },
        {
          "id": "j9",
          "name": "ImpactShield\u2122 Bumper (TPU)",
          "due_time": 95,
          "priority": 3,
          "operations": [
            {
              "id": "j9_op1",
              "job_id": "j9",
              "operation_type": "compounding",
              "duration": 7,
              "predecessors": []
            },
            {
              "id": "j9_op2",
              "job_id": "j9",
              "operation_type": "drying",
              "duration": 7,
              "predecessors": [
                "j9_op1"
              ]
            },
            {
              "id": "j9_op3",
              "job_id": "j9",
              "operation_type": "compression_molding",
              "duration": 15,
              "predecessors": [
                "j9_op2"
              ]
            },
            {
              "id": "j9_op4",
              "job_id": "j9",
              "operation_type": "trimming",
              "duration": 7,
              "predecessors": [
                "j9_op3"
              ]
            },
            {
              "id": "j9_op5",
              "job_id": "j9",
              "operation_type": "packaging",
              "duration": 3,
              "predecessors": [
                "j9_op4"
              ]
            }
          ]
        }
      ]
    },
    "constraints": [
      {
        "description": "All jobs must complete within 95 time units (upper bound on makespan).",
        "_spec": {
          "fn": "max_makespan",
          "args": [
            95
          ]
        }
      },
      {
        "description": "Press #1 (m1) is unavailable for a mold-heater fault from time 20 to 26.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m1",
            20,
            26
          ]
        }
      },
      {
        "description": "Banbury mixer / regrind station (m3) is unavailable for rotor cleaning from time 40 to 46.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m3",
            40,
            46
          ]
        }
      },
      {
        "description": "Drying Hopper B (m8) is unavailable for desiccant changeout from time 60 to 66.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m8",
            60,
            66
          ]
        }
      },
      {
        "description": "Job j4 (ThermoSnap Clip Set) must complete by time 75 (customer line-down risk).",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j4",
            75
          ]
        }
      },
      {
        "description": "Job j1 (VulcanSeal Gasket Rings) must complete by time 85.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j1",
            85
          ]
        }
      },
      {
        "description": "Job j7 (Silicone Duckbill Valve) must complete by time 87.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j7",
            87
          ]
        }
      },
      {
        "description": "Job j2 (PolyFlex Valve Diaphragm) must complete by time 88.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j2",
            88
          ]
        }
      },
      {
        "description": "Job j8 (Med-Lock Luer Cap) must complete by time 89.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j8",
            89
          ]
        }
      },
      {
        "description": "Job j3 (ClearGuard Sight Cap) must complete by time 90.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j3",
            90
          ]
        }
      },
      {
        "description": "Job j5 (NBR O-Ring Service Kit) must complete by time 92.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j5",
            92
          ]
        }
      },
      {
        "description": "High-priority job j4 must start before lower-priority job j5.",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j4",
            "j5"
          ]
        }
      },
      {
        "description": "High-priority job j8 must start before lower-priority job j2 (medical order takes precedence).",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j8",
            "j2"
          ]
        }
      },
      {
        "description": "High-priority job j1 must start before lower-priority job j9.",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j1",
            "j9"
          ]
        }
      },
      {
        "description": "All QA_inspection operations must be performed on the Vision QA + Packout Bench (m7).",
        "_spec": {
          "fn": "machine_preference",
          "args": [
            "QA_inspection",
            "m7"
          ]
        }
      },
      {
        "description": "All packaging operations must be performed at the QA + Packout Bench (m7) for lot traceability.",
        "_spec": {
          "fn": "machine_preference",
          "args": [
            "packaging",
            "m7"
          ]
        }
      },
      {
        "description": "All pad_printing operations must be performed on the Teca-Print Pad Printer (m5).",
        "_spec": {
          "fn": "machine_preference",
          "args": [
            "pad_printing",
            "m5"
          ]
        }
      },
      {
        "description": "All deflashing operations must be performed in the Cryo Deflash & Trim Cell (m6).",
        "_spec": {
          "fn": "machine_preference",
          "args": [
            "deflashing",
            "m6"
          ]
        }
      },
      {
        "description": "All ultrasonic_welding operations must be performed on the Branson Ultrasonic Welder (m4).",
        "_spec": {
          "fn": "machine_preference",
          "args": [
            "ultrasonic_welding",
            "m4"
          ]
        }
      },
      {
        "description": "Job j4 is heat-sensitive: consecutive operations must not have idle gaps larger than 4 time units.",
        "_spec": {
          "fn": "no_idle",
          "args": [
            "j4",
            4
          ]
        }
      },
      {
        "description": "Job j8 is contamination-controlled: consecutive operations must not have idle gaps larger than 5 time units.",
        "_spec": {
          "fn": "no_idle",
          "args": [
            "j8",
            5
          ]
        }
      },
      {
        "description": "To avoid purge/scrap, these molding shots must run back-to-back on the same press: j1_op3, j2_op3, j3_op3.",
        "_spec": {
          "fn": "batch_together",
          "args": [
            [
              "j1_op3",
              "j2_op3",
              "j3_op3"
            ]
          ]
        }
      },
      {
        "description": "To share a common mold-temperature band, run j9_op3 immediately followed by j6_op3 on the same press.",
        "_spec": {
          "fn": "batch_together",
          "args": [
            [
              "j9_op3",
              "j6_op3"
            ]
          ]
        }
      }
    ],
    "instruction": "Minimize the makespan (total completion time) while respecting operation dependencies, machine capabilities, machine unavailability windows, due dates, and priority/contiguity constraints.",
    "analysis": {
      "anti_patterns": [
        "Greedy earliest-due-date scheduling fails because the batch_together press runs can force a long contiguous block; starting the wrong job first can make the required consecutive press sequence impossible without missing multiple due dates.",
        "Assigning every compounding task to the Banbury mixer (m3) looks locally optimal, but it interacts with the m3 cleaning downtime and starves molding; shifting some compounding to m2 (which can also compound) is sometimes necessary even if it delays drying.",
        "Greedy press utilization (always keep a press busy) can violate no_idle on j4/j8 by creating downstream waiting at trimming/QA/packout; fixing that later cascades into missed due dates.",
        "A decoy choice is overusing Drying Hopper B (m8) early because it seems to \u2018save\u2019 m2 time, but the m8 downtime at 60\u201366 can strand an in-progress plan and break the tight no_idle chain for j8 if its drying is placed poorly."
      ],
      "strategic_insights": [
        "Treat the presses as the primary bottleneck and plan the two batch_together blocks first (place them on the same press that best avoids downtime spillover), then backfill drying/compounding to meet their release times.",
        "Exploit hidden flexibility: compounding can be done on m2 or m3, while drying can be split between m2 and m8; using this flexibility to smooth around the m3 and m8 downtime windows is often key to feasibility.",
        "Protect no_idle jobs by reserving downstream capacity (trim/QA/packout) in advance; otherwise press-optimized schedules create gaps that violate the max_gap constraints.",
        "Because packaging and QA share m7 (and are forced there), consider m7 as a secondary bottleneck; align completion of molded/printed parts to avoid a late m7 pileup that inflates makespan."
      ],
      "expected_difficulty": "Expert: requires coordinated planning across two interlocked press batches, dual-stage material prep (compound\u2192dry\u2192mold), multiple downtime windows, no-idle chains, and a shared QA+packout bottleneck; naive heuristics frequently dead-end or cause cascading lateness."
    },
    "feasible": true,
    "solution": {
      "domain": "job_shop",
      "schedule": [
        {
          "operation_id": "j1_op1",
          "machine_id": "m2",
          "start_time": 0,
          "end_time": 8
        },
        {
          "operation_id": "j1_op2",
          "machine_id": "m8",
          "start_time": 25,
          "end_time": 32
        },
        {
          "operation_id": "j1_op3",
          "machine_id": "m9",
          "start_time": 59,
          "end_time": 75
        },
        {
          "operation_id": "j1_op4",
          "machine_id": "m6",
          "start_time": 75,
          "end_time": 80
        },
        {
          "operation_id": "j1_op5",
          "machine_id": "m7",
          "start_time": 80,
          "end_time": 84
        },
        {
          "operation_id": "j2_op1",
          "machine_id": "m2",
          "start_time": 26,
          "end_time": 32
        },
        {
          "operation_id": "j2_op2",
          "machine_id": "m8",
          "start_time": 32,
          "end_time": 38
        },
        {
          "operation_id": "j2_op3",
          "machine_id": "m9",
          "start_time": 41,
          "end_time": 59
        },
        {
          "operation_id": "j2_op4",
          "machine_id": "m6",
          "start_time": 60,
          "end_time": 64
        },
        {
          "operation_id": "j2_op5",
          "machine_id": "m7",
          "start_time": 65,
          "end_time": 68
        },
        {
          "operation_id": "j3_op1",
          "machine_id": "m3",
          "start_time": 7,
          "end_time": 17
        },
        {
          "operation_id": "j3_op2",
          "machine_id": "m8",
          "start_time": 17,
          "end_time": 25
        },
        {
          "operation_id": "j3_op3",
          "machine_id": "m9",
          "start_time": 27,
          "end_time": 41
        },
        {
          "operation_id": "j3_op4",
          "machine_id": "m5",
          "start_time": 41,
          "end_time": 47
        },
        {
          "operation_id": "j3_op5",
          "machine_id": "m7",
          "start_time": 50,
          "end_time": 54
        },
        {
          "operation_id": "j4_op1",
          "machine_id": "m8",
          "start_time": 0,
          "end_time": 7
        },
        {
          "operation_id": "j4_op2",
          "machine_id": "m9",
          "start_time": 7,
          "end_time": 27
        },
        {
          "operation_id": "j4_op3",
          "machine_id": "m6",
          "start_time": 27,
          "end_time": 32
        },
        {
          "operation_id": "j4_op4",
          "machine_id": "m4",
          "start_time": 32,
          "end_time": 35
        },
        {
          "operation_id": "j4_op5",
          "machine_id": "m7",
          "start_time": 35,
          "end_time": 39
        },
        {
          "operation_id": "j5_op1",
          "machine_id": "m3",
          "start_time": 17,
          "end_time": 29
        },
        {
          "operation_id": "j5_op2",
          "machine_id": "m2",
          "start_time": 32,
          "end_time": 41
        },
        {
          "operation_id": "j5_op3",
          "machine_id": "m1",
          "start_time": 42,
          "end_time": 54
        },
        {
          "operation_id": "j5_op4",
          "machine_id": "m6",
          "start_time": 54,
          "end_time": 60
        },
        {
          "operation_id": "j5_op5",
          "machine_id": "m7",
          "start_time": 60,
          "end_time": 65
        },
        {
          "operation_id": "j6_op1",
          "machine_id": "m3",
          "start_time": 29,
          "end_time": 36
        },
        {
          "operation_id": "j6_op2",
          "machine_id": "m2",
          "start_time": 41,
          "end_time": 59
        },
        {
          "operation_id": "j6_op3",
          "machine_id": "m1",
          "start_time": 61,
          "end_time": 69
        },
        {
          "operation_id": "j6_op4",
          "machine_id": "m7",
          "start_time": 69,
          "end_time": 73
        },
        {
          "operation_id": "j6_op5",
          "machine_id": "m7",
          "start_time": 84,
          "end_time": 89
        },
        {
          "operation_id": "j7_op1",
          "machine_id": "m8",
          "start_time": 38,
          "end_time": 53
        },
        {
          "operation_id": "j7_op2",
          "machine_id": "m1",
          "start_time": 54,
          "end_time": 61
        },
        {
          "operation_id": "j7_op3",
          "machine_id": "m6",
          "start_time": 64,
          "end_time": 70
        },
        {
          "operation_id": "j7_op4",
          "machine_id": "m5",
          "start_time": 70,
          "end_time": 73
        },
        {
          "operation_id": "j7_op5",
          "machine_id": "m7",
          "start_time": 73,
          "end_time": 77
        },
        {
          "operation_id": "j8_op1",
          "machine_id": "m2",
          "start_time": 8,
          "end_time": 17
        },
        {
          "operation_id": "j8_op2",
          "machine_id": "m2",
          "start_time": 17,
          "end_time": 26
        },
        {
          "operation_id": "j8_op3",
          "machine_id": "m1",
          "start_time": 26,
          "end_time": 42
        },
        {
          "operation_id": "j8_op4",
          "machine_id": "m7",
          "start_time": 42,
          "end_time": 45
        },
        {
          "operation_id": "j8_op5",
          "machine_id": "m7",
          "start_time": 45,
          "end_time": 50
        },
        {
          "operation_id": "j9_op1",
          "machine_id": "m3",
          "start_time": 0,
          "end_time": 7
        },
        {
          "operation_id": "j9_op2",
          "machine_id": "m8",
          "start_time": 7,
          "end_time": 14
        },
        {
          "operation_id": "j9_op3",
          "machine_id": "m1",
          "start_time": 69,
          "end_time": 84
        },
        {
          "operation_id": "j9_op4",
          "machine_id": "m6",
          "start_time": 84,
          "end_time": 91
        },
        {
          "operation_id": "j9_op5",
          "machine_id": "m7",
          "start_time": 91,
          "end_time": 94
        }
      ],
      "makespan": 94,
      "total_tardiness": 0
    }
  },
  {
    "id": "job_shop_f58f39b0",
    "difficulty": "expert",
    "scenario": {
      "domain": "job_shop",
      "description": "CrystalForge Glassworks (a glass cutting, screen-printing, tempering, and lamination workshop) must schedule mixed custom orders (shower doors, storefront lites, spandrels, and safety laminates). Jobs compete for a single preferred edge polisher and limited tempering oven time, with maintenance windows and tight customer due dates.",
      "horizon": 100,
      "machines": [
        {
          "id": "m1",
          "name": "Bottero Optima Glass Cutter",
          "capabilities": [
            "cutting"
          ]
        },
        {
          "id": "m2",
          "name": "NorthGlass Tempering Oven A",
          "capabilities": [
            "tempering"
          ]
        },
        {
          "id": "m3",
          "name": "NorthGlass Tempering Oven B",
          "capabilities": [
            "tempering"
          ]
        },
        {
          "id": "m4",
          "name": "Bavelloni CNC Drill/Notch Center",
          "capabilities": [
            "drilling",
            "notching"
          ]
        },
        {
          "id": "m5",
          "name": "Dip-Tech Ceramic Frit Printer",
          "capabilities": [
            "screen_printing"
          ]
        },
        {
          "id": "m6",
          "name": "Schiatti Edge Polisher #1 (Preferred)",
          "capabilities": [
            "edging"
          ]
        },
        {
          "id": "m7",
          "name": "Schiatti Edge Polisher #2 (Backup)",
          "capabilities": [
            "edging"
          ]
        },
        {
          "id": "m8",
          "name": "Autoclave Lamination Line",
          "capabilities": [
            "laminating",
            "inspection"
          ]
        },
        {
          "id": "m9",
          "name": "QC + Pack & Trim Cell",
          "capabilities": [
            "inspection",
            "packaging",
            "interlayer_trim"
          ]
        }
      ],
      "jobs": [
        {
          "id": "j1",
          "name": "AquaShield Shower Door Panel (10mm Clear)",
          "due_time": 70,
          "priority": 1,
          "operations": [
            {
              "id": "j1_op1",
              "job_id": "j1",
              "operation_type": "cutting",
              "duration": 5,
              "predecessors": []
            },
            {
              "id": "j1_op2",
              "job_id": "j1",
              "operation_type": "edging",
              "duration": 4,
              "predecessors": [
                "j1_op1"
              ]
            },
            {
              "id": "j1_op3",
              "job_id": "j1",
              "operation_type": "drilling",
              "duration": 3,
              "predecessors": [
                "j1_op2"
              ]
            },
            {
              "id": "j1_op4",
              "job_id": "j1",
              "operation_type": "tempering",
              "duration": 16,
              "predecessors": [
                "j1_op3"
              ]
            },
            {
              "id": "j1_op5",
              "job_id": "j1",
              "operation_type": "inspection",
              "duration": 3,
              "predecessors": [
                "j1_op4"
              ]
            }
          ]
        },
        {
          "id": "j2",
          "name": "HarborFront Storefront Door Lite (Low-Iron)",
          "due_time": 68,
          "priority": 1,
          "operations": [
            {
              "id": "j2_op1",
              "job_id": "j2",
              "operation_type": "cutting",
              "duration": 4,
              "predecessors": []
            },
            {
              "id": "j2_op2",
              "job_id": "j2",
              "operation_type": "edging",
              "duration": 5,
              "predecessors": [
                "j2_op1"
              ]
            },
            {
              "id": "j2_op3",
              "job_id": "j2",
              "operation_type": "drilling",
              "duration": 4,
              "predecessors": [
                "j2_op2"
              ]
            },
            {
              "id": "j2_op4",
              "job_id": "j2",
              "operation_type": "tempering",
              "duration": 14,
              "predecessors": [
                "j2_op3"
              ]
            },
            {
              "id": "j2_op5",
              "job_id": "j2",
              "operation_type": "inspection",
              "duration": 3,
              "predecessors": [
                "j2_op4"
              ]
            }
          ]
        },
        {
          "id": "j3",
          "name": "Skyline Fritted Spandrel Panel (Ceramic Dot)",
          "due_time": 82,
          "priority": 2,
          "operations": [
            {
              "id": "j3_op1",
              "job_id": "j3",
              "operation_type": "cutting",
              "duration": 5,
              "predecessors": []
            },
            {
              "id": "j3_op2",
              "job_id": "j3",
              "operation_type": "edging",
              "duration": 4,
              "predecessors": [
                "j3_op1"
              ]
            },
            {
              "id": "j3_op3",
              "job_id": "j3",
              "operation_type": "screen_printing",
              "duration": 3,
              "predecessors": [
                "j3_op2"
              ]
            },
            {
              "id": "j3_op4",
              "job_id": "j3",
              "operation_type": "tempering",
              "duration": 18,
              "predecessors": [
                "j3_op3"
              ]
            },
            {
              "id": "j3_op5",
              "job_id": "j3",
              "operation_type": "inspection",
              "duration": 2,
              "predecessors": [
                "j3_op4"
              ]
            }
          ]
        },
        {
          "id": "j4",
          "name": "StairSafe Laminated Balustrade Lite (PVB)",
          "due_time": 86,
          "priority": 2,
          "operations": [
            {
              "id": "j4_op1",
              "job_id": "j4",
              "operation_type": "cutting",
              "duration": 6,
              "predecessors": []
            },
            {
              "id": "j4_op2",
              "job_id": "j4",
              "operation_type": "edging",
              "duration": 4,
              "predecessors": [
                "j4_op1"
              ]
            },
            {
              "id": "j4_op3",
              "job_id": "j4",
              "operation_type": "laminating",
              "duration": 16,
              "predecessors": [
                "j4_op2"
              ]
            },
            {
              "id": "j4_op4",
              "job_id": "j4",
              "operation_type": "interlayer_trim",
              "duration": 3,
              "predecessors": [
                "j4_op3"
              ]
            },
            {
              "id": "j4_op5",
              "job_id": "j4",
              "operation_type": "inspection",
              "duration": 3,
              "predecessors": [
                "j4_op4"
              ]
            }
          ]
        },
        {
          "id": "j5",
          "name": "PrivacyBand Interior Partition Lite (UV Printed)",
          "due_time": 95,
          "priority": 3,
          "operations": [
            {
              "id": "j5_op1",
              "job_id": "j5",
              "operation_type": "cutting",
              "duration": 5,
              "predecessors": []
            },
            {
              "id": "j5_op2",
              "job_id": "j5",
              "operation_type": "edging",
              "duration": 4,
              "predecessors": [
                "j5_op1"
              ]
            },
            {
              "id": "j5_op3",
              "job_id": "j5",
              "operation_type": "screen_printing",
              "duration": 12,
              "predecessors": [
                "j5_op2"
              ]
            },
            {
              "id": "j5_op4",
              "job_id": "j5",
              "operation_type": "packaging",
              "duration": 3,
              "predecessors": [
                "j5_op3"
              ]
            },
            {
              "id": "j5_op5",
              "job_id": "j5",
              "operation_type": "inspection",
              "duration": 3,
              "predecessors": [
                "j5_op4"
              ]
            }
          ]
        },
        {
          "id": "j6",
          "name": "OvenView Appliance Door Glass (Heavy Frit)",
          "due_time": 90,
          "priority": 3,
          "operations": [
            {
              "id": "j6_op1",
              "job_id": "j6",
              "operation_type": "cutting",
              "duration": 5,
              "predecessors": []
            },
            {
              "id": "j6_op2",
              "job_id": "j6",
              "operation_type": "edging",
              "duration": 4,
              "predecessors": [
                "j6_op1"
              ]
            },
            {
              "id": "j6_op3",
              "job_id": "j6",
              "operation_type": "screen_printing",
              "duration": 18,
              "predecessors": [
                "j6_op2"
              ]
            },
            {
              "id": "j6_op4",
              "job_id": "j6",
              "operation_type": "tempering",
              "duration": 10,
              "predecessors": [
                "j6_op3"
              ]
            },
            {
              "id": "j6_op5",
              "job_id": "j6",
              "operation_type": "inspection",
              "duration": 3,
              "predecessors": [
                "j6_op4"
              ]
            }
          ]
        },
        {
          "id": "j7",
          "name": "QuickTurn Hinge Cover Plates (Small Tempered Set)",
          "due_time": 55,
          "priority": 1,
          "operations": [
            {
              "id": "j7_op1",
              "job_id": "j7",
              "operation_type": "cutting",
              "duration": 4,
              "predecessors": []
            },
            {
              "id": "j7_op2",
              "job_id": "j7",
              "operation_type": "edging",
              "duration": 4,
              "predecessors": [
                "j7_op1"
              ]
            },
            {
              "id": "j7_op3",
              "job_id": "j7",
              "operation_type": "drilling",
              "duration": 3,
              "predecessors": [
                "j7_op2"
              ]
            },
            {
              "id": "j7_op4",
              "job_id": "j7",
              "operation_type": "tempering",
              "duration": 5,
              "predecessors": [
                "j7_op3"
              ]
            },
            {
              "id": "j7_op5",
              "job_id": "j7",
              "operation_type": "inspection",
              "duration": 2,
              "predecessors": [
                "j7_op4"
              ]
            }
          ]
        },
        {
          "id": "j8",
          "name": "RoadGuard Automotive Side Lite (Notched, Tempered)",
          "due_time": 88,
          "priority": 2,
          "operations": [
            {
              "id": "j8_op1",
              "job_id": "j8",
              "operation_type": "cutting",
              "duration": 5,
              "predecessors": []
            },
            {
              "id": "j8_op2",
              "job_id": "j8",
              "operation_type": "edging",
              "duration": 6,
              "predecessors": [
                "j8_op1"
              ]
            },
            {
              "id": "j8_op3",
              "job_id": "j8",
              "operation_type": "tempering",
              "duration": 14,
              "predecessors": [
                "j8_op2"
              ]
            },
            {
              "id": "j8_op4",
              "job_id": "j8",
              "operation_type": "notching",
              "duration": 3,
              "predecessors": [
                "j8_op3"
              ]
            },
            {
              "id": "j8_op5",
              "job_id": "j8",
              "operation_type": "inspection",
              "duration": 3,
              "predecessors": [
                "j8_op4"
              ]
            }
          ]
        },
        {
          "id": "j9",
          "name": "RailLite Balcony Infill Panel (Tempered, Drilled)",
          "due_time": 96,
          "priority": 2,
          "operations": [
            {
              "id": "j9_op1",
              "job_id": "j9",
              "operation_type": "cutting",
              "duration": 6,
              "predecessors": []
            },
            {
              "id": "j9_op2",
              "job_id": "j9",
              "operation_type": "edging",
              "duration": 4,
              "predecessors": [
                "j9_op1"
              ]
            },
            {
              "id": "j9_op3",
              "job_id": "j9",
              "operation_type": "tempering",
              "duration": 16,
              "predecessors": [
                "j9_op2"
              ]
            },
            {
              "id": "j9_op4",
              "job_id": "j9",
              "operation_type": "drilling",
              "duration": 4,
              "predecessors": [
                "j9_op3"
              ]
            },
            {
              "id": "j9_op5",
              "job_id": "j9",
              "operation_type": "inspection",
              "duration": 3,
              "predecessors": [
                "j9_op4"
              ]
            }
          ]
        }
      ]
    },
    "constraints": [
      {
        "description": "All jobs must complete within 90 time units (hard upper bound on makespan).",
        "_spec": {
          "fn": "max_makespan",
          "args": [
            90
          ]
        }
      },
      {
        "description": "Tempering Oven A (m2) is down for quench nozzle maintenance from time 28 to 38.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m2",
            28,
            38
          ]
        }
      },
      {
        "description": "Preferred edge polisher (m6) is down for wheel change and calibration from time 45 to 52.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m6",
            45,
            52
          ]
        }
      },
      {
        "description": "Glass cutter (m1) is down for blade replacement and table re-leveling from time 60 to 66.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m1",
            60,
            66
          ]
        }
      },
      {
        "description": "Job j1 (Shower Door Panel) must complete by time 70.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j1",
            70
          ]
        }
      },
      {
        "description": "Job j2 (Storefront Door Lite) must complete by time 68.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j2",
            68
          ]
        }
      },
      {
        "description": "Job j3 (Fritted Spandrel) must complete by time 82.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j3",
            82
          ]
        }
      },
      {
        "description": "Job j4 (Laminated Balustrade) must complete by time 86.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j4",
            86
          ]
        }
      },
      {
        "description": "Job j6 (Appliance Door Glass) must complete by time 90.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j6",
            90
          ]
        }
      },
      {
        "description": "Job j7 (QuickTurn Hinge Covers) must complete by time 55.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j7",
            55
          ]
        }
      },
      {
        "description": "Job j8 (Automotive Side Lite) must complete by time 88.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j8",
            88
          ]
        }
      },
      {
        "description": "High-priority job j1 must start before lower-priority job j6 begins.",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j1",
            "j6"
          ]
        }
      },
      {
        "description": "High-priority job j2 must start before lower-priority job j5 begins.",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j2",
            "j5"
          ]
        }
      },
      {
        "description": "High-priority job j7 must start before job j9 begins (rush order gating).",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j7",
            "j9"
          ]
        }
      },
      {
        "description": "All edging operations must use the preferred edge polisher m6 (m7 is a decoy backup but not allowed by this customer spec).",
        "_spec": {
          "fn": "machine_preference",
          "args": [
            "edging",
            "m6"
          ]
        }
      },
      {
        "description": "All inspection operations must use the QC + Pack cell m9 (m8 can inspect but is reserved for lamination flow; treat as decoy capacity).",
        "_spec": {
          "fn": "machine_preference",
          "args": [
            "inspection",
            "m9"
          ]
        }
      },
      {
        "description": "Job j1 must not have idle gaps larger than 6 time units between its consecutive operations (glass cannot sit too long between drill and temper).",
        "_spec": {
          "fn": "no_idle",
          "args": [
            "j1",
            6
          ]
        }
      },
      {
        "description": "Job j2 must not have idle gaps larger than 6 time units between its consecutive operations (hardware alignment tolerance degrades if delayed).",
        "_spec": {
          "fn": "no_idle",
          "args": [
            "j2",
            6
          ]
        }
      },
      {
        "description": "Batching constraint: tempering operations for j1 and j2 must run consecutively on the same tempering oven to avoid recipe changeover and quench tuning loss.",
        "_spec": {
          "fn": "batch_together",
          "args": [
            [
              "j1_op4",
              "j2_op4"
            ]
          ]
        }
      },
      {
        "description": "Batching constraint: the UV/ceramic printing runs for j5 and j6 must be consecutive on the same printer to avoid ink purge and screen re-registration.",
        "_spec": {
          "fn": "batch_together",
          "args": [
            [
              "j5_op3",
              "j6_op3"
            ]
          ]
        }
      }
    ],
    "instruction": "Minimize the makespan (total completion time) while respecting operation dependencies, machine capabilities, machine unavailability windows, due dates, and all priority/no-idle/batching/preference constraints.",
    "analysis": {
      "anti_patterns": [
        "Greedy \u2018earliest due date\u2019 sequencing on m6 (preferred edging) creates a trap: it can satisfy early due dates but forces j1/j2 to wait too long before their batched tempering block, violating the no-idle constraints.",
        "Greedy \u2018use the first available tempering oven\u2019 fails because j1_op4 and j2_op4 must be consecutive on the same oven; splitting them across ovens looks attractive locally but is infeasible.",
        "Greedy \u2018maximize utilization\u2019 on the printer m5 fails when it schedules non-batched printing between j5_op3 and j6_op3; this breaks the batch_together constraint and cascades into missed due dates downstream.",
        "Naively treating m7 (backup edging) and m8 (inspection-capable) as usable capacity is a decoy: machine_preference constraints forbid using them for those operation types."
      ],
      "strategic_insights": [
        "Plan around the two global coupling constraints first: (1) the j1/j2 consecutive tempering block on a single oven and (2) the j5/j6 consecutive print block on m5; then back-schedule upstream operations to satisfy no-idle gaps.",
        "Because edging is forced onto m6 and m6 has a downtime window, reserve protected slots for high-priority/no-idle jobs (j1, j2) before filling remaining capacity; otherwise small local improvements cause cascading infeasibility.",
        "Use the second oven (m3) strategically to absorb the long tempering jobs while m2 is unavailable, but keep enough continuous room to place the j1/j2 batched block without interruption."
      ],
      "expected_difficulty": "Expert: tightly coupled batching + no-idle constraints interacting with a single preferred edging machine (with downtime) and heavy shared tempering demand; naive heuristics are likely to pick decoy capacity or split batched operations, causing infeasibility or large makespan increases."
    },
    "feasible": true,
    "solution": {
      "domain": "job_shop",
      "schedule": [
        {
          "operation_id": "j1_op1",
          "machine_id": "m1",
          "start_time": 15,
          "end_time": 20
        },
        {
          "operation_id": "j1_op2",
          "machine_id": "m6",
          "start_time": 23,
          "end_time": 27
        },
        {
          "operation_id": "j1_op3",
          "machine_id": "m4",
          "start_time": 29,
          "end_time": 32
        },
        {
          "operation_id": "j1_op4",
          "machine_id": "m3",
          "start_time": 35,
          "end_time": 51
        },
        {
          "operation_id": "j1_op5",
          "machine_id": "m9",
          "start_time": 51,
          "end_time": 54
        },
        {
          "operation_id": "j2_op1",
          "machine_id": "m1",
          "start_time": 36,
          "end_time": 40
        },
        {
          "operation_id": "j2_op2",
          "machine_id": "m6",
          "start_time": 40,
          "end_time": 45
        },
        {
          "operation_id": "j2_op3",
          "machine_id": "m4",
          "start_time": 45,
          "end_time": 49
        },
        {
          "operation_id": "j2_op4",
          "machine_id": "m3",
          "start_time": 51,
          "end_time": 65
        },
        {
          "operation_id": "j2_op5",
          "machine_id": "m9",
          "start_time": 65,
          "end_time": 68
        },
        {
          "operation_id": "j3_op1",
          "machine_id": "m1",
          "start_time": 25,
          "end_time": 30
        },
        {
          "operation_id": "j3_op2",
          "machine_id": "m6",
          "start_time": 31,
          "end_time": 35
        },
        {
          "operation_id": "j3_op3",
          "machine_id": "m5",
          "start_time": 35,
          "end_time": 38
        },
        {
          "operation_id": "j3_op4",
          "machine_id": "m2",
          "start_time": 44,
          "end_time": 62
        },
        {
          "operation_id": "j3_op5",
          "machine_id": "m9",
          "start_time": 62,
          "end_time": 64
        },
        {
          "operation_id": "j4_op1",
          "machine_id": "m1",
          "start_time": 30,
          "end_time": 36
        },
        {
          "operation_id": "j4_op2",
          "machine_id": "m6",
          "start_time": 36,
          "end_time": 40
        },
        {
          "operation_id": "j4_op3",
          "machine_id": "m8",
          "start_time": 40,
          "end_time": 56
        },
        {
          "operation_id": "j4_op4",
          "machine_id": "m9",
          "start_time": 56,
          "end_time": 59
        },
        {
          "operation_id": "j4_op5",
          "machine_id": "m9",
          "start_time": 59,
          "end_time": 62
        },
        {
          "operation_id": "j5_op1",
          "machine_id": "m1",
          "start_time": 40,
          "end_time": 45
        },
        {
          "operation_id": "j5_op2",
          "machine_id": "m6",
          "start_time": 52,
          "end_time": 56
        },
        {
          "operation_id": "j5_op3",
          "machine_id": "m5",
          "start_time": 56,
          "end_time": 68
        },
        {
          "operation_id": "j5_op4",
          "machine_id": "m9",
          "start_time": 68,
          "end_time": 71
        },
        {
          "operation_id": "j5_op5",
          "machine_id": "m9",
          "start_time": 71,
          "end_time": 74
        },
        {
          "operation_id": "j6_op1",
          "machine_id": "m1",
          "start_time": 20,
          "end_time": 25
        },
        {
          "operation_id": "j6_op2",
          "machine_id": "m6",
          "start_time": 27,
          "end_time": 31
        },
        {
          "operation_id": "j6_op3",
          "machine_id": "m5",
          "start_time": 38,
          "end_time": 56
        },
        {
          "operation_id": "j6_op4",
          "machine_id": "m2",
          "start_time": 62,
          "end_time": 72
        },
        {
          "operation_id": "j6_op5",
          "machine_id": "m9",
          "start_time": 74,
          "end_time": 77
        },
        {
          "operation_id": "j7_op1",
          "machine_id": "m1",
          "start_time": 5,
          "end_time": 9
        },
        {
          "operation_id": "j7_op2",
          "machine_id": "m6",
          "start_time": 19,
          "end_time": 23
        },
        {
          "operation_id": "j7_op3",
          "machine_id": "m4",
          "start_time": 23,
          "end_time": 26
        },
        {
          "operation_id": "j7_op4",
          "machine_id": "m2",
          "start_time": 39,
          "end_time": 44
        },
        {
          "operation_id": "j7_op5",
          "machine_id": "m9",
          "start_time": 47,
          "end_time": 49
        },
        {
          "operation_id": "j8_op1",
          "machine_id": "m1",
          "start_time": 0,
          "end_time": 5
        },
        {
          "operation_id": "j8_op2",
          "machine_id": "m6",
          "start_time": 5,
          "end_time": 11
        },
        {
          "operation_id": "j8_op3",
          "machine_id": "m2",
          "start_time": 11,
          "end_time": 25
        },
        {
          "operation_id": "j8_op4",
          "machine_id": "m4",
          "start_time": 26,
          "end_time": 29
        },
        {
          "operation_id": "j8_op5",
          "machine_id": "m9",
          "start_time": 29,
          "end_time": 32
        },
        {
          "operation_id": "j9_op1",
          "machine_id": "m1",
          "start_time": 9,
          "end_time": 15
        },
        {
          "operation_id": "j9_op2",
          "machine_id": "m6",
          "start_time": 15,
          "end_time": 19
        },
        {
          "operation_id": "j9_op3",
          "machine_id": "m3",
          "start_time": 19,
          "end_time": 35
        },
        {
          "operation_id": "j9_op4",
          "machine_id": "m4",
          "start_time": 35,
          "end_time": 39
        },
        {
          "operation_id": "j9_op5",
          "machine_id": "m9",
          "start_time": 39,
          "end_time": 42
        }
      ],
      "makespan": 77,
      "total_tardiness": 0
    }
  },
  {
    "id": "job_shop_4e0334eb",
    "difficulty": "expert",
    "scenario": {
      "domain": "job_shop",
      "description": "IronCrest Fabrication (metal fabrication and welding shop) must schedule mixed custom and repeat orders (brackets, frames, enclosures) through laser cutting, CNC machining, press brake forming, MIG/TIG welding, grinding, powder coating, and CMM inspection. Tight customer delivery windows and machine downtime create non-obvious bottlenecks where greedy dispatching (e.g., shortest-op-first or earliest-due-date per machine) can block high-priority weld/coat flows and cause cascading lateness.",
      "horizon": 500,
      "machines": [
        {
          "id": "m1",
          "name": "Mazak Optiplex Fiber Laser",
          "capabilities": [
            "laser_cut"
          ]
        },
        {
          "id": "m2",
          "name": "Haas VF-2 CNC Mill",
          "capabilities": [
            "milling",
            "drilling"
          ]
        },
        {
          "id": "m3",
          "name": "Carlson Radial Drill Press",
          "capabilities": [
            "drilling"
          ]
        },
        {
          "id": "m4",
          "name": "AccurPress 175T Press Brake",
          "capabilities": [
            "press_brake"
          ]
        },
        {
          "id": "m5",
          "name": "Lincoln MIG Weld Cell",
          "capabilities": [
            "weld_mig"
          ]
        },
        {
          "id": "m6",
          "name": "Miller TIG Weld Bench",
          "capabilities": [
            "weld_tig"
          ]
        },
        {
          "id": "m7",
          "name": "Harper Surface Grinder",
          "capabilities": [
            "grinding"
          ]
        },
        {
          "id": "m8",
          "name": "Nordson Powder Coat Line",
          "capabilities": [
            "powder_coat"
          ]
        },
        {
          "id": "m9",
          "name": "Zeiss CMM Inspection Station",
          "capabilities": [
            "inspection"
          ]
        }
      ],
      "jobs": [
        {
          "id": "j1",
          "name": "316SS Hygienic Bracket Set (Food-Grade)",
          "due_time": 140,
          "priority": 1,
          "operations": [
            {
              "id": "j1_op1",
              "job_id": "j1",
              "operation_type": "laser_cut",
              "duration": 14,
              "predecessors": []
            },
            {
              "id": "j1_op2",
              "job_id": "j1",
              "operation_type": "press_brake",
              "duration": 10,
              "predecessors": [
                "j1_op1"
              ]
            },
            {
              "id": "j1_op3",
              "job_id": "j1",
              "operation_type": "drilling",
              "duration": 4,
              "predecessors": [
                "j1_op2"
              ]
            },
            {
              "id": "j1_op4",
              "job_id": "j1",
              "operation_type": "weld_tig",
              "duration": 10,
              "predecessors": [
                "j1_op3"
              ]
            },
            {
              "id": "j1_op5",
              "job_id": "j1",
              "operation_type": "inspection",
              "duration": 8,
              "predecessors": [
                "j1_op4"
              ]
            }
          ]
        },
        {
          "id": "j2",
          "name": "A36 Forklift Battery Tray Assembly",
          "due_time": 260,
          "priority": 2,
          "operations": [
            {
              "id": "j2_op1",
              "job_id": "j2",
              "operation_type": "laser_cut",
              "duration": 18,
              "predecessors": []
            },
            {
              "id": "j2_op2",
              "job_id": "j2",
              "operation_type": "press_brake",
              "duration": 14,
              "predecessors": [
                "j2_op1"
              ]
            },
            {
              "id": "j2_op3",
              "job_id": "j2",
              "operation_type": "weld_mig",
              "duration": 16,
              "predecessors": [
                "j2_op2"
              ]
            },
            {
              "id": "j2_op4",
              "job_id": "j2",
              "operation_type": "grinding",
              "duration": 18,
              "predecessors": [
                "j2_op3"
              ]
            },
            {
              "id": "j2_op5",
              "job_id": "j2",
              "operation_type": "powder_coat",
              "duration": 6,
              "predecessors": [
                "j2_op4"
              ]
            }
          ]
        },
        {
          "id": "j3",
          "name": "6061-T6 Valve Manifold Plate (Prototype)",
          "due_time": 170,
          "priority": 1,
          "operations": [
            {
              "id": "j3_op1",
              "job_id": "j3",
              "operation_type": "milling",
              "duration": 10,
              "predecessors": []
            },
            {
              "id": "j3_op2",
              "job_id": "j3",
              "operation_type": "drilling",
              "duration": 18,
              "predecessors": [
                "j3_op1"
              ]
            },
            {
              "id": "j3_op3",
              "job_id": "j3",
              "operation_type": "press_brake",
              "duration": 5,
              "predecessors": [
                "j3_op2"
              ]
            },
            {
              "id": "j3_op4",
              "job_id": "j3",
              "operation_type": "weld_tig",
              "duration": 4,
              "predecessors": [
                "j3_op3"
              ]
            },
            {
              "id": "j3_op5",
              "job_id": "j3",
              "operation_type": "inspection",
              "duration": 6,
              "predecessors": [
                "j3_op4"
              ]
            }
          ]
        },
        {
          "id": "j4",
          "name": "Galvanneal Electrical Enclosure (NEMA Panel)",
          "due_time": 320,
          "priority": 3,
          "operations": [
            {
              "id": "j4_op1",
              "job_id": "j4",
              "operation_type": "laser_cut",
              "duration": 16,
              "predecessors": []
            },
            {
              "id": "j4_op2",
              "job_id": "j4",
              "operation_type": "press_brake",
              "duration": 12,
              "predecessors": [
                "j4_op1"
              ]
            },
            {
              "id": "j4_op3",
              "job_id": "j4",
              "operation_type": "weld_tig",
              "duration": 12,
              "predecessors": [
                "j4_op2"
              ]
            },
            {
              "id": "j4_op4",
              "job_id": "j4",
              "operation_type": "grinding",
              "duration": 4,
              "predecessors": [
                "j4_op3"
              ]
            },
            {
              "id": "j4_op5",
              "job_id": "j4",
              "operation_type": "powder_coat",
              "duration": 5,
              "predecessors": [
                "j4_op4"
              ]
            }
          ]
        },
        {
          "id": "j5",
          "name": "Skid Base Mount Tabs (Small Lot)",
          "due_time": 210,
          "priority": 2,
          "operations": [
            {
              "id": "j5_op1",
              "job_id": "j5",
              "operation_type": "milling",
              "duration": 13,
              "predecessors": []
            },
            {
              "id": "j5_op2",
              "job_id": "j5",
              "operation_type": "drilling",
              "duration": 4,
              "predecessors": [
                "j5_op1"
              ]
            },
            {
              "id": "j5_op3",
              "job_id": "j5",
              "operation_type": "press_brake",
              "duration": 3,
              "predecessors": [
                "j5_op2"
              ]
            },
            {
              "id": "j5_op4",
              "job_id": "j5",
              "operation_type": "weld_mig",
              "duration": 8,
              "predecessors": [
                "j5_op3"
              ]
            },
            {
              "id": "j5_op5",
              "job_id": "j5",
              "operation_type": "powder_coat",
              "duration": 9,
              "predecessors": [
                "j5_op4"
              ]
            }
          ]
        },
        {
          "id": "j6",
          "name": "Pressure Vessel Nozzle Ring (Code Weld)",
          "due_time": 230,
          "priority": 1,
          "operations": [
            {
              "id": "j6_op1",
              "job_id": "j6",
              "operation_type": "laser_cut",
              "duration": 15,
              "predecessors": []
            },
            {
              "id": "j6_op2",
              "job_id": "j6",
              "operation_type": "press_brake",
              "duration": 20,
              "predecessors": [
                "j6_op1"
              ]
            },
            {
              "id": "j6_op3",
              "job_id": "j6",
              "operation_type": "weld_tig",
              "duration": 16,
              "predecessors": [
                "j6_op2"
              ]
            },
            {
              "id": "j6_op4",
              "job_id": "j6",
              "operation_type": "drilling",
              "duration": 10,
              "predecessors": [
                "j6_op3"
              ]
            },
            {
              "id": "j6_op5",
              "job_id": "j6",
              "operation_type": "inspection",
              "duration": 5,
              "predecessors": [
                "j6_op4"
              ]
            }
          ]
        },
        {
          "id": "j7",
          "name": "Handrail Frame Sections (Install Kit)",
          "due_time": 340,
          "priority": 3,
          "operations": [
            {
              "id": "j7_op1",
              "job_id": "j7",
              "operation_type": "laser_cut",
              "duration": 14,
              "predecessors": []
            },
            {
              "id": "j7_op2",
              "job_id": "j7",
              "operation_type": "press_brake",
              "duration": 8,
              "predecessors": [
                "j7_op1"
              ]
            },
            {
              "id": "j7_op3",
              "job_id": "j7",
              "operation_type": "weld_mig",
              "duration": 14,
              "predecessors": [
                "j7_op2"
              ]
            },
            {
              "id": "j7_op4",
              "job_id": "j7",
              "operation_type": "grinding",
              "duration": 12,
              "predecessors": [
                "j7_op3"
              ]
            },
            {
              "id": "j7_op5",
              "job_id": "j7",
              "operation_type": "inspection",
              "duration": 4,
              "predecessors": [
                "j7_op4"
              ]
            }
          ]
        },
        {
          "id": "j8",
          "name": "Stainless Pump Guard (Cosmetic Finish)",
          "due_time": 360,
          "priority": 2,
          "operations": [
            {
              "id": "j8_op1",
              "job_id": "j8",
              "operation_type": "milling",
              "duration": 17,
              "predecessors": []
            },
            {
              "id": "j8_op2",
              "job_id": "j8",
              "operation_type": "drilling",
              "duration": 10,
              "predecessors": [
                "j8_op1"
              ]
            },
            {
              "id": "j8_op3",
              "job_id": "j8",
              "operation_type": "press_brake",
              "duration": 5,
              "predecessors": [
                "j8_op2"
              ]
            },
            {
              "id": "j8_op4",
              "job_id": "j8",
              "operation_type": "weld_tig",
              "duration": 12,
              "predecessors": [
                "j8_op3"
              ]
            },
            {
              "id": "j8_op5",
              "job_id": "j8",
              "operation_type": "powder_coat",
              "duration": 14,
              "predecessors": [
                "j8_op4"
              ]
            }
          ]
        },
        {
          "id": "j9",
          "name": "Equipment Base Plate (Rush Retrofit)",
          "due_time": 380,
          "priority": 4,
          "operations": [
            {
              "id": "j9_op1",
              "job_id": "j9",
              "operation_type": "laser_cut",
              "duration": 12,
              "predecessors": []
            },
            {
              "id": "j9_op2",
              "job_id": "j9",
              "operation_type": "press_brake",
              "duration": 20,
              "predecessors": [
                "j9_op1"
              ]
            },
            {
              "id": "j9_op3",
              "job_id": "j9",
              "operation_type": "weld_mig",
              "duration": 4,
              "predecessors": [
                "j9_op2"
              ]
            },
            {
              "id": "j9_op4",
              "job_id": "j9",
              "operation_type": "grinding",
              "duration": 18,
              "predecessors": [
                "j9_op3"
              ]
            },
            {
              "id": "j9_op5",
              "job_id": "j9",
              "operation_type": "inspection",
              "duration": 6,
              "predecessors": [
                "j9_op4"
              ]
            }
          ]
        }
      ]
    },
    "constraints": [
      {
        "description": "All jobs must complete within 450 time units (hard upper bound; objective still minimizes makespan).",
        "_spec": {
          "fn": "max_makespan",
          "args": [
            450
          ]
        }
      },
      {
        "description": "Press brake (m4) is down for preventive maintenance from time 120 to 150.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m4",
            120,
            150
          ]
        }
      },
      {
        "description": "TIG bench (m6) is unavailable for argon system service from time 200 to 230.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m6",
            200,
            230
          ]
        }
      },
      {
        "description": "Radial drill press (m3) is unavailable for spindle service from time 80 to 95.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m3",
            80,
            95
          ]
        }
      },
      {
        "description": "Powder coat line (m8) is unavailable for booth cleanup and color purge from time 260 to 275.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m8",
            260,
            275
          ]
        }
      },
      {
        "description": "Job j1 (316SS Hygienic Bracket Set) must complete by time 140.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j1",
            140
          ]
        }
      },
      {
        "description": "Job j3 (Valve Manifold Plate prototype) must complete by time 170.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j3",
            170
          ]
        }
      },
      {
        "description": "Job j6 (Pressure Vessel Nozzle Ring) must complete by time 230.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j6",
            230
          ]
        }
      },
      {
        "description": "Job j2 (Forklift Battery Tray Assembly) must complete by time 260.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j2",
            260
          ]
        }
      },
      {
        "description": "High-priority hygienic brackets (j1) must start before the lower-priority enclosure (j4).",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j1",
            "j4"
          ]
        }
      },
      {
        "description": "Code-weld nozzle ring (j6) must start before the battery tray (j2).",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j6",
            "j2"
          ]
        }
      },
      {
        "description": "Prototype manifold plate (j3) must start before handrail frames (j7).",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j3",
            "j7"
          ]
        }
      },
      {
        "description": "Skid tabs (j5) must start before the retrofit base plate (j9).",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j5",
            "j9"
          ]
        }
      },
      {
        "description": "All drilling operations must use the preferred drilling machine m3 (radial drill press), even though the CNC mill can also drill.",
        "_spec": {
          "fn": "machine_preference",
          "args": [
            "drilling",
            "m3"
          ]
        }
      },
      {
        "description": "For hygienic brackets (j1), keep work-in-process moving: gaps between successive operations cannot exceed 8 time units.",
        "_spec": {
          "fn": "no_idle",
          "args": [
            "j1",
            8
          ]
        }
      },
      {
        "description": "For the code-weld nozzle ring (j6), minimize distortion/handling delays: gaps between successive operations cannot exceed 6 time units.",
        "_spec": {
          "fn": "no_idle",
          "args": [
            "j6",
            6
          ]
        }
      },
      {
        "description": "Powder coat operations for j2, j5, and j8 must run back-to-back on the same line to avoid a costly color-change cycle.",
        "_spec": {
          "fn": "batch_together",
          "args": [
            [
              "j2_op5",
              "j5_op5",
              "j8_op5"
            ]
          ]
        }
      },
      {
        "description": "Laser cutting for j1 and j6 must be consecutive on the laser (shared sheet nesting/program setup).",
        "_spec": {
          "fn": "batch_together",
          "args": [
            [
              "j1_op1",
              "j6_op1"
            ]
          ]
        }
      }
    ],
    "instruction": "Minimize the makespan (total completion time) while respecting operation dependencies, machine capabilities, machine unavailability windows, due dates, priority constraints, no-idle limits, machine preferences, and batch-together requirements.",
    "feasible": true,
    "solution": {
      "domain": "job_shop",
      "schedule": [
        {
          "operation_id": "j1_op1",
          "machine_id": "m1",
          "start_time": 12,
          "end_time": 26
        },
        {
          "operation_id": "j1_op2",
          "machine_id": "m4",
          "start_time": 32,
          "end_time": 42
        },
        {
          "operation_id": "j1_op3",
          "machine_id": "m3",
          "start_time": 42,
          "end_time": 46
        },
        {
          "operation_id": "j1_op4",
          "machine_id": "m6",
          "start_time": 46,
          "end_time": 56
        },
        {
          "operation_id": "j1_op5",
          "machine_id": "m9",
          "start_time": 60,
          "end_time": 68
        },
        {
          "operation_id": "j2_op1",
          "machine_id": "m1",
          "start_time": 55,
          "end_time": 73
        },
        {
          "operation_id": "j2_op2",
          "machine_id": "m4",
          "start_time": 75,
          "end_time": 89
        },
        {
          "operation_id": "j2_op3",
          "machine_id": "m5",
          "start_time": 89,
          "end_time": 105
        },
        {
          "operation_id": "j2_op4",
          "machine_id": "m7",
          "start_time": 105,
          "end_time": 123
        },
        {
          "operation_id": "j2_op5",
          "machine_id": "m8",
          "start_time": 123,
          "end_time": 129
        },
        {
          "operation_id": "j3_op1",
          "machine_id": "m2",
          "start_time": 30,
          "end_time": 40
        },
        {
          "operation_id": "j3_op2",
          "machine_id": "m3",
          "start_time": 46,
          "end_time": 64
        },
        {
          "operation_id": "j3_op3",
          "machine_id": "m4",
          "start_time": 104,
          "end_time": 109
        },
        {
          "operation_id": "j3_op4",
          "machine_id": "m6",
          "start_time": 113,
          "end_time": 117
        },
        {
          "operation_id": "j3_op5",
          "machine_id": "m9",
          "start_time": 117,
          "end_time": 123
        },
        {
          "operation_id": "j4_op1",
          "machine_id": "m1",
          "start_time": 73,
          "end_time": 89
        },
        {
          "operation_id": "j4_op2",
          "machine_id": "m4",
          "start_time": 89,
          "end_time": 101
        },
        {
          "operation_id": "j4_op3",
          "machine_id": "m6",
          "start_time": 101,
          "end_time": 113
        },
        {
          "operation_id": "j4_op4",
          "machine_id": "m7",
          "start_time": 123,
          "end_time": 127
        },
        {
          "operation_id": "j4_op5",
          "machine_id": "m8",
          "start_time": 129,
          "end_time": 134
        },
        {
          "operation_id": "j5_op1",
          "machine_id": "m2",
          "start_time": 0,
          "end_time": 13
        },
        {
          "operation_id": "j5_op2",
          "machine_id": "m3",
          "start_time": 13,
          "end_time": 17
        },
        {
          "operation_id": "j5_op3",
          "machine_id": "m4",
          "start_time": 101,
          "end_time": 104
        },
        {
          "operation_id": "j5_op4",
          "machine_id": "m5",
          "start_time": 105,
          "end_time": 113
        },
        {
          "operation_id": "j5_op5",
          "machine_id": "m8",
          "start_time": 114,
          "end_time": 123
        },
        {
          "operation_id": "j6_op1",
          "machine_id": "m1",
          "start_time": 26,
          "end_time": 41
        },
        {
          "operation_id": "j6_op2",
          "machine_id": "m4",
          "start_time": 47,
          "end_time": 67
        },
        {
          "operation_id": "j6_op3",
          "machine_id": "m6",
          "start_time": 73,
          "end_time": 89
        },
        {
          "operation_id": "j6_op4",
          "machine_id": "m3",
          "start_time": 95,
          "end_time": 105
        },
        {
          "operation_id": "j6_op5",
          "machine_id": "m9",
          "start_time": 105,
          "end_time": 110
        },
        {
          "operation_id": "j7_op1",
          "machine_id": "m1",
          "start_time": 41,
          "end_time": 55
        },
        {
          "operation_id": "j7_op2",
          "machine_id": "m4",
          "start_time": 67,
          "end_time": 75
        },
        {
          "operation_id": "j7_op3",
          "machine_id": "m5",
          "start_time": 75,
          "end_time": 89
        },
        {
          "operation_id": "j7_op4",
          "machine_id": "m7",
          "start_time": 89,
          "end_time": 101
        },
        {
          "operation_id": "j7_op5",
          "machine_id": "m9",
          "start_time": 101,
          "end_time": 105
        },
        {
          "operation_id": "j8_op1",
          "machine_id": "m2",
          "start_time": 13,
          "end_time": 30
        },
        {
          "operation_id": "j8_op2",
          "machine_id": "m3",
          "start_time": 30,
          "end_time": 40
        },
        {
          "operation_id": "j8_op3",
          "machine_id": "m4",
          "start_time": 42,
          "end_time": 47
        },
        {
          "operation_id": "j8_op4",
          "machine_id": "m6",
          "start_time": 56,
          "end_time": 68
        },
        {
          "operation_id": "j8_op5",
          "machine_id": "m8",
          "start_time": 100,
          "end_time": 114
        },
        {
          "operation_id": "j9_op1",
          "machine_id": "m1",
          "start_time": 0,
          "end_time": 12
        },
        {
          "operation_id": "j9_op2",
          "machine_id": "m4",
          "start_time": 12,
          "end_time": 32
        },
        {
          "operation_id": "j9_op3",
          "machine_id": "m5",
          "start_time": 32,
          "end_time": 36
        },
        {
          "operation_id": "j9_op4",
          "machine_id": "m7",
          "start_time": 36,
          "end_time": 54
        },
        {
          "operation_id": "j9_op5",
          "machine_id": "m9",
          "start_time": 54,
          "end_time": 60
        }
      ],
      "makespan": 134,
      "total_tardiness": 0
    }
  },
  {
    "id": "job_shop_b496486a",
    "difficulty": "expert",
    "scenario": {
      "domain": "job_shop",
      "description": "Escapement & Co. is a high-end watch and clock repair workshop scheduling specialist benches (case work, ultrasonic cleaning, micro-lathe, gear cutting, finishing/engraving, and timing/regulation). Each customer job is a multi-step service with strict internal dependencies, customer due dates, and priority tiers. The goal is to minimize makespan while meeting due dates and navigating planned bench downtime and subtle batching/flow constraints typical of horology work.",
      "horizon": 100,
      "machines": [
        {
          "id": "m1",
          "name": "Bergeon Case Bench (Open/Recase/Pressure)",
          "capabilities": [
            "case_open",
            "reassembly",
            "pressure_test"
          ]
        },
        {
          "id": "m2",
          "name": "Elma Ultrasonic Cleaner Line",
          "capabilities": [
            "cleaning"
          ]
        },
        {
          "id": "m3",
          "name": "Schaublin Micro Lathe Station",
          "capabilities": [
            "turning",
            "stem_fit",
            "bushing"
          ]
        },
        {
          "id": "m4",
          "name": "LIGA Gear Cutter & Jeweling Mill",
          "capabilities": [
            "gear_cutting",
            "jewel_setting",
            "milling"
          ]
        },
        {
          "id": "m5",
          "name": "Witschi Timing & Regulation Station",
          "capabilities": [
            "regulation",
            "qc",
            "demagnetize"
          ]
        },
        {
          "id": "m6",
          "name": "Finishing & Laser Engraving Booth",
          "capabilities": [
            "polishing",
            "engraving"
          ]
        }
      ],
      "jobs": [
        {
          "id": "j1",
          "name": "Valence Chronograph Cal. 321 Overhaul",
          "due_time": 65,
          "priority": 1,
          "operations": [
            {
              "id": "j1_op1",
              "job_id": "j1",
              "operation_type": "case_open",
              "duration": 8,
              "predecessors": []
            },
            {
              "id": "j1_op2",
              "job_id": "j1",
              "operation_type": "cleaning",
              "duration": 10,
              "predecessors": [
                "j1_op1"
              ]
            },
            {
              "id": "j1_op3",
              "job_id": "j1",
              "operation_type": "regulation",
              "duration": 9,
              "predecessors": [
                "j1_op2"
              ]
            },
            {
              "id": "j1_op4",
              "job_id": "j1",
              "operation_type": "pressure_test",
              "duration": 8,
              "predecessors": [
                "j1_op3"
              ]
            }
          ]
        },
        {
          "id": "j2",
          "name": "Meridian Diver 300m Full Service",
          "due_time": 80,
          "priority": 2,
          "operations": [
            {
              "id": "j2_op1",
              "job_id": "j2",
              "operation_type": "case_open",
              "duration": 7,
              "predecessors": []
            },
            {
              "id": "j2_op2",
              "job_id": "j2",
              "operation_type": "cleaning",
              "duration": 12,
              "predecessors": [
                "j2_op1"
              ]
            },
            {
              "id": "j2_op3",
              "job_id": "j2",
              "operation_type": "reassembly",
              "duration": 11,
              "predecessors": [
                "j2_op2"
              ]
            },
            {
              "id": "j2_op4",
              "job_id": "j2",
              "operation_type": "pressure_test",
              "duration": 6,
              "predecessors": [
                "j2_op3"
              ]
            }
          ]
        },
        {
          "id": "j3",
          "name": "Aurum Moonphase Gear-Train Repair",
          "due_time": 75,
          "priority": 2,
          "operations": [
            {
              "id": "j3_op1",
              "job_id": "j3",
              "operation_type": "gear_cutting",
              "duration": 14,
              "predecessors": []
            },
            {
              "id": "j3_op2",
              "job_id": "j3",
              "operation_type": "jewel_setting",
              "duration": 6,
              "predecessors": [
                "j3_op1"
              ]
            },
            {
              "id": "j3_op3",
              "job_id": "j3",
              "operation_type": "cleaning",
              "duration": 10,
              "predecessors": [
                "j3_op2"
              ]
            },
            {
              "id": "j3_op4",
              "job_id": "j3",
              "operation_type": "qc",
              "duration": 5,
              "predecessors": [
                "j3_op3"
              ]
            }
          ]
        },
        {
          "id": "j4",
          "name": "Northbridge Pocket Watch Stem Replacement",
          "due_time": 85,
          "priority": 3,
          "operations": [
            {
              "id": "j4_op1",
              "job_id": "j4",
              "operation_type": "turning",
              "duration": 10,
              "predecessors": []
            },
            {
              "id": "j4_op2",
              "job_id": "j4",
              "operation_type": "stem_fit",
              "duration": 8,
              "predecessors": [
                "j4_op1"
              ]
            },
            {
              "id": "j4_op3",
              "job_id": "j4",
              "operation_type": "polishing",
              "duration": 12,
              "predecessors": [
                "j4_op2"
              ]
            },
            {
              "id": "j4_op4",
              "job_id": "j4",
              "operation_type": "qc",
              "duration": 6,
              "predecessors": [
                "j4_op3"
              ]
            }
          ]
        },
        {
          "id": "j5",
          "name": "Heliot Alarm Watch Demagnetize & Regulate",
          "due_time": 60,
          "priority": 1,
          "operations": [
            {
              "id": "j5_op1",
              "job_id": "j5",
              "operation_type": "demagnetize",
              "duration": 6,
              "predecessors": []
            },
            {
              "id": "j5_op2",
              "job_id": "j5",
              "operation_type": "regulation",
              "duration": 10,
              "predecessors": [
                "j5_op1"
              ]
            },
            {
              "id": "j5_op3",
              "job_id": "j5",
              "operation_type": "cleaning",
              "duration": 9,
              "predecessors": [
                "j5_op2"
              ]
            },
            {
              "id": "j5_op4",
              "job_id": "j5",
              "operation_type": "qc",
              "duration": 5,
              "predecessors": [
                "j5_op3"
              ]
            }
          ]
        },
        {
          "id": "j6",
          "name": "Cresswell Anniversary Engraving & Recase",
          "due_time": 90,
          "priority": 3,
          "operations": [
            {
              "id": "j6_op1",
              "job_id": "j6",
              "operation_type": "engraving",
              "duration": 12,
              "predecessors": []
            },
            {
              "id": "j6_op2",
              "job_id": "j6",
              "operation_type": "polishing",
              "duration": 9,
              "predecessors": [
                "j6_op1"
              ]
            },
            {
              "id": "j6_op3",
              "job_id": "j6",
              "operation_type": "reassembly",
              "duration": 13,
              "predecessors": [
                "j6_op2"
              ]
            },
            {
              "id": "j6_op4",
              "job_id": "j6",
              "operation_type": "qc",
              "duration": 6,
              "predecessors": [
                "j6_op3"
              ]
            }
          ]
        }
      ]
    },
    "constraints": [
      {
        "description": "All work must complete within a generous workshop makespan limit (still requiring careful sequencing around bottlenecks).",
        "_spec": {
          "fn": "max_makespan",
          "args": [
            90
          ]
        }
      },
      {
        "description": "Timing station m5 is unavailable for periodic calibration from time 32 to 42 (common in timing machines).",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m5",
            32,
            42
          ]
        }
      },
      {
        "description": "Case bench m1 is reserved for a walk-in pressure diagnosis from time 18 to 24.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m1",
            18,
            24
          ]
        }
      },
      {
        "description": "Chronograph overhaul j1 must complete by customer pickup time 65.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j1",
            65
          ]
        }
      },
      {
        "description": "Diver service j2 must complete by customer pickup time 80.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j2",
            80
          ]
        }
      },
      {
        "description": "Moonphase gear-train repair j3 must complete by customer pickup time 75.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j3",
            75
          ]
        }
      },
      {
        "description": "Pocket watch stem replacement j4 must complete by customer pickup time 85.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j4",
            85
          ]
        }
      },
      {
        "description": "Alarm watch demagnetize & regulate j5 must complete by customer pickup time 60.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j5",
            60
          ]
        }
      },
      {
        "description": "Engraving & recase j6 must complete by customer pickup time 90.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j6",
            90
          ]
        }
      },
      {
        "description": "High-priority chronograph overhaul (j1) must start before the lower-priority anniversary engraving job (j6).",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j1",
            "j6"
          ]
        }
      },
      {
        "description": "High-priority alarm watch job (j5) must start before the lower-priority pocket watch stem job (j4).",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j5",
            "j4"
          ]
        }
      },
      {
        "description": "Regulation operations are preferred on the Witschi timing station (m5) due to stored reference profiles and tooling.",
        "_spec": {
          "fn": "machine_preference",
          "args": [
            "regulation",
            "m5"
          ]
        }
      },
      {
        "description": "Polishing operations are preferred in the finishing/engraving booth (m6) due to dust control and compound setup.",
        "_spec": {
          "fn": "machine_preference",
          "args": [
            "polishing",
            "m6"
          ]
        }
      },
      {
        "description": "Case opening is preferred on the Bergeon case bench (m1) to avoid tool-change overhead.",
        "_spec": {
          "fn": "machine_preference",
          "args": [
            "case_open",
            "m1"
          ]
        }
      },
      {
        "description": "Diver service j2 must not sit partially disassembled too long; gaps between its operations must be <= 6 time units.",
        "_spec": {
          "fn": "no_idle",
          "args": [
            "j2",
            6
          ]
        }
      },
      {
        "description": "The two regulation operations (j1_op3 and j5_op2) must be run consecutively on the same machine to reuse the same timing jig setup (batching constraint).",
        "_spec": {
          "fn": "batch_together",
          "args": [
            [
              "j1_op3",
              "j5_op2"
            ]
          ]
        }
      }
    ],
    "instruction": "Minimize the makespan (total completion time) while respecting operation dependencies, machine capabilities, due dates, and priority constraints. Assign each operation to a capable machine, schedule start times, and ensure machine unavailability windows, batching, and no-idle constraints are satisfied.",
    "feasible": true,
    "solution": {
      "domain": "job_shop",
      "schedule": [
        {
          "operation_id": "j1_op1",
          "machine_id": "m1",
          "start_time": 0,
          "end_time": 8
        },
        {
          "operation_id": "j1_op2",
          "machine_id": "m2",
          "start_time": 8,
          "end_time": 18
        },
        {
          "operation_id": "j1_op3",
          "machine_id": "m5",
          "start_time": 18,
          "end_time": 27
        },
        {
          "operation_id": "j1_op4",
          "machine_id": "m1",
          "start_time": 54,
          "end_time": 62
        },
        {
          "operation_id": "j2_op1",
          "machine_id": "m1",
          "start_time": 8,
          "end_time": 15
        },
        {
          "operation_id": "j2_op2",
          "machine_id": "m2",
          "start_time": 19,
          "end_time": 31
        },
        {
          "operation_id": "j2_op3",
          "machine_id": "m1",
          "start_time": 37,
          "end_time": 48
        },
        {
          "operation_id": "j2_op4",
          "machine_id": "m1",
          "start_time": 48,
          "end_time": 54
        },
        {
          "operation_id": "j3_op1",
          "machine_id": "m4",
          "start_time": 0,
          "end_time": 14
        },
        {
          "operation_id": "j3_op2",
          "machine_id": "m4",
          "start_time": 14,
          "end_time": 20
        },
        {
          "operation_id": "j3_op3",
          "machine_id": "m2",
          "start_time": 40,
          "end_time": 50
        },
        {
          "operation_id": "j3_op4",
          "machine_id": "m5",
          "start_time": 59,
          "end_time": 64
        },
        {
          "operation_id": "j4_op1",
          "machine_id": "m3",
          "start_time": 0,
          "end_time": 10
        },
        {
          "operation_id": "j4_op2",
          "machine_id": "m3",
          "start_time": 10,
          "end_time": 18
        },
        {
          "operation_id": "j4_op3",
          "machine_id": "m6",
          "start_time": 21,
          "end_time": 33
        },
        {
          "operation_id": "j4_op4",
          "machine_id": "m5",
          "start_time": 47,
          "end_time": 53
        },
        {
          "operation_id": "j5_op1",
          "machine_id": "m5",
          "start_time": 0,
          "end_time": 6
        },
        {
          "operation_id": "j5_op2",
          "machine_id": "m5",
          "start_time": 8,
          "end_time": 18
        },
        {
          "operation_id": "j5_op3",
          "machine_id": "m2",
          "start_time": 31,
          "end_time": 40
        },
        {
          "operation_id": "j5_op4",
          "machine_id": "m5",
          "start_time": 42,
          "end_time": 47
        },
        {
          "operation_id": "j6_op1",
          "machine_id": "m6",
          "start_time": 0,
          "end_time": 12
        },
        {
          "operation_id": "j6_op2",
          "machine_id": "m6",
          "start_time": 12,
          "end_time": 21
        },
        {
          "operation_id": "j6_op3",
          "machine_id": "m1",
          "start_time": 24,
          "end_time": 37
        },
        {
          "operation_id": "j6_op4",
          "machine_id": "m5",
          "start_time": 53,
          "end_time": 59
        }
      ],
      "makespan": 64,
      "total_tardiness": 0
    }
  },
  {
    "id": "job_shop_e4a55a0d",
    "difficulty": "expert",
    "scenario": {
      "domain": "job_shop",
      "description": "Hearth & Mortise Custom Woodworks (custom furniture woodworking shop) must schedule cutting, CNC work, joinery, sanding, and spray finishing for multiple bespoke orders. The shop has one panel saw and one CNC router that create major bottlenecks, two spray booths with different changeover realities, and a strict rush-door job that cannot sit between steps (glue/joinery workflow).",
      "horizon": 100,
      "machines": [
        {
          "id": "m1",
          "name": "Altendorf F45 Panel Saw (Rough Breakdown)",
          "capabilities": [
            "rough_cut"
          ]
        },
        {
          "id": "m2",
          "name": "Biesse Rover CNC Router (Routing + CNC Drilling)",
          "capabilities": [
            "cnc_routing",
            "drilling"
          ]
        },
        {
          "id": "m3",
          "name": "Felder Mortiser/Tenoner (Joinery Cell)",
          "capabilities": [
            "joinery",
            "drilling"
          ]
        },
        {
          "id": "m4",
          "name": "SCM Wide-Belt Sander",
          "capabilities": [
            "sanding"
          ]
        },
        {
          "id": "m5",
          "name": "Spray Booth A (Titan)",
          "capabilities": [
            "finishing"
          ]
        },
        {
          "id": "m6",
          "name": "Spray Booth B (Titan)",
          "capabilities": [
            "finishing"
          ]
        }
      ],
      "jobs": [
        {
          "id": "j1",
          "name": "Black Walnut Live-Edge Dining Table Top \u2014 'Ridgecrest'",
          "due_time": 72,
          "priority": 1,
          "operations": [
            {
              "id": "j1_op1",
              "job_id": "j1",
              "operation_type": "rough_cut",
              "duration": 8,
              "predecessors": []
            },
            {
              "id": "j1_op2",
              "job_id": "j1",
              "operation_type": "cnc_routing",
              "duration": 10,
              "predecessors": [
                "j1_op1"
              ]
            },
            {
              "id": "j1_op3",
              "job_id": "j1",
              "operation_type": "sanding",
              "duration": 7,
              "predecessors": [
                "j1_op2"
              ]
            },
            {
              "id": "j1_op4",
              "job_id": "j1",
              "operation_type": "finishing",
              "duration": 12,
              "predecessors": [
                "j1_op3"
              ]
            }
          ]
        },
        {
          "id": "j2",
          "name": "Paint-Grade Shaker Cabinet Door Set \u2014 'Juniper Kitchen'",
          "due_time": 58,
          "priority": 2,
          "operations": [
            {
              "id": "j2_op1",
              "job_id": "j2",
              "operation_type": "rough_cut",
              "duration": 6,
              "predecessors": []
            },
            {
              "id": "j2_op2",
              "job_id": "j2",
              "operation_type": "joinery",
              "duration": 8,
              "predecessors": [
                "j2_op1"
              ]
            },
            {
              "id": "j2_op3",
              "job_id": "j2",
              "operation_type": "sanding",
              "duration": 6,
              "predecessors": [
                "j2_op2"
              ]
            },
            {
              "id": "j2_op4",
              "job_id": "j2",
              "operation_type": "finishing",
              "duration": 10,
              "predecessors": [
                "j2_op3"
              ]
            }
          ]
        },
        {
          "id": "j3",
          "name": "Hard Maple Bookshelf Side Panels \u2014 'Alder Row Library'",
          "due_time": 90,
          "priority": 4,
          "operations": [
            {
              "id": "j3_op1",
              "job_id": "j3",
              "operation_type": "rough_cut",
              "duration": 7,
              "predecessors": []
            },
            {
              "id": "j3_op2",
              "job_id": "j3",
              "operation_type": "cnc_routing",
              "duration": 8,
              "predecessors": [
                "j3_op1"
              ]
            },
            {
              "id": "j3_op3",
              "job_id": "j3",
              "operation_type": "sanding",
              "duration": 7,
              "predecessors": [
                "j3_op2"
              ]
            },
            {
              "id": "j3_op4",
              "job_id": "j3",
              "operation_type": "finishing",
              "duration": 6,
              "predecessors": [
                "j3_op3"
              ]
            }
          ]
        },
        {
          "id": "j4",
          "name": "White Oak Coffee Table Base \u2014 'Stonebridge'",
          "due_time": 60,
          "priority": 2,
          "operations": [
            {
              "id": "j4_op1",
              "job_id": "j4",
              "operation_type": "rough_cut",
              "duration": 5,
              "predecessors": []
            },
            {
              "id": "j4_op2",
              "job_id": "j4",
              "operation_type": "joinery",
              "duration": 7,
              "predecessors": [
                "j4_op1"
              ]
            },
            {
              "id": "j4_op3",
              "job_id": "j4",
              "operation_type": "drilling",
              "duration": 5,
              "predecessors": [
                "j4_op2"
              ]
            },
            {
              "id": "j4_op4",
              "job_id": "j4",
              "operation_type": "finishing",
              "duration": 8,
              "predecessors": [
                "j4_op3"
              ]
            }
          ]
        },
        {
          "id": "j5",
          "name": "Cherry Dresser Drawer Fronts \u2014 'Harborline 6-Drawer'",
          "due_time": 78,
          "priority": 3,
          "operations": [
            {
              "id": "j5_op1",
              "job_id": "j5",
              "operation_type": "rough_cut",
              "duration": 6,
              "predecessors": []
            },
            {
              "id": "j5_op2",
              "job_id": "j5",
              "operation_type": "cnc_routing",
              "duration": 9,
              "predecessors": [
                "j5_op1"
              ]
            },
            {
              "id": "j5_op3",
              "job_id": "j5",
              "operation_type": "sanding",
              "duration": 6,
              "predecessors": [
                "j5_op2"
              ]
            },
            {
              "id": "j5_op4",
              "job_id": "j5",
              "operation_type": "finishing",
              "duration": 9,
              "predecessors": [
                "j5_op3"
              ]
            }
          ]
        },
        {
          "id": "j6",
          "name": "Bamboo Countertop (Waterfall Edge) \u2014 'Cypress Caf\u00e9 Bar'",
          "due_time": 70,
          "priority": 1,
          "operations": [
            {
              "id": "j6_op1",
              "job_id": "j6",
              "operation_type": "rough_cut",
              "duration": 7,
              "predecessors": []
            },
            {
              "id": "j6_op2",
              "job_id": "j6",
              "operation_type": "cnc_routing",
              "duration": 9,
              "predecessors": [
                "j6_op1"
              ]
            },
            {
              "id": "j6_op3",
              "job_id": "j6",
              "operation_type": "sanding",
              "duration": 8,
              "predecessors": [
                "j6_op2"
              ]
            },
            {
              "id": "j6_op4",
              "job_id": "j6",
              "operation_type": "finishing",
              "duration": 11,
              "predecessors": [
                "j6_op3"
              ]
            }
          ]
        }
      ]
    },
    "constraints": [
      {
        "description": "All jobs must complete within 85 time units (upper bound; objective still minimizes makespan).",
        "_spec": {
          "fn": "max_makespan",
          "args": [
            85
          ]
        }
      },
      {
        "description": "Panel saw (m1) is unavailable for blade change and calibration from time 15 to 18.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m1",
            15,
            18
          ]
        }
      },
      {
        "description": "CNC router (m2) is unavailable for spindle maintenance from time 22 to 30.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m2",
            22,
            30
          ]
        }
      },
      {
        "description": "Wide-belt sander (m4) is unavailable for platen inspection from time 12 to 18.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m4",
            12,
            18
          ]
        }
      },
      {
        "description": "Spray Booth A (m5) is unavailable for filter change and booth cleanout from time 40 to 46.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m5",
            40,
            46
          ]
        }
      },
      {
        "description": "Dining table top order (j1) must ship by time 72.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j1",
            72
          ]
        }
      },
      {
        "description": "Shaker cabinet door set (j2) must ship by time 58.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j2",
            58
          ]
        }
      },
      {
        "description": "Coffee table base (j4) must ship by time 60.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j4",
            60
          ]
        }
      },
      {
        "description": "Bamboo countertop (j6) must ship by time 70.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j6",
            70
          ]
        }
      },
      {
        "description": "Cherry drawer fronts (j5) must ship by time 78.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j5",
            78
          ]
        }
      },
      {
        "description": "High-priority rush doors (j2) must start before lower-priority drawer fronts (j5).",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j2",
            "j5"
          ]
        }
      },
      {
        "description": "Premium bamboo countertop (j6) must start before the lower-priority bookshelf panels (j3).",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j6",
            "j3"
          ]
        }
      },
      {
        "description": "Drilling operations must use the CNC router (m2) to match jig/fixture accuracy; the joinery cell's drill capability is a decoy.",
        "_spec": {
          "fn": "machine_preference",
          "args": [
            "drilling",
            "m2"
          ]
        }
      },
      {
        "description": "Rush Shaker doors job (j2) must flow tightly: no gaps larger than 4 time units between its operations.",
        "_spec": {
          "fn": "no_idle",
          "args": [
            "j2",
            4
          ]
        }
      },
      {
        "description": "To avoid a walnut/bamboo finish color mismatch and re-tinting, the two finishing operations must be run consecutively on the same booth (no other job between them).",
        "_spec": {
          "fn": "batch_together",
          "args": [
            [
              "j6_op4",
              "j1_op4"
            ]
          ]
        }
      }
    ],
    "instruction": "Minimize the makespan (total completion time) while respecting machine capabilities, operation dependencies, machine unavailability windows, due dates, priority constraints, no-idle requirements, and batch-together constraints.",
    "feasible": true,
    "solution": {
      "domain": "job_shop",
      "schedule": [
        {
          "operation_id": "j1_op1",
          "machine_id": "m1",
          "start_time": 0,
          "end_time": 8
        },
        {
          "operation_id": "j1_op2",
          "machine_id": "m2",
          "start_time": 8,
          "end_time": 18
        },
        {
          "operation_id": "j1_op3",
          "machine_id": "m4",
          "start_time": 28,
          "end_time": 35
        },
        {
          "operation_id": "j1_op4",
          "machine_id": "m6",
          "start_time": 58,
          "end_time": 70
        },
        {
          "operation_id": "j2_op1",
          "machine_id": "m1",
          "start_time": 8,
          "end_time": 14
        },
        {
          "operation_id": "j2_op2",
          "machine_id": "m3",
          "start_time": 14,
          "end_time": 22
        },
        {
          "operation_id": "j2_op3",
          "machine_id": "m4",
          "start_time": 22,
          "end_time": 28
        },
        {
          "operation_id": "j2_op4",
          "machine_id": "m5",
          "start_time": 28,
          "end_time": 38
        },
        {
          "operation_id": "j3_op1",
          "machine_id": "m1",
          "start_time": 36,
          "end_time": 43
        },
        {
          "operation_id": "j3_op2",
          "machine_id": "m2",
          "start_time": 53,
          "end_time": 61
        },
        {
          "operation_id": "j3_op3",
          "machine_id": "m4",
          "start_time": 61,
          "end_time": 68
        },
        {
          "operation_id": "j3_op4",
          "machine_id": "m5",
          "start_time": 68,
          "end_time": 74
        },
        {
          "operation_id": "j4_op1",
          "machine_id": "m1",
          "start_time": 25,
          "end_time": 30
        },
        {
          "operation_id": "j4_op2",
          "machine_id": "m3",
          "start_time": 30,
          "end_time": 37
        },
        {
          "operation_id": "j4_op3",
          "machine_id": "m2",
          "start_time": 39,
          "end_time": 44
        },
        {
          "operation_id": "j4_op4",
          "machine_id": "m5",
          "start_time": 46,
          "end_time": 54
        },
        {
          "operation_id": "j5_op1",
          "machine_id": "m1",
          "start_time": 30,
          "end_time": 36
        },
        {
          "operation_id": "j5_op2",
          "machine_id": "m2",
          "start_time": 44,
          "end_time": 53
        },
        {
          "operation_id": "j5_op3",
          "machine_id": "m4",
          "start_time": 53,
          "end_time": 59
        },
        {
          "operation_id": "j5_op4",
          "machine_id": "m5",
          "start_time": 59,
          "end_time": 68
        },
        {
          "operation_id": "j6_op1",
          "machine_id": "m1",
          "start_time": 18,
          "end_time": 25
        },
        {
          "operation_id": "j6_op2",
          "machine_id": "m2",
          "start_time": 30,
          "end_time": 39
        },
        {
          "operation_id": "j6_op3",
          "machine_id": "m4",
          "start_time": 39,
          "end_time": 47
        },
        {
          "operation_id": "j6_op4",
          "machine_id": "m6",
          "start_time": 47,
          "end_time": 58
        }
      ],
      "makespan": 74,
      "total_tardiness": 0
    }
  },
  {
    "id": "job_shop_9907b64c",
    "difficulty": "expert",
    "scenario": {
      "domain": "job_shop",
      "description": "Bayou Elastomers & Plastics (BEP) is a rubber-and-plastics molding shop running EPDM/TPU/TPE parts for industrial seals and medical-device subcomponents. Each job is a customer SKU that must pass drying, molding, downstream finishing (trim/weld/print), and QC on shared equipment with planned maintenance and tight sequencing requirements.",
      "horizon": 100,
      "machines": [
        {
          "id": "m1",
          "name": "Engel Duo 220T Injection Press (color-critical cell)",
          "capabilities": [
            "color_critical_molding"
          ]
        },
        {
          "id": "m2",
          "name": "Arburg Allrounder 180T Injection Press",
          "capabilities": [
            "molding"
          ]
        },
        {
          "id": "m3",
          "name": "Conair Desiccant Dryer + Blender",
          "capabilities": [
            "drying"
          ]
        },
        {
          "id": "m4",
          "name": "5-Axis CNC Trim Router (deflash/trim)",
          "capabilities": [
            "trimming"
          ]
        },
        {
          "id": "m5",
          "name": "Branson Ultrasonic Welder (plastics assembly)",
          "capabilities": [
            "welding"
          ]
        },
        {
          "id": "m6",
          "name": "InkCup Pad Printer (lot/branding)",
          "capabilities": [
            "printing"
          ]
        },
        {
          "id": "m7",
          "name": "QC Lab (CMM + leak/visual bench)",
          "capabilities": [
            "inspection"
          ]
        }
      ],
      "jobs": [
        {
          "id": "j1",
          "name": "SealFlex\u2122 Valve Boot (EPDM, black)",
          "due_time": 80,
          "priority": 2,
          "operations": [
            {
              "id": "j1_op1",
              "job_id": "j1",
              "operation_type": "drying",
              "duration": 8,
              "predecessors": []
            },
            {
              "id": "j1_op2",
              "job_id": "j1",
              "operation_type": "color_critical_molding",
              "duration": 18,
              "predecessors": [
                "j1_op1"
              ]
            },
            {
              "id": "j1_op3",
              "job_id": "j1",
              "operation_type": "trimming",
              "duration": 6,
              "predecessors": [
                "j1_op2"
              ]
            },
            {
              "id": "j1_op4",
              "job_id": "j1",
              "operation_type": "inspection",
              "duration": 5,
              "predecessors": [
                "j1_op3"
              ]
            }
          ]
        },
        {
          "id": "j2",
          "name": "PolyGrip\u2122 Gasket Ring (TPU, natural) + lot code",
          "due_time": 80,
          "priority": 4,
          "operations": [
            {
              "id": "j2_op1",
              "job_id": "j2",
              "operation_type": "drying",
              "duration": 7,
              "predecessors": []
            },
            {
              "id": "j2_op2",
              "job_id": "j2",
              "operation_type": "molding",
              "duration": 16,
              "predecessors": [
                "j2_op1"
              ]
            },
            {
              "id": "j2_op3",
              "job_id": "j2",
              "operation_type": "printing",
              "duration": 4,
              "predecessors": [
                "j2_op2"
              ]
            },
            {
              "id": "j2_op4",
              "job_id": "j2",
              "operation_type": "inspection",
              "duration": 4,
              "predecessors": [
                "j2_op3"
              ]
            }
          ]
        },
        {
          "id": "j3",
          "name": "ClearGuard\u2122 Lens Cap (PC) welded assembly",
          "due_time": 80,
          "priority": 4,
          "operations": [
            {
              "id": "j3_op1",
              "job_id": "j3",
              "operation_type": "drying",
              "duration": 6,
              "predecessors": []
            },
            {
              "id": "j3_op2",
              "job_id": "j3",
              "operation_type": "molding",
              "duration": 14,
              "predecessors": [
                "j3_op1"
              ]
            },
            {
              "id": "j3_op3",
              "job_id": "j3",
              "operation_type": "welding",
              "duration": 7,
              "predecessors": [
                "j3_op2"
              ]
            },
            {
              "id": "j3_op4",
              "job_id": "j3",
              "operation_type": "inspection",
              "duration": 6,
              "predecessors": [
                "j3_op3"
              ]
            }
          ]
        },
        {
          "id": "j4",
          "name": "Med-Lock\u2122 Luer Collar (PP, blue; color-match critical)",
          "due_time": 62,
          "priority": 1,
          "operations": [
            {
              "id": "j4_op1",
              "job_id": "j4",
              "operation_type": "drying",
              "duration": 9,
              "predecessors": []
            },
            {
              "id": "j4_op2",
              "job_id": "j4",
              "operation_type": "color_critical_molding",
              "duration": 20,
              "predecessors": [
                "j4_op1"
              ]
            },
            {
              "id": "j4_op3",
              "job_id": "j4",
              "operation_type": "trimming",
              "duration": 6,
              "predecessors": [
                "j4_op2"
              ]
            },
            {
              "id": "j4_op4",
              "job_id": "j4",
              "operation_type": "printing",
              "duration": 4,
              "predecessors": [
                "j4_op3"
              ]
            }
          ]
        },
        {
          "id": "j5",
          "name": "DustShield\u2122 Bellows (TPE) trimmed seal",
          "due_time": 77,
          "priority": 5,
          "operations": [
            {
              "id": "j5_op1",
              "job_id": "j5",
              "operation_type": "drying",
              "duration": 5,
              "predecessors": []
            },
            {
              "id": "j5_op2",
              "job_id": "j5",
              "operation_type": "molding",
              "duration": 12,
              "predecessors": [
                "j5_op1"
              ]
            },
            {
              "id": "j5_op3",
              "job_id": "j5",
              "operation_type": "trimming",
              "duration": 5,
              "predecessors": [
                "j5_op2"
              ]
            },
            {
              "id": "j5_op4",
              "job_id": "j5",
              "operation_type": "inspection",
              "duration": 3,
              "predecessors": [
                "j5_op3"
              ]
            }
          ]
        },
        {
          "id": "j6",
          "name": "TrackMark\u2122 Overmold Handle (Nylon + TPE) welded insert",
          "due_time": 78,
          "priority": 3,
          "operations": [
            {
              "id": "j6_op1",
              "job_id": "j6",
              "operation_type": "drying",
              "duration": 8,
              "predecessors": []
            },
            {
              "id": "j6_op2",
              "job_id": "j6",
              "operation_type": "molding",
              "duration": 15,
              "predecessors": [
                "j6_op1"
              ]
            },
            {
              "id": "j6_op3",
              "job_id": "j6",
              "operation_type": "welding",
              "duration": 5,
              "predecessors": [
                "j6_op2"
              ]
            },
            {
              "id": "j6_op4",
              "job_id": "j6",
              "operation_type": "inspection",
              "duration": 5,
              "predecessors": [
                "j6_op3"
              ]
            }
          ]
        }
      ]
    },
    "constraints": [
      {
        "description": "All jobs must complete within 80 time units (hard makespan cap to force tradeoffs).",
        "_spec": {
          "fn": "max_makespan",
          "args": [
            80
          ]
        }
      },
      {
        "description": "Engel color-critical press (m1) is down for preventive maintenance from time 20 to 30.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m1",
            20,
            30
          ]
        }
      },
      {
        "description": "QC Lab (m7) is unavailable for recalibration from time 60 to 65 (creates late-stage congestion risk).",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m7",
            60,
            65
          ]
        }
      },
      {
        "description": "Job j4 (Med-Lock\u2122 Luer Collar) must complete by time 62.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j4",
            62
          ]
        }
      },
      {
        "description": "Job j1 (SealFlex\u2122 Valve Boot) must complete by time 80.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j1",
            80
          ]
        }
      },
      {
        "description": "Job j6 (TrackMark\u2122 Overmold Handle) must complete by time 78.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j6",
            78
          ]
        }
      },
      {
        "description": "Job j5 (DustShield\u2122 Bellows) must complete by time 77.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j5",
            77
          ]
        }
      },
      {
        "description": "Job j2 (PolyGrip\u2122 Gasket Ring) must complete by time 80.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j2",
            80
          ]
        }
      },
      {
        "description": "Job j3 (ClearGuard\u2122 Lens Cap) must complete by time 80.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j3",
            80
          ]
        }
      },
      {
        "description": "High-priority medical collar job (j4) must start before the lower-priority gasket job (j2).",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j4",
            "j2"
          ]
        }
      },
      {
        "description": "High-priority medical collar job (j4) must start before the bellows job (j5), preventing greedy early-start of short jobs.",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j4",
            "j5"
          ]
        }
      },
      {
        "description": "Color-critical molding operations must use the Engel color-matched press m1 (decoy: m2 can mold, but not acceptable for these lots).",
        "_spec": {
          "fn": "machine_preference",
          "args": [
            "color_critical_molding",
            "m1"
          ]
        }
      },
      {
        "description": "Job j4 must flow with at most 4 time units of waiting between its consecutive operations (material handling/lot control constraint).",
        "_spec": {
          "fn": "no_idle",
          "args": [
            "j4",
            4
          ]
        }
      },
      {
        "description": "Printing for j4 and j2 must be run back-to-back on the pad printer (single ink mix + plate setup), in that order.",
        "_spec": {
          "fn": "batch_together",
          "args": [
            [
              "j4_op4",
              "j2_op3"
            ]
          ]
        }
      }
    ],
    "instruction": "Minimize the makespan (total completion time) while respecting operation dependencies, machine capabilities, due dates, and priority constraints.",
    "feasible": true,
    "solution": {
      "domain": "job_shop",
      "schedule": [
        {
          "operation_id": "j1_op1",
          "machine_id": "m3",
          "start_time": 33,
          "end_time": 41
        },
        {
          "operation_id": "j1_op2",
          "machine_id": "m1",
          "start_time": 50,
          "end_time": 68
        },
        {
          "operation_id": "j1_op3",
          "machine_id": "m4",
          "start_time": 68,
          "end_time": 74
        },
        {
          "operation_id": "j1_op4",
          "machine_id": "m7",
          "start_time": 74,
          "end_time": 79
        },
        {
          "operation_id": "j2_op1",
          "machine_id": "m3",
          "start_time": 26,
          "end_time": 33
        },
        {
          "operation_id": "j2_op2",
          "machine_id": "m2",
          "start_time": 35,
          "end_time": 51
        },
        {
          "operation_id": "j2_op3",
          "machine_id": "m6",
          "start_time": 52,
          "end_time": 56
        },
        {
          "operation_id": "j2_op4",
          "machine_id": "m7",
          "start_time": 56,
          "end_time": 60
        },
        {
          "operation_id": "j3_op1",
          "machine_id": "m3",
          "start_time": 0,
          "end_time": 6
        },
        {
          "operation_id": "j3_op2",
          "machine_id": "m2",
          "start_time": 6,
          "end_time": 20
        },
        {
          "operation_id": "j3_op3",
          "machine_id": "m5",
          "start_time": 20,
          "end_time": 27
        },
        {
          "operation_id": "j3_op4",
          "machine_id": "m7",
          "start_time": 27,
          "end_time": 33
        },
        {
          "operation_id": "j4_op1",
          "machine_id": "m3",
          "start_time": 17,
          "end_time": 26
        },
        {
          "operation_id": "j4_op2",
          "machine_id": "m1",
          "start_time": 30,
          "end_time": 50
        },
        {
          "operation_id": "j4_op3",
          "machine_id": "m4",
          "start_time": 50,
          "end_time": 56
        },
        {
          "operation_id": "j4_op4",
          "machine_id": "m6",
          "start_time": 56,
          "end_time": 60
        },
        {
          "operation_id": "j5_op1",
          "machine_id": "m3",
          "start_time": 41,
          "end_time": 46
        },
        {
          "operation_id": "j5_op2",
          "machine_id": "m2",
          "start_time": 51,
          "end_time": 63
        },
        {
          "operation_id": "j5_op3",
          "machine_id": "m4",
          "start_time": 63,
          "end_time": 68
        },
        {
          "operation_id": "j5_op4",
          "machine_id": "m7",
          "start_time": 68,
          "end_time": 71
        },
        {
          "operation_id": "j6_op1",
          "machine_id": "m3",
          "start_time": 6,
          "end_time": 14
        },
        {
          "operation_id": "j6_op2",
          "machine_id": "m2",
          "start_time": 20,
          "end_time": 35
        },
        {
          "operation_id": "j6_op3",
          "machine_id": "m5",
          "start_time": 35,
          "end_time": 40
        },
        {
          "operation_id": "j6_op4",
          "machine_id": "m7",
          "start_time": 40,
          "end_time": 45
        }
      ],
      "makespan": 79,
      "total_tardiness": 0
    }
  },
  {
    "id": "job_shop_64556072",
    "difficulty": "expert",
    "scenario": {
      "domain": "job_shop",
      "description": "Juniper & Ash Ceramic Works (a mid-sized pottery studio/factory) is producing a mixed run of wheel-thrown and kiln-fired ware for galleries and a tea-house contract. The floor includes two clay prep stations, two wheel lines, two bisque kilns, a reduction glaze kiln, a dedicated spray/decal booth, and a QC/packing bench. Scheduling must respect operation precedence within each product line, machine capability limits, maintenance outages, and customer due dates/priorities while minimizing makespan.",
      "horizon": 100,
      "machines": [
        {
          "id": "m1",
          "name": "Redwood Wedging Table (Clay Prep A)",
          "capabilities": [
            "clay_prep"
          ]
        },
        {
          "id": "m10",
          "name": "Hawthorn Slab Roller & Wedger (Clay Prep B)",
          "capabilities": [
            "clay_prep"
          ]
        },
        {
          "id": "m2",
          "name": "Shimpo Wheel Line A (Throw/Trim)",
          "capabilities": [
            "throwing",
            "trimming"
          ]
        },
        {
          "id": "m3",
          "name": "Bailey Wheel Line B (Throw/Trim)",
          "capabilities": [
            "throwing",
            "trimming"
          ]
        },
        {
          "id": "m4",
          "name": "Juniper Spray Glaze + Decal Booth",
          "capabilities": [
            "glazing",
            "decal"
          ]
        },
        {
          "id": "m5",
          "name": "Indigo Brush Glaze Station",
          "capabilities": [
            "glazing"
          ]
        },
        {
          "id": "m6",
          "name": "Skutt KM-1027 Bisque Kiln 1",
          "capabilities": [
            "bisque_firing"
          ]
        },
        {
          "id": "m7",
          "name": "L&L e28S Bisque Kiln 2",
          "capabilities": [
            "bisque_firing"
          ]
        },
        {
          "id": "m8",
          "name": "Noborigama Reduction/Glaze-Fire Kiln",
          "capabilities": [
            "glaze_firing"
          ]
        },
        {
          "id": "m9",
          "name": "Willow QC & Packing Bench",
          "capabilities": [
            "qc_pack"
          ]
        }
      ],
      "jobs": [
        {
          "id": "j1",
          "name": "Sakura Tea Set (Stoneware)",
          "due_time": 78,
          "priority": 1,
          "operations": [
            {
              "id": "j1_op1",
              "job_id": "j1",
              "operation_type": "clay_prep",
              "duration": 11,
              "predecessors": []
            },
            {
              "id": "j1_op2",
              "job_id": "j1",
              "operation_type": "throwing",
              "duration": 14,
              "predecessors": [
                "j1_op1"
              ]
            },
            {
              "id": "j1_op3",
              "job_id": "j1",
              "operation_type": "bisque_firing",
              "duration": 7,
              "predecessors": [
                "j1_op2"
              ]
            },
            {
              "id": "j1_op4",
              "job_id": "j1",
              "operation_type": "glazing",
              "duration": 16,
              "predecessors": [
                "j1_op3"
              ]
            }
          ]
        },
        {
          "id": "j2",
          "name": "Kintsugi-Inspired Vase Run (Gallery Commission)",
          "due_time": 89,
          "priority": 2,
          "operations": [
            {
              "id": "j2_op1",
              "job_id": "j2",
              "operation_type": "clay_prep",
              "duration": 13,
              "predecessors": []
            },
            {
              "id": "j2_op2",
              "job_id": "j2",
              "operation_type": "throwing",
              "duration": 14,
              "predecessors": [
                "j2_op1"
              ]
            },
            {
              "id": "j2_op3",
              "job_id": "j2",
              "operation_type": "bisque_firing",
              "duration": 8,
              "predecessors": [
                "j2_op2"
              ]
            },
            {
              "id": "j2_op4",
              "job_id": "j2",
              "operation_type": "glaze_firing",
              "duration": 15,
              "predecessors": [
                "j2_op3"
              ]
            }
          ]
        },
        {
          "id": "j3",
          "name": "Terra-Cotta Planter Batch (Garden Retail)",
          "due_time": 90,
          "priority": 4,
          "operations": [
            {
              "id": "j3_op1",
              "job_id": "j3",
              "operation_type": "clay_prep",
              "duration": 10,
              "predecessors": []
            },
            {
              "id": "j3_op2",
              "job_id": "j3",
              "operation_type": "throwing",
              "duration": 12,
              "predecessors": [
                "j3_op1"
              ]
            },
            {
              "id": "j3_op3",
              "job_id": "j3",
              "operation_type": "trimming",
              "duration": 6,
              "predecessors": [
                "j3_op2"
              ]
            },
            {
              "id": "j3_op4",
              "job_id": "j3",
              "operation_type": "bisque_firing",
              "duration": 12,
              "predecessors": [
                "j3_op3"
              ]
            }
          ]
        },
        {
          "id": "j4",
          "name": "Celadon Dinner Plate Set (Tea-House Contract)",
          "due_time": 87,
          "priority": 3,
          "operations": [
            {
              "id": "j4_op1",
              "job_id": "j4",
              "operation_type": "clay_prep",
              "duration": 12,
              "predecessors": []
            },
            {
              "id": "j4_op2",
              "job_id": "j4",
              "operation_type": "throwing",
              "duration": 14,
              "predecessors": [
                "j4_op1"
              ]
            },
            {
              "id": "j4_op3",
              "job_id": "j4",
              "operation_type": "bisque_firing",
              "duration": 7,
              "predecessors": [
                "j4_op2"
              ]
            },
            {
              "id": "j4_op4",
              "job_id": "j4",
              "operation_type": "glaze_firing",
              "duration": 16,
              "predecessors": [
                "j4_op3"
              ]
            }
          ]
        },
        {
          "id": "j5",
          "name": "Porcelain Mug w/ Decal (Gift Shop)",
          "due_time": 84,
          "priority": 5,
          "operations": [
            {
              "id": "j5_op1",
              "job_id": "j5",
              "operation_type": "clay_prep",
              "duration": 11,
              "predecessors": []
            },
            {
              "id": "j5_op2",
              "job_id": "j5",
              "operation_type": "throwing",
              "duration": 13,
              "predecessors": [
                "j5_op1"
              ]
            },
            {
              "id": "j5_op3",
              "job_id": "j5",
              "operation_type": "glaze_firing",
              "duration": 9,
              "predecessors": [
                "j5_op2"
              ]
            },
            {
              "id": "j5_op4",
              "job_id": "j5",
              "operation_type": "decal",
              "duration": 5,
              "predecessors": [
                "j5_op3"
              ]
            }
          ]
        },
        {
          "id": "j6",
          "name": "Raku Bowl Set (Limited Drop)",
          "due_time": 80,
          "priority": 2,
          "operations": [
            {
              "id": "j6_op1",
              "job_id": "j6",
              "operation_type": "clay_prep",
              "duration": 11,
              "predecessors": []
            },
            {
              "id": "j6_op2",
              "job_id": "j6",
              "operation_type": "throwing",
              "duration": 12,
              "predecessors": [
                "j6_op1"
              ]
            },
            {
              "id": "j6_op3",
              "job_id": "j6",
              "operation_type": "bisque_firing",
              "duration": 7,
              "predecessors": [
                "j6_op2"
              ]
            },
            {
              "id": "j6_op4",
              "job_id": "j6",
              "operation_type": "glazing",
              "duration": 11,
              "predecessors": [
                "j6_op3"
              ]
            }
          ]
        },
        {
          "id": "j7",
          "name": "Studio Sample Tile Wall (Showroom Refresh)",
          "due_time": 90,
          "priority": 6,
          "operations": [
            {
              "id": "j7_op1",
              "job_id": "j7",
              "operation_type": "clay_prep",
              "duration": 10,
              "predecessors": []
            },
            {
              "id": "j7_op2",
              "job_id": "j7",
              "operation_type": "throwing",
              "duration": 13,
              "predecessors": [
                "j7_op1"
              ]
            },
            {
              "id": "j7_op3",
              "job_id": "j7",
              "operation_type": "bisque_firing",
              "duration": 6,
              "predecessors": [
                "j7_op2"
              ]
            },
            {
              "id": "j7_op4",
              "job_id": "j7",
              "operation_type": "qc_pack",
              "duration": 12,
              "predecessors": [
                "j7_op3"
              ]
            }
          ]
        }
      ]
    },
    "constraints": [
      {
        "description": "All jobs must complete within 90 time units (>= 65 required by longest job sum + 30% buffer).",
        "_spec": {
          "fn": "max_makespan",
          "args": [
            90
          ]
        }
      },
      {
        "description": "Shimpo Wheel Line A (m2) is unavailable for belt replacement from time 20 to 28.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m2",
            20,
            28
          ]
        }
      },
      {
        "description": "Juniper Spray Glaze + Decal Booth (m4) is unavailable for filter/booth cleaning from time 32 to 40.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m4",
            32,
            40
          ]
        }
      },
      {
        "description": "Skutt Bisque Kiln 1 (m6) is unavailable for thermocouple maintenance from time 62 to 70.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m6",
            62,
            70
          ]
        }
      },
      {
        "description": "Noborigama Reduction/Glaze-Fire Kiln (m8) is unavailable during a scheduled reduction cycle reset from time 45 to 55.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m8",
            45,
            55
          ]
        }
      },
      {
        "description": "Sakura Tea Set (j1) must complete by time 78.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j1",
            78
          ]
        }
      },
      {
        "description": "Kintsugi-Inspired Vase Run (j2) must complete by time 89.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j2",
            89
          ]
        }
      },
      {
        "description": "Terra-Cotta Planter Batch (j3) must complete by time 90.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j3",
            90
          ]
        }
      },
      {
        "description": "Celadon Dinner Plate Set (j4) must complete by time 87.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j4",
            87
          ]
        }
      },
      {
        "description": "Porcelain Mug w/ Decal (j5) must complete by time 84.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j5",
            84
          ]
        }
      },
      {
        "description": "Raku Bowl Set (j6) must complete by time 80.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j6",
            80
          ]
        }
      },
      {
        "description": "Studio Sample Tile Wall (j7) must complete by time 90.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j7",
            90
          ]
        }
      },
      {
        "description": "Higher-priority Sakura Tea Set (j1) must start before lower-priority Porcelain Mug w/ Decal (j5).",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j1",
            "j5"
          ]
        }
      },
      {
        "description": "Tea-house contract plates (j4) must start before the lower-priority showroom tiles (j7).",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j4",
            "j7"
          ]
        }
      },
      {
        "description": "Gallery commission vases (j2) must start before the lower-priority planter batch (j3).",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j2",
            "j3"
          ]
        }
      },
      {
        "description": "All glazing operations must use the preferred spray/decal booth m4 (brush station is a decoy for this schedule).",
        "_spec": {
          "fn": "machine_preference",
          "args": [
            "glazing",
            "m4"
          ]
        }
      },
      {
        "description": "All decal operations must use the preferred spray/decal booth m4.",
        "_spec": {
          "fn": "machine_preference",
          "args": [
            "decal",
            "m4"
          ]
        }
      },
      {
        "description": "All glaze-firing operations must use the Noborigama reduction/glaze kiln m8.",
        "_spec": {
          "fn": "machine_preference",
          "args": [
            "glaze_firing",
            "m8"
          ]
        }
      },
      {
        "description": "For the tea set (j1), keep the process flowing: no gap larger than 20 time units between consecutive operations.",
        "_spec": {
          "fn": "no_idle",
          "args": [
            "j1",
            20
          ]
        }
      },
      {
        "description": "Batch constraint: the two contract-critical glaze firings must be back-to-back on the same kiln load (no other operation in between).",
        "_spec": {
          "fn": "batch_together",
          "args": [
            [
              "j4_op4",
              "j2_op4"
            ]
          ]
        }
      },
      {
        "description": "Batch constraint: bisque firings for j1 and j6 should be run consecutively on the same bisque kiln to simulate shared kiln loading.",
        "_spec": {
          "fn": "batch_together",
          "args": [
            [
              "j1_op3",
              "j6_op3"
            ]
          ]
        }
      }
    ],
    "instruction": "Minimize the makespan (total completion time) while respecting operation dependencies, machine capabilities, machine downtime windows, due dates, priority constraints, and the batching/no-idle requirements.",
    "feasible": true,
    "solution": {
      "domain": "job_shop",
      "schedule": [
        {
          "operation_id": "j1_op1",
          "machine_id": "m10",
          "start_time": 0,
          "end_time": 11
        },
        {
          "operation_id": "j1_op2",
          "machine_id": "m3",
          "start_time": 24,
          "end_time": 38
        },
        {
          "operation_id": "j1_op3",
          "machine_id": "m7",
          "start_time": 43,
          "end_time": 50
        },
        {
          "operation_id": "j1_op4",
          "machine_id": "m4",
          "start_time": 50,
          "end_time": 66
        },
        {
          "operation_id": "j2_op1",
          "machine_id": "m10",
          "start_time": 11,
          "end_time": 24
        },
        {
          "operation_id": "j2_op2",
          "machine_id": "m2",
          "start_time": 28,
          "end_time": 42
        },
        {
          "operation_id": "j2_op3",
          "machine_id": "m6",
          "start_time": 42,
          "end_time": 50
        },
        {
          "operation_id": "j2_op4",
          "machine_id": "m8",
          "start_time": 55,
          "end_time": 70
        },
        {
          "operation_id": "j3_op1",
          "machine_id": "m10",
          "start_time": 34,
          "end_time": 44
        },
        {
          "operation_id": "j3_op2",
          "machine_id": "m2",
          "start_time": 56,
          "end_time": 68
        },
        {
          "operation_id": "j3_op3",
          "machine_id": "m3",
          "start_time": 68,
          "end_time": 74
        },
        {
          "operation_id": "j3_op4",
          "machine_id": "m7",
          "start_time": 74,
          "end_time": 86
        },
        {
          "operation_id": "j4_op1",
          "machine_id": "m1",
          "start_time": 11,
          "end_time": 23
        },
        {
          "operation_id": "j4_op2",
          "machine_id": "m2",
          "start_time": 42,
          "end_time": 56
        },
        {
          "operation_id": "j4_op3",
          "machine_id": "m7",
          "start_time": 57,
          "end_time": 64
        },
        {
          "operation_id": "j4_op4",
          "machine_id": "m8",
          "start_time": 70,
          "end_time": 86
        },
        {
          "operation_id": "j5_op1",
          "machine_id": "m1",
          "start_time": 0,
          "end_time": 11
        },
        {
          "operation_id": "j5_op2",
          "machine_id": "m3",
          "start_time": 11,
          "end_time": 24
        },
        {
          "operation_id": "j5_op3",
          "machine_id": "m8",
          "start_time": 31,
          "end_time": 40
        },
        {
          "operation_id": "j5_op4",
          "machine_id": "m4",
          "start_time": 40,
          "end_time": 45
        },
        {
          "operation_id": "j6_op1",
          "machine_id": "m1",
          "start_time": 23,
          "end_time": 34
        },
        {
          "operation_id": "j6_op2",
          "machine_id": "m3",
          "start_time": 38,
          "end_time": 50
        },
        {
          "operation_id": "j6_op3",
          "machine_id": "m7",
          "start_time": 50,
          "end_time": 57
        },
        {
          "operation_id": "j6_op4",
          "machine_id": "m4",
          "start_time": 66,
          "end_time": 77
        },
        {
          "operation_id": "j7_op1",
          "machine_id": "m10",
          "start_time": 24,
          "end_time": 34
        },
        {
          "operation_id": "j7_op2",
          "machine_id": "m3",
          "start_time": 50,
          "end_time": 63
        },
        {
          "operation_id": "j7_op3",
          "machine_id": "m7",
          "start_time": 64,
          "end_time": 70
        },
        {
          "operation_id": "j7_op4",
          "machine_id": "m9",
          "start_time": 74,
          "end_time": 86
        }
      ],
      "makespan": 86,
      "total_tardiness": 0
    }
  },
  {
    "id": "job_shop_5c32998c",
    "difficulty": "expert",
    "scenario": {
      "domain": "job_shop",
      "description": "Aetherworks Propulsion & Structures (APS) runs an aerospace machining-and-assembly cell producing flight-critical hardware (titanium engine mounts, turbopump housings, landing-gear latch blocks, avionics brackets, composite control fins, and cryogenic valve manifolds). Orders compete for shared CNC/EDM capacity, metrology time in a cleanroom, and an autoclave window, with strict internal due dates and priority-start rules.",
      "horizon": 100,
      "machines": [
        {
          "id": "m1",
          "name": "Makino DA300 5\u2011Axis CNC (Cell M1)",
          "capabilities": [
            "milling",
            "drilling",
            "finishing"
          ]
        },
        {
          "id": "m2",
          "name": "Mazak Integrex Lathe\u2011Mill (Cell M2)",
          "capabilities": [
            "turning",
            "milling",
            "finishing"
          ]
        },
        {
          "id": "m3",
          "name": "GF Drill/EDM Hybrid Cell (Cell M3)",
          "capabilities": [
            "drilling",
            "edm"
          ]
        },
        {
          "id": "m4",
          "name": "ASC Autoclave Line A (Cell M4)",
          "capabilities": [
            "composite_cure"
          ]
        },
        {
          "id": "m5",
          "name": "BlueSky Cleanroom Assembly & Metrology (Cell M5)",
          "capabilities": [
            "inspection",
            "assembly",
            "composite_layup"
          ]
        }
      ],
      "jobs": [
        {
          "id": "j1",
          "name": "Aquila A7 Turbopump Housing (Ti\u20116Al\u20114V)",
          "due_time": 92,
          "priority": 5,
          "operations": [
            {
              "id": "j1_op1",
              "job_id": "j1",
              "operation_type": "turning",
              "duration": 12,
              "predecessors": []
            },
            {
              "id": "j1_op2",
              "job_id": "j1",
              "operation_type": "milling",
              "duration": 6,
              "predecessors": [
                "j1_op1"
              ]
            },
            {
              "id": "j1_op3",
              "job_id": "j1",
              "operation_type": "drilling",
              "duration": 10,
              "predecessors": [
                "j1_op2"
              ]
            },
            {
              "id": "j1_op4",
              "job_id": "j1",
              "operation_type": "inspection",
              "duration": 8,
              "predecessors": [
                "j1_op3"
              ]
            }
          ]
        },
        {
          "id": "j2",
          "name": "Stratos\u20119 Engine Mount Lug (Ti forging)",
          "due_time": 88,
          "priority": 3,
          "operations": [
            {
              "id": "j2_op1",
              "job_id": "j2",
              "operation_type": "milling",
              "duration": 14,
              "predecessors": []
            },
            {
              "id": "j2_op2",
              "job_id": "j2",
              "operation_type": "drilling",
              "duration": 10,
              "predecessors": [
                "j2_op1"
              ]
            },
            {
              "id": "j2_op3",
              "job_id": "j2",
              "operation_type": "edm",
              "duration": 8,
              "predecessors": [
                "j2_op2"
              ]
            },
            {
              "id": "j2_op4",
              "job_id": "j2",
              "operation_type": "inspection",
              "duration": 6,
              "predecessors": [
                "j2_op3"
              ]
            }
          ]
        },
        {
          "id": "j3",
          "name": "Helios Landing\u2011Gear Latch Block (17\u20114PH)",
          "due_time": 82,
          "priority": 2,
          "operations": [
            {
              "id": "j3_op1",
              "job_id": "j3",
              "operation_type": "turning",
              "duration": 16,
              "predecessors": []
            },
            {
              "id": "j3_op2",
              "job_id": "j3",
              "operation_type": "milling",
              "duration": 8,
              "predecessors": [
                "j3_op1"
              ]
            },
            {
              "id": "j3_op3",
              "job_id": "j3",
              "operation_type": "drilling",
              "duration": 12,
              "predecessors": [
                "j3_op2"
              ]
            },
            {
              "id": "j3_op4",
              "job_id": "j3",
              "operation_type": "inspection",
              "duration": 6,
              "predecessors": [
                "j3_op3"
              ]
            }
          ]
        },
        {
          "id": "j4",
          "name": "OrionX Avionics Bracket Set (7075\u2011T73)",
          "due_time": 85,
          "priority": 4,
          "operations": [
            {
              "id": "j4_op1",
              "job_id": "j4",
              "operation_type": "milling",
              "duration": 12,
              "predecessors": []
            },
            {
              "id": "j4_op2",
              "job_id": "j4",
              "operation_type": "drilling",
              "duration": 7,
              "predecessors": [
                "j4_op1"
              ]
            },
            {
              "id": "j4_op3",
              "job_id": "j4",
              "operation_type": "finishing",
              "duration": 11,
              "predecessors": [
                "j4_op2"
              ]
            },
            {
              "id": "j4_op4",
              "job_id": "j4",
              "operation_type": "inspection",
              "duration": 7,
              "predecessors": [
                "j4_op3"
              ]
            }
          ]
        },
        {
          "id": "j5",
          "name": "Skylark Composite Control Fin (CFRP)",
          "due_time": 75,
          "priority": 1,
          "operations": [
            {
              "id": "j5_op1",
              "job_id": "j5",
              "operation_type": "composite_layup",
              "duration": 18,
              "predecessors": []
            },
            {
              "id": "j5_op2",
              "job_id": "j5",
              "operation_type": "composite_cure",
              "duration": 9,
              "predecessors": [
                "j5_op1"
              ]
            },
            {
              "id": "j5_op3",
              "job_id": "j5",
              "operation_type": "milling",
              "duration": 6,
              "predecessors": [
                "j5_op2"
              ]
            },
            {
              "id": "j5_op4",
              "job_id": "j5",
              "operation_type": "inspection",
              "duration": 8,
              "predecessors": [
                "j5_op3"
              ]
            }
          ]
        },
        {
          "id": "j6",
          "name": "Vega Cryogenic Valve Manifold (Al\u2011bronze)",
          "due_time": 90,
          "priority": 6,
          "operations": [
            {
              "id": "j6_op1",
              "job_id": "j6",
              "operation_type": "milling",
              "duration": 10,
              "predecessors": []
            },
            {
              "id": "j6_op2",
              "job_id": "j6",
              "operation_type": "turning",
              "duration": 14,
              "predecessors": [
                "j6_op1"
              ]
            },
            {
              "id": "j6_op3",
              "job_id": "j6",
              "operation_type": "drilling",
              "duration": 9,
              "predecessors": [
                "j6_op2"
              ]
            },
            {
              "id": "j6_op4",
              "job_id": "j6",
              "operation_type": "inspection",
              "duration": 6,
              "predecessors": [
                "j6_op3"
              ]
            }
          ]
        }
      ]
    },
    "constraints": [
      {
        "description": "Overall schedule must finish within 90 time units (loose enough to be feasible, but tight enough to force non-greedy sequencing).",
        "_spec": {
          "fn": "max_makespan",
          "args": [
            90
          ]
        }
      },
      {
        "description": "5-axis CNC (m1) preventive maintenance blocks all work from t=28 to t=36.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m1",
            28,
            36
          ]
        }
      },
      {
        "description": "Drill/EDM cell (m3) dielectric service outage from t=55 to t=60.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m3",
            55,
            60
          ]
        }
      },
      {
        "description": "Autoclave Line A (m4) is unavailable for validation from t=40 to t=46.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m4",
            40,
            46
          ]
        }
      },
      {
        "description": "Cleanroom metrology (m5) CMM calibration blocks inspection from t=20 to t=24.",
        "_spec": {
          "fn": "machine_unavailable",
          "args": [
            "m5",
            20,
            24
          ]
        }
      },
      {
        "description": "Composite control fin job (j5) must complete by internal ship-set cutoff t=75.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j5",
            75
          ]
        }
      },
      {
        "description": "Landing-gear latch block job (j3) must complete by t=82.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j3",
            82
          ]
        }
      },
      {
        "description": "Avionics bracket set job (j4) must complete by t=85.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j4",
            85
          ]
        }
      },
      {
        "description": "Engine mount lug job (j2) must complete by t=88.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j2",
            88
          ]
        }
      },
      {
        "description": "Turbopump housing job (j1) must complete by t=92.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j1",
            92
          ]
        }
      },
      {
        "description": "Cryogenic valve manifold job (j6) must complete by t=90.",
        "_spec": {
          "fn": "due_date",
          "args": [
            "j6",
            90
          ]
        }
      },
      {
        "description": "Highest-priority composite fin job (j5) must start before engine mount lug job (j2) starts (release-to-floor rule).",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j5",
            "j2"
          ]
        }
      },
      {
        "description": "Highest-priority composite fin job (j5) must start before turbopump housing job (j1) starts (program management directive).",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j5",
            "j1"
          ]
        }
      },
      {
        "description": "Landing-gear latch block job (j3) must start before avionics bracket set job (j4) starts (shared inspection staffing ramp-up).",
        "_spec": {
          "fn": "job_priority",
          "args": [
            "j3",
            "j4"
          ]
        }
      },
      {
        "description": "EDM operations must use the dedicated Drill/EDM hybrid cell m3 (electrode tooling and dielectric certification constraint).",
        "_spec": {
          "fn": "machine_preference",
          "args": [
            "edm",
            "m3"
          ]
        }
      },
      {
        "description": "Skylark composite fin (j5) must flow with limited waiting: no gap larger than 25 between its operations (resin out-time control).",
        "_spec": {
          "fn": "no_idle",
          "args": [
            "j5",
            25
          ]
        }
      },
      {
        "description": "Landing-gear latch block (j3) must avoid large WIP waits: no gap larger than 20 between its operations (heat-treat queue policy).",
        "_spec": {
          "fn": "no_idle",
          "args": [
            "j3",
            20
          ]
        }
      },
      {
        "description": "Final inspections for turbopump housing and avionics brackets must be run back-to-back on the same metrology resource to share a single FAIR setup.",
        "_spec": {
          "fn": "batch_together",
          "args": [
            [
              "j1_op4",
              "j4_op4"
            ]
          ]
        }
      },
      {
        "description": "Finishing on the avionics bracket set and drilling on the latch block are most efficient when queued consecutively on one machine to avoid re-indicating (forces careful sequencing).",
        "_spec": {
          "fn": "batch_together",
          "args": [
            [
              "j4_op3",
              "j3_op3"
            ]
          ]
        }
      }
    ],
    "instruction": "Minimize the makespan (total completion time) while respecting operation dependencies, machine capabilities, machine downtime windows, due dates, job-priority start ordering, and the no-idle/batch-together constraints.",
    "feasible": true,
    "solution": {
      "domain": "job_shop",
      "schedule": [
        {
          "operation_id": "j1_op1",
          "machine_id": "m2",
          "start_time": 0,
          "end_time": 12
        },
        {
          "operation_id": "j1_op2",
          "machine_id": "m2",
          "start_time": 34,
          "end_time": 40
        },
        {
          "operation_id": "j1_op3",
          "machine_id": "m3",
          "start_time": 40,
          "end_time": 50
        },
        {
          "operation_id": "j1_op4",
          "machine_id": "m5",
          "start_time": 52,
          "end_time": 60
        },
        {
          "operation_id": "j2_op1",
          "machine_id": "m1",
          "start_time": 0,
          "end_time": 14
        },
        {
          "operation_id": "j2_op2",
          "machine_id": "m3",
          "start_time": 14,
          "end_time": 24
        },
        {
          "operation_id": "j2_op3",
          "machine_id": "m3",
          "start_time": 24,
          "end_time": 32
        },
        {
          "operation_id": "j2_op4",
          "machine_id": "m5",
          "start_time": 32,
          "end_time": 38
        },
        {
          "operation_id": "j3_op1",
          "machine_id": "m2",
          "start_time": 12,
          "end_time": 28
        },
        {
          "operation_id": "j3_op2",
          "machine_id": "m1",
          "start_time": 36,
          "end_time": 44
        },
        {
          "operation_id": "j3_op3",
          "machine_id": "m1",
          "start_time": 55,
          "end_time": 67
        },
        {
          "operation_id": "j3_op4",
          "machine_id": "m5",
          "start_time": 67,
          "end_time": 73
        },
        {
          "operation_id": "j4_op1",
          "machine_id": "m1",
          "start_time": 14,
          "end_time": 26
        },
        {
          "operation_id": "j4_op2",
          "machine_id": "m3",
          "start_time": 32,
          "end_time": 39
        },
        {
          "operation_id": "j4_op3",
          "machine_id": "m1",
          "start_time": 44,
          "end_time": 55
        },
        {
          "operation_id": "j4_op4",
          "machine_id": "m5",
          "start_time": 60,
          "end_time": 67
        },
        {
          "operation_id": "j5_op1",
          "machine_id": "m5",
          "start_time": 0,
          "end_time": 18
        },
        {
          "operation_id": "j5_op2",
          "machine_id": "m4",
          "start_time": 18,
          "end_time": 27
        },
        {
          "operation_id": "j5_op3",
          "machine_id": "m2",
          "start_time": 28,
          "end_time": 34
        },
        {
          "operation_id": "j5_op4",
          "machine_id": "m5",
          "start_time": 44,
          "end_time": 52
        },
        {
          "operation_id": "j6_op1",
          "machine_id": "m2",
          "start_time": 40,
          "end_time": 50
        },
        {
          "operation_id": "j6_op2",
          "machine_id": "m2",
          "start_time": 50,
          "end_time": 64
        },
        {
          "operation_id": "j6_op3",
          "machine_id": "m3",
          "start_time": 64,
          "end_time": 73
        },
        {
          "operation_id": "j6_op4",
          "machine_id": "m5",
          "start_time": 73,
          "end_time": 79
        }
      ],
      "makespan": 79,
      "total_tardiness": 0
    }
  },
  {
    "id": "order_fulfillment_97733144",
    "difficulty": "expert",
    "scenario": {
      "domain": "order_fulfillment",
      "description": "A regional home-appliance retailer (BrightHome Appliances) serves both online and brick-and-mortar stores. It must fulfill a mix of web orders and store replenishment while balancing existing stock, vendor purchasing with lead times and minimum order quantities, and in-house light manufacturing/assembly (appliance bundles and install kits) under a shared daily processing capacity.",
      "start_date": "2024-03-01",
      "products": [
        {
          "id": "p1",
          "name": "AeroChill 12k BTU Window AC",
          "cost": 240.0,
          "price": 399.0,
          "stock": 28
        },
        {
          "id": "p2",
          "name": "FrostLine Top-Freezer Refrigerator (18 cu ft)",
          "cost": 520.0,
          "price": 799.0,
          "stock": 18
        },
        {
          "id": "p3",
          "name": "HeatGuard 1500W Space Heater",
          "cost": 22.0,
          "price": 49.0,
          "stock": 140
        },
        {
          "id": "p4",
          "name": "PureFlow Countertop Microwave 0.9 cu ft",
          "cost": 68.0,
          "price": 119.0,
          "stock": 75
        },
        {
          "id": "p5",
          "name": "SparkClean 24\" Front-Control Dishwasher",
          "cost": 310.0,
          "price": 499.0,
          "stock": 22
        },
        {
          "id": "p6",
          "name": "SpinWave 4.5 cu ft Washer",
          "cost": 460.0,
          "price": 699.0,
          "stock": 16
        },
        {
          "id": "p7",
          "name": "DryWave 7.2 cu ft Electric Dryer",
          "cost": 420.0,
          "price": 649.0,
          "stock": 14
        },
        {
          "id": "p8",
          "name": "Laundry Install Kit (Hoses + Cord + Clamps)",
          "cost": 7.0,
          "price": 24.0,
          "stock": 40
        },
        {
          "id": "p9",
          "name": "Premium Kitchen Bundle (Fridge + Dishwasher + Microwave)",
          "cost": 0.0,
          "price": 1389.0,
          "stock": 0
        },
        {
          "id": "p10",
          "name": "Laundry Pair Bundle (Washer + Dryer + Install Kit)",
          "cost": 0.0,
          "price": 1329.0,
          "stock": 0
        }
      ],
      "orders": [
        {
          "id": "o1",
          "customer": "Maple Street Store #12 (Replenishment)",
          "items": [
            {
              "product_id": "p4",
              "quantity": 40
            },
            {
              "product_id": "p3",
              "quantity": 120
            }
          ],
          "deadline": "2024-03-14",
          "budget": 6700.0
        },
        {
          "id": "o2",
          "customer": "NorthLake Property Management (Online Bulk)",
          "items": [
            {
              "product_id": "p1",
              "quantity": 55
            },
            {
              "product_id": "p8",
              "quantity": 70
            }
          ],
          "deadline": "2024-03-20",
          "budget": 15200.0
        },
        {
          "id": "o3",
          "customer": "Cedar Grove Condos (New Build Delivery)",
          "items": [
            {
              "product_id": "p9",
              "quantity": 90
            },
            {
              "product_id": "p3",
              "quantity": 60
            }
          ],
          "deadline": "2024-03-29",
          "budget": 100000.0
        },
        {
          "id": "o4",
          "customer": "BrightHome.com Flash Sale Orders",
          "items": [
            {
              "product_id": "p10",
              "quantity": 45
            },
            {
              "product_id": "p4",
              "quantity": 60
            }
          ],
          "deadline": "2024-03-19",
          "budget": 74000.0
        },
        {
          "id": "o5",
          "customer": "Downtown Store #3 (Seasonal Endcap)",
          "items": [
            {
              "product_id": "p3",
              "quantity": 70
            },
            {
              "product_id": "p4",
              "quantity": 200
            }
          ],
          "deadline": "2024-03-27",
          "budget": 30000.0
        },
        {
          "id": "o6",
          "customer": "Sparrow & Finch Renovations",
          "items": [
            {
              "product_id": "p6",
              "quantity": 50
            },
            {
              "product_id": "p7",
              "quantity": 30
            },
            {
              "product_id": "p8",
              "quantity": 40
            }
          ],
          "deadline": "2024-03-23",
          "budget": 65000.0
        },
        {
          "id": "o7",
          "customer": "Hilltop Student Housing (Move-in Prep)",
          "items": [
            {
              "product_id": "p2",
              "quantity": 80
            },
            {
              "product_id": "p1",
              "quantity": 120
            }
          ],
          "deadline": "2024-04-05",
          "budget": 175000.0
        }
      ],
      "vendors": [
        {
          "id": "v1",
          "name": "Heartland Appliance Wholesale",
          "country": "USA",
          "products": {
            "p1": {
              "price": 255.0,
              "lead_time_days": 6
            },
            "p4": {
              "price": 74.0,
              "lead_time_days": 4
            },
            "p3": {
              "price": 24.0,
              "lead_time_days": 3
            }
          }
        },
        {
          "id": "v2",
          "name": "RheinHaus Distribution",
          "country": "Germany",
          "products": {
            "p2": {
              "price": 535.0,
              "lead_time_days": 11
            },
            "p5": {
              "price": 330.0,
              "lead_time_days": 9
            },
            "p4": {
              "price": 66.0,
              "lead_time_days": 12
            }
          }
        },
        {
          "id": "v3",
          "name": "Sakura Home Electronics Trading",
          "country": "Japan",
          "products": {
            "p4": {
              "price": 62.0,
              "lead_time_days": 8
            },
            "p3": {
              "price": 19.0,
              "lead_time_days": 14
            },
            "p8": {
              "price": 6.0,
              "lead_time_days": 10
            }
          }
        },
        {
          "id": "v4",
          "name": "Canyon Ridge Install Supplies",
          "country": "USA",
          "products": {
            "p8": {
              "price": 8.5,
              "lead_time_days": 2
            },
            "p6": {
              "price": 495.0,
              "lead_time_days": 7
            },
            "p7": {
              "price": 438.0,
              "lead_time_days": 7
            }
          }
        },
        {
          "id": "v5",
          "name": "EuroWash Appliance Partners",
          "country": "Germany",
          "products": {
            "p6": {
              "price": 470.0,
              "lead_time_days": 13
            },
            "p7": {
              "price": 425.0,
              "lead_time_days": 13
            },
            "p2": {
              "price": 515.0,
              "lead_time_days": 16
            }
          }
        }
      ],
      "bills_of_materials": [
        {
          "product_id": "p9",
          "components": [
            {
              "product_id": "p2",
              "quantity": 1.0
            },
            {
              "product_id": "p5",
              "quantity": 1.0
            },
            {
              "product_id": "p4",
              "quantity": 1.0
            }
          ],
          "production_cost": 55.0,
          "production_time_days": 4
        },
        {
          "product_id": "p10",
          "components": [
            {
              "product_id": "p6",
              "quantity": 1.0
            },
            {
              "product_id": "p7",
              "quantity": 1.0
            },
            {
              "product_id": "p8",
              "quantity": 1.0
            }
          ],
          "production_cost": 35.0,
          "production_time_days": 3
        }
      ]
    },
    "constraints": [
      {
        "description": "Each order must stay within its allocated budget (forcing tradeoffs between stock use, vendor purchases, and in-house bundling/manufacturing).",
        "_spec": {
          "fn": "budget",
          "args": []
        }
      },
      {
        "description": "All orders must be delivered by their deadline dates (creating decoy vendor options that look cheap but arrive too late for early orders).",
        "_spec": {
          "fn": "deadline",
          "args": []
        }
      },
      {
        "description": "Maintain at least a 25% profit margin on all sales (counterintuitively making some 'cheapest purchase price' choices infeasible when manufacturing cost and internal stock cost are considered).",
        "_spec": {
          "fn": "margin",
          "args": [
            0.25
          ]
        }
      },
      {
        "description": "Source only from vendors in USA or Germany (Japan vendor pricing is a decoy and cannot be used, increasing pressure on lead times and minimum order policies).",
        "_spec": {
          "fn": "vendor_policy",
          "args": [
            [
              "USA",
              "Germany"
            ]
          ]
        }
      },
      {
        "description": "Minimum order quantity policy: RheinHaus Distribution (v2) requires at least 120 total units purchased from that vendor across all products (a greedy plan may avoid v2 early, then get forced into expensive last-minute sourcing elsewhere).",
        "_spec": {
          "fn": "min_order_qty",
          "args": [
            "v2",
            120
          ]
        }
      },
      {
        "description": "Maximum daily processing capacity is limited to 1400 units (must cover all units across all orders; bundles add manufacturing workload but can reduce procurement cost/lead-time risk).",
        "_spec": {
          "fn": "capacity",
          "args": [
            1400
          ]
        }
      }
    ],
    "instruction": "Find the minimum-cost sourcing and production plan (use existing stock, vendor purchasing, and/or manufacturing via BOMs) that fulfills all customer orders on time while respecting per-order budgets, the 25% minimum margin, vendor country restrictions, the v2 minimum order quantity requirement, and the overall daily processing capacity.",
    "feasible": true,
    "solution": {
      "domain": "order_fulfillment",
      "decisions": [
        {
          "order_id": "o1",
          "product_id": "p4",
          "quantity": 40,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o1",
          "product_id": "p3",
          "quantity": 10,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o1",
          "product_id": "p3",
          "quantity": 110,
          "source": "purchase",
          "vendor_id": "v1"
        },
        {
          "order_id": "o2",
          "product_id": "p1",
          "quantity": 55,
          "source": "purchase",
          "vendor_id": "v1"
        },
        {
          "order_id": "o2",
          "product_id": "p8",
          "quantity": 70,
          "source": "purchase",
          "vendor_id": "v4"
        },
        {
          "order_id": "o3",
          "product_id": "p9",
          "quantity": 90,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o3",
          "product_id": "p3",
          "quantity": 60,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o4",
          "product_id": "p10",
          "quantity": 45,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o4",
          "product_id": "p4",
          "quantity": 60,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o5",
          "product_id": "p3",
          "quantity": 70,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o5",
          "product_id": "p4",
          "quantity": 200,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o6",
          "product_id": "p6",
          "quantity": 16,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o6",
          "product_id": "p6",
          "quantity": 34,
          "source": "purchase",
          "vendor_id": "v5"
        },
        {
          "order_id": "o6",
          "product_id": "p7",
          "quantity": 14,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o6",
          "product_id": "p7",
          "quantity": 16,
          "source": "purchase",
          "vendor_id": "v5"
        },
        {
          "order_id": "o6",
          "product_id": "p8",
          "quantity": 40,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o7",
          "product_id": "p2",
          "quantity": 80,
          "source": "purchase",
          "vendor_id": "v5"
        },
        {
          "order_id": "o7",
          "product_id": "p1",
          "quantity": 28,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o7",
          "product_id": "p1",
          "quantity": 92,
          "source": "purchase",
          "vendor_id": "v1"
        }
      ],
      "total_cost": 154345.0,
      "total_revenue": 423570.0
    }
  },
  {
    "id": "order_fulfillment_3c01db92",
    "difficulty": "expert",
    "scenario": {
      "domain": "order_fulfillment",
      "description": "PrairieGrow Ag Supply (a regional agricultural supplies distributor) must fulfill a mix of spring-season dealer and farm co-op orders. Items can be shipped from on-hand inventory, purchased from approved vendors with varying lead times and MOQs, or manufactured in-house where a BOM exists (e.g., blending seed mix kits and micronutrient packs). The planning challenge is that several SKUs share the same components, and some attractive vendor options are decoys due to lead time/MOQ interactions and a strict country policy.",
      "start_date": "2024-03-01",
      "products": [
        {
          "id": "p1",
          "name": "Nitrogen Fertilizer 46-0-0 (50 lb bag)",
          "cost": 82.0,
          "price": 129.0,
          "stock": 80
        },
        {
          "id": "p2",
          "name": "Phosphate Fertilizer 18-46-0 (50 lb bag)",
          "cost": 52.0,
          "price": 92.0,
          "stock": 40
        },
        {
          "id": "p3",
          "name": "Potash Fertilizer 0-0-60 (50 lb bag)",
          "cost": 45.0,
          "price": 78.0,
          "stock": 55
        },
        {
          "id": "p4",
          "name": "Herbicide Concentrate (2.5 gal jug)",
          "cost": 72.0,
          "price": 118.0,
          "stock": 35
        },
        {
          "id": "p5",
          "name": "Fungicide Spray (1 gal)",
          "cost": 66.0,
          "price": 112.0,
          "stock": 20
        },
        {
          "id": "p6",
          "name": "Corn Hybrid Seed (80k kernel bag)",
          "cost": 75.0,
          "price": 130.0,
          "stock": 25
        },
        {
          "id": "p7",
          "name": "Soybean Seed (140k kernel bag)",
          "cost": 55.0,
          "price": 98.0,
          "stock": 30
        },
        {
          "id": "p8",
          "name": "Micronutrient Pack (5 lb)",
          "cost": 74.0,
          "price": 125.0,
          "stock": 10
        },
        {
          "id": "p9",
          "name": "Coated Urea Additive (1 qt)",
          "cost": 36.0,
          "price": 68.0,
          "stock": 70
        },
        {
          "id": "p10",
          "name": "Cover Crop Seed Mix Kit (50 lb blended bag)",
          "cost": 68.0,
          "price": 125.0,
          "stock": 5
        },
        {
          "id": "p11",
          "name": "Seed Treatment Inoculant (1 L)",
          "cost": 34.0,
          "price": 70.0,
          "stock": 35
        },
        {
          "id": "p12",
          "name": "Bulk Lime (1 ton tote)",
          "cost": 38.0,
          "price": 70.0,
          "stock": 15
        },
        {
          "id": "c1",
          "name": "Clover Seed Component (for blends)",
          "cost": 18.0,
          "price": 26.0,
          "stock": 120
        },
        {
          "id": "c2",
          "name": "Ryegrass Seed Component (for blends)",
          "cost": 14.0,
          "price": 22.0,
          "stock": 140
        },
        {
          "id": "c3",
          "name": "Chelated Zinc Component (for micronutrient packs)",
          "cost": 28.0,
          "price": 40.0,
          "stock": 100
        },
        {
          "id": "c4",
          "name": "Chelated Boron Component (for micronutrient packs)",
          "cost": 22.0,
          "price": 32.0,
          "stock": 120
        }
      ],
      "orders": [
        {
          "id": "o1",
          "customer": "Red River Farm Co-op",
          "items": [
            {
              "product_id": "p1",
              "quantity": 60
            },
            {
              "product_id": "p2",
              "quantity": 20
            },
            {
              "product_id": "p9",
              "quantity": 25
            }
          ],
          "deadline": "2024-03-16",
          "budget": 15000.0
        },
        {
          "id": "o2",
          "customer": "Sunset Acres",
          "items": [
            {
              "product_id": "p6",
              "quantity": 80
            },
            {
              "product_id": "p11",
              "quantity": 70
            }
          ],
          "deadline": "2024-03-15",
          "budget": 21000.0
        },
        {
          "id": "o3",
          "customer": "HighPlains Ag Retail (Dealer)",
          "items": [
            {
              "product_id": "p4",
              "quantity": 50
            },
            {
              "product_id": "p5",
              "quantity": 30
            }
          ],
          "deadline": "2024-03-18",
          "budget": 12000.0
        },
        {
          "id": "o4",
          "customer": "Blue Creek Dairy",
          "items": [
            {
              "product_id": "p10",
              "quantity": 60
            },
            {
              "product_id": "p12",
              "quantity": 15
            },
            {
              "product_id": "p3",
              "quantity": 40
            }
          ],
          "deadline": "2024-03-23",
          "budget": 11500.0
        },
        {
          "id": "o5",
          "customer": "Pioneer Ridge Farms",
          "items": [
            {
              "product_id": "p8",
              "quantity": 40
            },
            {
              "product_id": "p9",
              "quantity": 100
            }
          ],
          "deadline": "2024-03-17",
          "budget": 15500.0
        },
        {
          "id": "o6",
          "customer": "GreenValley Grain (Elevator)",
          "items": [
            {
              "product_id": "p7",
              "quantity": 90
            },
            {
              "product_id": "p8",
              "quantity": 40
            },
            {
              "product_id": "p10",
              "quantity": 30
            }
          ],
          "deadline": "2024-03-24",
          "budget": 19000.0
        },
        {
          "id": "o7",
          "customer": "PrairieWind Organics",
          "items": [
            {
              "product_id": "p1",
              "quantity": 60
            },
            {
              "product_id": "p12",
              "quantity": 30
            },
            {
              "product_id": "p11",
              "quantity": 20
            }
          ],
          "deadline": "2024-03-20",
          "budget": 13500.0
        }
      ],
      "vendors": [
        {
          "id": "v1",
          "name": "Heartland Nutrients Express",
          "country": "USA",
          "products": {
            "p1": {
              "price": 88.0,
              "lead_time_days": 6
            },
            "p2": {
              "price": 56.0,
              "lead_time_days": 6
            },
            "p3": {
              "price": 48.0,
              "lead_time_days": 6
            },
            "p9": {
              "price": 39.0,
              "lead_time_days": 5
            }
          }
        },
        {
          "id": "v2",
          "name": "Midwest CropChem",
          "country": "USA",
          "products": {
            "p4": {
              "price": 78.0,
              "lead_time_days": 4
            },
            "p5": {
              "price": 71.0,
              "lead_time_days": 5
            },
            "p11": {
              "price": 37.0,
              "lead_time_days": 4
            }
          }
        },
        {
          "id": "v3",
          "name": "Dakota Seed Logistics",
          "country": "USA",
          "products": {
            "p6": {
              "price": 92.0,
              "lead_time_days": 8
            },
            "p7": {
              "price": 69.0,
              "lead_time_days": 8
            },
            "c1": {
              "price": 19.0,
              "lead_time_days": 6
            },
            "c2": {
              "price": 15.0,
              "lead_time_days": 6
            }
          }
        },
        {
          "id": "v4",
          "name": "Bavaria Ag Inputs",
          "country": "Germany",
          "products": {
            "p1": {
              "price": 74.0,
              "lead_time_days": 19
            },
            "p9": {
              "price": 31.0,
              "lead_time_days": 18
            },
            "p8": {
              "price": 58.0,
              "lead_time_days": 16
            }
          }
        },
        {
          "id": "v5",
          "name": "RhineCrop Minerals",
          "country": "Germany",
          "products": {
            "c3": {
              "price": 23.0,
              "lead_time_days": 9
            },
            "c4": {
              "price": 18.0,
              "lead_time_days": 9
            },
            "p12": {
              "price": 30.0,
              "lead_time_days": 12
            }
          }
        }
      ],
      "bills_of_materials": [
        {
          "product_id": "p10",
          "components": [
            {
              "product_id": "c1",
              "quantity": 0.6
            },
            {
              "product_id": "c2",
              "quantity": 0.5
            }
          ],
          "production_cost": 9.0,
          "production_time_days": 3
        },
        {
          "product_id": "p8",
          "components": [
            {
              "product_id": "c3",
              "quantity": 0.7
            },
            {
              "product_id": "c4",
              "quantity": 0.6
            }
          ],
          "production_cost": 11.0,
          "production_time_days": 2
        }
      ]
    },
    "constraints": [
      {
        "description": "Each customer order must stay within its allocated budget, counting costs from stock (at listed cost), vendor purchases (at vendor price), and manufacturing (BOM component costs plus production_cost).",
        "_spec": {
          "fn": "budget",
          "args": []
        }
      },
      {
        "description": "All order line items must be available for delivery by each order's deadline (start date is 2024-03-01; vendor lead times and manufacturing production times must fit).",
        "_spec": {
          "fn": "deadline",
          "args": []
        }
      },
      {
        "description": "Maintain at least a 25% profit margin on all fulfilled items (using product selling price vs. total sourcing/manufacturing cost).",
        "_spec": {
          "fn": "margin",
          "args": [
            0.25
          ]
        }
      },
      {
        "description": "Vendor policy: PrairieGrow may source only from vendors located in USA or Germany (no other countries allowed).",
        "_spec": {
          "fn": "vendor_policy",
          "args": [
            [
              "USA",
              "Germany"
            ]
          ]
        }
      },
      {
        "description": "Minimum order quantity policy: orders placed with Bavaria Ag Inputs (v4) must total at least 120 units across all SKUs purchased from v4.",
        "_spec": {
          "fn": "min_order_qty",
          "args": [
            "v4",
            120
          ]
        }
      },
      {
        "description": "Total daily processing capacity is limited to 950 units (total units across all order quantities; capacity is intentionally high enough to avoid infeasibility but still constrains naive all-manufacture plans).",
        "_spec": {
          "fn": "capacity",
          "args": [
            950
          ]
        }
      }
    ],
    "instruction": "Find the minimum-total-cost sourcing and production plan (how much to ship from stock, how much to buy from each vendor, and how much to manufacture for BOM-enabled products) that fulfills every order by its deadline while satisfying per-order budgets, the 25% minimum margin requirement, the allowed-country vendor policy, the v4 minimum order quantity, and the overall capacity limit. The instance is designed with greedy traps: the very cheap German options (v4) are attractive but often miss early deadlines and also trigger a large MOQ commitment that can crowd out better on-time sourcing; additionally, manufacturing p8 and p10 competes for shared components whose stock is limited, so overusing component stock for one product can force expensive/late purchases for the other.",
    "feasible": true,
    "solution": {
      "domain": "order_fulfillment",
      "decisions": [
        {
          "order_id": "o1",
          "product_id": "p1",
          "quantity": 20,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o1",
          "product_id": "p1",
          "quantity": 40,
          "source": "purchase",
          "vendor_id": "v1"
        },
        {
          "order_id": "o1",
          "product_id": "p2",
          "quantity": 20,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o1",
          "product_id": "p9",
          "quantity": 25,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o2",
          "product_id": "p6",
          "quantity": 25,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o2",
          "product_id": "p6",
          "quantity": 55,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o2",
          "product_id": "p11",
          "quantity": 15,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o2",
          "product_id": "p11",
          "quantity": 55,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o3",
          "product_id": "p4",
          "quantity": 35,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o3",
          "product_id": "p4",
          "quantity": 15,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o3",
          "product_id": "p5",
          "quantity": 20,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o3",
          "product_id": "p5",
          "quantity": 10,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o4",
          "product_id": "p10",
          "quantity": 60,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o4",
          "product_id": "p12",
          "quantity": 15,
          "source": "purchase",
          "vendor_id": "v5"
        },
        {
          "order_id": "o4",
          "product_id": "p3",
          "quantity": 40,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o5",
          "product_id": "p8",
          "quantity": 40,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o5",
          "product_id": "p9",
          "quantity": 45,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o5",
          "product_id": "p9",
          "quantity": 55,
          "source": "purchase",
          "vendor_id": "v1"
        },
        {
          "order_id": "o6",
          "product_id": "p7",
          "quantity": 30,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o6",
          "product_id": "p7",
          "quantity": 60,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o6",
          "product_id": "p8",
          "quantity": 40,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o6",
          "product_id": "p10",
          "quantity": 30,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o7",
          "product_id": "p1",
          "quantity": 60,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o7",
          "product_id": "p12",
          "quantity": 30,
          "source": "purchase",
          "vendor_id": "v5"
        },
        {
          "order_id": "o7",
          "product_id": "p11",
          "quantity": 20,
          "source": "stock",
          "vendor_id": null
        }
      ],
      "total_cost": 42295.0,
      "total_revenue": 88120.0
    }
  },
  {
    "id": "order_fulfillment_9ffa974e",
    "difficulty": "expert",
    "scenario": {
      "domain": "order_fulfillment",
      "description": "HopRiver Craft Distribution (multi-state craft brewery distributor) must fulfill on-premise and retail chain orders during a spring taproom event surge. Products can be fulfilled from existing warehouse stock, purchased from approved-country vendors with varying lead times and minimum order quantities, or manufactured/assembled in-house into mixed packs using cans, carrier rings, and printed carton sleeves. Naive sourcing fails because the cheapest vendor is either disallowed by country policy or arrives just after key deadlines; manufacturing looks expensive but unlocks margin and avoids a vendor MOQ trap that would blow budgets and capacity timing.",
      "start_date": "2024-03-01",
      "products": [
        {
          "id": "p1",
          "name": "Trailhead IPA 16oz (24-pack)",
          "cost": 42.0,
          "price": 72.0,
          "stock": 50
        },
        {
          "id": "p2",
          "name": "Riverbend Hazy IPA 16oz (24-pack)",
          "cost": 44.0,
          "price": 74.0,
          "stock": 35
        },
        {
          "id": "p3",
          "name": "Midnight Stout 16oz (24-pack)",
          "cost": 46.0,
          "price": 78.0,
          "stock": 20
        },
        {
          "id": "p4",
          "name": "Sunlit Pilsner 12oz (24-pack)",
          "cost": 38.0,
          "price": 64.0,
          "stock": 60
        },
        {
          "id": "p5",
          "name": "Citrus Seltzer Variety 12oz (24-pack)",
          "cost": 36.0,
          "price": 62.0,
          "stock": 40
        },
        {
          "id": "p6",
          "name": "Spring Seasonal Mixed Pack (12-pack)",
          "cost": 24.0,
          "price": 48.0,
          "stock": 10
        },
        {
          "id": "p7",
          "name": "16oz Can Tray (holds 24 cans)",
          "cost": 2.2,
          "price": 3.8,
          "stock": 220
        },
        {
          "id": "p8",
          "name": "6-pack Carrier Rings (set)",
          "cost": 0.18,
          "price": 0.35,
          "stock": 800
        },
        {
          "id": "p9",
          "name": "Printed Carton Sleeve (12-pack)",
          "cost": 0.75,
          "price": 1.5,
          "stock": 120
        },
        {
          "id": "p10",
          "name": "Taproom Keg - 1/2 bbl (50L)",
          "cost": 85.0,
          "price": 150.0,
          "stock": 18
        }
      ],
      "orders": [
        {
          "id": "o1",
          "customer": "Granite Peak Bottle Shop",
          "items": [
            {
              "product_id": "p1",
              "quantity": 60
            },
            {
              "product_id": "p4",
              "quantity": 40
            },
            {
              "product_id": "p7",
              "quantity": 4
            }
          ],
          "deadline": "2024-03-12",
          "budget": 8800.0
        },
        {
          "id": "o2",
          "customer": "Lakeside Taproom Group",
          "items": [
            {
              "product_id": "p10",
              "quantity": 6
            },
            {
              "product_id": "p2",
              "quantity": 12
            },
            {
              "product_id": "p8",
              "quantity": 30
            }
          ],
          "deadline": "2024-03-10",
          "budget": 2600.0
        },
        {
          "id": "o3",
          "customer": "Northline Grocery - Region A",
          "items": [
            {
              "product_id": "p6",
              "quantity": 80
            },
            {
              "product_id": "p9",
              "quantity": 25
            }
          ],
          "deadline": "2024-03-15",
          "budget": 5200.0
        },
        {
          "id": "o4",
          "customer": "Union Stadium Concessions",
          "items": [
            {
              "product_id": "p3",
              "quantity": 90
            },
            {
              "product_id": "p5",
              "quantity": 60
            }
          ],
          "deadline": "2024-03-18",
          "budget": 12500.0
        },
        {
          "id": "o5",
          "customer": "Hearthstone Market Co-op",
          "items": [
            {
              "product_id": "p4",
              "quantity": 60
            },
            {
              "product_id": "p1",
              "quantity": 40
            },
            {
              "product_id": "p8",
              "quantity": 10
            }
          ],
          "deadline": "2024-03-14",
          "budget": 8200.0
        },
        {
          "id": "o6",
          "customer": "Canyon Road Liquor",
          "items": [
            {
              "product_id": "p2",
              "quantity": 90
            },
            {
              "product_id": "p5",
              "quantity": 50
            },
            {
              "product_id": "p7",
              "quantity": 5
            }
          ],
          "deadline": "2024-03-20",
          "budget": 11200.0
        },
        {
          "id": "o7",
          "customer": "Summit City Convenience (chain)",
          "items": [
            {
              "product_id": "p6",
              "quantity": 70
            },
            {
              "product_id": "p1",
              "quantity": 40
            },
            {
              "product_id": "p9",
              "quantity": 8
            }
          ],
          "deadline": "2024-03-22",
          "budget": 7600.0
        }
      ],
      "vendors": [
        {
          "id": "v1",
          "name": "Cascade Packaging & Supply",
          "country": "USA",
          "products": {
            "p7": {
              "price": 2.45,
              "lead_time_days": 4
            },
            "p8": {
              "price": 0.2,
              "lead_time_days": 3
            },
            "p9": {
              "price": 0.82,
              "lead_time_days": 5
            }
          }
        },
        {
          "id": "v2",
          "name": "Great Lakes Bev Wholesale",
          "country": "USA",
          "products": {
            "p1": {
              "price": 49.0,
              "lead_time_days": 6
            },
            "p4": {
              "price": 40.0,
              "lead_time_days": 5
            },
            "p10": {
              "price": 92.0,
              "lead_time_days": 6
            }
          }
        },
        {
          "id": "v3",
          "name": "Bavaria Brau Logistics",
          "country": "Germany",
          "products": {
            "p2": {
              "price": 43.5,
              "lead_time_days": 9
            },
            "p3": {
              "price": 44.5,
              "lead_time_days": 10
            },
            "p5": {
              "price": 37.5,
              "lead_time_days": 8
            }
          }
        },
        {
          "id": "v4",
          "name": "Nordic Print & Pack",
          "country": "Sweden",
          "products": {
            "p9": {
              "price": 0.62,
              "lead_time_days": 7
            },
            "p7": {
              "price": 2.1,
              "lead_time_days": 9
            }
          }
        },
        {
          "id": "v5",
          "name": "Patagonia ColdChain Export",
          "country": "Chile",
          "products": {
            "p3": {
              "price": 41.0,
              "lead_time_days": 14
            },
            "p2": {
              "price": 39.0,
              "lead_time_days": 16
            }
          }
        }
      ],
      "bills_of_materials": [
        {
          "product_id": "p6",
          "components": [
            {
              "product_id": "p1",
              "quantity": 0.25
            },
            {
              "product_id": "p2",
              "quantity": 0.25
            },
            {
              "product_id": "p4",
              "quantity": 0.25
            },
            {
              "product_id": "p5",
              "quantity": 0.25
            },
            {
              "product_id": "p9",
              "quantity": 1.0
            }
          ],
          "production_cost": 7.5,
          "production_time_days": 3
        }
      ]
    },
    "constraints": [
      {
        "description": "Each customer order must be fulfilled within its allocated budget (all sourcing + manufacturing costs counted).",
        "_spec": {
          "fn": "budget",
          "args": []
        }
      },
      {
        "description": "All orders must be delivered by their deadline dates accounting for vendor lead times and manufacturing production time.",
        "_spec": {
          "fn": "deadline",
          "args": []
        }
      },
      {
        "description": "Maintain at least 25% profit margin across fulfilled items (selling price vs total cost-to-fulfill).",
        "_spec": {
          "fn": "margin",
          "args": [
            0.25
          ]
        }
      },
      {
        "description": "Vendor sourcing is restricted to USA and Germany due to alcohol import compliance and approved supplier program (disallow Sweden and Chile vendors).",
        "_spec": {
          "fn": "vendor_policy",
          "args": [
            [
              "USA",
              "Germany"
            ]
          ]
        }
      },
      {
        "description": "Warehouse picking/packing and in-house assembly share a single daily processing capacity limit (units across all order lines) of 1000 units total for the planning window.",
        "_spec": {
          "fn": "capacity",
          "args": [
            1000
          ]
        }
      },
      {
        "description": "If purchasing from Bavaria Brau Logistics (v3), minimum order quantity is 120 units total across all products from that vendor (MOQs interact with deadlines/budgets).",
        "_spec": {
          "fn": "min_order_qty",
          "args": [
            "v3",
            120
          ]
        }
      }
    ],
    "instruction": "Find a minimum-total-cost, deadline-feasible sourcing and manufacturing plan to fulfill all orders from HopRiver Craft Distribution. You may allocate demand to (1) existing stock, (2) approved vendors (USA/Germany only) respecting lead times and MOQs, and/or (3) in-house manufacturing of the Spring Seasonal Mixed Pack using its BOM and production time. All orders must meet their individual budgets and the overall plan must satisfy the 25% minimum margin and the 1000-unit processing capacity limit.",
    "feasible": true,
    "solution": {
      "domain": "order_fulfillment",
      "decisions": [
        {
          "order_id": "o1",
          "product_id": "p1",
          "quantity": 50,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o1",
          "product_id": "p1",
          "quantity": 10,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o1",
          "product_id": "p4",
          "quantity": 40,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o1",
          "product_id": "p7",
          "quantity": 4,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o2",
          "product_id": "p10",
          "quantity": 6,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o2",
          "product_id": "p2",
          "quantity": 12,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o2",
          "product_id": "p8",
          "quantity": 30,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o3",
          "product_id": "p6",
          "quantity": 80,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o3",
          "product_id": "p9",
          "quantity": 25,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o4",
          "product_id": "p3",
          "quantity": 90,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o4",
          "product_id": "p5",
          "quantity": 40,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o4",
          "product_id": "p5",
          "quantity": 20,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o5",
          "product_id": "p4",
          "quantity": 20,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o5",
          "product_id": "p4",
          "quantity": 40,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o5",
          "product_id": "p1",
          "quantity": 40,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o5",
          "product_id": "p8",
          "quantity": 10,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o6",
          "product_id": "p2",
          "quantity": 90,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o6",
          "product_id": "p5",
          "quantity": 50,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o6",
          "product_id": "p7",
          "quantity": 5,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o7",
          "product_id": "p6",
          "quantity": 70,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o7",
          "product_id": "p1",
          "quantity": 40,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o7",
          "product_id": "p9",
          "quantity": 8,
          "source": "stock",
          "vendor_id": null
        }
      ],
      "total_cost": 24583.75,
      "total_revenue": 46065.7
    }
  },
  {
    "id": "order_fulfillment_0301aa1b",
    "difficulty": "expert",
    "scenario": {
      "domain": "order_fulfillment",
      "description": "Sporting goods wholesaler PeakPlay Distribution must fulfill multiple spring preseason orders across team sports and outdoor categories. The catalog includes finished goods (balls, helmets, paddles) plus components (valves, chin straps) used for in-house kitting/assembly. Stock is limited and uneven; some vendor offers are cheap but miss key deadlines, and some items can be manufactured via BOMs (kitting) if components arrive in time. Decisions must balance per-order budgets, delivery deadlines, profit margin, vendor country policy, and overall processing capacity.",
      "start_date": "2024-03-01",
      "products": [
        {
          "id": "p1",
          "name": "ProMatch Soccer Ball (Size 5)",
          "cost": 18.0,
          "price": 32.0,
          "stock": 80
        },
        {
          "id": "p2",
          "name": "Elite Basketball (Indoor/Outdoor)",
          "cost": 20.0,
          "price": 36.0,
          "stock": 40
        },
        {
          "id": "p3",
          "name": "CarbonFlex Tennis Racket",
          "cost": 58.0,
          "price": 95.0,
          "stock": 30
        },
        {
          "id": "p4",
          "name": "TrailPro Hydration Pack (2L)",
          "cost": 26.0,
          "price": 52.0,
          "stock": 25
        },
        {
          "id": "p5",
          "name": "ImpactGuard Youth Football Helmet",
          "cost": 48.0,
          "price": 89.0,
          "stock": 20
        },
        {
          "id": "p6",
          "name": "AllCourt Pickleball Paddle",
          "cost": 22.0,
          "price": 44.0,
          "stock": 35
        },
        {
          "id": "p7",
          "name": "Precision Ball Valve (Component)",
          "cost": 2.0,
          "price": 6.0,
          "stock": 150
        },
        {
          "id": "p8",
          "name": "Helmet Chin Strap (Component)",
          "cost": 3.5,
          "price": 9.0,
          "stock": 60
        },
        {
          "id": "p9",
          "name": "Team Kit: Soccer Ball + Valve (Assembled)",
          "cost": 0.0,
          "price": 41.0,
          "stock": 0
        },
        {
          "id": "p10",
          "name": "Helmet Fit Kit: Helmet + Chin Strap (Assembled)",
          "cost": 0.0,
          "price": 99.0,
          "stock": 0
        }
      ],
      "orders": [
        {
          "id": "o1",
          "customer": "Ridgeview High Athletics",
          "items": [
            {
              "product_id": "p9",
              "quantity": 60
            },
            {
              "product_id": "p3",
              "quantity": 80
            }
          ],
          "deadline": "2024-03-18",
          "budget": 24000.0
        },
        {
          "id": "o2",
          "customer": "Metro Rec League Network",
          "items": [
            {
              "product_id": "p2",
              "quantity": 40
            },
            {
              "product_id": "p6",
              "quantity": 50
            }
          ],
          "deadline": "2024-03-22",
          "budget": 15000.0
        },
        {
          "id": "o3",
          "customer": "Summit Outdoor Outfitters",
          "items": [
            {
              "product_id": "p4",
              "quantity": 70
            },
            {
              "product_id": "p7",
              "quantity": 70
            }
          ],
          "deadline": "2024-03-14",
          "budget": 7500.0
        },
        {
          "id": "o4",
          "customer": "Bay City Sports (Retail)",
          "items": [
            {
              "product_id": "p10",
              "quantity": 90
            },
            {
              "product_id": "p1",
              "quantity": 40
            }
          ],
          "deadline": "2024-03-26",
          "budget": 21000.0
        },
        {
          "id": "o5",
          "customer": "Northbridge University Athletics",
          "items": [
            {
              "product_id": "p9",
              "quantity": 40
            },
            {
              "product_id": "p2",
              "quantity": 30
            },
            {
              "product_id": "p5",
              "quantity": 30
            }
          ],
          "deadline": "2024-03-20",
          "budget": 14000.0
        },
        {
          "id": "o6",
          "customer": "Cedar Valley Youth Football",
          "items": [
            {
              "product_id": "p5",
              "quantity": 60
            },
            {
              "product_id": "p8",
              "quantity": 40
            },
            {
              "product_id": "p6",
              "quantity": 40
            }
          ],
          "deadline": "2024-03-24",
          "budget": 12000.0
        }
      ],
      "vendors": [
        {
          "id": "v1",
          "name": "GridironGear Logistics",
          "country": "USA",
          "products": {
            "p5": {
              "price": 54.0,
              "lead_time_days": 6
            },
            "p8": {
              "price": 3.9,
              "lead_time_days": 5
            },
            "p2": {
              "price": 23.0,
              "lead_time_days": 4
            }
          }
        },
        {
          "id": "v2",
          "name": "Bavaria SportTech Supply",
          "country": "Germany",
          "products": {
            "p3": {
              "price": 62.0,
              "lead_time_days": 7
            },
            "p6": {
              "price": 25.0,
              "lead_time_days": 6
            },
            "p7": {
              "price": 2.1,
              "lead_time_days": 8
            }
          }
        },
        {
          "id": "v3",
          "name": "Kyoto ProGear Export",
          "country": "Japan",
          "products": {
            "p3": {
              "price": 54.0,
              "lead_time_days": 19
            },
            "p4": {
              "price": 19.0,
              "lead_time_days": 16
            },
            "p1": {
              "price": 16.0,
              "lead_time_days": 14
            }
          }
        },
        {
          "id": "v4",
          "name": "Ontario Team Sports Wholesale",
          "country": "Canada",
          "products": {
            "p1": {
              "price": 17.0,
              "lead_time_days": 11
            },
            "p2": {
              "price": 19.0,
              "lead_time_days": 12
            },
            "p7": {
              "price": 1.7,
              "lead_time_days": 13
            }
          }
        },
        {
          "id": "v5",
          "name": "Texas Rapid Replenish",
          "country": "USA",
          "products": {
            "p1": {
              "price": 21.0,
              "lead_time_days": 3
            },
            "p7": {
              "price": 2.8,
              "lead_time_days": 2
            },
            "p4": {
              "price": 28.0,
              "lead_time_days": 5
            }
          }
        }
      ],
      "bills_of_materials": [
        {
          "product_id": "p9",
          "components": [
            {
              "product_id": "p1",
              "quantity": 1.0
            },
            {
              "product_id": "p7",
              "quantity": 1.0
            }
          ],
          "production_cost": 1.6,
          "production_time_days": 2
        },
        {
          "product_id": "p10",
          "components": [
            {
              "product_id": "p5",
              "quantity": 1.0
            },
            {
              "product_id": "p8",
              "quantity": 1.0
            }
          ],
          "production_cost": 3.0,
          "production_time_days": 3
        }
      ]
    },
    "constraints": [
      {
        "description": "Each order must stay within its allocated budget (budgets include sourcing and manufacturing costs).",
        "_spec": {
          "fn": "budget",
          "args": []
        }
      },
      {
        "description": "All orders must be delivered by their deadline dates, accounting for vendor lead times and manufacturing production times.",
        "_spec": {
          "fn": "deadline",
          "args": []
        }
      },
      {
        "description": "Maintain at least 25% profit margin on all sales (by order).",
        "_spec": {
          "fn": "margin",
          "args": [
            0.25
          ]
        }
      },
      {
        "description": "Source only from vendors located in USA or Germany (country policy applies to all purchased items; stock and in-house manufacturing are allowed).",
        "_spec": {
          "fn": "vendor_policy",
          "args": [
            [
              "USA",
              "Germany"
            ]
          ]
        }
      },
      {
        "description": "Vendor GridironGear Logistics (v1) requires a minimum order quantity of 50 units per purchased product line (per product).",
        "_spec": {
          "fn": "min_order_qty",
          "args": [
            "v1",
            50
          ]
        }
      },
      {
        "description": "Daily processing capacity is limited to 900 total units (sum of all units handled across all orders; manufacturing output units also count toward processing).",
        "_spec": {
          "fn": "capacity",
          "args": [
            900
          ]
        }
      }
    ],
    "instruction": "Find the minimum-cost sourcing and manufacturing plan (use stock, vendor purchases respecting country policy and MOQ, and BOM-based manufacturing) that fulfills all customer orders by their deadlines while meeting each order\u2019s budget, achieving at least 25% profit margin, and staying within the overall processing capacity limit.",
    "feasible": true,
    "solution": {
      "domain": "order_fulfillment",
      "decisions": [
        {
          "order_id": "o1",
          "product_id": "p9",
          "quantity": 60,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o1",
          "product_id": "p3",
          "quantity": 30,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o1",
          "product_id": "p3",
          "quantity": 50,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o2",
          "product_id": "p2",
          "quantity": 10,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o2",
          "product_id": "p2",
          "quantity": 30,
          "source": "purchase",
          "vendor_id": "v1"
        },
        {
          "order_id": "o2",
          "product_id": "p6",
          "quantity": 35,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o2",
          "product_id": "p6",
          "quantity": 15,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o3",
          "product_id": "p4",
          "quantity": 25,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o3",
          "product_id": "p4",
          "quantity": 45,
          "source": "purchase",
          "vendor_id": "v5"
        },
        {
          "order_id": "o3",
          "product_id": "p7",
          "quantity": 70,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o4",
          "product_id": "p10",
          "quantity": 90,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o4",
          "product_id": "p1",
          "quantity": 40,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o5",
          "product_id": "p9",
          "quantity": 40,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o5",
          "product_id": "p2",
          "quantity": 30,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o5",
          "product_id": "p5",
          "quantity": 20,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o5",
          "product_id": "p5",
          "quantity": 10,
          "source": "purchase",
          "vendor_id": "v1"
        },
        {
          "order_id": "o6",
          "product_id": "p5",
          "quantity": 60,
          "source": "purchase",
          "vendor_id": "v1"
        },
        {
          "order_id": "o6",
          "product_id": "p8",
          "quantity": 40,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o6",
          "product_id": "p6",
          "quantity": 40,
          "source": "purchase",
          "vendor_id": "v2"
        }
      ],
      "total_cost": 16555.0,
      "total_revenue": 40800.0
    }
  },
  {
    "id": "order_fulfillment_32e22e33",
    "difficulty": "expert",
    "scenario": {
      "domain": "order_fulfillment",
      "description": "A regional construction materials distributor (NorthRiver Building Supply) must fulfill multiple contractor and project-site orders. The distributor can allocate limited warehouse stock, buy from vetted vendors with different lead times and country restrictions, or manufacture select fabricated items (anchors and rebar couplers) using bills of materials. The hard part is timing and BOM competition: the fastest vendor is pricey, the cheapest vendor is too slow for the early jobs, and the same components are needed for multiple manufactured SKUs, so greedy sourcing can strand later orders.",
      "start_date": "2024-03-01",
      "products": [
        {
          "id": "p1",
          "name": "Type I/II Portland Cement Pallet (42x94lb)",
          "cost": 118.0,
          "price": 165.0,
          "stock": 70
        },
        {
          "id": "p2",
          "name": "Concrete Sand Bulk Bag (1 cu yd)",
          "cost": 32.0,
          "price": 55.0,
          "stock": 140
        },
        {
          "id": "p3",
          "name": "3/4 in Crushed Stone Bulk Bag (1 cu yd)",
          "cost": 36.0,
          "price": 62.0,
          "stock": 120
        },
        {
          "id": "p4",
          "name": "CMU Block 8x8x16 (palletized)",
          "cost": 1.22,
          "price": 2.1,
          "stock": 900
        },
        {
          "id": "p5",
          "name": "#4 Rebar (1/2 in) 20 ft Stick",
          "cost": 6.2,
          "price": 9.5,
          "stock": 420
        },
        {
          "id": "p6",
          "name": "3/4 in Plywood Sheet 4x8 (Exterior)",
          "cost": 29.0,
          "price": 45.0,
          "stock": 160
        },
        {
          "id": "p7",
          "name": "2x4 Stud 8 ft (KD SPF)",
          "cost": 3.1,
          "price": 5.1,
          "stock": 1100
        },
        {
          "id": "p8",
          "name": "Epoxy Anchor Kit (cartridge set)",
          "cost": 16.0,
          "price": 30.0,
          "stock": 45
        },
        {
          "id": "p9",
          "name": "Fabricated Anchor Bolt Assembly (1/2 in x 12 in)",
          "cost": 10.0,
          "price": 28.0,
          "stock": 25
        },
        {
          "id": "p10",
          "name": "Rebar Coupler (1/2 in, threaded)",
          "cost": 1.8,
          "price": 6.0,
          "stock": 80
        }
      ],
      "orders": [
        {
          "id": "o1",
          "customer": "IronSpan Contractors (Warehouse Slab)",
          "items": [
            {
              "product_id": "p1",
              "quantity": 120
            },
            {
              "product_id": "p2",
              "quantity": 60
            }
          ],
          "deadline": "2024-03-10",
          "budget": 50000.0
        },
        {
          "id": "o2",
          "customer": "Stonebridge Masonry (Retaining Wall)",
          "items": [
            {
              "product_id": "p4",
              "quantity": 180
            },
            {
              "product_id": "p5",
              "quantity": 40
            }
          ],
          "deadline": "2024-03-12",
          "budget": 6000.0
        },
        {
          "id": "o3",
          "customer": "RidgeLine Builders (Framing Package - Phase 1)",
          "items": [
            {
              "product_id": "p6",
              "quantity": 140
            },
            {
              "product_id": "p7",
              "quantity": 80
            }
          ],
          "deadline": "2024-03-16",
          "budget": 9500.0
        },
        {
          "id": "o4",
          "customer": "ClearWater Civil (Culvert Headwall)",
          "items": [
            {
              "product_id": "p3",
              "quantity": 90
            },
            {
              "product_id": "p8",
              "quantity": 60
            }
          ],
          "deadline": "2024-03-15",
          "budget": 7000.0
        },
        {
          "id": "o5",
          "customer": "MetroSteel Erectors (Baseplates & Anchors)",
          "items": [
            {
              "product_id": "p9",
              "quantity": 70
            },
            {
              "product_id": "p10",
              "quantity": 40
            }
          ],
          "deadline": "2024-03-20",
          "budget": 4200.0
        },
        {
          "id": "o6",
          "customer": "Pinecrest Homes (Footings & Forms)",
          "items": [
            {
              "product_id": "p1",
              "quantity": 80
            },
            {
              "product_id": "p6",
              "quantity": 60
            }
          ],
          "deadline": "2024-03-22",
          "budget": 14000.0
        },
        {
          "id": "o7",
          "customer": "HighPoint Industrial (Grout & Anchors - Shutdown Window)",
          "items": [
            {
              "product_id": "p8",
              "quantity": 100
            },
            {
              "product_id": "p2",
              "quantity": 120
            }
          ],
          "deadline": "2024-03-14",
          "budget": 9000.0
        }
      ],
      "vendors": [
        {
          "id": "v1",
          "name": "GulfCo Aggregates Express",
          "country": "USA",
          "products": {
            "p2": {
              "price": 35.0,
              "lead_time_days": 3
            },
            "p3": {
              "price": 39.0,
              "lead_time_days": 3
            }
          }
        },
        {
          "id": "v2",
          "name": "Midwest Cement Rail",
          "country": "USA",
          "products": {
            "p1": {
              "price": 125.0,
              "lead_time_days": 9
            }
          }
        },
        {
          "id": "v3",
          "name": "Danube Masonry Imports",
          "country": "Germany",
          "products": {
            "p4": {
              "price": 1.05,
              "lead_time_days": 12
            },
            "p8": {
              "price": 12.5,
              "lead_time_days": 11
            }
          }
        },
        {
          "id": "v4",
          "name": "RapidLumber DC",
          "country": "USA",
          "products": {
            "p6": {
              "price": 34.0,
              "lead_time_days": 4
            },
            "p7": {
              "price": 3.6,
              "lead_time_days": 4
            }
          }
        },
        {
          "id": "v5",
          "name": "Bavarian Steel Hardware",
          "country": "Germany",
          "products": {
            "p5": {
              "price": 5.2,
              "lead_time_days": 13
            },
            "p10": {
              "price": 1.35,
              "lead_time_days": 10
            }
          }
        }
      ],
      "bills_of_materials": [
        {
          "product_id": "p9",
          "components": [
            {
              "product_id": "p10",
              "quantity": 1.0
            },
            {
              "product_id": "p8",
              "quantity": 0.5
            }
          ],
          "production_cost": 3.6,
          "production_time_days": 6
        },
        {
          "product_id": "p10",
          "components": [
            {
              "product_id": "p5",
              "quantity": 0.12
            }
          ],
          "production_cost": 0.35,
          "production_time_days": 5
        }
      ]
    },
    "constraints": [
      {
        "description": "Each order must stay within its allocated budget (including stock consumption at its cost, vendor purchases at vendor price, and manufacturing costs including components).",
        "_spec": {
          "fn": "budget",
          "args": []
        }
      },
      {
        "description": "All orders must be delivered by their deadline dates considering vendor lead times and manufacturing production times.",
        "_spec": {
          "fn": "deadline",
          "args": []
        }
      },
      {
        "description": "Maintain at least a 25% profit margin on all sales (across the fulfilled orders).",
        "_spec": {
          "fn": "margin",
          "args": [
            0.25
          ]
        }
      },
      {
        "description": "Source only from vendors located in USA or Germany (applies to all vendor purchasing decisions).",
        "_spec": {
          "fn": "vendor_policy",
          "args": [
            [
              "USA",
              "Germany"
            ]
          ]
        }
      },
      {
        "description": "Vendor v3 (Danube Masonry Imports) requires minimum order quantity of 200 units total across items purchased from that vendor (a decoy because it is cheap but tends to be used for small top-ups).",
        "_spec": {
          "fn": "min_order_qty",
          "args": [
            "v3",
            200
          ]
        }
      },
      {
        "description": "Total processing capacity is limited to 1800 units (must be sufficient for all order quantities combined).",
        "_spec": {
          "fn": "capacity",
          "args": [
            1800
          ]
        }
      }
    ],
    "instruction": "Find a minimum-total-cost sourcing and production plan that fulfills all customer orders. You may allocate existing stock, buy from vendors subject to lead times, country policy, and minimum order quantities, and manufacture items only where BOMs exist (respecting production times and component availability). The plan must satisfy each order\u2019s budget, all deadlines, the 25% minimum margin, vendor country policy, and overall processing capacity. Design decisions should avoid greedy traps (e.g., consuming stock or components that are critical for manufactured items needed later) and decoy options (e.g., the cheap-but-slow or minimum-quantity vendors).",
    "feasible": true,
    "solution": {
      "domain": "order_fulfillment",
      "decisions": [
        {
          "order_id": "o1",
          "product_id": "p1",
          "quantity": 120,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o1",
          "product_id": "p2",
          "quantity": 20,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o1",
          "product_id": "p2",
          "quantity": 40,
          "source": "purchase",
          "vendor_id": "v1"
        },
        {
          "order_id": "o2",
          "product_id": "p4",
          "quantity": 180,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o2",
          "product_id": "p5",
          "quantity": 40,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o3",
          "product_id": "p6",
          "quantity": 100,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o3",
          "product_id": "p6",
          "quantity": 40,
          "source": "purchase",
          "vendor_id": "v4"
        },
        {
          "order_id": "o3",
          "product_id": "p7",
          "quantity": 80,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o4",
          "product_id": "p3",
          "quantity": 90,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o4",
          "product_id": "p8",
          "quantity": 100,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o5",
          "product_id": "p9",
          "quantity": 70,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o5",
          "product_id": "p10",
          "quantity": 40,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o6",
          "product_id": "p1",
          "quantity": 70,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o6",
          "product_id": "p1",
          "quantity": 10,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o6",
          "product_id": "p6",
          "quantity": 60,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o7",
          "product_id": "p8",
          "quantity": 100,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o7",
          "product_id": "p2",
          "quantity": 120,
          "source": "stock",
          "vendor_id": null
        }
      ],
      "total_cost": 43111.6,
      "total_revenue": 66846.0
    }
  },
  {
    "id": "order_fulfillment_a0704020",
    "difficulty": "expert",
    "scenario": {
      "domain": "order_fulfillment",
      "description": "Saffron Harbor Imports is a specialty food importer serving independent restaurants. The company must fulfill multiple March restaurant orders using a mix of limited on-hand stock, vendor purchases with country/lead-time differences, and light in-house manufacturing (bottling spice blends and repacking items) based on bills of materials. The planning challenge includes tempting low-price vendors with lead times that miss deadlines, minimum-order-quantity traps that create surplus you can only use if you anticipate later orders, and manufacturing that competes for the same scarce components needed by other SKUs.",
      "start_date": "2024-03-01",
      "products": [
        {
          "id": "p1",
          "name": "Spanish Smoked Paprika (1kg)",
          "cost": 9.5,
          "price": 16.0,
          "stock": 70
        },
        {
          "id": "p2",
          "name": "Sicilian Extra Virgin Olive Oil (5L tin)",
          "cost": 32.0,
          "price": 52.0,
          "stock": 35
        },
        {
          "id": "p3",
          "name": "Aged Balsamic Vinegar (500ml)",
          "cost": 8.0,
          "price": 14.0,
          "stock": 90
        },
        {
          "id": "p4",
          "name": "Shoyu Soy Sauce (1L)",
          "cost": 4.6,
          "price": 8.5,
          "stock": 120
        },
        {
          "id": "p5",
          "name": "Saffron Threads (1g jar)",
          "cost": 11.0,
          "price": 19.5,
          "stock": 25
        },
        {
          "id": "p6",
          "name": "Tellicherry Black Pepper (1kg)",
          "cost": 10.5,
          "price": 17.5,
          "stock": 60
        },
        {
          "id": "p7",
          "name": "Chipotle Adobo (2kg can)",
          "cost": 6.0,
          "price": 10.5,
          "stock": 80
        },
        {
          "id": "p8",
          "name": "Ramen Broth Concentrate (1L)",
          "cost": 5.2,
          "price": 9.5,
          "stock": 50
        },
        {
          "id": "p9",
          "name": "House Harissa Paste (500g jar) - Manufactured",
          "cost": 7.0,
          "price": 13.0,
          "stock": 10
        },
        {
          "id": "p10",
          "name": "Seafood Paella Spice Blend (250g) - Manufactured",
          "cost": 3.2,
          "price": 6.5,
          "stock": 40
        }
      ],
      "orders": [
        {
          "id": "o1",
          "customer": "La Mar\u00e9e Brasserie",
          "items": [
            {
              "product_id": "p2",
              "quantity": 120
            },
            {
              "product_id": "p3",
              "quantity": 40
            },
            {
              "product_id": "p5",
              "quantity": 10
            }
          ],
          "deadline": "2024-03-24",
          "budget": 9000.0
        },
        {
          "id": "o2",
          "customer": "Ramen Forge",
          "items": [
            {
              "product_id": "p8",
              "quantity": 60
            },
            {
              "product_id": "p4",
              "quantity": 20
            }
          ],
          "deadline": "2024-03-16",
          "budget": 950.0
        },
        {
          "id": "o3",
          "customer": "Cinder & Salt Steakhouse",
          "items": [
            {
              "product_id": "p6",
              "quantity": 90
            },
            {
              "product_id": "p2",
              "quantity": 70
            },
            {
              "product_id": "p3",
              "quantity": 25
            }
          ],
          "deadline": "2024-03-22",
          "budget": 5400.0
        },
        {
          "id": "o4",
          "customer": "El Azafr\u00e1n Tapas",
          "items": [
            {
              "product_id": "p10",
              "quantity": 80
            },
            {
              "product_id": "p1",
              "quantity": 100
            },
            {
              "product_id": "p5",
              "quantity": 50
            }
          ],
          "deadline": "2024-03-28",
          "budget": 4200.0
        },
        {
          "id": "o5",
          "customer": "Pho & Fire",
          "items": [
            {
              "product_id": "p4",
              "quantity": 85
            },
            {
              "product_id": "p8",
              "quantity": 40
            },
            {
              "product_id": "p6",
              "quantity": 60
            }
          ],
          "deadline": "2024-03-20",
          "budget": 2100.0
        },
        {
          "id": "o6",
          "customer": "Harborview Oyster Bar",
          "items": [
            {
              "product_id": "p3",
              "quantity": 55
            },
            {
              "product_id": "p2",
              "quantity": 80
            },
            {
              "product_id": "p7",
              "quantity": 20
            }
          ],
          "deadline": "2024-03-26",
          "budget": 4600.0
        },
        {
          "id": "o7",
          "customer": "The Spiced Fig",
          "items": [
            {
              "product_id": "p9",
              "quantity": 60
            },
            {
              "product_id": "p6",
              "quantity": 70
            },
            {
              "product_id": "p1",
              "quantity": 50
            },
            {
              "product_id": "p7",
              "quantity": 40
            }
          ],
          "deadline": "2024-03-30",
          "budget": 3600.0
        }
      ],
      "vendors": [
        {
          "id": "v1",
          "name": "Gulf Coast Specialty Grocers",
          "country": "USA",
          "products": {
            "p2": {
              "price": 36.0,
              "lead_time_days": 6
            },
            "p3": {
              "price": 8.6,
              "lead_time_days": 5
            },
            "p4": {
              "price": 4.8,
              "lead_time_days": 4
            },
            "p8": {
              "price": 5.8,
              "lead_time_days": 7
            }
          }
        },
        {
          "id": "v2",
          "name": "Rheinland Pantry Trade",
          "country": "Germany",
          "products": {
            "p2": {
              "price": 31.0,
              "lead_time_days": 14
            },
            "p3": {
              "price": 7.6,
              "lead_time_days": 12
            },
            "p6": {
              "price": 9.8,
              "lead_time_days": 13
            },
            "p1": {
              "price": 8.9,
              "lead_time_days": 15
            }
          }
        },
        {
          "id": "v3",
          "name": "Mediterraneo Cured & Pressed",
          "country": "Italy",
          "products": {
            "p2": {
              "price": 29.5,
              "lead_time_days": 18
            },
            "p3": {
              "price": 7.4,
              "lead_time_days": 16
            },
            "p5": {
              "price": 12.8,
              "lead_time_days": 20
            }
          }
        },
        {
          "id": "v4",
          "name": "Andalusian Spice Exchange",
          "country": "Spain",
          "products": {
            "p1": {
              "price": 7.7,
              "lead_time_days": 11
            },
            "p5": {
              "price": 10.2,
              "lead_time_days": 10
            },
            "p6": {
              "price": 10.1,
              "lead_time_days": 9
            },
            "p7": {
              "price": 5.2,
              "lead_time_days": 10
            }
          }
        },
        {
          "id": "v5",
          "name": "Osaka Ferments & Broths",
          "country": "Japan",
          "products": {
            "p4": {
              "price": 3.9,
              "lead_time_days": 21
            },
            "p8": {
              "price": 4.7,
              "lead_time_days": 19
            }
          }
        }
      ],
      "bills_of_materials": [
        {
          "product_id": "p9",
          "components": [
            {
              "product_id": "p7",
              "quantity": 1.0
            },
            {
              "product_id": "p1",
              "quantity": 0.2
            },
            {
              "product_id": "p6",
              "quantity": 0.1
            }
          ],
          "production_cost": 1.7,
          "production_time_days": 5
        },
        {
          "product_id": "p10",
          "components": [
            {
              "product_id": "p1",
              "quantity": 0.25
            },
            {
              "product_id": "p6",
              "quantity": 0.15
            },
            {
              "product_id": "p5",
              "quantity": 0.05
            }
          ],
          "production_cost": 0.9,
          "production_time_days": 4
        }
      ]
    },
    "constraints": [
      {
        "description": "Each restaurant order must stay within its allocated budget (sum of sourcing/manufacturing costs for the items assigned to that order must not exceed the order budget).",
        "_spec": {
          "fn": "budget",
          "args": []
        }
      },
      {
        "description": "All orders must be delivered by their deadline dates, accounting for vendor lead times and manufacturing production times from the scenario start date.",
        "_spec": {
          "fn": "deadline",
          "args": []
        }
      },
      {
        "description": "Maintain at least a 25% profit margin on each order based on selling price vs. total fulfillment cost (stock cost + purchase cost + manufacturing component costs + production cost).",
        "_spec": {
          "fn": "margin",
          "args": [
            0.25
          ]
        }
      },
      {
        "description": "Company compliance policy: source only from vendors located in USA, Germany, or Spain (any other vendor offers are decoys and cannot be used).",
        "_spec": {
          "fn": "vendor_policy",
          "args": [
            [
              "USA",
              "Germany",
              "Spain"
            ]
          ]
        }
      },
      {
        "description": "Minimum order quantity policy for Rheinland Pantry Trade (v2): if purchasing from v2, total units purchased across all SKUs from v2 must be at least 120 units (encourages consolidation but can create surplus traps).",
        "_spec": {
          "fn": "min_order_qty",
          "args": [
            "v2",
            120
          ]
        }
      },
      {
        "description": "Daily processing capacity is limited, but set high enough to be feasible; the optimization must respect a maximum daily processing capacity of 1600 units (must be >= total demand units across all orders).",
        "_spec": {
          "fn": "capacity",
          "args": [
            1600
          ]
        }
      }
    ],
    "instruction": "Find the minimum-cost sourcing and manufacturing strategy (use existing stock, compliant vendor purchases with lead times/MOQs, and BOM-based manufacturing) that fulfills all restaurant orders by their deadlines while staying within each order budget, meeting the 25% minimum margin requirement, obeying the allowed-country vendor policy, satisfying v2's minimum order quantity if used, and respecting the daily processing capacity limit.",
    "feasible": true,
    "solution": {
      "domain": "order_fulfillment",
      "decisions": [
        {
          "order_id": "o1",
          "product_id": "p2",
          "quantity": 120,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o1",
          "product_id": "p3",
          "quantity": 40,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o1",
          "product_id": "p5",
          "quantity": 10,
          "source": "purchase",
          "vendor_id": "v4"
        },
        {
          "order_id": "o2",
          "product_id": "p8",
          "quantity": 10,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o2",
          "product_id": "p8",
          "quantity": 50,
          "source": "purchase",
          "vendor_id": "v1"
        },
        {
          "order_id": "o2",
          "product_id": "p4",
          "quantity": 20,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o3",
          "product_id": "p6",
          "quantity": 90,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o3",
          "product_id": "p2",
          "quantity": 70,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o3",
          "product_id": "p3",
          "quantity": 25,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o4",
          "product_id": "p10",
          "quantity": 80,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o4",
          "product_id": "p1",
          "quantity": 100,
          "source": "purchase",
          "vendor_id": "v4"
        },
        {
          "order_id": "o4",
          "product_id": "p5",
          "quantity": 50,
          "source": "purchase",
          "vendor_id": "v4"
        },
        {
          "order_id": "o5",
          "product_id": "p4",
          "quantity": 85,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o5",
          "product_id": "p8",
          "quantity": 40,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o5",
          "product_id": "p6",
          "quantity": 60,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o6",
          "product_id": "p3",
          "quantity": 55,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o6",
          "product_id": "p2",
          "quantity": 80,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o6",
          "product_id": "p7",
          "quantity": 20,
          "source": "purchase",
          "vendor_id": "v4"
        },
        {
          "order_id": "o7",
          "product_id": "p9",
          "quantity": 60,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o7",
          "product_id": "p6",
          "quantity": 70,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o7",
          "product_id": "p1",
          "quantity": 50,
          "source": "purchase",
          "vendor_id": "v4"
        },
        {
          "order_id": "o7",
          "product_id": "p7",
          "quantity": 40,
          "source": "purchase",
          "vendor_id": "v4"
        }
      ],
      "total_cost": 14724.0,
      "total_revenue": 26912.5
    }
  },
  {
    "id": "order_fulfillment_b3de0e8a",
    "difficulty": "expert",
    "scenario": {
      "domain": "order_fulfillment",
      "description": "ForgeLine Industrial Supply is an industrial machinery parts wholesaler serving OEM maintenance departments and field-service contractors. The planner must fulfill multiple March ship windows using a mix of on-hand stock, vendor buys with varying lead times/countries/MOQs, and limited in-house kitting/assembly (BOM-based manufacture). Several vendors offer decoy-low prices that are late or disallowed by policy, and some assemblies compete for the same constrained components\u2014greedy purchasing choices can strand later orders or force MOQ overbuys that blow per-order budgets.",
      "start_date": "2024-03-01",
      "products": [
        {
          "id": "p1",
          "name": "Hydraulic Seal Kit (HSK-200)",
          "cost": 38.0,
          "price": 64.0,
          "stock": 70
        },
        {
          "id": "p2",
          "name": "Pneumatic FRL Filter Element (FRL-FE5)",
          "cost": 22.0,
          "price": 39.0,
          "stock": 55
        },
        {
          "id": "p3",
          "name": "Bearing Block 50mm (BB-50)",
          "cost": 46.0,
          "price": 78.0,
          "stock": 40
        },
        {
          "id": "p4",
          "name": "Inductive Proximity Sensor M12 (IPS-M12)",
          "cost": 18.0,
          "price": 36.0,
          "stock": 90
        },
        {
          "id": "p5",
          "name": "V-Belt B72 (VB-B72)",
          "cost": 14.0,
          "price": 28.0,
          "stock": 110
        },
        {
          "id": "p6",
          "name": "Gearmotor Coupling Insert (GCI-98)",
          "cost": 27.0,
          "price": 49.0,
          "stock": 35
        },
        {
          "id": "p7",
          "name": "Stainless Fastener Pack M8 (SFP-M8/50)",
          "cost": 9.0,
          "price": 18.0,
          "stock": 160
        },
        {
          "id": "p8",
          "name": "Lubrication Cartridge EP2 (LC-EP2)",
          "cost": 11.0,
          "price": 21.0,
          "stock": 80
        },
        {
          "id": "p9",
          "name": "Conveyor Roller 60mm (CR-60)",
          "cost": 33.0,
          "price": 59.0,
          "stock": 25
        },
        {
          "id": "p10",
          "name": "Field Service Kit: Pump & Motion (FSK-PM1)",
          "cost": 0.0,
          "price": 245.0,
          "stock": 0
        }
      ],
      "orders": [
        {
          "id": "o1",
          "customer": "RedRiver Steel Mill Maintenance",
          "items": [
            {
              "product_id": "p10",
              "quantity": 90
            },
            {
              "product_id": "p7",
              "quantity": 40
            },
            {
              "product_id": "p4",
              "quantity": 120
            }
          ],
          "deadline": "2024-03-24",
          "budget": 26000.0
        },
        {
          "id": "o2",
          "customer": "NorthDock Port Crane Services",
          "items": [
            {
              "product_id": "p10",
              "quantity": 8
            },
            {
              "product_id": "p6",
              "quantity": 6
            },
            {
              "product_id": "p8",
              "quantity": 60
            }
          ],
          "deadline": "2024-03-10",
          "budget": 5200.0
        },
        {
          "id": "o3",
          "customer": "GranitePeak Cement Plant (Kiln Line)",
          "items": [
            {
              "product_id": "p3",
              "quantity": 18
            },
            {
              "product_id": "p9",
              "quantity": 40
            },
            {
              "product_id": "p5",
              "quantity": 80
            }
          ],
          "deadline": "2024-03-19",
          "budget": 9400.0
        },
        {
          "id": "o4",
          "customer": "AeroForge Machining (Cell 3)",
          "items": [
            {
              "product_id": "p2",
              "quantity": 30
            },
            {
              "product_id": "p1",
              "quantity": 50
            },
            {
              "product_id": "p6",
              "quantity": 80
            }
          ],
          "deadline": "2024-03-27",
          "budget": 10800.0
        },
        {
          "id": "o5",
          "customer": "Keystone Packaging Automation",
          "items": [
            {
              "product_id": "p10",
              "quantity": 4
            },
            {
              "product_id": "p4",
              "quantity": 12
            },
            {
              "product_id": "p2",
              "quantity": 30
            }
          ],
          "deadline": "2024-03-08",
          "budget": 2300.0
        },
        {
          "id": "o6",
          "customer": "TriCounty Water District (Pump Stations)",
          "items": [
            {
              "product_id": "p1",
              "quantity": 22
            },
            {
              "product_id": "p8",
              "quantity": 10
            },
            {
              "product_id": "p7",
              "quantity": 150
            }
          ],
          "deadline": "2024-03-28",
          "budget": 3400.0
        },
        {
          "id": "o7",
          "customer": "MetroLift Elevator Field Ops",
          "items": [
            {
              "product_id": "p6",
              "quantity": 10
            },
            {
              "product_id": "p9",
              "quantity": 25
            },
            {
              "product_id": "p2",
              "quantity": 30
            }
          ],
          "deadline": "2024-03-21",
          "budget": 3800.0
        }
      ],
      "vendors": [
        {
          "id": "v1",
          "name": "Midwest Motion Components",
          "country": "USA",
          "products": {
            "p6": {
              "price": 24.0,
              "lead_time_days": 6
            },
            "p3": {
              "price": 49.0,
              "lead_time_days": 5
            },
            "p4": {
              "price": 17.0,
              "lead_time_days": 4
            },
            "p9": {
              "price": 34.0,
              "lead_time_days": 7
            }
          }
        },
        {
          "id": "v2",
          "name": "RheinDrive Industriehandel",
          "country": "Germany",
          "products": {
            "p6": {
              "price": 21.0,
              "lead_time_days": 13
            },
            "p3": {
              "price": 44.0,
              "lead_time_days": 12
            },
            "p2": {
              "price": 20.0,
              "lead_time_days": 9
            },
            "p9": {
              "price": 31.0,
              "lead_time_days": 14
            }
          }
        },
        {
          "id": "v3",
          "name": "GreatLakes Sealing & Hydraulics",
          "country": "USA",
          "products": {
            "p1": {
              "price": 35.0,
              "lead_time_days": 5
            },
            "p8": {
              "price": 10.0,
              "lead_time_days": 6
            },
            "p7": {
              "price": 8.5,
              "lead_time_days": 3
            }
          }
        },
        {
          "id": "v4",
          "name": "Alpine Sensorhaus",
          "country": "Germany",
          "products": {
            "p4": {
              "price": 15.0,
              "lead_time_days": 11
            },
            "p2": {
              "price": 19.0,
              "lead_time_days": 10
            },
            "p7": {
              "price": 7.8,
              "lead_time_days": 15
            }
          }
        },
        {
          "id": "v5",
          "name": "Pacific Belt & Bearing Co.",
          "country": "USA",
          "products": {
            "p5": {
              "price": 12.5,
              "lead_time_days": 4
            },
            "p9": {
              "price": 32.0,
              "lead_time_days": 9
            },
            "p3": {
              "price": 47.0,
              "lead_time_days": 6
            }
          }
        },
        {
          "id": "v6",
          "name": "Shenzhen QuickParts Export",
          "country": "China",
          "products": {
            "p4": {
              "price": 12.0,
              "lead_time_days": 8
            },
            "p6": {
              "price": 18.0,
              "lead_time_days": 9
            },
            "p7": {
              "price": 6.2,
              "lead_time_days": 10
            }
          }
        }
      ],
      "bills_of_materials": [
        {
          "product_id": "p10",
          "components": [
            {
              "product_id": "p1",
              "quantity": 1.0
            },
            {
              "product_id": "p4",
              "quantity": 1.0
            },
            {
              "product_id": "p6",
              "quantity": 1.0
            },
            {
              "product_id": "p7",
              "quantity": 2.0
            },
            {
              "product_id": "p8",
              "quantity": 1.0
            }
          ],
          "production_cost": 24.0,
          "production_time_days": 3
        }
      ]
    },
    "constraints": [
      {
        "description": "Each order must stay within its allocated budget (including stock allocation at its cost, vendor purchases, and manufacturing costs).",
        "_spec": {
          "fn": "budget",
          "args": []
        }
      },
      {
        "description": "All orders must be delivered by their deadline dates; sources must arrive/complete in time (vendor lead times and manufacturing times apply).",
        "_spec": {
          "fn": "deadline",
          "args": []
        }
      },
      {
        "description": "Maintain at least 25% profit margin on all sales (per-order or overall, at solver discretion).",
        "_spec": {
          "fn": "margin",
          "args": [
            0.25
          ]
        }
      },
      {
        "description": "Source only from vendors in USA or Germany (vendors outside these countries are not allowed).",
        "_spec": {
          "fn": "vendor_policy",
          "args": [
            [
              "USA",
              "Germany"
            ]
          ]
        }
      },
      {
        "description": "Minimum order quantity: RheinDrive Industriehandel (v2) requires MOQ 60 units per product per PO line (if you buy p6 from v2, must buy >=60 of p6; similarly for other products from v2).",
        "_spec": {
          "fn": "min_order_qty",
          "args": [
            "v2",
            60
          ]
        }
      },
      {
        "description": "Minimum order quantity: Alpine Sensorhaus (v4) requires MOQ 100 units per product per PO line (decoy low pricing but large MOQ).",
        "_spec": {
          "fn": "min_order_qty",
          "args": [
            "v4",
            100
          ]
        }
      },
      {
        "description": "Processing capacity limited to 1400 units total across the planning window (must cover the sum of all order line quantities).",
        "_spec": {
          "fn": "capacity",
          "args": [
            1400
          ]
        }
      }
    ],
    "instruction": "Find the minimum-total-cost sourcing and manufacturing plan that fulfills all orders. You may allocate on-hand stock, place vendor purchase orders (respecting vendor policies and MOQs), and/or manufacture BOM products (respecting production time and cost). The plan must satisfy all order budgets, meet every deadline, maintain the minimum margin, and stay within the capacity limit. Beware: some low-price options are decoys due to deadlines/MOQs, and manufacturing the field service kits competes for shared components, so greedy allocation can strand later orders.",
    "feasible": true,
    "solution": {
      "domain": "order_fulfillment",
      "decisions": [
        {
          "order_id": "o1",
          "product_id": "p10",
          "quantity": 90,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o1",
          "product_id": "p7",
          "quantity": 40,
          "source": "purchase",
          "vendor_id": "v4"
        },
        {
          "order_id": "o1",
          "product_id": "p4",
          "quantity": 120,
          "source": "purchase",
          "vendor_id": "v4"
        },
        {
          "order_id": "o2",
          "product_id": "p10",
          "quantity": 8,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o2",
          "product_id": "p6",
          "quantity": 6,
          "source": "purchase",
          "vendor_id": "v1"
        },
        {
          "order_id": "o2",
          "product_id": "p8",
          "quantity": 60,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o3",
          "product_id": "p3",
          "quantity": 18,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o3",
          "product_id": "p9",
          "quantity": 40,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o3",
          "product_id": "p5",
          "quantity": 80,
          "source": "purchase",
          "vendor_id": "v5"
        },
        {
          "order_id": "o4",
          "product_id": "p2",
          "quantity": 30,
          "source": "purchase",
          "vendor_id": "v4"
        },
        {
          "order_id": "o4",
          "product_id": "p1",
          "quantity": 50,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o4",
          "product_id": "p6",
          "quantity": 80,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o5",
          "product_id": "p10",
          "quantity": 4,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o5",
          "product_id": "p4",
          "quantity": 12,
          "source": "purchase",
          "vendor_id": "v1"
        },
        {
          "order_id": "o5",
          "product_id": "p2",
          "quantity": 30,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o6",
          "product_id": "p1",
          "quantity": 22,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o6",
          "product_id": "p8",
          "quantity": 10,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o6",
          "product_id": "p7",
          "quantity": 150,
          "source": "purchase",
          "vendor_id": "v4"
        },
        {
          "order_id": "o7",
          "product_id": "p6",
          "quantity": 10,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o7",
          "product_id": "p9",
          "quantity": 25,
          "source": "purchase",
          "vendor_id": "v2"
        },
        {
          "order_id": "o7",
          "product_id": "p2",
          "quantity": 30,
          "source": "purchase",
          "vendor_id": "v4"
        }
      ],
      "total_cost": 16795.0,
      "total_revenue": 54933.0
    }
  },
  {
    "id": "order_fulfillment_1f2c4804",
    "difficulty": "expert",
    "scenario": {
      "domain": "order_fulfillment",
      "description": "A regional medical equipment distributor must fulfill multiple hospital purchase orders by combining existing warehouse stock, vendor purchasing with country/lead-time constraints, and in-house kitting/assembly (manufacturing) for certain sterile and respiratory sets. Several vendor options are deliberately deceptive: the cheapest sources are either disallowed by country policy, barely miss critical deadlines, or trigger a high minimum-order-quantity rule that can strand other urgent items if chosen greedily.",
      "start_date": "2024-03-01",
      "products": [
        {
          "id": "p1",
          "name": "Portable Infusion Pump (IP-200)",
          "cost": 980.0,
          "price": 1450.0,
          "stock": 22
        },
        {
          "id": "p2",
          "name": "Patient Monitor Module (PMM-7)",
          "cost": 520.0,
          "price": 820.0,
          "stock": 40
        },
        {
          "id": "p3",
          "name": "Surgical Suction Canister (2L, sterile)",
          "cost": 35.0,
          "price": 65.0,
          "stock": 180
        },
        {
          "id": "p4",
          "name": "Sterile Tubing Set (universal)",
          "cost": 18.0,
          "price": 40.0,
          "stock": 140
        },
        {
          "id": "p5",
          "name": "HEPA Filter Cartridge (ventilator-grade)",
          "cost": 60.0,
          "price": 110.0,
          "stock": 70
        },
        {
          "id": "p6",
          "name": "Ventilator Circuit Set (adult)",
          "cost": 140.0,
          "price": 260.0,
          "stock": 35
        },
        {
          "id": "p7",
          "name": "Sterile Procedure Kit (minor OR)",
          "cost": 95.0,
          "price": 175.0,
          "stock": 30
        },
        {
          "id": "p8",
          "name": "Disposable Pressure Sensor (ICU)",
          "cost": 22.0,
          "price": 45.0,
          "stock": 120
        },
        {
          "id": "p9",
          "name": "Luer Lock Connector (sterile, single-use)",
          "cost": 4.0,
          "price": 12.0,
          "stock": 220
        }
      ],
      "orders": [
        {
          "id": "o1",
          "customer": "St. Anselm Medical Center",
          "items": [
            {
              "product_id": "p1",
              "quantity": 25
            },
            {
              "product_id": "p4",
              "quantity": 120
            }
          ],
          "deadline": "2024-03-10",
          "budget": 41000.0
        },
        {
          "id": "o2",
          "customer": "Riverside University Hospital",
          "items": [
            {
              "product_id": "p2",
              "quantity": 60
            },
            {
              "product_id": "p5",
              "quantity": 80
            }
          ],
          "deadline": "2024-03-14",
          "budget": 59000.0
        },
        {
          "id": "o3",
          "customer": "Northgate Children\u2019s Hospital",
          "items": [
            {
              "product_id": "p6",
              "quantity": 50
            },
            {
              "product_id": "p9",
              "quantity": 70
            }
          ],
          "deadline": "2024-03-16",
          "budget": 12000.0
        },
        {
          "id": "o4",
          "customer": "Mercy Harbor Surgical Institute",
          "items": [
            {
              "product_id": "p7",
              "quantity": 30
            },
            {
              "product_id": "p8",
              "quantity": 40
            }
          ],
          "deadline": "2024-03-18",
          "budget": 6000.0
        },
        {
          "id": "o5",
          "customer": "Cedar Ridge Community Hospital",
          "items": [
            {
              "product_id": "p3",
              "quantity": 20
            },
            {
              "product_id": "p4",
              "quantity": 90
            }
          ],
          "deadline": "2024-03-20",
          "budget": 3600.0
        },
        {
          "id": "o6",
          "customer": "Veterans Memorial Hospital Network",
          "items": [
            {
              "product_id": "p6",
              "quantity": 40
            },
            {
              "product_id": "p3",
              "quantity": 150
            },
            {
              "product_id": "p4",
              "quantity": 60
            }
          ],
          "deadline": "2024-03-24",
          "budget": 20000.0
        },
        {
          "id": "o7",
          "customer": "Brookfield Regional ICU Consortium",
          "items": [
            {
              "product_id": "p9",
              "quantity": 120
            },
            {
              "product_id": "p1",
              "quantity": 20
            },
            {
              "product_id": "p2",
              "quantity": 100
            }
          ],
          "deadline": "2024-03-27",
          "budget": 116000.0
        }
      ],
      "vendors": [
        {
          "id": "v1",
          "name": "RapidMed Logistics",
          "country": "USA",
          "products": {
            "p1": {
              "price": 1030.0,
              "lead_time_days": 4
            },
            "p2": {
              "price": 560.0,
              "lead_time_days": 5
            },
            "p3": {
              "price": 38.0,
              "lead_time_days": 6
            },
            "p4": {
              "price": 20.0,
              "lead_time_days": 4
            },
            "p5": {
              "price": 68.0,
              "lead_time_days": 6
            },
            "p6": {
              "price": 178.0,
              "lead_time_days": 6
            },
            "p7": {
              "price": 128.0,
              "lead_time_days": 7
            },
            "p9": {
              "price": 5.0,
              "lead_time_days": 5
            }
          }
        },
        {
          "id": "v2",
          "name": "RheinBio Components",
          "country": "Germany",
          "products": {
            "p4": {
              "price": 16.0,
              "lead_time_days": 12
            },
            "p5": {
              "price": 58.0,
              "lead_time_days": 14
            },
            "p8": {
              "price": 18.0,
              "lead_time_days": 13
            },
            "p9": {
              "price": 3.2,
              "lead_time_days": 13
            },
            "p6": {
              "price": 160.0,
              "lead_time_days": 15
            }
          }
        },
        {
          "id": "v3",
          "name": "Emerald Bulk Supplies",
          "country": "Ireland",
          "products": {
            "p4": {
              "price": 14.0,
              "lead_time_days": 9
            },
            "p5": {
              "price": 57.0,
              "lead_time_days": 11
            },
            "p8": {
              "price": 17.0,
              "lead_time_days": 10
            },
            "p9": {
              "price": 2.9,
              "lead_time_days": 9
            }
          }
        },
        {
          "id": "v4",
          "name": "Pacific HealthTech Export",
          "country": "China",
          "products": {
            "p1": {
              "price": 890.0,
              "lead_time_days": 20
            },
            "p2": {
              "price": 470.0,
              "lead_time_days": 18
            },
            "p6": {
              "price": 140.0,
              "lead_time_days": 22
            }
          }
        },
        {
          "id": "v5",
          "name": "Borderline Surgical Distributors",
          "country": "USA",
          "products": {
            "p3": {
              "price": 33.0,
              "lead_time_days": 3
            },
            "p6": {
              "price": 185.0,
              "lead_time_days": 8
            },
            "p7": {
              "price": 112.0,
              "lead_time_days": 16
            }
          }
        }
      ],
      "bills_of_materials": [
        {
          "product_id": "p6",
          "components": [
            {
              "product_id": "p4",
              "quantity": 2.0
            },
            {
              "product_id": "p5",
              "quantity": 1.0
            },
            {
              "product_id": "p9",
              "quantity": 4.0
            }
          ],
          "production_cost": 22.0,
          "production_time_days": 7
        },
        {
          "product_id": "p7",
          "components": [
            {
              "product_id": "p4",
              "quantity": 1.0
            },
            {
              "product_id": "p3",
              "quantity": 1.0
            },
            {
              "product_id": "p9",
              "quantity": 6.0
            }
          ],
          "production_cost": 18.0,
          "production_time_days": 6
        }
      ]
    },
    "constraints": [
      {
        "description": "Each hospital order must stay within its allocated procurement/production budget (including stock usage, vendor purchases, and manufacturing costs).",
        "_spec": {
          "fn": "budget",
          "args": []
        }
      },
      {
        "description": "All orders must be fully fulfilled by their stated delivery deadlines (considering vendor lead times and manufacturing production times).",
        "_spec": {
          "fn": "deadline",
          "args": []
        }
      },
      {
        "description": "Maintain at least a 25% profit margin on all fulfilled order lines (sales price vs. sourcing/manufacturing cost).",
        "_spec": {
          "fn": "margin",
          "args": [
            0.25
          ]
        }
      },
      {
        "description": "Comply with hospital compliance policy: only source from vendors located in USA, Germany, or Ireland (other vendors may appear in the dataset as decoys but are not allowed).",
        "_spec": {
          "fn": "vendor_policy",
          "args": [
            [
              "USA",
              "Germany",
              "Ireland"
            ]
          ]
        }
      },
      {
        "description": "Emerald Bulk Supplies enforces a strict minimum order quantity; any purchase order placed to vendor v3 must total at least 200 units (greedy low-price selections can become infeasible if they don't meet MOQ).",
        "_spec": {
          "fn": "min_order_qty",
          "args": [
            "v3",
            200
          ]
        }
      },
      {
        "description": "Overall processing/throughput capacity is capped at 1300 total units for the planning window (must cover all ordered quantities while leaving slack).",
        "_spec": {
          "fn": "capacity",
          "args": [
            1300
          ]
        }
      }
    ],
    "instruction": "Find the minimum-cost sourcing and manufacturing plan that fulfills all hospital orders. You may use on-hand stock, purchase from allowed vendors subject to lead times and MOQ rules, and manufacture items when a BOM exists (consuming components and time). The plan must satisfy every order\u2019s budget, meet all deadlines, maintain the minimum profit margin, obey the allowed-country vendor policy, and respect the overall capacity limit.",
    "feasible": true,
    "solution": {
      "domain": "order_fulfillment",
      "decisions": [
        {
          "order_id": "o1",
          "product_id": "p1",
          "quantity": 2,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o1",
          "product_id": "p1",
          "quantity": 23,
          "source": "purchase",
          "vendor_id": "v1"
        },
        {
          "order_id": "o1",
          "product_id": "p4",
          "quantity": 120,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o2",
          "product_id": "p2",
          "quantity": 40,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o2",
          "product_id": "p2",
          "quantity": 20,
          "source": "purchase",
          "vendor_id": "v1"
        },
        {
          "order_id": "o2",
          "product_id": "p5",
          "quantity": 80,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o3",
          "product_id": "p6",
          "quantity": 50,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o3",
          "product_id": "p9",
          "quantity": 70,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o4",
          "product_id": "p7",
          "quantity": 30,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o4",
          "product_id": "p8",
          "quantity": 40,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o5",
          "product_id": "p3",
          "quantity": 20,
          "source": "purchase",
          "vendor_id": "v5"
        },
        {
          "order_id": "o5",
          "product_id": "p4",
          "quantity": 90,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o6",
          "product_id": "p6",
          "quantity": 40,
          "source": "manufacture",
          "vendor_id": null
        },
        {
          "order_id": "o6",
          "product_id": "p3",
          "quantity": 150,
          "source": "purchase",
          "vendor_id": "v5"
        },
        {
          "order_id": "o6",
          "product_id": "p4",
          "quantity": 60,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o7",
          "product_id": "p9",
          "quantity": 120,
          "source": "purchase",
          "vendor_id": "v3"
        },
        {
          "order_id": "o7",
          "product_id": "p1",
          "quantity": 20,
          "source": "stock",
          "vendor_id": null
        },
        {
          "order_id": "o7",
          "product_id": "p2",
          "quantity": 100,
          "source": "purchase",
          "vendor_id": "v1"
        }
      ],
      "total_cost": 150951.0,
      "total_revenue": 259830.0
    }
  },
  {
    "id": "portfolio_55484d4d",
    "difficulty": "expert",
    "scenario": {
      "domain": "portfolio",
      "description": "A foundation grant-making endowment (the Ashlar Impact Foundation) is rebalancing its reserve pool to maximize expected return while maintaining prudent risk controls, liquidity for quarterly grant cycles, and mission-aligned exposure limits across sectors commonly used by endowments (public equities, fixed income, real assets, and impact-themed allocations).",
      "total_budget": 100000.0,
      "max_risk": 0.15,
      "min_return": 0.09,
      "min_diversification": 6,
      "max_sector_exposure": {
        "tech": 0.35,
        "finance": 0.25,
        "healthcare": 0.25,
        "energy": 0.2,
        "utilities": 0.25,
        "consumer": 0.25,
        "fixed_income": 0.6
      },
      "assets": [
        {
          "id": "a1",
          "name": "Covenant Cloud Infrastructure ETF",
          "expected_return": 0.14,
          "risk": 0.2,
          "min_allocation": 0.0,
          "max_allocation": 0.28,
          "sector": "tech",
          "correlation_group": "high_growth"
        },
        {
          "id": "a2",
          "name": "Granite AI Applications Fund",
          "expected_return": 0.16,
          "risk": 0.24,
          "min_allocation": 0.0,
          "max_allocation": 0.18,
          "sector": "tech",
          "correlation_group": "high_growth"
        },
        {
          "id": "a3",
          "name": "MedBridge Health Innovators",
          "expected_return": 0.11,
          "risk": 0.15,
          "min_allocation": 0.0,
          "max_allocation": 0.18,
          "sector": "healthcare",
          "correlation_group": "quality"
        },
        {
          "id": "a4",
          "name": "HarborLife Pharma Dividend Basket",
          "expected_return": 0.085,
          "risk": 0.1,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "healthcare",
          "correlation_group": "defensive"
        },
        {
          "id": "a5",
          "name": "Community Banknote Financials ETF",
          "expected_return": 0.105,
          "risk": 0.15,
          "min_allocation": 0.0,
          "max_allocation": 0.16,
          "sector": "finance",
          "correlation_group": "cyclical"
        },
        {
          "id": "a6",
          "name": "Civic Microfinance Notes (Impact Debt)",
          "expected_return": 0.08,
          "risk": 0.12,
          "min_allocation": 0.0,
          "max_allocation": 0.12,
          "sector": "finance",
          "correlation_group": "defensive"
        },
        {
          "id": "a7",
          "name": "SunWeave Renewable Yieldco",
          "expected_return": 0.12,
          "risk": 0.18,
          "min_allocation": 0.0,
          "max_allocation": 0.14,
          "sector": "energy",
          "correlation_group": "high_growth"
        },
        {
          "id": "a8",
          "name": "GridSure Regulated Utilities Trust",
          "expected_return": 0.06,
          "risk": 0.08,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "utilities",
          "correlation_group": "defensive"
        },
        {
          "id": "a9",
          "name": "Stewardship Investment-Grade Bond Fund",
          "expected_return": 0.055,
          "risk": 0.05,
          "min_allocation": 0.0,
          "max_allocation": 0.45,
          "sector": "fixed_income",
          "correlation_group": "defensive"
        },
        {
          "id": "a10",
          "name": "Ashlar Short-Term Treasury Ladder",
          "expected_return": 0.04,
          "risk": 0.02,
          "min_allocation": 0.0,
          "max_allocation": 0.3,
          "sector": "fixed_income",
          "correlation_group": "defensive"
        },
        {
          "id": "a11",
          "name": "ShelterCore Affordable Housing REIT",
          "expected_return": 0.095,
          "risk": 0.14,
          "min_allocation": 0.0,
          "max_allocation": 0.15,
          "sector": "consumer",
          "correlation_group": "real_assets"
        },
        {
          "id": "a12",
          "name": "HarvestCo Sustainable Agriculture Partners",
          "expected_return": 0.09,
          "risk": 0.16,
          "min_allocation": 0.0,
          "max_allocation": 0.12,
          "sector": "consumer",
          "correlation_group": "real_assets"
        },
        {
          "id": "a13",
          "name": "BlueMarble Global Equity (Core)",
          "expected_return": 0.1,
          "risk": 0.13,
          "min_allocation": 0.0,
          "max_allocation": 0.22,
          "sector": "consumer",
          "correlation_group": "quality"
        },
        {
          "id": "a14",
          "name": "Resilience Catastrophe Reinsurance Sleeve",
          "expected_return": 0.13,
          "risk": 0.22,
          "min_allocation": 0.0,
          "max_allocation": 0.1,
          "sector": "finance",
          "correlation_group": "alternatives"
        }
      ]
    },
    "constraints": [
      {
        "description": "AI Applications Fund and Cloud Infrastructure ETF are mutually exclusive due to overlapping vendor concentration risk in the foundation's mission-critical grantee data stack.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "a1",
              "a2"
            ]
          ]
        }
      },
      {
        "description": "If investing in SunWeave Renewable Yieldco, the endowment must also allocate at least $7,000 to GridSure Regulated Utilities Trust to hedge power-price and interconnection volatility.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "a7",
            "a8",
            7000
          ]
        }
      },
      {
        "description": "If investing in Resilience Catastrophe Reinsurance Sleeve, must also allocate at least $5,000 to Ashlar Short-Term Treasury Ladder for collateral/liquidity management.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "a14",
            "a10",
            5000
          ]
        }
      },
      {
        "description": "If investing in Civic Microfinance Notes (Impact Debt), minimum ticket size is $6,000.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a6",
            6000
          ]
        }
      },
      {
        "description": "If investing in ShelterCore Affordable Housing REIT, minimum allocation is $8,000 due to subscription/closing costs.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a11",
            8000
          ]
        }
      },
      {
        "description": "Maintain at least 25% in defensive correlation group to protect annual grant commitments during drawdowns.",
        "_spec": {
          "fn": "group_floor",
          "args": [
            "defensive",
            0.25
          ]
        }
      },
      {
        "description": "Limit high_growth correlation group to at most 35% to control volatility clustering across growth exposures.",
        "_spec": {
          "fn": "group_cap",
          "args": [
            "high_growth",
            0.35
          ]
        }
      },
      {
        "description": "At least 15% must be held in qualifying liquid instruments to cover quarterly grantmaking (Treasury Ladder + Short-Term IG Bonds).",
        "_spec": {
          "fn": "liquidity",
          "args": [
            [
              "a9",
              "a10"
            ],
            0.15
          ]
        }
      },
      {
        "description": "No more than $18,000 combined in Renewable Yieldco and Cat Reinsurance to prevent stacking tail-risk/illiquidity premia.",
        "_spec": {
          "fn": "combined_limit",
          "args": [
            [
              "a7",
              "a14"
            ],
            18000
          ]
        }
      },
      {
        "description": "Limit total allocation to fixed income instruments to 60% to avoid underfunding long-run real return objectives.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "fixed_income",
            0.6
          ]
        }
      },
      {
        "description": "Limit total allocation to technology sector to 35% to avoid headline/valuation risk concentration.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "tech",
            0.35
          ]
        }
      },
      {
        "description": "Limit total allocation to finance sector to 25% to reduce cyclicality and regulatory event risk.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "finance",
            0.25
          ]
        }
      },
      {
        "description": "Require at least 10% in healthcare to align with the foundation's health-equity grantmaking theme and stabilize earnings profile.",
        "_spec": {
          "fn": "sector_floor",
          "args": [
            "healthcare",
            0.1
          ]
        }
      },
      {
        "description": "Hold at least 6 different assets to ensure diversification across return drivers and improve resilience of annual payout.",
        "_spec": {
          "fn": "diversification",
          "args": [
            6
          ]
        }
      }
    ],
    "instruction": "Maximize the expected portfolio return (sum of allocations \u00d7 expected_return) while fully investing the $100,000 budget and satisfying: (i) portfolio risk \u2264 0.15 (treat portfolio risk as the weighted average of asset risk values), (ii) expected portfolio return \u2265 0.09, (iii) diversification of at least 6 assets, (iv) sector caps/floors, (v) correlation-group caps/floors, and (vi) all listed logical and allocation constraints.",
    "feasible": true,
    "solution": {
      "domain": "portfolio",
      "allocations": [
        {
          "asset_id": "a1",
          "amount": 28000.0,
          "fraction": 0.28
        },
        {
          "asset_id": "a3",
          "amount": 15000.0,
          "fraction": 0.15
        },
        {
          "asset_id": "a4",
          "amount": 10000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a5",
          "amount": 15000.0,
          "fraction": 0.15
        },
        {
          "asset_id": "a9",
          "amount": 10000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a10",
          "amount": 5000.0,
          "fraction": 0.05
        },
        {
          "asset_id": "a13",
          "amount": 7000.0,
          "fraction": 0.07
        },
        {
          "asset_id": "a14",
          "amount": 10000.0,
          "fraction": 0.1
        }
      ],
      "expected_return": 10745.0,
      "total_risk": 0.1481,
      "diversification": 8
    }
  },
  {
    "id": "portfolio_62d2e1e7",
    "difficulty": "expert",
    "scenario": {
      "domain": "portfolio",
      "description": "You manage the \"Marula Ridge Emerging Markets Growth Fund,\" mandated to pursue high growth across emerging and frontier markets while controlling drawdowns. The investor wants strong upside from EM innovation themes (fintech, digital payments, healthcare, renewables) but the fund\u2019s risk committee enforces sector concentration limits, a defensive buffer, and a liquidity sleeve to handle EM volatility and redemption risk.",
      "total_budget": 100000.0,
      "max_risk": 0.15,
      "min_return": 0.1,
      "min_diversification": 7,
      "max_sector_exposure": {
        "tech": 0.35,
        "finance": 0.3
      },
      "assets": [
        {
          "id": "a1",
          "name": "Marula Ridge EM Core Equity ETF (Broad EM Large/Mid)",
          "expected_return": 0.11,
          "risk": 0.15,
          "min_allocation": 0.0,
          "max_allocation": 0.45,
          "sector": "multi_sector",
          "correlation_group": "core_beta"
        },
        {
          "id": "a2",
          "name": "Sundial Asia ex-China Growth Basket (Semi/Internet Tilt)",
          "expected_return": 0.14,
          "risk": 0.22,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "tech",
          "correlation_group": "high_growth"
        },
        {
          "id": "a3",
          "name": "Kivu Frontier Fintech Venture Basket (Pre-IPO + Listed Mix)",
          "expected_return": 0.18,
          "risk": 0.3,
          "min_allocation": 0.0,
          "max_allocation": 0.15,
          "sector": "tech",
          "correlation_group": "high_growth"
        },
        {
          "id": "a4",
          "name": "Nile Consumer Staples Leaders (EM Defensive Basket)",
          "expected_return": 0.1,
          "risk": 0.12,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "consumer",
          "correlation_group": "defensive"
        },
        {
          "id": "a5",
          "name": "Andes Healthcare Innovators (Biopharma/Devices EM)",
          "expected_return": 0.12,
          "risk": 0.17,
          "min_allocation": 0.0,
          "max_allocation": 0.22,
          "sector": "healthcare",
          "correlation_group": "high_growth"
        },
        {
          "id": "a6",
          "name": "Caspian EM Local-Currency Bond ETF (Govt/Quasi-Sov)",
          "expected_return": 0.08,
          "risk": 0.07,
          "min_allocation": 0.0,
          "max_allocation": 0.5,
          "sector": "fixed_income",
          "correlation_group": "defensive"
        },
        {
          "id": "a7",
          "name": "Monsoon USD EM Sovereign Bills (0\u20131Y, Daily Liquidity)",
          "expected_return": 0.06,
          "risk": 0.03,
          "min_allocation": 0.0,
          "max_allocation": 0.5,
          "sector": "fixed_income",
          "correlation_group": "defensive"
        },
        {
          "id": "a8",
          "name": "Baltic Green Infrastructure Note (EM Grid/Ports, Amortizing)",
          "expected_return": 0.09,
          "risk": 0.1,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "infrastructure",
          "correlation_group": "real_assets"
        },
        {
          "id": "a9",
          "name": "Sahara Renewable YieldCo (EM Solar/Wind Cash Yield)",
          "expected_return": 0.13,
          "risk": 0.19,
          "min_allocation": 0.0,
          "max_allocation": 0.18,
          "sector": "energy",
          "correlation_group": "real_assets"
        },
        {
          "id": "a10",
          "name": "Mekong EM Bank Dividend Fund (High ROE Banks)",
          "expected_return": 0.11,
          "risk": 0.16,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "finance",
          "correlation_group": "cyclical"
        },
        {
          "id": "a11",
          "name": "Patagonia Copper & Lithium Miners (Commodity Beta)",
          "expected_return": 0.15,
          "risk": 0.25,
          "min_allocation": 0.0,
          "max_allocation": 0.12,
          "sector": "materials",
          "correlation_group": "cyclical"
        },
        {
          "id": "a12",
          "name": "Lotus EM Small-Cap Quality (Factor-Tilted Growth)",
          "expected_return": 0.13,
          "risk": 0.21,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "consumer",
          "correlation_group": "high_growth"
        },
        {
          "id": "a13",
          "name": "Gobi FX-Hedged Carry Strategy (EM FX Overlay, Weekly Liquidity)",
          "expected_return": 0.07,
          "risk": 0.05,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "alternatives",
          "correlation_group": "defensive"
        },
        {
          "id": "a14",
          "name": "Delta Mobile Payments ADR Basket (High Momentum EM)",
          "expected_return": 0.16,
          "risk": 0.28,
          "min_allocation": 0.0,
          "max_allocation": 0.15,
          "sector": "tech",
          "correlation_group": "high_growth"
        }
      ]
    },
    "constraints": [
      {
        "description": "Diversification rule: the fund must hold at least 7 distinct positions to reduce single-name and single-theme EM shock exposure.",
        "_spec": {
          "fn": "diversification",
          "args": [
            7
          ]
        }
      },
      {
        "description": "Technology concentration limit (risk committee): total Tech exposure cannot exceed 35% of NAV due to correlated drawdowns in EM tech selloffs.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "tech",
            0.35
          ]
        }
      },
      {
        "description": "Financials concentration limit: total Finance exposure cannot exceed 30% of NAV due to EM credit-cycle sensitivity.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "finance",
            0.3
          ]
        }
      },
      {
        "description": "High-growth factor crowding limit: no more than 35% of the portfolio may be in the high_growth correlation bucket to avoid momentum crash risk.",
        "_spec": {
          "fn": "group_cap",
          "args": [
            "high_growth",
            0.35
          ]
        }
      },
      {
        "description": "Downside buffer: keep at least 20% in defensive correlation assets (bills, bonds, staples, hedges) for EM volatility control.",
        "_spec": {
          "fn": "group_floor",
          "args": [
            "defensive",
            0.2
          ]
        }
      },
      {
        "description": "Health sleeve requirement: allocate at least 10% to Healthcare to reduce reliance on commodity and bank cycles while maintaining a growth engine.",
        "_spec": {
          "fn": "sector_floor",
          "args": [
            "healthcare",
            0.1
          ]
        }
      },
      {
        "description": "Liquidity sleeve: at least 15% must be held in liquid instruments eligible for weekly redemption coverage (Caspian Local Bond ETF, Monsoon Sovereign Bills, Gobi FX-Hedged Carry).",
        "_spec": {
          "fn": "liquidity",
          "args": [
            [
              "a6",
              "a7",
              "a13"
            ],
            0.15
          ]
        }
      },
      {
        "description": "Core mandate: maintain at least 12% in the Marula Ridge EM Core Equity ETF to anchor benchmark-relative tracking and prevent extreme factor drift.",
        "_spec": {
          "fn": "mandatory",
          "args": [
            "a1",
            0.12
          ]
        }
      },
      {
        "description": "Overlap restriction (greedy trap): Kivu Frontier Fintech and Delta Mobile Payments cannot both be held due to shared underlying issuers and doubled single-country payment-rail exposure.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "a3",
              "a14"
            ]
          ]
        }
      },
      {
        "description": "Minimum ticket size: Baltic Green Infrastructure Note requires a minimum $10,000 allocation (private placement lot size).",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a8",
            10000
          ]
        }
      },
      {
        "description": "Minimum ticket size: Kivu Frontier Fintech Venture Basket has a $6,000 minimum (subscription and admin costs).",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a3",
            6000
          ]
        }
      },
      {
        "description": "Minimum ticket size: Patagonia Copper & Lithium Miners position must be at least $8,000 to justify specialized custody and corporate-action handling.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a11",
            8000
          ]
        }
      },
      {
        "description": "Position limit: cap Kivu Frontier Fintech Venture Basket at $15,000 due to valuation opacity and liquidity gates.",
        "_spec": {
          "fn": "max_allocation",
          "args": [
            "a3",
            15000
          ]
        }
      },
      {
        "description": "Position limit: cap Patagonia Copper & Lithium Miners at $12,000 to prevent commodity beta from dominating total risk.",
        "_spec": {
          "fn": "max_allocation",
          "args": [
            "a11",
            12000
          ]
        }
      },
      {
        "description": "Position limit: cap Sahara Renewable YieldCo at $15,000 because EM renewable cashflows are sensitive to subsidy/regulatory changes.",
        "_spec": {
          "fn": "max_allocation",
          "args": [
            "a9",
            15000
          ]
        }
      },
      {
        "description": "Hidden interaction / hedge requirement: if investing in Kivu Frontier Fintech Venture Basket, also invest at least $7,000 in Gobi FX-Hedged Carry Strategy to mitigate frontier FX drawdowns that tend to coincide with fintech stress.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "a3",
            "a13",
            7000
          ]
        }
      },
      {
        "description": "Cascading effects rule: if investing in Patagonia Copper & Lithium Miners, also allocate at least $5,000 to Nile Consumer Staples Leaders as an internal hedge against commodity-cycle whipsaws.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "a11",
            "a4",
            5000
          ]
        }
      },
      {
        "description": "Crowding control: the combined allocation to the three most momentum-sensitive growth sleeves (Kivu Frontier Fintech, Delta Mobile Payments ADRs, Lotus EM Small-Cap Quality) may not exceed $25,000.",
        "_spec": {
          "fn": "combined_limit",
          "args": [
            [
              "a3",
              "a14",
              "a12"
            ],
            25000
          ]
        }
      }
    ],
    "instruction": "Maximize the expected portfolio return while respecting the total budget, maximum portfolio risk limit, minimum return requirement, diversification constraints, sector exposure limits, and all asset-specific and interaction constraints (exclusions, conditional hedges, minimum tickets, and combined limits).",
    "feasible": true,
    "solution": {
      "domain": "portfolio",
      "allocations": [
        {
          "asset_id": "a1",
          "amount": 12000.0,
          "fraction": 0.12
        },
        {
          "asset_id": "a3",
          "amount": 15000.0,
          "fraction": 0.15
        },
        {
          "asset_id": "a4",
          "amount": 18600.0,
          "fraction": 0.186
        },
        {
          "asset_id": "a5",
          "amount": 10000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a6",
          "amount": 22400.0,
          "fraction": 0.224
        },
        {
          "asset_id": "a9",
          "amount": 15000.0,
          "fraction": 0.15
        },
        {
          "asset_id": "a13",
          "amount": 7000.0,
          "fraction": 0.07
        }
      ],
      "expected_return": 11312.0,
      "total_risk": 0.15,
      "diversification": 7
    }
  },
  {
    "id": "portfolio_5d4e7838",
    "difficulty": "expert",
    "scenario": {
      "domain": "portfolio",
      "description": "A family office is constructing a $100,000 REIT sleeve focused on U.S. listed REITs plus one private CRE debt vehicle. The investment committee wants high total return while controlling portfolio risk, limiting exposure to rate-sensitive mortgage REITs, and enforcing diversification across property types (data centers, industrial, residential, healthcare, retail, office, hospitality).",
      "total_budget": 100000.0,
      "max_risk": 0.15,
      "min_return": 0.1,
      "min_diversification": 7,
      "max_sector_exposure": {
        "tech": 0.35,
        "finance": 0.25
      },
      "assets": [
        {
          "id": "a1",
          "name": "GraniteSwitch Data Hubs REIT (Tier III/IV Data Centers)",
          "expected_return": 0.135,
          "risk": 0.22,
          "min_allocation": 0.0,
          "max_allocation": 0.3,
          "sector": "tech",
          "correlation_group": "high_growth"
        },
        {
          "id": "a2",
          "name": "SignalHarbor Towers REIT (U.S. Macro Cell Towers)",
          "expected_return": 0.128,
          "risk": 0.2,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "tech",
          "correlation_group": "high_growth"
        },
        {
          "id": "a3",
          "name": "Crossdock Logistics Parks REIT (Infill Warehousing)",
          "expected_return": 0.11,
          "risk": 0.16,
          "min_allocation": 0.0,
          "max_allocation": 0.35,
          "sector": "industrial",
          "correlation_group": "cyclical"
        },
        {
          "id": "a4",
          "name": "Sunbelt Courtyard Apartments REIT (Class B Multifamily)",
          "expected_return": 0.102,
          "risk": 0.15,
          "min_allocation": 0.0,
          "max_allocation": 0.3,
          "sector": "residential",
          "correlation_group": "core"
        },
        {
          "id": "a5",
          "name": "Meridian Medical Offices REIT (MOBs & Outpatient)",
          "expected_return": 0.09,
          "risk": 0.11,
          "min_allocation": 0.0,
          "max_allocation": 0.3,
          "sector": "healthcare",
          "correlation_group": "defensive"
        },
        {
          "id": "a6",
          "name": "VaultBox Self-Storage REIT (Suburban Storage)",
          "expected_return": 0.095,
          "risk": 0.12,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "specialty",
          "correlation_group": "defensive"
        },
        {
          "id": "a7",
          "name": "T-Bill Ladder Liquidity Trust (Cash Proxy for Rebalancing)",
          "expected_return": 0.06,
          "risk": 0.03,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "cash",
          "correlation_group": "defensive"
        },
        {
          "id": "a8",
          "name": "RepoLift Agency Mortgage REIT (High-Dividend mREIT)",
          "expected_return": 0.145,
          "risk": 0.3,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "finance",
          "correlation_group": "rate_sensitive"
        },
        {
          "id": "a9",
          "name": "BridgeStone Credit Mortgage REIT (Credit mREIT)",
          "expected_return": 0.133,
          "risk": 0.27,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "finance",
          "correlation_group": "rate_sensitive"
        },
        {
          "id": "a10",
          "name": "LongLease Essential Net-Lease REIT (IG Tenants, Long WALT)",
          "expected_return": 0.085,
          "risk": 0.09,
          "min_allocation": 0.0,
          "max_allocation": 0.3,
          "sector": "retail",
          "correlation_group": "defensive"
        },
        {
          "id": "a11",
          "name": "ArcticRail Cold-Storage REIT (Temperature-Controlled Logistics)",
          "expected_return": 0.12,
          "risk": 0.17,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "industrial",
          "correlation_group": "high_growth"
        },
        {
          "id": "a12",
          "name": "HarborPoint Private CRE Debt Fund (Senior Bridge Loans)",
          "expected_return": 0.098,
          "risk": 0.08,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "finance",
          "correlation_group": "defensive"
        },
        {
          "id": "a13",
          "name": "Seaside Convention Hotels REIT (Urban Group & Convention)",
          "expected_return": 0.122,
          "risk": 0.21,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "hospitality",
          "correlation_group": "cyclical"
        },
        {
          "id": "a14",
          "name": "MainStreet Neighborhood Retail REIT (Grocery-Anchored Centers)",
          "expected_return": 0.088,
          "risk": 0.14,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "retail",
          "correlation_group": "core"
        },
        {
          "id": "a15",
          "name": "Skyline Trophy Office REIT (CBD Office, Re-Leasing Risk)",
          "expected_return": 0.115,
          "risk": 0.23,
          "min_allocation": 0.0,
          "max_allocation": 0.15,
          "sector": "office",
          "correlation_group": "cyclical"
        }
      ]
    },
    "constraints": [
      {
        "description": "Diversification mandate: hold at least 7 different REIT/real-estate vehicles to avoid single-theme concentration.",
        "_spec": {
          "fn": "diversification",
          "args": [
            7
          ]
        }
      },
      {
        "description": "Digital infrastructure concentration limit: total allocation to tech REITs (data centers + towers) must not exceed 35% of the portfolio.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "tech",
            0.35
          ]
        }
      },
      {
        "description": "Rate-sensitive exposure limit: total allocation to finance sector (mREITs + private CRE debt) must not exceed 25% of the portfolio.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "finance",
            0.25
          ]
        }
      },
      {
        "description": "Office risk control: office REIT exposure must not exceed 12% due to refinancing and leasing uncertainty.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "office",
            0.12
          ]
        }
      },
      {
        "description": "Hospitality drawdown control: hotel REIT exposure must not exceed 12% because demand shocks can spike volatility.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "hospitality",
            0.12
          ]
        }
      },
      {
        "description": "Healthcare ballast requirement: allocate at least 10% to healthcare REITs (medical office/outpatient) for defensiveness.",
        "_spec": {
          "fn": "sector_floor",
          "args": [
            "healthcare",
            0.1
          ]
        }
      },
      {
        "description": "High-growth correlation cap: data centers, towers, and cold-storage logistics together tend to sell off simultaneously; limit high_growth group to 30%.",
        "_spec": {
          "fn": "group_cap",
          "args": [
            "high_growth",
            0.3
          ]
        }
      },
      {
        "description": "Downside protection: maintain at least 25% in defensive group assets (e.g., medical offices, self-storage, net-lease, T-bills, private senior debt).",
        "_spec": {
          "fn": "group_floor",
          "args": [
            "defensive",
            0.25
          ]
        }
      },
      {
        "description": "Liquidity buffer: keep at least 10% in highly liquid/low-spread instruments to allow rapid rebalancing during REIT drawdowns.",
        "_spec": {
          "fn": "liquidity",
          "args": [
            [
              "a7",
              "a10"
            ],
            0.1
          ]
        }
      },
      {
        "description": "Repo counterparty overlap: cannot hold both RepoLift Agency Mortgage REIT and BridgeStone Credit Mortgage REIT at the same time.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "a8",
              "a9"
            ]
          ]
        }
      },
      {
        "description": "Private fund subscription minimum: if allocating to HarborPoint Private CRE Debt Fund, the minimum ticket size is $15,000.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a12",
            15000
          ]
        }
      },
      {
        "description": "Hospitality hedging policy: if investing in Seaside Convention Hotels REIT, must also invest at least $5,000 in LongLease Essential Net-Lease REIT as a stabilizer.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "a13",
            "a10",
            5000
          ]
        }
      },
      {
        "description": "Concentration guardrail: combined allocation to the three most theme-driven growth names (data centers, towers, cold-storage) cannot exceed $30,000.",
        "_spec": {
          "fn": "combined_limit",
          "args": [
            [
              "a1",
              "a2",
              "a11"
            ],
            30000
          ]
        }
      },
      {
        "description": "mREIT sizing limit: cap RepoLift Agency Mortgage REIT at $15,000 because leverage can amplify rate shocks.",
        "_spec": {
          "fn": "max_allocation",
          "args": [
            "a8",
            15000
          ]
        }
      },
      {
        "description": "mREIT sizing limit: cap BridgeStone Credit Mortgage REIT at $15,000 due to spread and credit-cycle sensitivity.",
        "_spec": {
          "fn": "max_allocation",
          "args": [
            "a9",
            15000
          ]
        }
      },
      {
        "description": "Treasury buffer policy: allocate at least 5% to the T-Bill Ladder Liquidity Trust to ensure immediate liquidity for margin calls or opportunistic adds.",
        "_spec": {
          "fn": "mandatory",
          "args": [
            "a7",
            0.05
          ]
        }
      },
      {
        "description": "Office REIT lot-size constraint (decoy interaction with office sector cap): if investing in Skyline Trophy Office REIT, minimum position size is $12,000 to justify underwriting costs.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a15",
            12000
          ]
        }
      }
    ],
    "instruction": "Maximize the expected portfolio return while respecting the total budget, maximum portfolio risk limit, minimum expected return requirement, diversification requirement, sector exposure limits (including tech and finance caps), liquidity requirement, and all conditional/exclusion/minimum-ticket constraints.",
    "feasible": true,
    "solution": {
      "domain": "portfolio",
      "allocations": [
        {
          "asset_id": "a1",
          "amount": 30000.0,
          "fraction": 0.3
        },
        {
          "asset_id": "a3",
          "amount": 15400.0,
          "fraction": 0.154
        },
        {
          "asset_id": "a5",
          "amount": 10000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a7",
          "amount": 5000.0,
          "fraction": 0.05
        },
        {
          "asset_id": "a8",
          "amount": 1000.0,
          "fraction": 0.01
        },
        {
          "asset_id": "a10",
          "amount": 5000.0,
          "fraction": 0.05
        },
        {
          "asset_id": "a12",
          "amount": 24000.0,
          "fraction": 0.24
        },
        {
          "asset_id": "a13",
          "amount": 9600.0,
          "fraction": 0.096
        }
      ],
      "expected_return": 11037.2,
      "total_risk": 0.15,
      "diversification": 8
    }
  },
  {
    "id": "portfolio_0015125f",
    "difficulty": "expert",
    "scenario": {
      "domain": "portfolio",
      "description": "HarborSure Mutual (a U.S. P&C insurer) is investing its statutory loss-reserve and unearned premium reserve portfolio. The CIO must maximize expected return while staying within board-approved risk limits, maintaining daily liquidity for claim spikes after catastrophes, and complying with internal concentration/sector rules and hedging policy addenda typical for insurer reserve assets.",
      "total_budget": 100000.0,
      "max_risk": 0.15,
      "min_return": 0.08,
      "min_diversification": 6,
      "max_sector_exposure": {
        "equities": 0.2,
        "credit": 0.35,
        "insurance_linked": 0.15,
        "structured": 0.2,
        "municipals": 0.25,
        "private_credit": 0.15,
        "real_assets": 0.1,
        "cash": 0.25
      },
      "assets": [
        {
          "id": "a1",
          "name": "HarborSure NAIC-1 T-Bill Ladder (0\u201312M)",
          "expected_return": 0.045,
          "risk": 0.03,
          "min_allocation": 0.0,
          "max_allocation": 0.4,
          "sector": "government",
          "correlation_group": "defensive"
        },
        {
          "id": "a2",
          "name": "CoastalCurve U.S. Treasury 3\u20137Y (ALM Anchor)",
          "expected_return": 0.05,
          "risk": 0.04,
          "min_allocation": 0.0,
          "max_allocation": 0.35,
          "sector": "government",
          "correlation_group": "rate_sensitive"
        },
        {
          "id": "a3",
          "name": "SunHarbor Agency MBS Pass-Through Pool",
          "expected_return": 0.062,
          "risk": 0.07,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "structured",
          "correlation_group": "rate_sensitive"
        },
        {
          "id": "a4",
          "name": "GraniteGrade Investment-Grade Corporate Bond ETF",
          "expected_return": 0.068,
          "risk": 0.08,
          "min_allocation": 0.0,
          "max_allocation": 0.3,
          "sector": "credit",
          "correlation_group": "credit_beta"
        },
        {
          "id": "a5",
          "name": "PineStreet Short IG Note Sleeve (1\u20133Y)",
          "expected_return": 0.06,
          "risk": 0.05,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "credit",
          "correlation_group": "defensive"
        },
        {
          "id": "a6",
          "name": "ClaimsShield Municipal Ladder (AA/AAA, Essential-Service)",
          "expected_return": 0.058,
          "risk": 0.05,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "municipals",
          "correlation_group": "defensive"
        },
        {
          "id": "a7",
          "name": "MetroTax Taxable Municipal Total Return Fund",
          "expected_return": 0.064,
          "risk": 0.06,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "municipals",
          "correlation_group": "credit_beta"
        },
        {
          "id": "a8",
          "name": "DividendGuard Low-Vol Equity Sleeve (Insurer-Approved)",
          "expected_return": 0.085,
          "risk": 0.13,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "equities",
          "correlation_group": "high_growth"
        },
        {
          "id": "a9",
          "name": "GridStone Listed Infrastructure (Regulated Utilities/Ports)",
          "expected_return": 0.08,
          "risk": 0.14,
          "min_allocation": 0.0,
          "max_allocation": 0.1,
          "sector": "real_assets",
          "correlation_group": "inflation_hedge"
        },
        {
          "id": "a10",
          "name": "InflationLock U.S. TIPS 1\u201310Y",
          "expected_return": 0.06,
          "risk": 0.05,
          "min_allocation": 0.0,
          "max_allocation": 0.35,
          "sector": "government",
          "correlation_group": "inflation_hedge"
        },
        {
          "id": "a11",
          "name": "TempestDiversifier Catastrophe Bond UCITS (Broad Peril)",
          "expected_return": 0.1,
          "risk": 0.11,
          "min_allocation": 0.0,
          "max_allocation": 0.15,
          "sector": "insurance_linked",
          "correlation_group": "diversifier"
        },
        {
          "id": "a12",
          "name": "QuakeCap Tranche Z (Side-Pocket ILS Note)",
          "expected_return": 0.13,
          "risk": 0.24,
          "min_allocation": 0.0,
          "max_allocation": 0.15,
          "sector": "insurance_linked",
          "correlation_group": "tail_risk"
        },
        {
          "id": "a13",
          "name": "HarborPoint Senior Secured Private Credit Note (Quarterly Liquidity)",
          "expected_return": 0.115,
          "risk": 0.18,
          "min_allocation": 0.0,
          "max_allocation": 0.15,
          "sector": "private_credit",
          "correlation_group": "credit_beta"
        },
        {
          "id": "a14",
          "name": "Overnight Claims Repo Sweep (Tri-Party)",
          "expected_return": 0.042,
          "risk": 0.01,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "cash",
          "correlation_group": "liquid"
        }
      ]
    },
    "constraints": [
      {
        "description": "Hold at least 6 different assets to avoid reserve concentration and rating-agency scrutiny.",
        "_spec": {
          "fn": "diversification",
          "args": [
            6
          ]
        }
      },
      {
        "description": "Maintain at least 25% in government securities to satisfy statutory liquidity and ALM policy.",
        "_spec": {
          "fn": "sector_floor",
          "args": [
            "government",
            0.25
          ]
        }
      },
      {
        "description": "Equity sleeve cannot exceed 20% of reserves due to RBC volatility charges.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "equities",
            0.2
          ]
        }
      },
      {
        "description": "Total insurance-linked securities (ILS) exposure cannot exceed 15% due to tail-event aggregation policy.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "insurance_linked",
            0.15
          ]
        }
      },
      {
        "description": "Private credit cannot exceed 15% due to internal liquidity stress testing assumptions.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "private_credit",
            0.15
          ]
        }
      },
      {
        "description": "At least 25% must be in daily-liquid instruments (Treasuries, TIPS, IG liquid sleeves, and repo sweep) to fund claim spikes.",
        "_spec": {
          "fn": "liquidity",
          "args": [
            [
              "a1",
              "a2",
              "a4",
              "a5",
              "a10",
              "a14"
            ],
            0.25
          ]
        }
      },
      {
        "description": "Minimum operating cash buffer: allocate at least 5% to the T-Bill ladder (claims-paying liquidity policy).",
        "_spec": {
          "fn": "mandatory",
          "args": [
            "a1",
            0.05
          ]
        }
      },
      {
        "description": "Do not hold both municipal strategies simultaneously: the ladder (a6) and the total-return muni fund (a7) are treated as overlapping exposure by the investment committee.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "a6",
              "a7"
            ]
          ]
        }
      },
      {
        "description": "If investing in QuakeCap Tranche Z (a12), the side-pocket subscription requires a minimum $15,000 ticket size.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a12",
            15000
          ]
        }
      },
      {
        "description": "If investing in QuakeCap Tranche Z (a12), HarborSure must also place at least $5,000 into the overnight repo sweep (a14) as collateral/settlement cash.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "a12",
            "a14",
            5000
          ]
        }
      },
      {
        "description": "If investing in HarborPoint private credit (a13), the note requires a minimum $12,000 subscription.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a13",
            12000
          ]
        }
      },
      {
        "description": "If investing in HarborPoint private credit (a13), allocate at least $5,000 to the short IG note sleeve (a5) as a board-mandated liquidity offset.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "a13",
            "a5",
            5000
          ]
        }
      },
      {
        "description": "If investing in the low-vol equity sleeve (a8), allocate at least $5,000 to TIPS (a10) to reduce inflation-driven claim severity mismatch in stress scenarios.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "a8",
            "a10",
            5000
          ]
        }
      },
      {
        "description": "Combined allocation to corporate credit risk buckets (IG corporates a4 + short IG a5 + private credit a13) cannot exceed $35,000 under the Credit Risk Committee limit.",
        "_spec": {
          "fn": "combined_limit",
          "args": [
            [
              "a4",
              "a5",
              "a13"
            ],
            35000
          ]
        }
      },
      {
        "description": "Limit tail-risk concentration: assets in the tail_risk correlation group cannot exceed 15% of the portfolio (designed to bind QuakeCap Tranche Z).",
        "_spec": {
          "fn": "group_cap",
          "args": [
            "tail_risk",
            0.15
          ]
        }
      },
      {
        "description": "Maintain at least 25% in defensive correlation-group assets (stabilizes statutory surplus under mild stress).",
        "_spec": {
          "fn": "group_floor",
          "args": [
            "defensive",
            0.25
          ]
        }
      }
    ],
    "instruction": "Maximize the expected portfolio return while respecting the total budget, maximum portfolio risk limit, minimum return requirement, diversification minimum, sector exposure limits, liquidity requirement, and all asset-specific exclusion/conditional/minimum and combined allocation constraints.",
    "feasible": true,
    "solution": {
      "domain": "portfolio",
      "allocations": [
        {
          "asset_id": "a1",
          "amount": 15000.0,
          "fraction": 0.15
        },
        {
          "asset_id": "a5",
          "amount": 10000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a8",
          "amount": 20000.0,
          "fraction": 0.2
        },
        {
          "asset_id": "a9",
          "amount": 10000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a10",
          "amount": 10000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a12",
          "amount": 15000.0,
          "fraction": 0.15
        },
        {
          "asset_id": "a13",
          "amount": 15000.0,
          "fraction": 0.15
        },
        {
          "asset_id": "a14",
          "amount": 5000.0,
          "fraction": 0.05
        }
      ],
      "expected_return": 8260.0,
      "total_risk": 0.118,
      "diversification": 8
    }
  },
  {
    "id": "portfolio_5923674f",
    "difficulty": "expert",
    "scenario": {
      "domain": "portfolio",
      "description": "Kestrel Ridge Capital (a multi-strategy hedge fund) is rebalancing its internal risk sleeves ahead of year-end. The PM must allocate a $100mm-notional-equivalent risk budget (modeled here as $100,000) across liquid strategy sleeves while meeting investor diversification and liquidity guidelines, sector concentration limits, and house risk controls. Objective: maximize expected return subject to portfolio risk, sector and factor crowding constraints, and several prime-broker/margin-driven linking rules between sleeves.",
      "total_budget": 100000.0,
      "max_risk": 0.11,
      "min_return": 0.1,
      "min_diversification": 7,
      "max_sector_exposure": {
        "tech": 0.35,
        "finance": 0.3,
        "healthcare": 0.25,
        "energy": 0.25,
        "rates": 0.3
      },
      "assets": [
        {
          "id": "a1",
          "name": "Apex SignalTech Equity L/S Sleeve",
          "expected_return": 0.14,
          "risk": 0.18,
          "min_allocation": 0.0,
          "max_allocation": 0.22,
          "sector": "tech",
          "correlation_group": "high_growth"
        },
        {
          "id": "a2",
          "name": "Orion MegaCap AI Core Long",
          "expected_return": 0.16,
          "risk": 0.24,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "tech",
          "correlation_group": "high_growth"
        },
        {
          "id": "a3",
          "name": "Nebula Semis Momentum Overlay",
          "expected_return": 0.18,
          "risk": 0.28,
          "min_allocation": 0.0,
          "max_allocation": 0.12,
          "sector": "tech",
          "correlation_group": "high_growth"
        },
        {
          "id": "a4",
          "name": "Driftwood Energy Trend (Futures)",
          "expected_return": 0.12,
          "risk": 0.13,
          "min_allocation": 0.0,
          "max_allocation": 0.18,
          "sector": "energy",
          "correlation_group": "cyclical"
        },
        {
          "id": "a5",
          "name": "VegaHarvest Short-Vol Carry Book",
          "expected_return": 0.13,
          "risk": 0.16,
          "min_allocation": 0.0,
          "max_allocation": 0.15,
          "sector": "finance",
          "correlation_group": "alt_risk_premia"
        },
        {
          "id": "a6",
          "name": "HarborPoint Structured Credit Carry",
          "expected_return": 0.115,
          "risk": 0.14,
          "min_allocation": 0.0,
          "max_allocation": 0.15,
          "sector": "finance",
          "correlation_group": "credit"
        },
        {
          "id": "a7",
          "name": "PulseCare Healthcare Equity L/S",
          "expected_return": 0.1,
          "risk": 0.09,
          "min_allocation": 0.0,
          "max_allocation": 0.18,
          "sector": "healthcare",
          "correlation_group": "defensive"
        },
        {
          "id": "a8",
          "name": "Caduceus Biotech Event-Driven Basket",
          "expected_return": 0.145,
          "risk": 0.22,
          "min_allocation": 0.0,
          "max_allocation": 0.18,
          "sector": "healthcare",
          "correlation_group": "high_growth"
        },
        {
          "id": "a9",
          "name": "Clearwater Merger Arbitrage Book",
          "expected_return": 0.075,
          "risk": 0.05,
          "min_allocation": 0.0,
          "max_allocation": 0.18,
          "sector": "industrials",
          "correlation_group": "defensive"
        },
        {
          "id": "a10",
          "name": "IonTrail Global Macro (Rates/FX)",
          "expected_return": 0.11,
          "risk": 0.12,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "macro",
          "correlation_group": "diversifier"
        },
        {
          "id": "a11",
          "name": "Stonegate IG Credit Relative Value",
          "expected_return": 0.085,
          "risk": 0.06,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "finance",
          "correlation_group": "defensive"
        },
        {
          "id": "a12",
          "name": "BlueRidge T-Bill & Repo RV Sleeve",
          "expected_return": 0.055,
          "risk": 0.02,
          "min_allocation": 0.0,
          "max_allocation": 0.35,
          "sector": "rates",
          "correlation_group": "defensive"
        },
        {
          "id": "a13",
          "name": "Saffron Commodity Carry (Ag/Metals)",
          "expected_return": 0.11,
          "risk": 0.15,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "materials",
          "correlation_group": "diversifier"
        },
        {
          "id": "a14",
          "name": "Gridline Regulated Utilities & Infra Long",
          "expected_return": 0.08,
          "risk": 0.07,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "utilities",
          "correlation_group": "defensive"
        },
        {
          "id": "a15",
          "name": "Cobalt Core Real Estate Debt RV",
          "expected_return": 0.095,
          "risk": 0.1,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "real_estate",
          "correlation_group": "income_defensive"
        }
      ]
    },
    "constraints": [
      {
        "description": "Diversification mandate from the fund\u2019s risk committee: hold at least 7 distinct sleeves (to reduce single-strategy drawdown risk).",
        "_spec": {
          "fn": "diversification",
          "args": [
            7
          ]
        }
      },
      {
        "description": "Prime broker concentration limit: total exposure to tech equity sleeves must be <= 35% of budget (to avoid factor crowding in the same margin bucket).",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "tech",
            0.35
          ]
        }
      },
      {
        "description": "Investor guideline: total exposure to finance/credit sleeves must be <= 30% of budget.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "finance",
            0.3
          ]
        }
      },
      {
        "description": "Healthcare allocation floor for defensiveness: invest at least 8% of budget in healthcare sleeves overall.",
        "_spec": {
          "fn": "sector_floor",
          "args": [
            "healthcare",
            0.08
          ]
        }
      },
      {
        "description": "Downside protection rule: maintain at least 20% of the budget in 'defensive' correlation-group sleeves.",
        "_spec": {
          "fn": "group_floor",
          "args": [
            "defensive",
            0.2
          ]
        }
      },
      {
        "description": "Crowded growth-factor control: cap total allocation to 'high_growth' correlation-group sleeves at 30%.",
        "_spec": {
          "fn": "group_cap",
          "args": [
            "high_growth",
            0.3
          ]
        }
      },
      {
        "description": "Liquidity buffer requirement (monthly dealing): at least 15% must be in the most liquid sleeves (T-bill/repo RV, IG credit RV, or merger arb).",
        "_spec": {
          "fn": "liquidity",
          "args": [
            [
              "a12",
              "a11",
              "a9"
            ],
            0.15
          ]
        }
      },
      {
        "description": "Overlapping factor model risk: cannot hold both Apex SignalTech Equity L/S and Orion MegaCap AI Core Long at the same time.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "a1",
              "a2"
            ]
          ]
        }
      },
      {
        "description": "Single-name/industry concentration: cannot hold both Orion MegaCap AI Core Long and Nebula Semis Momentum Overlay (too much semiconductor beta in stress).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "a2",
              "a3"
            ]
          ]
        }
      },
      {
        "description": "Operational minimum: if allocating to VegaHarvest Short-Vol Carry, commit at least $8,000 to clear internal margin efficiency thresholds.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a5",
            8000
          ]
        }
      },
      {
        "description": "Deal size minimum: if allocating to HarborPoint Structured Credit Carry, commit at least $5,000 to access the dealer balance-sheet lines.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a6",
            5000
          ]
        }
      },
      {
        "description": "House hedge rule: if investing in HarborPoint Structured Credit Carry, also allocate at least $10,000 to BlueRidge T-Bill & Repo RV as a liquidity/rates hedge.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "a6",
            "a12",
            10000
          ]
        }
      },
      {
        "description": "Core liquidity anchor: always allocate at least 10% of total budget to BlueRidge T-Bill & Repo RV sleeve.",
        "_spec": {
          "fn": "mandatory",
          "args": [
            "a12",
            0.1
          ]
        }
      },
      {
        "description": "Tail clustering control: the combined allocation to Orion MegaCap AI, VegaHarvest Short-Vol, Caduceus Biotech Event-Driven, and Saffron Commodity Carry must not exceed $35,000.",
        "_spec": {
          "fn": "combined_limit",
          "args": [
            [
              "a2",
              "a5",
              "a8",
              "a13"
            ],
            35000
          ]
        }
      }
    ],
    "instruction": "Maximize the expected portfolio return while respecting the total budget, maximum portfolio risk limit, minimum return requirement, diversification constraints, sector exposure limits, and all listed asset/sector/group/conditional constraints.",
    "feasible": true,
    "solution": {
      "domain": "portfolio",
      "allocations": [
        {
          "asset_id": "a1",
          "amount": 22000.0,
          "fraction": 0.22
        },
        {
          "asset_id": "a4",
          "amount": 18000.0,
          "fraction": 0.18
        },
        {
          "asset_id": "a5",
          "amount": 8400.0,
          "fraction": 0.084
        },
        {
          "asset_id": "a7",
          "amount": 18000.0,
          "fraction": 0.18
        },
        {
          "asset_id": "a10",
          "amount": 2000.0,
          "fraction": 0.02
        },
        {
          "asset_id": "a11",
          "amount": 21600.0,
          "fraction": 0.216
        },
        {
          "asset_id": "a12",
          "amount": 10000.0,
          "fraction": 0.1
        }
      ],
      "expected_return": 10738.0,
      "total_risk": 0.11,
      "diversification": 7
    }
  },
  {
    "id": "portfolio_a2b19a3d",
    "difficulty": "expert",
    "scenario": {
      "domain": "portfolio",
      "description": "Aurora Impact Partners is building an ESG-focused sustainable investment sleeve for its flagship fund. The mandate prioritizes climate transition and real-economy impact while maintaining liquidity, avoiding over-concentration in any one sector, and keeping overall portfolio risk controlled. The investor seeks to maximize expected return while meeting minimum performance and diversification rules typical for an institutional ESG allocation committee.",
      "total_budget": 100000.0,
      "max_risk": 0.15,
      "min_return": 0.08,
      "min_diversification": 5,
      "max_sector_exposure": {
        "tech": 0.4,
        "finance": 0.3
      },
      "assets": [
        {
          "id": "a1",
          "name": "VerdantState Sovereign Green Bond ETF",
          "expected_return": 0.06,
          "risk": 0.05,
          "min_allocation": 0.0,
          "max_allocation": 0.3,
          "sector": "finance",
          "correlation_group": "defensive"
        },
        {
          "id": "a2",
          "name": "BlueRiver Investment-Grade Green Bond Fund",
          "expected_return": 0.065,
          "risk": 0.06,
          "min_allocation": 0.0,
          "max_allocation": 0.3,
          "sector": "finance",
          "correlation_group": "defensive"
        },
        {
          "id": "a3",
          "name": "SunGrid Renewables YieldCo (Wind+Solar PPA Basket)",
          "expected_return": 0.11,
          "risk": 0.17,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "clean_energy",
          "correlation_group": "high_growth"
        },
        {
          "id": "a4",
          "name": "GridFlex Regulated Utility Transition Co.",
          "expected_return": 0.075,
          "risk": 0.08,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "utilities",
          "correlation_group": "defensive"
        },
        {
          "id": "a5",
          "name": "AquaYield Water Infrastructure REIT",
          "expected_return": 0.095,
          "risk": 0.12,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "real_assets",
          "correlation_group": "inflation_hedge"
        },
        {
          "id": "a6",
          "name": "ForestLoop Sustainable Timber & Carbon Forestry Trust",
          "expected_return": 0.1,
          "risk": 0.14,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "materials",
          "correlation_group": "inflation_hedge"
        },
        {
          "id": "a7",
          "name": "ImpactBridge Community Microfinance Notes",
          "expected_return": 0.085,
          "risk": 0.1,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "finance",
          "correlation_group": "diversifier"
        },
        {
          "id": "a8",
          "name": "TerraMetric Climate Analytics SaaS",
          "expected_return": 0.14,
          "risk": 0.22,
          "min_allocation": 0.0,
          "max_allocation": 0.15,
          "sector": "tech",
          "correlation_group": "high_growth"
        },
        {
          "id": "a9",
          "name": "CircularWorks Recycling & Resource Recovery Equity",
          "expected_return": 0.12,
          "risk": 0.18,
          "min_allocation": 0.0,
          "max_allocation": 0.15,
          "sector": "industrials",
          "correlation_group": "high_growth"
        },
        {
          "id": "a10",
          "name": "EcoStaple Sustainable Consumer Brands ETF",
          "expected_return": 0.1,
          "risk": 0.13,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "consumer",
          "correlation_group": "diversifier"
        },
        {
          "id": "a11",
          "name": "GreenCash ESG Money Market Fund",
          "expected_return": 0.04,
          "risk": 0.02,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "finance",
          "correlation_group": "defensive"
        },
        {
          "id": "a12",
          "name": "CareNova Sustainable Healthcare Innovators ETF",
          "expected_return": 0.09,
          "risk": 0.11,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "healthcare",
          "correlation_group": "diversifier"
        },
        {
          "id": "a13",
          "name": "SkySink Direct Air Capture Venture SPV (Illiquid)",
          "expected_return": 0.16,
          "risk": 0.3,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "clean_energy",
          "correlation_group": "impact_private"
        },
        {
          "id": "a14",
          "name": "CarbonRail Verified Carbon Credit Arbitrage Note",
          "expected_return": 0.13,
          "risk": 0.19,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "finance",
          "correlation_group": "high_growth"
        }
      ]
    },
    "constraints": [
      {
        "description": "Hold at least 8 different assets to satisfy the ESG committee\u2019s concentration and manager-risk guidelines (forces solutions beyond a small set of obvious winners).",
        "_spec": {
          "fn": "diversification",
          "args": [
            8
          ]
        }
      },
      {
        "description": "At most one core green-bond sleeve can be used due to overlapping index providers and duplicated sovereign exposure (choosing the 'slightly better' bond fund blocks an otherwise convenient liquidity anchor).",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "a1",
              "a2"
            ]
          ]
        }
      },
      {
        "description": "Maintain at least 18% in highly liquid instruments to meet quarterly redemptions and rebalancing needs (qualifying sleeves are limited to the bond ETFs/fund and the money market fund).",
        "_spec": {
          "fn": "liquidity",
          "args": [
            [
              "a1",
              "a2",
              "a11"
            ],
            0.18
          ]
        }
      },
      {
        "description": "Minimum 25% allocation to defensive exposures (capital preservation mandate for an ESG fund that must remain resilient during climate-policy shocks).",
        "_spec": {
          "fn": "group_floor",
          "args": [
            "defensive",
            0.25
          ]
        }
      },
      {
        "description": "Minimum 15% allocation to inflation-hedging real-economy assets (water and timber/forestry sleeves).",
        "_spec": {
          "fn": "group_floor",
          "args": [
            "inflation_hedge",
            0.15
          ]
        }
      },
      {
        "description": "Cap total allocation to high-growth/high-beta sleeves (prevents naive selection of only the top-return names).",
        "_spec": {
          "fn": "group_cap",
          "args": [
            "high_growth",
            0.35
          ]
        }
      },
      {
        "description": "Limit clean energy exposure to avoid over-reliance on power price and permitting regimes (interacts with the tempting high-return DAC venture).",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "clean_energy",
            0.25
          ]
        }
      },
      {
        "description": "Ensure at least 8% in sustainable healthcare to satisfy the fund\u2019s 'climate + social' balanced impact policy (forces a non-obvious sector inclusion).",
        "_spec": {
          "fn": "sector_floor",
          "args": [
            "healthcare",
            0.08
          ]
        }
      },
      {
        "description": "If investing in SunGrid Renewables YieldCo, also invest at least $10,000 in GridFlex Regulated Utility Transition as a regulatory/contracting hedge (hidden interaction with diversification and sector caps).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "a3",
            "a4",
            10000
          ]
        }
      },
      {
        "description": "If investing in TerraMetric Climate Analytics SaaS, allocate at least $15,000 to the sovereign green bond ETF as a liquidity and duration ballast (greedy trap: chasing SaaS return without planning for the hedge can break the finance cap).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "a8",
            "a1",
            15000
          ]
        }
      },
      {
        "description": "If investing in CarbonRail carbon-credit arbitrage, maintain at least $8,000 in GreenCash money market for collateral/cash-buffering (decoy: high return but the collateral requirement consumes scarce finance-sector capacity).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "a14",
            "a11",
            8000
          ]
        }
      },
      {
        "description": "Microfinance notes require a minimum ticket size of $10,000.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a7",
            10000
          ]
        }
      },
      {
        "description": "Renewables YieldCo requires a minimum ticket size of $12,000 due to project-finance subscription terms.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a3",
            12000
          ]
        }
      },
      {
        "description": "Water infrastructure REIT has an $8,000 minimum allocation to avoid excessive trading/positioning costs.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a5",
            8000
          ]
        }
      },
      {
        "description": "Sustainable timber & forestry trust has an $8,000 minimum allocation due to limited liquidity.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a6",
            8000
          ]
        }
      },
      {
        "description": "Climate analytics SaaS position must be at least $8,000 to justify single-name monitoring and stewardship work.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a8",
            8000
          ]
        }
      },
      {
        "description": "Sustainable healthcare innovators ETF has an $8,000 minimum to meet the fund\u2019s internal 'meaningful exposure' rule.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a12",
            8000
          ]
        }
      },
      {
        "description": "Direct Air Capture venture SPV requires a $20,000 minimum commitment (counterintuitive: huge return, but the min ticket can crowd out diversification and force lower-return liquidity holdings).",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a13",
            20000
          ]
        }
      },
      {
        "description": "CarbonRail carbon-credit arbitrage note requires a $15,000 minimum subscription.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a14",
            15000
          ]
        }
      },
      {
        "description": "Constrain the total 'alpha sleeve' allocation (SaaS + recycling equity + DAC SPV + carbon-credit arbitrage) to avoid correlated drawdowns during risk-off regimes.",
        "_spec": {
          "fn": "combined_limit",
          "args": [
            [
              "a8",
              "a9",
              "a13",
              "a14"
            ],
            30000
          ]
        }
      },
      {
        "description": "Mandatory commitment to regulated utility transition: allocate at least 10% of the total budget to GridFlex to satisfy the fund\u2019s transition-finance KPI reporting.",
        "_spec": {
          "fn": "mandatory",
          "args": [
            "a4",
            0.1
          ]
        }
      },
      {
        "description": "Limit single-name tech concentration: cap TerraMetric Climate Analytics SaaS at $15,000 to prevent factor overexposure under the tech sector cap.",
        "_spec": {
          "fn": "max_allocation",
          "args": [
            "a8",
            15000
          ]
        }
      }
    ],
    "instruction": "Maximize the expected portfolio return while respecting the total budget, maximum portfolio risk limit, minimum return requirement, diversification constraints, sector exposure limits (including the scenario\u2019s tech/finance caps), and all additional allocation, conditional, and group/sector constraints provided.",
    "feasible": true,
    "solution": {
      "domain": "portfolio",
      "allocations": [
        {
          "asset_id": "a1",
          "amount": 18000.0,
          "fraction": 0.18
        },
        {
          "asset_id": "a4",
          "amount": 10000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a5",
          "amount": 15000.0,
          "fraction": 0.15
        },
        {
          "asset_id": "a8",
          "amount": 8888.89,
          "fraction": 0.0889
        },
        {
          "asset_id": "a9",
          "amount": 1000.0,
          "fraction": 0.01
        },
        {
          "asset_id": "a10",
          "amount": 19111.11,
          "fraction": 0.1911
        },
        {
          "asset_id": "a12",
          "amount": 8000.0,
          "fraction": 0.08
        },
        {
          "asset_id": "a13",
          "amount": 20000.0,
          "fraction": 0.2
        }
      ],
      "expected_return": 10450.56,
      "total_risk": 0.15,
      "diversification": 8
    }
  },
  {
    "id": "portfolio_b9afcc3b",
    "difficulty": "expert",
    "scenario": {
      "domain": "portfolio",
      "description": "Venture capital fund portfolio construction for Cascade Harbor Ventures (CHV): the investment committee is building a $10M cross-stage portfolio using a mix of SPVs, primary venture rounds, secondaries, and short-duration venture debt. The mandate is to maximize expected return while staying within a portfolio risk budget, meeting liquidity/reserve policy, and respecting sector and correlated-bet concentration limits typical for LP reporting and risk management.",
      "total_budget": 10000000.0,
      "max_risk": 0.22,
      "min_return": 0.14,
      "min_diversification": 7,
      "max_sector_exposure": {
        "tech": 0.35,
        "finance": 0.28
      },
      "assets": [
        {
          "id": "a1",
          "name": "AuroraAI ModelOps SPV (Seed, preferred + pro-rata)",
          "expected_return": 0.3,
          "risk": 0.45,
          "min_allocation": 0.0,
          "max_allocation": 0.18,
          "sector": "tech",
          "correlation_group": "high_growth"
        },
        {
          "id": "a2",
          "name": "HelioDevTools (Series A lead)",
          "expected_return": 0.24,
          "risk": 0.38,
          "min_allocation": 0.0,
          "max_allocation": 0.15,
          "sector": "tech",
          "correlation_group": "high_growth"
        },
        {
          "id": "a3",
          "name": "QuantaCloud FinOps (Series B follow-on)",
          "expected_return": 0.18,
          "risk": 0.28,
          "min_allocation": 0.0,
          "max_allocation": 0.14,
          "sector": "tech",
          "correlation_group": "balanced_growth"
        },
        {
          "id": "a4",
          "name": "LedgerLink Embedded Payments (Series B)",
          "expected_return": 0.2,
          "risk": 0.32,
          "min_allocation": 0.0,
          "max_allocation": 0.15,
          "sector": "finance",
          "correlation_group": "balanced_growth"
        },
        {
          "id": "a5",
          "name": "RegShield RegTech (Series C, profitability path)",
          "expected_return": 0.16,
          "risk": 0.22,
          "min_allocation": 0.0,
          "max_allocation": 0.12,
          "sector": "finance",
          "correlation_group": "defensive"
        },
        {
          "id": "a6",
          "name": "NeuroWeave Therapeutics (Seed, preclinical)",
          "expected_return": 0.26,
          "risk": 0.42,
          "min_allocation": 0.0,
          "max_allocation": 0.1,
          "sector": "healthcare",
          "correlation_group": "high_growth"
        },
        {
          "id": "a7",
          "name": "MediSignal Remote Monitoring (Series C, reimbursement tailwinds)",
          "expected_return": 0.14,
          "risk": 0.2,
          "min_allocation": 0.0,
          "max_allocation": 0.14,
          "sector": "healthcare",
          "correlation_group": "defensive"
        },
        {
          "id": "a8",
          "name": "GridStone Long-Duration Storage (Series A project pipeline)",
          "expected_return": 0.22,
          "risk": 0.35,
          "min_allocation": 0.0,
          "max_allocation": 0.12,
          "sector": "climate",
          "correlation_group": "high_growth"
        },
        {
          "id": "a9",
          "name": "CarbonBook MRV & Carbon Accounting (Series B)",
          "expected_return": 0.17,
          "risk": 0.26,
          "min_allocation": 0.0,
          "max_allocation": 0.1,
          "sector": "climate",
          "correlation_group": "balanced_growth"
        },
        {
          "id": "a10",
          "name": "ForgeBot Industrial Robotics (Series B)",
          "expected_return": 0.19,
          "risk": 0.3,
          "min_allocation": 0.0,
          "max_allocation": 0.12,
          "sector": "industrial",
          "correlation_group": "balanced_growth"
        },
        {
          "id": "a11",
          "name": "PantryPilot Consumer Roll-up Platform (Growth equity)",
          "expected_return": 0.15,
          "risk": 0.25,
          "min_allocation": 0.0,
          "max_allocation": 0.1,
          "sector": "consumer",
          "correlation_group": "balanced_growth"
        },
        {
          "id": "a12",
          "name": "RouteMint Supply-Chain Visibility (Series C, expansion capital)",
          "expected_return": 0.13,
          "risk": 0.18,
          "min_allocation": 0.0,
          "max_allocation": 0.12,
          "sector": "logistics",
          "correlation_group": "defensive"
        },
        {
          "id": "a13",
          "name": "NorthBridge Venture Debt Notes (12-month, senior secured)",
          "expected_return": 0.1,
          "risk": 0.1,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "finance",
          "correlation_group": "defensive"
        },
        {
          "id": "a14",
          "name": "SummitPeak Secondaries Basket (late-stage preferred, quarterly windows)",
          "expected_return": 0.12,
          "risk": 0.16,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "tech",
          "correlation_group": "defensive"
        },
        {
          "id": "a15",
          "name": "LP Reserve Sleeve: Treasury-Backed Cash Management (for follow-ons)",
          "expected_return": 0.05,
          "risk": 0.02,
          "min_allocation": 0.0,
          "max_allocation": 0.35,
          "sector": "cash",
          "correlation_group": "defensive"
        }
      ]
    },
    "constraints": [
      {
        "description": "Tech exposure cap required by CHV's LP concentration policy (includes secondaries counted as tech).",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "tech",
            0.35
          ]
        }
      },
      {
        "description": "Finance exposure cap required by CHV's internal risk committee due to correlated fintech drawdowns.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "finance",
            0.28
          ]
        }
      },
      {
        "description": "Maintain at least 8% exposure to healthcare innovations to keep the fund's cross-cycle diversification mandate.",
        "_spec": {
          "fn": "sector_floor",
          "args": [
            "healthcare",
            0.08
          ]
        }
      },
      {
        "description": "Maintain at least 8% exposure to climate investments to satisfy CHV's climate allocation commitment to a cornerstone LP.",
        "_spec": {
          "fn": "sector_floor",
          "args": [
            "climate",
            0.08
          ]
        }
      },
      {
        "description": "Limit aggregate exposure to highly correlated 'high-growth / duration' bets (macro sensitivity).",
        "_spec": {
          "fn": "group_cap",
          "args": [
            "high_growth",
            0.4
          ]
        }
      },
      {
        "description": "Maintain at least 25% in defensive exposures (later-stage, cash-flowing, or capital-preserving sleeves) for drawdown control.",
        "_spec": {
          "fn": "group_floor",
          "args": [
            "defensive",
            0.25
          ]
        }
      },
      {
        "description": "Portfolio must include at least 7 distinct positions to avoid single-name and single-theme concentration.",
        "_spec": {
          "fn": "diversification",
          "args": [
            7
          ]
        }
      },
      {
        "description": "Liquidity policy: at least 25% must be in instruments with defined windows/cash-flow (venture debt, secondaries, or reserves).",
        "_spec": {
          "fn": "liquidity",
          "args": [
            [
              "a13",
              "a14",
              "a15"
            ],
            0.25
          ]
        }
      },
      {
        "description": "Conflict policy: CHV cannot hold both NeuroWeave Therapeutics (a6) and MediSignal (a7) because the same operating partner sits on both boards and is recused from one category per quarter.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "a6",
              "a7"
            ]
          ]
        }
      },
      {
        "description": "Vendor minimum for the AuroraAI SPV: if invested, must be at least $600k to secure the negotiated pro-rata side letter.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a1",
            600000
          ]
        }
      },
      {
        "description": "HelioDevTools allocation is only accepted in meaningful size: if invested, must be at least $500k (lead-check threshold).",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a2",
            500000
          ]
        }
      },
      {
        "description": "If CHV invests in HelioDevTools (a2), it must also invest at least $400k in QuantaCloud FinOps (a3) to hedge cloud spend exposure across the software basket (IC-mandated pairing).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "a2",
            "a3",
            400000
          ]
        }
      },
      {
        "description": "If CHV invests in GridStone Storage (a8), it must also invest at least $300k in CarbonBook MRV (a9) to diversify climate risk across hardware + software (climate sleeve rules).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "a8",
            "a9",
            300000
          ]
        }
      },
      {
        "description": "If CHV invests in AuroraAI (a1), it must maintain at least $300k in the Reserve Sleeve (a15) to ensure follow-on capacity through the next priced round (reserve policy tied to frontier-model volatility).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "a1",
            "a15",
            300000
          ]
        }
      },
      {
        "description": "Secondaries program requirement: CHV must allocate at least 8% of the fund to SummitPeak Secondaries Basket to create earlier liquidity potential for LP distributions.",
        "_spec": {
          "fn": "mandatory",
          "args": [
            "a14",
            0.08
          ]
        }
      },
      {
        "description": "Secondaries broker minimum: if CHV invests in the SummitPeak Secondaries Basket, it must allocate at least $1,000,000 (minimum ticket size across quarterly auctions).",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a14",
            1000000
          ]
        }
      },
      {
        "description": "Concentration guardrail: the four flashiest/high-volatility themes combined (AuroraAI, HelioDevTools, NeuroWeave, GridStone) cannot exceed $3,000,000 total.",
        "_spec": {
          "fn": "combined_limit",
          "args": [
            [
              "a1",
              "a2",
              "a6",
              "a8"
            ],
            3000000
          ]
        }
      },
      {
        "description": "Limit venture debt dependence: cap NorthBridge Venture Debt Notes at $1,800,000 to avoid over-reliance on credit in a venture mandate.",
        "_spec": {
          "fn": "max_allocation",
          "args": [
            "a13",
            1800000
          ]
        }
      },
      {
        "description": "Reserve sleeve should not dominate the portfolio: cap the Treasury-backed reserve sleeve at $2,500,000 (cash drag control).",
        "_spec": {
          "fn": "max_allocation",
          "args": [
            "a15",
            2500000
          ]
        }
      }
    ],
    "instruction": "Maximize expected portfolio return while respecting the total budget, maximum portfolio risk limit, minimum return requirement, minimum diversification level, sector exposure caps/floors, correlation-group caps/floors, liquidity minimum, and all asset-specific conditional, exclusion, minimum-ticket, combined-limit, mandatory, and max-allocation constraints.",
    "feasible": true,
    "solution": {
      "domain": "portfolio",
      "allocations": [
        {
          "asset_id": "a1",
          "amount": 1000000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a3",
          "amount": 1000000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a5",
          "amount": 1000000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a7",
          "amount": 1000000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a8",
          "amount": 600000.0,
          "fraction": 0.06
        },
        {
          "asset_id": "a9",
          "amount": 1000000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a10",
          "amount": 400000.0,
          "fraction": 0.04
        },
        {
          "asset_id": "a12",
          "amount": 1000000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a13",
          "amount": 1000000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a14",
          "amount": 1000000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a15",
          "amount": 1000000.0,
          "fraction": 0.1
        }
      ],
      "expected_return": 1558000.0,
      "total_risk": 0.22,
      "diversification": 11
    }
  },
  {
    "id": "portfolio_f2e50dca",
    "difficulty": "expert",
    "scenario": {
      "domain": "portfolio",
      "description": "HarborGate Infrastructure Opportunities Fund: allocate capital across infrastructure equity, project finance notes, and liquid green bonds. The investor wants to maximize expected return while keeping portfolio risk controlled, maintaining liquidity for capital calls, and staying diversified across infrastructure subsectors (renewables, regulated utilities, transport/logistics, digital infrastructure, water/waste, and public-private partnership availability payments).",
      "total_budget": 100000.0,
      "max_risk": 0.15,
      "min_return": 0.09,
      "min_diversification": 6,
      "max_sector_exposure": {
        "renewables": 0.3,
        "digital_infra": 0.3,
        "transport": 0.3,
        "utilities": 0.35
      },
      "assets": [
        {
          "id": "a1",
          "name": "AeroLink Toll Road Concession Notes (Series 2029)",
          "expected_return": 0.085,
          "risk": 0.1,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "transport",
          "correlation_group": "core_infra"
        },
        {
          "id": "a2",
          "name": "MetroGrid Regulated Utility Bond Ladder (IG)",
          "expected_return": 0.065,
          "risk": 0.05,
          "min_allocation": 0.0,
          "max_allocation": 0.35,
          "sector": "utilities",
          "correlation_group": "defensive"
        },
        {
          "id": "a3",
          "name": "Cascadia Offshore Wind SPV Equity (PPA-backed)",
          "expected_return": 0.145,
          "risk": 0.22,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "renewables",
          "correlation_group": "high_growth"
        },
        {
          "id": "a4",
          "name": "SunFoundry Distributed Solar Lease Fund (C&I rooftop)",
          "expected_return": 0.125,
          "risk": 0.2,
          "min_allocation": 0.0,
          "max_allocation": 0.3,
          "sector": "renewables",
          "correlation_group": "high_growth"
        },
        {
          "id": "a5",
          "name": "BluePond Water Treatment PPP Equity (availability + CPI escalators)",
          "expected_return": 0.105,
          "risk": 0.14,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "water_waste",
          "correlation_group": "inflation_hedge"
        },
        {
          "id": "a6",
          "name": "FiberSpan Data Center REIT Units (Tier-III campuses)",
          "expected_return": 0.115,
          "risk": 0.17,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "digital_infra",
          "correlation_group": "rate_sensitive"
        },
        {
          "id": "a7",
          "name": "NorthRail Intermodal Terminal Notes (volume-linked)",
          "expected_return": 0.11,
          "risk": 0.16,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "transport",
          "correlation_group": "cyclical"
        },
        {
          "id": "a8",
          "name": "ChargeWay EV Charging Network Growth Equity (corridor buildout)",
          "expected_return": 0.135,
          "risk": 0.24,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "transport",
          "correlation_group": "high_growth"
        },
        {
          "id": "a9",
          "name": "GridFlex Battery Storage Revenue Shares (merchant + capacity payments)",
          "expected_return": 0.12,
          "risk": 0.19,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "utilities",
          "correlation_group": "high_growth"
        },
        {
          "id": "a10",
          "name": "PortSafe Cold-Chain Logistics Warehousing JV",
          "expected_return": 0.095,
          "risk": 0.13,
          "min_allocation": 0.0,
          "max_allocation": 0.25,
          "sector": "transport",
          "correlation_group": "inflation_hedge"
        },
        {
          "id": "a11",
          "name": "CivicBuild Social Infrastructure Availability Notes (schools & hospitals)",
          "expected_return": 0.075,
          "risk": 0.07,
          "min_allocation": 0.0,
          "max_allocation": 0.3,
          "sector": "social_infra",
          "correlation_group": "defensive"
        },
        {
          "id": "a12",
          "name": "HarborGate Municipal Green Bond Sleeve (AAA/AA, daily liquidity)",
          "expected_return": 0.045,
          "risk": 0.02,
          "min_allocation": 0.0,
          "max_allocation": 0.4,
          "sector": "public_finance",
          "correlation_group": "defensive"
        },
        {
          "id": "a13",
          "name": "QuarryLine Aggregates & Asphalt Supply Co. (infra materials)",
          "expected_return": 0.09,
          "risk": 0.11,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "materials",
          "correlation_group": "cyclical"
        },
        {
          "id": "a14",
          "name": "StormShield Flood Defense Cat-Bond Notes (ILS tranche)",
          "expected_return": 0.1,
          "risk": 0.12,
          "min_allocation": 0.0,
          "max_allocation": 0.2,
          "sector": "risk_transfer",
          "correlation_group": "uncorrelated"
        }
      ]
    },
    "constraints": [
      {
        "description": "Diversification policy: hold at least 6 different infrastructure positions to reduce single-project underwriting risk.",
        "_spec": {
          "fn": "diversification",
          "args": [
            6
          ]
        }
      },
      {
        "description": "Cannot hold both Cascadia Offshore Wind SPV Equity and SunFoundry Distributed Solar Lease Fund due to shared EPC contractor concentration limits.",
        "_spec": {
          "fn": "exclusion",
          "args": [
            [
              "a3",
              "a4"
            ]
          ]
        }
      },
      {
        "description": "If investing in Cascadia Offshore Wind SPV Equity, must also invest at least $10,000 in MetroGrid Regulated Utility Bond Ladder to hedge PPA settlement/curtailment risk (stabilizes cashflows but uses up utilities exposure).",
        "_spec": {
          "fn": "conditional",
          "args": [
            "a3",
            "a2",
            10000
          ]
        }
      },
      {
        "description": "If investing in ChargeWay EV Charging Network Growth Equity, must also invest at least $5,000 in the Municipal Green Bond Sleeve as collateral/liquidity for staged capital calls.",
        "_spec": {
          "fn": "conditional",
          "args": [
            "a8",
            "a12",
            5000
          ]
        }
      },
      {
        "description": "Minimum ticket: Cascadia Offshore Wind SPV Equity requires a $20,000 minimum subscription (lumpy allocation that can crowd out diversification).",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a3",
            20000
          ]
        }
      },
      {
        "description": "Minimum ticket: SunFoundry Distributed Solar Lease Fund requires at least $15,000 to access the senior revenue tranche.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a4",
            15000
          ]
        }
      },
      {
        "description": "Minimum ticket: NorthRail Intermodal Terminal Notes require at least $10,000 per note lot.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a7",
            10000
          ]
        }
      },
      {
        "description": "Minimum ticket: BluePond Water Treatment PPP Equity requires at least $10,000 due to SPV admin costs.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a5",
            10000
          ]
        }
      },
      {
        "description": "Minimum ticket: GridFlex Battery Storage Revenue Shares require at least $10,000 for revenue-metering enrollment.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a9",
            10000
          ]
        }
      },
      {
        "description": "Minimum ticket: FiberSpan Data Center REIT Units require at least $5,000 to avoid small-lot fees.",
        "_spec": {
          "fn": "min_if_invested",
          "args": [
            "a6",
            5000
          ]
        }
      },
      {
        "description": "Concentration control: allocate no more than $20,000 to Cascadia Offshore Wind SPV Equity (single-project risk).",
        "_spec": {
          "fn": "max_allocation",
          "args": [
            "a3",
            20000
          ]
        }
      },
      {
        "description": "Concentration control: allocate no more than $15,000 to ChargeWay EV Charging Network Growth Equity (early-stage rollout risk).",
        "_spec": {
          "fn": "max_allocation",
          "args": [
            "a8",
            15000
          ]
        }
      },
      {
        "description": "High-growth correlation cap: combined allocation across the highest-beta growth sleeve (offshore wind, solar leases, EV charging, battery storage) must not exceed $35,000.",
        "_spec": {
          "fn": "combined_limit",
          "args": [
            [
              "a3",
              "a4",
              "a8",
              "a9"
            ],
            35000
          ]
        }
      },
      {
        "description": "Correlation control: total allocation to the 'high_growth' correlation group must not exceed 35% of the portfolio.",
        "_spec": {
          "fn": "group_cap",
          "args": [
            "high_growth",
            0.35
          ]
        }
      },
      {
        "description": "Downside protection: maintain at least 25% in defensive correlation group assets (regulated utilities, availability-payment notes, and liquid green bonds).",
        "_spec": {
          "fn": "group_floor",
          "args": [
            "defensive",
            0.25
          ]
        }
      },
      {
        "description": "Water mandate: allocate at least 8% to the water/waste sector to maintain exposure to regulated/availability-style infrastructure cashflows.",
        "_spec": {
          "fn": "sector_floor",
          "args": [
            "water_waste",
            0.08
          ]
        }
      },
      {
        "description": "Liquidity reserve: keep at least 15% of the portfolio in qualifying liquid assets to meet capital calls and margin/collateral needs.",
        "_spec": {
          "fn": "liquidity",
          "args": [
            [
              "a2",
              "a11",
              "a12"
            ],
            0.15
          ]
        }
      },
      {
        "description": "Operational policy: hold at least 5% in the Municipal Green Bond Sleeve as a cash-equivalent buffer (daily liquidity).",
        "_spec": {
          "fn": "mandatory",
          "args": [
            "a12",
            0.05
          ]
        }
      },
      {
        "description": "Renewables exposure limit: keep renewables at or below 30% to avoid over-reliance on power price/policy regimes.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "renewables",
            0.3
          ]
        }
      },
      {
        "description": "Digital infrastructure exposure limit: keep digital infrastructure at or below 30% due to rate sensitivity and refinancing risk.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "digital_infra",
            0.3
          ]
        }
      },
      {
        "description": "Transport/logistics exposure limit: keep transport at or below 30% due to volume cyclicality.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "transport",
            0.3
          ]
        }
      },
      {
        "description": "Utilities exposure limit: keep utilities at or below 35% to prevent a single regulatory regime from dominating outcomes.",
        "_spec": {
          "fn": "sector_cap",
          "args": [
            "utilities",
            0.35
          ]
        }
      }
    ],
    "instruction": "Maximize the expected portfolio return while respecting the total budget, maximum portfolio risk limit, minimum return requirement, diversification minimum, sector exposure limits, correlation-group limits/floors, and all asset-specific conditional, exclusion, minimum-ticket, and allocation-cap constraints.",
    "feasible": true,
    "solution": {
      "domain": "portfolio",
      "allocations": [
        {
          "asset_id": "a2",
          "amount": 10000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a3",
          "amount": 20000.0,
          "fraction": 0.2
        },
        {
          "asset_id": "a5",
          "amount": 10000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a6",
          "amount": 25000.0,
          "fraction": 0.25
        },
        {
          "asset_id": "a8",
          "amount": 10416.67,
          "fraction": 0.1042
        },
        {
          "asset_id": "a11",
          "amount": 10000.0,
          "fraction": 0.1
        },
        {
          "asset_id": "a12",
          "amount": 5000.0,
          "fraction": 0.05
        },
        {
          "asset_id": "a14",
          "amount": 9583.33,
          "fraction": 0.0958
        }
      ],
      "expected_return": 10814.58,
      "total_risk": 0.15,
      "diversification": 8
    }
  },
  {
    "id": "production_mix_cefaba46",
    "difficulty": "expert",
    "scenario": {
      "domain": "production_mix",
      "description": "Luminique Labs (a mid-size cosmetics & personal care manufacturer) is planning next month\u2019s production across its skincare, haircare, and bodycare portfolio. The plant must allocate limited compounding, filling, QC, changeover, chemist time, and constrained packaging materials (including glass jars) while meeting retailer demand commitments. Several marketing and regulatory rules create interlocking ratio, variety, and linked-production requirements that make greedy \u2018highest margin first\u2019 plans fail.",
      "resources": [
        {
          "id": "r1",
          "name": "Compounding Kettle Time",
          "available": 1040.0,
          "unit": "hours"
        },
        {
          "id": "r2",
          "name": "Filling/Packaging Line Time",
          "available": 540.0,
          "unit": "hours"
        },
        {
          "id": "r3",
          "name": "QC Lab Bench Time",
          "available": 455.0,
          "unit": "hours"
        },
        {
          "id": "r4",
          "name": "Cleanroom Changeover Blocks",
          "available": 190.0,
          "unit": "blocks"
        },
        {
          "id": "r5",
          "name": "Formulation Chemist Hours",
          "available": 360.0,
          "unit": "hours"
        },
        {
          "id": "r6",
          "name": "Primary Packaging Components",
          "available": 840.0,
          "unit": "k units"
        },
        {
          "id": "r7",
          "name": "Fragrance Oil",
          "available": 170.0,
          "unit": "kg"
        },
        {
          "id": "r8",
          "name": "Active Ingredients",
          "available": 520.0,
          "unit": "kg"
        },
        {
          "id": "r9",
          "name": "Recyclable Glass Jars",
          "available": 435.0,
          "unit": "k units"
        }
      ],
      "products": [
        {
          "id": "p1",
          "name": "Radiant C Serum (30 mL dropper)",
          "profit_per_unit": 38.47,
          "resource_usage": {
            "r1": 0.62,
            "r2": 0.36,
            "r3": 0.24,
            "r4": 0.11,
            "r5": 0.21,
            "r6": 0.44,
            "r7": 0.18,
            "r8": 0.42,
            "r9": 1.0
          },
          "min_production": 120,
          "max_production": 260,
          "demand": 180
        },
        {
          "id": "p2",
          "name": "Calm Barrier Cream (50 mL jar)",
          "profit_per_unit": 34.12,
          "resource_usage": {
            "r1": 0.71,
            "r2": 0.29,
            "r3": 0.26,
            "r4": 0.13,
            "r5": 0.24,
            "r6": 0.41,
            "r7": 0.16,
            "r8": 0.36,
            "r9": 0.0
          },
          "min_production": 100,
          "max_production": 240,
          "demand": 140
        },
        {
          "id": "p3",
          "name": "Velvet Matte Lip Tint (tube)",
          "profit_per_unit": 21.63,
          "resource_usage": {
            "r1": 0.44,
            "r2": 0.25,
            "r3": 0.18,
            "r4": 0.08,
            "r5": 0.16,
            "r6": 0.39,
            "r7": 0.0,
            "r8": 0.22,
            "r9": 0.0
          },
          "min_production": 160,
          "max_production": 340,
          "demand": 220
        },
        {
          "id": "p4",
          "name": "HydraGlow Gel Cleanser (150 mL)",
          "profit_per_unit": 27.58,
          "resource_usage": {
            "r1": 0.58,
            "r2": 0.27,
            "r3": 0.2,
            "r4": 0.1,
            "r5": 0.19,
            "r6": 0.38,
            "r7": 0.17,
            "r8": 0.31,
            "r9": 0.0
          },
          "min_production": 130,
          "max_production": 300,
          "demand": 160
        },
        {
          "id": "p5",
          "name": "Shea Soft Body Butter (200 mL tub)",
          "profit_per_unit": 18.96,
          "resource_usage": {
            "r1": 0.39,
            "r2": 0.22,
            "r3": 0.17,
            "r4": 0.07,
            "r5": 0.13,
            "r6": 0.35,
            "r7": 0.0,
            "r8": 0.18,
            "r9": 0.0
          },
          "min_production": 150,
          "max_production": 360,
          "demand": 190
        },
        {
          "id": "p6",
          "name": "Daily Defense SPF 30 Lotion (100 mL)",
          "profit_per_unit": 17.41,
          "resource_usage": {
            "r1": 0.41,
            "r2": 0.23,
            "r3": 0.17,
            "r4": 0.07,
            "r5": 0.14,
            "r6": 0.36,
            "r7": 0.0,
            "r8": 0.19,
            "r9": 0.0
          },
          "min_production": 140,
          "max_production": 330,
          "demand": 170
        },
        {
          "id": "p7",
          "name": "Silk Repair Shampoo (250 mL)",
          "profit_per_unit": 15.88,
          "resource_usage": {
            "r1": 0.46,
            "r2": 0.24,
            "r3": 0.19,
            "r4": 0.09,
            "r5": 0.17,
            "r6": 0.4,
            "r7": 0.12,
            "r8": 0.24,
            "r9": 0.0
          },
          "min_production": 170,
          "max_production": 420,
          "demand": 210
        },
        {
          "id": "p8",
          "name": "Botanical Conditioner (250 mL)",
          "profit_per_unit": 42.39,
          "resource_usage": {
            "r1": 0.33,
            "r2": 0.21,
            "r3": 0.16,
            "r4": 0.06,
            "r5": 0.12,
            "r6": 0.33,
            "r7": 0.0,
            "r8": 0.14,
            "r9": 1.0
          },
          "min_production": 150,
          "max_production": 320,
          "demand": 200
        },
        {
          "id": "p9",
          "name": "AHA Overnight Peel Pads (30 ct)",
          "profit_per_unit": 12.27,
          "resource_usage": {
            "r1": 0.52,
            "r2": 0.19,
            "r3": 0.41,
            "r4": 0.12,
            "r5": 0.2,
            "r6": 0.48,
            "r7": 0.1,
            "r8": 0.27,
            "r9": 0.0
          },
          "min_production": 90,
          "max_production": 210,
          "demand": 120
        },
        {
          "id": "p10",
          "name": "Rose Mist Toner (100 mL spray)",
          "profit_per_unit": 14.73,
          "resource_usage": {
            "r1": 0.28,
            "r2": 0.14,
            "r3": 0.12,
            "r4": 0.04,
            "r5": 0.09,
            "r6": 0.22,
            "r7": 0.06,
            "r8": 0.09,
            "r9": 0.0
          },
          "min_production": 220,
          "max_production": 520,
          "demand": 260
        },
        {
          "id": "p11",
          "name": "Nourish Cuticle Oil (pen)",
          "profit_per_unit": 19.54,
          "resource_usage": {
            "r1": 0.31,
            "r2": 0.16,
            "r3": 0.15,
            "r4": 0.05,
            "r5": 0.1,
            "r6": 0.25,
            "r7": 0.05,
            "r8": 0.11,
            "r9": 0.0
          },
          "min_production": 180,
          "max_production": 450,
          "demand": 230
        }
      ],
      "min_total_units": null,
      "max_total_units": null
    },
    "constraints": [
      {
        "description": "Minimum total profit of $48,750 is required to cover fixed plant overhead and the month\u2019s retailer co-op fees.",
        "_spec": {
          "fn": "min_profit",
          "args": [
            48750
          ]
        }
      },
      {
        "description": "Cap compounding kettle utilization to at most 92% to leave contingency for rework batches and sanitation overruns.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r1",
            0.92
          ]
        }
      },
      {
        "description": "Cap filling/packaging line utilization to at most 90% due to planned preventive maintenance windows.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r2",
            0.9
          ]
        }
      },
      {
        "description": "Cap QC lab bench utilization to at most 93% because two validation protocols will occupy benches intermittently.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r3",
            0.93
          ]
        }
      },
      {
        "description": "Cap cleanroom changeover utilization to at most 92% to accommodate allergen-cleaning escalations.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r4",
            0.92
          ]
        }
      },
      {
        "description": "Cap formulation chemist utilization to at most 90% (R&D is reserving time for two stability studies).",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r5",
            0.9
          ]
        }
      },
      {
        "description": "Cap fragrance oil usage to at most 90% to maintain safety stock for late-breaking private label fragrance tweaks.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r7",
            0.9
          ]
        }
      },
      {
        "description": "Cap active-ingredient usage to at most 92% due to lead-time risk on niacinamide and UV filters.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r8",
            0.92
          ]
        }
      },
      {
        "description": "At least 7 different SKUs must be produced this month to maintain catalog breadth for key retailers.",
        "_spec": {
          "fn": "minimum_variety",
          "args": [
            7
          ]
        }
      },
      {
        "description": "No single SKU may exceed 22% of total units, preventing overexposure to a single retailer promotion forecast.",
        "_spec": {
          "fn": "max_single_product",
          "args": [
            0.22
          ]
        }
      },
      {
        "description": "If Radiant C Serum (p1) is produced, at least 200 units of Rose Mist Toner (p10) must be produced (bundled \u2018Brighten + Mist\u2019 kits).",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p1",
            "p10",
            200
          ]
        }
      },
      {
        "description": "If Calm Barrier Cream (p2) is produced, at least 150 units of HydraGlow Gel Cleanser (p4) must be produced (retailer planogram pairing).",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p2",
            "p4",
            150
          ]
        }
      },
      {
        "description": "If Silk Repair Shampoo (p7) is produced, at least 160 units of Botanical Conditioner (p8) must be produced (haircare regimen requirement).",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p7",
            "p8",
            160
          ]
        }
      },
      {
        "description": "Radiant C Serum output must be at least 0.75\u00d7 Calm Barrier Cream output to keep the \u2018treatment vs. barrier\u2019 merchandising story balanced.",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p1",
            "p2",
            0.75,
            null
          ]
        }
      },
      {
        "description": "Calm Barrier Cream output must be between 0.70\u00d7 and 1.35\u00d7 HydraGlow Gel Cleanser output to match shelf-space facings.",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p2",
            "p4",
            0.7,
            1.35
          ]
        }
      },
      {
        "description": "Silk Repair Shampoo output must be between 0.85\u00d7 and 1.10\u00d7 Botanical Conditioner output (paired regimen sales expectations).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p7",
            "p8",
            0.85,
            1.1
          ]
        }
      },
      {
        "description": "Radiant C Serum (p1) must be produced in batches of at least 30 units or not at all (validated mixing protocol).",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p1",
            30
          ]
        }
      },
      {
        "description": "Velvet Matte Lip Tint (p3) must be produced in batches of at least 24 units or not at all (pigment dispersion setup cost).",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p3",
            24
          ]
        }
      },
      {
        "description": "AHA Overnight Peel Pads (p9) must be produced in batches of at least 18 units or not at all (pad-saturation line setup).",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p9",
            18
          ]
        }
      },
      {
        "description": "Nourish Cuticle Oil (p11) must be produced in batches of at least 36 units or not at all (filling tool calibration).",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p11",
            36
          ]
        }
      }
    ],
    "instruction": "Maximize total profit while satisfying all resource constraints, meeting or exceeding each product\u2019s demand, and respecting per-product minimum/maximum production limits and the additional constraints listed.",
    "analysis": {
      "anti_patterns": [
        "Greedy \u2018produce the highest profit-per-unit first\u2019 over-selects Botanical Conditioner (p8) and Radiant C Serum (p1), quickly exhausting the glass-jar resource (r9) and triggering linked-production commitments that then collide with max_single_product.",
        "Treating demands as independent and simply setting production = demand fails because the ratio and linked_production constraints force additional units in specific SKUs, which can push packaging or QC over the capped utilization percentages.",
        "A na\u00efve attempt to satisfy minimum_variety by adding small quantities of many products can violate min_batch constraints, causing a cascade of forced increases that unexpectedly binds compounding and cleanroom changeovers."
      ],
      "strategic_insights": [
        "The jar-constrained SKUs (p1 and p8) are decoy-high-profit items: they look dominant on margin but are jointly limited by r9 and by the max_single_product cap, so the optimal plan often uses them only to the extent they enable profitable non-jar SKUs without breaking ratios.",
        "The ratio chain p1/p2 and p2/p4 plus linked_production on p2\u2192p4 creates a hidden interaction: increasing p2 to chase its margin forces p4 up, which then tightens the allowed range for p2 (via the upper bound), making incremental p2 additions self-limiting.",
        "With multiple max_resource_usage caps near 90% (r1, r2, r5, r7, r8), the optimum typically requires balancing \u2018resource-light\u2019 but lower-margin products (e.g., p10) to satisfy linked requirements while preserving bottleneck capacity for a carefully chosen subset of high-margin units."
      ],
      "expected_difficulty": "Expert: requires multi-bottleneck reasoning with interacting caps, min-batch discontinuities, ratio windows with both lower and upper bounds, and linked-production dependencies that create non-obvious feasible regions where greedy heuristics frequently dead-end."
    },
    "feasible": true,
    "solution": {
      "domain": "production_mix",
      "decisions": [
        {
          "product_id": "p1",
          "quantity": 180
        },
        {
          "product_id": "p2",
          "quantity": 140
        },
        {
          "product_id": "p3",
          "quantity": 220
        },
        {
          "product_id": "p4",
          "quantity": 160
        },
        {
          "product_id": "p5",
          "quantity": 190
        },
        {
          "product_id": "p6",
          "quantity": 170
        },
        {
          "product_id": "p7",
          "quantity": 216
        },
        {
          "product_id": "p8",
          "quantity": 254
        },
        {
          "product_id": "p9",
          "quantity": 120
        },
        {
          "product_id": "p10",
          "quantity": 260
        },
        {
          "product_id": "p11",
          "quantity": 232
        }
      ],
      "total_profit": 51467.520000000004,
      "total_units": 2142
    }
  },
  {
    "id": "production_mix_11b8c282",
    "difficulty": "expert",
    "scenario": {
      "domain": "production_mix",
      "description": "NovaTek Devices operates a high-mix consumer-electronics factory building smartphones, tablets, wearables, and premium accessories. The plant shares constrained SMT capacity, final-assembly labor, RF calibration benches, automated test stations, and several component supplies (OLED panels, camera modules, batteries, and rare-earth magnet kits used in haptics/speakers). Leadership must choose a feasible weekly product mix that meets channel demand while navigating subtle product-coupling rules and portfolio constraints.",
      "resources": [
        {
          "id": "r1",
          "name": "SMT Line Time",
          "available": 1768.0,
          "unit": "hours"
        },
        {
          "id": "r2",
          "name": "Final Assembly Labor",
          "available": 3035.0,
          "unit": "hours"
        },
        {
          "id": "r3",
          "name": "RF Calibration Bench",
          "available": 351.0,
          "unit": "hours"
        },
        {
          "id": "r4",
          "name": "Test & QA Automation",
          "available": 1285.0,
          "unit": "hours"
        },
        {
          "id": "r5",
          "name": "CNC/Injection Molding Cell",
          "available": 1008.0,
          "unit": "hours"
        },
        {
          "id": "r6",
          "name": "OLED Panels",
          "available": 2231.0,
          "unit": "units"
        },
        {
          "id": "r7",
          "name": "Li-ion Battery Cells",
          "available": 4100.0,
          "unit": "cells"
        },
        {
          "id": "r8",
          "name": "Camera Modules",
          "available": 3056.0,
          "unit": "modules"
        },
        {
          "id": "r9",
          "name": "Rare-earth Magnet Kits",
          "available": 241.0,
          "unit": "kits"
        }
      ],
      "products": [
        {
          "id": "p1",
          "name": "NovaPhone X1 (flagship smartphone)",
          "profit_per_unit": 24.8,
          "resource_usage": {
            "r1": 0.62,
            "r2": 0.95,
            "r3": 0.18,
            "r4": 0.44,
            "r5": 0.21,
            "r6": 1.0,
            "r7": 3.0,
            "r8": 1.0,
            "r9": 0.11
          },
          "min_production": 0,
          "max_production": 520,
          "demand": 260
        },
        {
          "id": "p2",
          "name": "NovaPhone S1 (value smartphone)",
          "profit_per_unit": 29.1,
          "resource_usage": {
            "r1": 0.7,
            "r2": 1.05,
            "r3": 0.22,
            "r4": 0.49,
            "r5": 0.23,
            "r6": 1.0,
            "r7": 4.0,
            "r8": 1.0,
            "r9": 0.14
          },
          "min_production": 0,
          "max_production": 420,
          "demand": 180
        },
        {
          "id": "p3",
          "name": "NovaTab T11 (tablet)",
          "profit_per_unit": 19.7,
          "resource_usage": {
            "r1": 0.54,
            "r2": 0.82,
            "r3": 0.1,
            "r4": 0.37,
            "r5": 0.19,
            "r6": 1.0,
            "r7": 2.0,
            "r8": 1.0,
            "r9": 0.09
          },
          "min_production": 0,
          "max_production": 880,
          "demand": 420
        },
        {
          "id": "p4",
          "name": "NovaWatch W3 (smartwatch)",
          "profit_per_unit": 15.2,
          "resource_usage": {
            "r1": 0.46,
            "r2": 0.74,
            "r3": 0.05,
            "r4": 0.31,
            "r5": 0.18,
            "r6": 1.0,
            "r7": 1.0,
            "r8": 1.0,
            "r9": 0.07
          },
          "min_production": 0,
          "max_production": 980,
          "demand": 520
        },
        {
          "id": "p5",
          "name": "NovaBuds Pro (true wireless earbuds)",
          "profit_per_unit": 41.6,
          "resource_usage": {
            "r1": 0.88,
            "r2": 1.34,
            "r3": 0.16,
            "r4": 0.53,
            "r5": 0.33,
            "r6": 1.42,
            "r7": 2.0,
            "r8": 2.05,
            "r9": 0.12
          },
          "min_production": 0,
          "max_production": 360,
          "demand": 210
        },
        {
          "id": "p6",
          "name": "NovaCharge 65W (USB-C fast charger)",
          "profit_per_unit": 9.8,
          "resource_usage": {
            "r1": 0.28,
            "r2": 0.46,
            "r3": 0.04,
            "r4": 0.22,
            "r5": 0.12,
            "r6": 0.28,
            "r7": 0.0,
            "r8": 0.32,
            "r9": 0.05
          },
          "min_production": 0,
          "max_production": 780,
          "demand": 380
        },
        {
          "id": "p7",
          "name": "NovaCase Armor (protective phone case)",
          "profit_per_unit": 6.4,
          "resource_usage": {
            "r1": 0.19,
            "r2": 0.31,
            "r3": 0.0,
            "r4": 0.17,
            "r5": 0.14,
            "r6": 0.0,
            "r7": 0.0,
            "r8": 0.12,
            "r9": 0.02
          },
          "min_production": 0,
          "max_production": 1300,
          "demand": 760
        },
        {
          "id": "p8",
          "name": "NovaGlass (tempered screen protector)",
          "profit_per_unit": 4.9,
          "resource_usage": {
            "r1": 0.12,
            "r2": 0.21,
            "r3": 0.0,
            "r4": 0.1,
            "r5": 0.11,
            "r6": 0.0,
            "r7": 0.0,
            "r8": 0.0,
            "r9": 0.0
          },
          "min_production": 0,
          "max_production": 1200,
          "demand": 640
        },
        {
          "id": "p9",
          "name": "NovaPack 10k (portable power bank)",
          "profit_per_unit": 5.3,
          "resource_usage": {
            "r1": 0.14,
            "r2": 0.24,
            "r3": 0.0,
            "r4": 0.11,
            "r5": 0.12,
            "r6": 0.0,
            "r7": 0.0,
            "r8": 0.0,
            "r9": 0.01
          },
          "min_production": 0,
          "max_production": 900,
          "demand": 520
        },
        {
          "id": "p10",
          "name": "NovaTag (Bluetooth tracker)",
          "profit_per_unit": 3.6,
          "resource_usage": {
            "r1": 0.0,
            "r2": 0.08,
            "r3": 0.06,
            "r4": 0.0,
            "r5": 0.09,
            "r6": 0.0,
            "r7": 0.0,
            "r8": 0.0,
            "r9": 0.0
          },
          "min_production": 0,
          "max_production": 1400,
          "demand": 900
        },
        {
          "id": "p11",
          "name": "NovaPen (active stylus)",
          "profit_per_unit": 7.1,
          "resource_usage": {
            "r1": 0.11,
            "r2": 0.38,
            "r3": 0.09,
            "r4": 0.07,
            "r5": 0.15,
            "r6": 0.0,
            "r7": 0.0,
            "r8": 0.05,
            "r9": 0.0
          },
          "min_production": 0,
          "max_production": 540,
          "demand": 260
        },
        {
          "id": "p12",
          "name": "NovaDock (tablet/phone desktop hub)",
          "profit_per_unit": 6.8,
          "resource_usage": {
            "r1": 0.1,
            "r2": 0.29,
            "r3": 0.0,
            "r4": 0.09,
            "r5": 0.13,
            "r6": 0.0,
            "r7": 0.0,
            "r8": 0.85,
            "r9": 0.0
          },
          "min_production": 0,
          "max_production": 760,
          "demand": 480
        }
      ],
      "min_total_units": null,
      "max_total_units": null
    },
    "constraints": [
      {
        "description": "Minimum weekly profit must be at least $58,500 to cover fixed overhead and promotions.",
        "_spec": {
          "fn": "min_profit",
          "args": [
            58500
          ]
        }
      },
      {
        "description": "Flagship smartphones must be at least 1.15\u00d7 value smartphones to satisfy carrier co-marketing commitments.",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p1",
            "p2",
            1.15,
            null
          ]
        }
      },
      {
        "description": "Tablets must be at least 0.70\u00d7 flagship smartphones to maintain school-contract allocations (hidden implication with other ratios).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p3",
            "p1",
            0.7,
            null
          ]
        }
      },
      {
        "description": "Smartwatches must be at least 1.10\u00d7 tablets due to pre-sold wellness program bundles (creates a ratio chain).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p4",
            "p3",
            1.1,
            null
          ]
        }
      },
      {
        "description": "If any flagship smartphones are produced, produce at least 120 units of NovaBuds Pro (bundle requirement).",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p1",
            "p5",
            120
          ]
        }
      },
      {
        "description": "If any tablets are produced, produce at least 150 active styli (education bundle requirement).",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p3",
            "p11",
            150
          ]
        }
      },
      {
        "description": "If any value smartphones are produced, produce at least 400 screen protectors (retail planogram requirement).",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p2",
            "p8",
            400
          ]
        }
      },
      {
        "description": "If any desktop hubs are produced, produce at least 200 fast chargers (pack-in program).",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p12",
            "p6",
            200
          ]
        }
      },
      {
        "description": "At least 7 distinct product types must be produced (catalog breadth requirement).",
        "_spec": {
          "fn": "minimum_variety",
          "args": [
            7
          ]
        }
      },
      {
        "description": "No single product may exceed 24% of total units shipped (prevents over-reliance on one SKU; interacts with ratio constraints).",
        "_spec": {
          "fn": "max_single_product",
          "args": [
            0.24
          ]
        }
      },
      {
        "description": "SMT Line Time usage may not exceed 86% of available capacity (maintenance buffer).",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r1",
            0.86
          ]
        }
      },
      {
        "description": "Final Assembly Labor usage may not exceed 89% of available capacity (overtime avoidance).",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r2",
            0.89
          ]
        }
      },
      {
        "description": "RF Calibration Bench usage may not exceed 83% of available capacity (calibration drift prevention).",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r3",
            0.83
          ]
        }
      },
      {
        "description": "Camera Modules usage may not exceed 84% of available capacity (supplier yield risk buffer).",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r8",
            0.84
          ]
        }
      },
      {
        "description": "NovaBuds Pro must be produced in batches of at least 30 units, or not produced at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p5",
            30
          ]
        }
      },
      {
        "description": "NovaCharge 65W must be produced in batches of at least 35 units, or not produced at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p6",
            35
          ]
        }
      },
      {
        "description": "NovaPen must be produced in batches of at least 25 units, or not produced at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p11",
            25
          ]
        }
      },
      {
        "description": "NovaDock must be produced in batches of at least 20 units, or not produced at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p12",
            20
          ]
        }
      }
    ],
    "instruction": "Maximize total profit while satisfying all resource constraints, meeting or exceeding each product\u2019s demand, and respecting all production limits and constraint interactions.",
    "analysis": {
      "anti_patterns": [
        "Greedy strategy of pushing the highest profit-per-unit SKU (NovaBuds Pro) backfires because it simultaneously consumes camera modules and near-bottleneck SMT/assembly, tightening linked-production obligations and max_single_product limits.",
        "Meeting demands exactly without considering ratio chains can force expensive overproduction of lower-margin SKUs (e.g., watch/tablet/phone chain), creating a late-stage feasibility failure under SMT/assembly percentage caps.",
        "Treating linked-production constraints as add-ons (e.g., producing tablets \u2018just a bit\u2019) can trigger large minimum accessory runs that then violate max_single_product or consume camera-module buffers.",
        "Maxing out one apparently \u2018safe\u2019 accessory (e.g., trackers) to satisfy variety can violate max_single_product due to its high demand volume and low resource usage, crowding the unit-mix denominator in a counterintuitive way."
      ],
      "strategic_insights": [
        "Model the ratio constraints as a coupled system: p1\u2192p3\u2192p4 implies a hidden lower bound on watches once flagship output is chosen; this interacts strongly with max_single_product because watches have high volumes.",
        "Use the resource-percentage caps as the true binding limits (not the raw availables): camera modules and SMT are designed to be the practical bottlenecks, so profit must be optimized by choosing which camera-heavy SKUs to overproduce.",
        "Linked-production rules are \u2018activation\u2019 constraints: sometimes it is optimal to overproduce a trigger product to make its required companion production efficient relative to min_batch and variety constraints.",
        "Because demand levels already consume <90% of every resource, the hard part is not feasibility of meeting demand\u2014it is navigating the extra constraints while keeping within the tighter percentage caps and the portfolio share limit."
      ],
      "expected_difficulty": "Expert: requires solving a tightly coupled mixed-integer linear optimization (min-batch and variety create discrete decisions) with multiple near-bottleneck percentage resource caps, ratio chains, and linked-production dependencies that create greedy traps and counterintuitive optimal overproduction."
    },
    "feasible": true,
    "solution": {
      "domain": "production_mix",
      "decisions": [
        {
          "product_id": "p1",
          "quantity": 260
        },
        {
          "product_id": "p2",
          "quantity": 180
        },
        {
          "product_id": "p3",
          "quantity": 420
        },
        {
          "product_id": "p4",
          "quantity": 520
        },
        {
          "product_id": "p5",
          "quantity": 210
        },
        {
          "product_id": "p6",
          "quantity": 380
        },
        {
          "product_id": "p7",
          "quantity": 760
        },
        {
          "product_id": "p8",
          "quantity": 1200
        },
        {
          "product_id": "p9",
          "quantity": 690
        },
        {
          "product_id": "p10",
          "quantity": 1078
        },
        {
          "product_id": "p11",
          "quantity": 260
        },
        {
          "product_id": "p12",
          "quantity": 624
        }
      ],
      "total_profit": 64695.0,
      "total_units": 6582
    }
  },
  {
    "id": "production_mix_7ef27d33",
    "difficulty": "expert",
    "scenario": {
      "domain": "production_mix",
      "description": "EverWeave Apparel Works (a mid-size textile and apparel factory) is planning next month\u2019s production across core basics and premium outerwear. The plant must meet contracted customer demand while juggling tight knit-fabric allocations, labor limits across cutting and sewing, and two shared bottlenecks: embroidery/print capacity and wash-test lab throughput for compliance. Several products have minimum batch rules (setup-heavy lines), ratio requirements driven by brand-merchandising, and linked \u201cmust-make\u201d items (labels, tote inserts, and lab lots) that quietly consume scarce resources.",
      "resources": [
        {
          "id": "r1",
          "name": "Organic cotton jersey (kg)",
          "available": 329.6,
          "unit": "kg"
        },
        {
          "id": "r2",
          "name": "Recycled polyester knit (kg)",
          "available": 599.4,
          "unit": "kg"
        },
        {
          "id": "r3",
          "name": "Merino wool (kg)",
          "available": 329.2,
          "unit": "kg"
        },
        {
          "id": "r4",
          "name": "Elastic binding tape (kg)",
          "available": 47.9,
          "unit": "kg"
        },
        {
          "id": "r5",
          "name": "Cutting room labor (hours)",
          "available": 199.6,
          "unit": "hours"
        },
        {
          "id": "r6",
          "name": "Sewing line labor (hours)",
          "available": 214.7,
          "unit": "hours"
        },
        {
          "id": "r7",
          "name": "Dye/finish machine time (hours)",
          "available": 114.2,
          "unit": "hours"
        },
        {
          "id": "r8",
          "name": "Embroidery/print machine time (hours)",
          "available": 1049.3,
          "unit": "hours"
        },
        {
          "id": "r9",
          "name": "Wash test lab time (hours)",
          "available": 519.8,
          "unit": "hours"
        }
      ],
      "products": [
        {
          "id": "p1",
          "name": "Slub Organic Crew Tee (EverWeave Basics)",
          "profit_per_unit": 12.73,
          "resource_usage": {
            "r1": 0.18,
            "r2": 0.42,
            "r3": 0.21,
            "r4": 0.0,
            "r5": 0.11,
            "r6": 0.14,
            "r7": 0.07,
            "r8": 1.34,
            "r9": 0.0
          },
          "min_production": 180,
          "max_production": 420,
          "demand": 180
        },
        {
          "id": "p2",
          "name": "Recycled Performance Tank (Heatwick Line)",
          "profit_per_unit": 14.18,
          "resource_usage": {
            "r1": 0.44,
            "r2": 0.96,
            "r3": 0.38,
            "r4": 0.05,
            "r5": 0.22,
            "r6": 0.26,
            "r7": 0.12,
            "r8": 0.18,
            "r9": 2.15
          },
          "min_production": 110,
          "max_production": 260,
          "demand": 110
        },
        {
          "id": "p3",
          "name": "Merino Baselayer Top (TrailWarm)",
          "profit_per_unit": 23.64,
          "resource_usage": {
            "r1": 0.62,
            "r2": 1.28,
            "r3": 0.55,
            "r4": 0.08,
            "r5": 0.31,
            "r6": 0.34,
            "r7": 0.17,
            "r8": 2.48,
            "r9": 0.0
          },
          "min_production": 70,
          "max_production": 160,
          "demand": 70
        },
        {
          "id": "p4",
          "name": "Canvas Utility Jacket (Workloom Outerwear)",
          "profit_per_unit": 41.92,
          "resource_usage": {
            "r1": 0.27,
            "r2": 0.58,
            "r3": 0.49,
            "r4": 0.0,
            "r5": 0.18,
            "r6": 0.16,
            "r7": 0.09,
            "r8": 1.12,
            "r9": 0.0
          },
          "min_production": 140,
          "max_production": 300,
          "demand": 140
        },
        {
          "id": "p5",
          "name": "Stretch Chino Shorts (CityWeft)",
          "profit_per_unit": 18.27,
          "resource_usage": {
            "r1": 0.15,
            "r2": 0.22,
            "r3": 0.06,
            "r4": 0.02,
            "r5": 0.24,
            "r6": 0.19,
            "r7": 0.06,
            "r8": 0.38,
            "r9": 0.0
          },
          "min_production": 60,
          "max_production": 180,
          "demand": 60
        },
        {
          "id": "p6",
          "name": "Fleece Jogger (SoftLoop)",
          "profit_per_unit": 22.15,
          "resource_usage": {
            "r1": 0.2,
            "r2": 0.46,
            "r3": 0.14,
            "r4": 0.03,
            "r5": 0.07,
            "r6": 0.11,
            "r7": 0.05,
            "r8": 0.92,
            "r9": 0.0
          },
          "min_production": 110,
          "max_production": 260,
          "demand": 110
        },
        {
          "id": "p7",
          "name": "Heavy Canvas Tote Bag (Retail Add-on)",
          "profit_per_unit": 6.34,
          "resource_usage": {
            "r1": 0.05,
            "r2": 0.08,
            "r3": 0.0,
            "r4": 0.29,
            "r5": 0.04,
            "r6": 0.03,
            "r7": 0.02,
            "r8": 0.09,
            "r9": 0.0
          },
          "min_production": 45,
          "max_production": 150,
          "demand": 45
        },
        {
          "id": "p8",
          "name": "Woven Care Label Pack (Compliance Component)",
          "profit_per_unit": 0.88,
          "resource_usage": {
            "r1": 0.1,
            "r2": 0.24,
            "r3": 0.18,
            "r4": 0.01,
            "r5": 0.09,
            "r6": 0.08,
            "r7": 0.04,
            "r8": 0.44,
            "r9": 0.0
          },
          "min_production": 20,
          "max_production": 200,
          "demand": 20
        },
        {
          "id": "p9",
          "name": "Embroidered Pullover Hoodie (Studio Stitch)",
          "profit_per_unit": 28.46,
          "resource_usage": {
            "r1": 0.91,
            "r2": 1.84,
            "r3": 0.72,
            "r4": 0.14,
            "r5": 0.28,
            "r6": 0.46,
            "r7": 0.24,
            "r8": 0.22,
            "r9": 3.05
          },
          "min_production": 45,
          "max_production": 140,
          "demand": 45
        },
        {
          "id": "p10",
          "name": "Limited-Run Logo Scarf (Influencer Capsule)",
          "profit_per_unit": 57.31,
          "resource_usage": {
            "r1": 0.48,
            "r2": 0.88,
            "r3": 0.36,
            "r4": 0.06,
            "r5": 0.19,
            "r6": 0.27,
            "r7": 0.13,
            "r8": 1.58,
            "r9": 0.0
          },
          "min_production": 0,
          "max_production": 90,
          "demand": 0
        },
        {
          "id": "p11",
          "name": "Heat-Seal Hem Tape Roll (Internal Trims)",
          "profit_per_unit": 1.12,
          "resource_usage": {
            "r1": 0.16,
            "r2": 0.31,
            "r3": 0.26,
            "r4": 0.0,
            "r5": 0.13,
            "r6": 0.1,
            "r7": 0.05,
            "r8": 0.68,
            "r9": 0.0
          },
          "min_production": 35,
          "max_production": 200,
          "demand": 35
        },
        {
          "id": "p12",
          "name": "Wash-Test Certification Lot (QA/Compliance Runs)",
          "profit_per_unit": 4.26,
          "resource_usage": {
            "r1": 0.0,
            "r2": 0.0,
            "r3": 0.0,
            "r4": 0.0,
            "r5": 0.02,
            "r6": 0.0,
            "r7": 0.03,
            "r8": 0.0,
            "r9": 3.85
          },
          "min_production": 20,
          "max_production": 120,
          "demand": 20
        }
      ],
      "min_total_units": null,
      "max_total_units": null
    },
    "constraints": [
      {
        "description": "Achieve at least $16,000.00 total profit to cover fixed overhead and retailer chargebacks buffer.",
        "_spec": {
          "fn": "min_profit",
          "args": [
            16000
          ]
        }
      },
      {
        "description": "To keep the core assortment balanced, Slub Organic Crew Tee (p1) units must be between 1.45\u00d7 and 1.85\u00d7 Performance Tank (p2) units.",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p1",
            "p2",
            1.45,
            1.85
          ]
        }
      },
      {
        "description": "Retailers require enough tanks relative to merino: Performance Tank (p2) must be at least 1.35\u00d7 Merino Baselayer Top (p3).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p2",
            "p3",
            1.35,
            null
          ]
        }
      },
      {
        "description": "Outerwear merchandising constraint: Canvas Utility Jacket (p4) must be at least 1.75\u00d7 Merino Baselayer Top (p3).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p4",
            "p3",
            1.75,
            null
          ]
        }
      },
      {
        "description": "Athleisure mix constraint: Fleece Jogger (p6) must be between 1.55\u00d7 and 2.40\u00d7 Stretch Chino Shorts (p5).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p6",
            "p5",
            1.55,
            2.4
          ]
        }
      },
      {
        "description": "If producing tees (p1), the compliance line must also produce at least 20 Woven Care Label Packs (p8) for labeling runs.",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p1",
            "p8",
            20
          ]
        }
      },
      {
        "description": "If producing Canvas Utility Jackets (p4), QA must run at least 18 Wash-Test Certification Lots (p12) for wash/abrasion compliance sign-off.",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p4",
            "p12",
            18
          ]
        }
      },
      {
        "description": "If producing Embroidered Hoodies (p9), the factory must also produce at least 40 Heavy Canvas Tote Bags (p7) because the hoodie program includes a bundled retail add-on.",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p9",
            "p7",
            40
          ]
        }
      },
      {
        "description": "To maintain catalog breadth across channels, produce at least 10 different product types (counting a product if its quantity > 0).",
        "_spec": {
          "fn": "minimum_variety",
          "args": [
            10
          ]
        }
      },
      {
        "description": "To avoid over-dependence on one SKU, no single product may exceed 26% of total units produced.",
        "_spec": {
          "fn": "max_single_product",
          "args": [
            0.26
          ]
        }
      },
      {
        "description": "Recycled polyester knit (r2) allocation cap: use at most 88% of available r2 capacity.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r2",
            0.88
          ]
        }
      },
      {
        "description": "Embroidery/print time (r8) preventive-maintenance cap: use at most 82% of available r8 capacity.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r8",
            0.82
          ]
        }
      },
      {
        "description": "Wash test lab time (r9) throughput cap: use at most 88% of available r9 capacity.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r9",
            0.88
          ]
        }
      },
      {
        "description": "Tote bag line setup rule: Heavy Canvas Tote Bags (p7) must be produced in batches of at least 40 units, or not produced at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p7",
            40
          ]
        }
      },
      {
        "description": "Label loom setup rule: Woven Care Label Packs (p8) must be produced in batches of at least 20 packs, or not produced at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p8",
            20
          ]
        }
      },
      {
        "description": "Hoodie program setup rule: Embroidered Pullover Hoodies (p9) must be produced in batches of at least 30 units, or not produced at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p9",
            30
          ]
        }
      },
      {
        "description": "QA batching rule: Wash-Test Certification Lots (p12) must be run in batches of at least 20 lots, or not produced at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p12",
            20
          ]
        }
      }
    ],
    "instruction": "Maximize total profit while satisfying all resource capacity limits, meeting each product\u2019s demand/minimum production requirement, respecting maximum production limits, and complying with every listed constraint.",
    "analysis": {
      "anti_patterns": [
        "Greedy allocation to the highest profit-per-unit item (e.g., the influencer scarf p10) can prematurely consume the r8 embroidery/print cap, forcing cuts in required demand items that indirectly support ratio and linked-production feasibility.",
        "Chasing the obvious high-margin outerwear (p4) can backfire because the p4-to-p3 ratio quietly forces additional merino-heavy, embroidery-heavy baselayers (p3), which then collide with the r2 and r8 usage caps.",
        "Ignoring linked-production constraints leads to hidden feasibility breaks: producing p9 without reserving capacity for the mandatory p7 tote batch causes a late-stage violation that cascades into max_single_product and minimum_variety compliance issues.",
        "Optimizing by concentrating volume in one \u2018efficient\u2019 SKU violates max_single_product and can force compensating production in low-margin items, reducing the expected profit outcome."
      ],
      "strategic_insights": [
        "Treat r2 (recycled poly), r8 (embroidery/print), and r9 (wash lab) as the true coupled bottlenecks; the max_resource_usage caps make them binding well before the nominal resource availability is reached.",
        "Use the ratio constraints as a chain: p1/p2 and p2/p3 imply a hidden lower bound on p1/p3, so increasing p1 often forces p3 (and therefore r3 and r8 usage) even if p3\u2019s standalone economics look weaker.",
        "Plan around the linked items early: p1\u2192p8 and p4\u2192p12 and p9\u2192p7 mean profitable \u2018trigger\u2019 SKUs come with bundled capacity commitments that are easy to underestimate.",
        "Batch constraints make small adjustments expensive: trying to \u2018just add a few\u2019 units of p9 or p7 can require large step changes that ripple into max_single_product and capped resources."
      ],
      "expected_difficulty": "Expert: multiple near-bottleneck resources with explicit percentage caps, interlocking ratio constraints with hidden transitive implications, and linked/batch constraints that create stepwise, non-greedy feasible regions."
    },
    "feasible": true,
    "solution": {
      "domain": "production_mix",
      "decisions": [
        {
          "product_id": "p1",
          "quantity": 180
        },
        {
          "product_id": "p2",
          "quantity": 110
        },
        {
          "product_id": "p3",
          "quantity": 70
        },
        {
          "product_id": "p4",
          "quantity": 147
        },
        {
          "product_id": "p5",
          "quantity": 70
        },
        {
          "product_id": "p6",
          "quantity": 110
        },
        {
          "product_id": "p7",
          "quantity": 87
        },
        {
          "product_id": "p8",
          "quantity": 20
        },
        {
          "product_id": "p9",
          "quantity": 45
        },
        {
          "product_id": "p11",
          "quantity": 35
        },
        {
          "product_id": "p12",
          "quantity": 21
        }
      ],
      "total_profit": 17362.18,
      "total_units": 895
    }
  },
  {
    "id": "production_mix_5ec154a7",
    "difficulty": "expert",
    "scenario": {
      "domain": "production_mix",
      "description": "Riverbend Ferments & Beverages Co. (a food & beverage processing plant) must plan next week\u2019s production across fermented kombuchas, RTD oat beverages, craft sodas, and private\u2011label waters. The plant shares a single bottling/canning hall, limited fermentation vessels, a tight organic-ingredient allocation, and a constrained fruit-puree supply. Several products require allergen-controlled sanitation and/or trigger companion SKUs (e.g., label commitments and flavor-line changeovers).",
      "resources": [
        {
          "id": "r1",
          "name": "Packaging & Line Labor",
          "available": 385.0,
          "unit": "labor-hours"
        },
        {
          "id": "r2",
          "name": "Fermentation Tank Capacity",
          "available": 310.0,
          "unit": "tank-hours"
        },
        {
          "id": "r3",
          "name": "Bottling & Capping Line Time",
          "available": 385.0,
          "unit": "line-hours"
        },
        {
          "id": "r4",
          "name": "Pasteurizer Tunnel Time",
          "available": 170.0,
          "unit": "tunnel-hours"
        },
        {
          "id": "r5",
          "name": "QA Lab Technician Time",
          "available": 130.0,
          "unit": "lab-hours"
        },
        {
          "id": "r6",
          "name": "Cold Storage Space",
          "available": 330.0,
          "unit": "pallet-slot-days"
        },
        {
          "id": "r7",
          "name": "Allergen-Control Sanitation Time",
          "available": 90.0,
          "unit": "sanitation-hours"
        },
        {
          "id": "r8",
          "name": "Organic-Certified Ingredients",
          "available": 18000.0,
          "unit": "kg"
        },
        {
          "id": "r9",
          "name": "Specialty Fruit Puree",
          "available": 900.0,
          "unit": "kg"
        },
        {
          "id": "r10",
          "name": "Can-End Inventory",
          "available": 100.0,
          "unit": "thousand ends"
        }
      ],
      "products": [
        {
          "id": "p1",
          "name": "Hoppy Citrus Kombucha (16oz cans, case-equiv.)",
          "profit_per_unit": 18.73,
          "resource_usage": {
            "r1": 0.62,
            "r3": 0.48,
            "r5": 0.11,
            "r6": 0.36,
            "r7": 0.07,
            "r8": 24.0,
            "r10": 0.091
          },
          "min_production": 170,
          "max_production": 260,
          "demand": 170
        },
        {
          "id": "p2",
          "name": "Dry Ginger Hard Kombucha (12oz cans, case-equiv.)",
          "profit_per_unit": 32.41,
          "resource_usage": {
            "r1": 0.12,
            "r2": 2.85,
            "r3": 0.52,
            "r4": 0.08,
            "r5": 0.14,
            "r6": 0.41,
            "r7": 0.09,
            "r8": 24.0,
            "r9": 3.57,
            "r10": 0.073
          },
          "min_production": 80,
          "max_production": 140,
          "demand": 80
        },
        {
          "id": "p3",
          "name": "Probiotic Beet Kvass (12oz bottles, case-equiv.)",
          "profit_per_unit": 21.86,
          "resource_usage": {
            "r1": 0.74,
            "r3": 0.55,
            "r4": 0.22,
            "r5": 0.16,
            "r6": 0.44,
            "r7": 0.1,
            "r8": 24.0,
            "r9": 1.13,
            "r10": 0.101
          },
          "min_production": 40,
          "max_production": 95,
          "demand": 40
        },
        {
          "id": "p4",
          "name": "Cold-Brew Oat Latte (12oz bottles, case-equiv.)",
          "profit_per_unit": 14.57,
          "resource_usage": {
            "r1": 0.66,
            "r3": 0.39,
            "r4": 0.61,
            "r5": 0.18,
            "r6": 0.47,
            "r7": 0.11,
            "r8": 12.0,
            "r9": 0.34,
            "r10": 0.118
          },
          "min_production": 55,
          "max_production": 120,
          "demand": 55
        },
        {
          "id": "p5",
          "name": "Chocolate Oat Shake (12oz bottles, case-equiv.)",
          "profit_per_unit": 16.12,
          "resource_usage": {
            "r1": 0.58,
            "r3": 0.41,
            "r4": 0.54,
            "r5": 0.17,
            "r6": 0.45,
            "r7": 0.1,
            "r8": 12.0,
            "r9": 0.92,
            "r10": 0.109
          },
          "min_production": 35,
          "max_production": 90,
          "demand": 35
        },
        {
          "id": "p6",
          "name": "Private-Label Sparkling Water (12oz cans, case-equiv.)",
          "profit_per_unit": 12.98,
          "resource_usage": {
            "r1": 0.05,
            "r3": 0.46,
            "r4": 0.02,
            "r5": 0.1,
            "r6": 0.29,
            "r7": 0.05,
            "r8": 24.0,
            "r10": 0.061
          },
          "min_production": 100,
          "max_production": 260,
          "demand": 100
        },
        {
          "id": "p7",
          "name": "Almond-Oat Barista Blend (32oz cartons, case-equiv.)",
          "profit_per_unit": 19.44,
          "resource_usage": {
            "r1": 0.81,
            "r3": 0.57,
            "r4": 0.33,
            "r5": 0.19,
            "r6": 0.52,
            "r7": 0.12,
            "r8": 24.0,
            "r9": 2.27,
            "r10": 0.129
          },
          "min_production": 30,
          "max_production": 90,
          "demand": 30
        },
        {
          "id": "p8",
          "name": "Organic Lemonade Concentrate (gallon jugs, case-equiv.)",
          "profit_per_unit": 27.63,
          "resource_usage": {
            "r1": 0.88,
            "r3": 0.6,
            "r4": 0.37,
            "r5": 0.2,
            "r6": 0.56,
            "r7": 0.13,
            "r8": 24.0,
            "r9": 1.68,
            "r10": 0.142
          },
          "min_production": 25,
          "max_production": 80,
          "demand": 25
        },
        {
          "id": "p9",
          "name": "Elderflower Soda (12oz cans, case-equiv.)",
          "profit_per_unit": 22.91,
          "resource_usage": {
            "r1": 0.09,
            "r2": 1.45,
            "r3": 0.28,
            "r4": 0.49,
            "r5": 0.13,
            "r6": 0.38,
            "r7": 0.12,
            "r8": 24.0,
            "r9": 0.24,
            "r10": 0.083
          },
          "min_production": 20,
          "max_production": 70,
          "demand": 20
        },
        {
          "id": "p10",
          "name": "Cucumber Mint Still Water (16oz bottles, case-equiv.)",
          "profit_per_unit": 10.87,
          "resource_usage": {
            "r1": 0.42,
            "r3": 0.33,
            "r4": 0.46,
            "r5": 0.15,
            "r6": 0.4,
            "r7": 0.09,
            "r8": 12.0,
            "r9": 0.63,
            "r10": 0.097
          },
          "min_production": 60,
          "max_production": 180,
          "demand": 60
        },
        {
          "id": "p11",
          "name": "Mango Lassi Smoothie (12oz bottles, case-equiv.)",
          "profit_per_unit": 25.38,
          "resource_usage": {
            "r1": 0.79,
            "r3": 0.53,
            "r4": 0.18,
            "r5": 0.17,
            "r6": 0.46,
            "r7": 0.1,
            "r8": 24.0,
            "r9": 2.86,
            "r10": 0.094
          },
          "min_production": 28,
          "max_production": 85,
          "demand": 28
        }
      ],
      "min_total_units": null,
      "max_total_units": null
    },
    "constraints": [
      {
        "description": "Meet minimum contribution profit to cover weekly fixed overhead and co-packer standby fees.",
        "_spec": {
          "fn": "min_profit",
          "args": [
            11000
          ]
        }
      },
      {
        "description": "Maintain catalog breadth: at least 9 distinct SKUs must be produced this week (retail planogram requirement).",
        "_spec": {
          "fn": "minimum_variety",
          "args": [
            9
          ]
        }
      },
      {
        "description": "Avoid over-concentration risk: no single SKU may exceed 29% of total output (retailer allocation rule).",
        "_spec": {
          "fn": "max_single_product",
          "args": [
            0.29
          ]
        }
      },
      {
        "description": "Fermentation is a bottleneck: limit total fermentation tank-hours used to at most 84% of capacity (to preserve cleaning/turn time).",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r2",
            0.84
          ]
        }
      },
      {
        "description": "Bottling/capping line is constrained by a maintenance window: limit to at most 79% of available line-hours.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r3",
            0.79
          ]
        }
      },
      {
        "description": "Organic allocation from suppliers is capped mid-week: limit organic-certified ingredient usage to at most 77% of available kg.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r8",
            0.77
          ]
        }
      },
      {
        "description": "Fruit puree procurement is tight: limit total fruit puree usage to at most 70% of available kg.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r9",
            0.7
          ]
        }
      },
      {
        "description": "Brand balance rule: Hoppy Citrus Kombucha output must be between 2.5\u00d7 and 3.2\u00d7 Cucumber Mint Still Water output (sales mix commitment).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p1",
            "p10",
            2.5,
            3.2
          ]
        }
      },
      {
        "description": "Oat-beverage mix rule: Cold-Brew Oat Latte output must be between 1.4\u00d7 and 1.9\u00d7 Chocolate Oat Shake output (promo bundle ratios).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p4",
            "p5",
            1.4,
            1.9
          ]
        }
      },
      {
        "description": "Fermented line consistency: Dry Ginger Hard Kombucha output must be between 1.7\u00d7 and 2.2\u00d7 Probiotic Beet Kvass output (fermentation scheduling constraint).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p2",
            "p3",
            1.7,
            2.2
          ]
        }
      },
      {
        "description": "Smoothie-to-concentrate balance: Mango Lassi Smoothie output must be between 0.9\u00d7 and 1.4\u00d7 Organic Lemonade Concentrate output (fruit program balancing).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p11",
            "p8",
            0.9,
            1.4
          ]
        }
      },
      {
        "description": "Line-change dependency: if producing Hoppy Citrus Kombucha, Riverbend must also produce at least 60 cases of Cucumber Mint Still Water (shared capper calibration lot).",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p1",
            "p10",
            60
          ]
        }
      },
      {
        "description": "Contractual coupling: if producing Dry Ginger Hard Kombucha, must also produce at least 20 cases of Elderflower Soda (shared co-branded run).",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p2",
            "p9",
            20
          ]
        }
      },
      {
        "description": "Allergen cleanup sequencing: if producing Almond-Oat Barista Blend, must also produce at least 35 cases of Chocolate Oat Shake (single allergen sanitation cycle economics).",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p7",
            "p5",
            35
          ]
        }
      },
      {
        "description": "Hard kombucha requires meaningful runs: produce Dry Ginger Hard Kombucha in batches of at least 30 cases, or not at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p2",
            30
          ]
        }
      },
      {
        "description": "Carton filler setup economics: produce Almond-Oat Barista Blend in batches of at least 25 cases, or not at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p7",
            25
          ]
        }
      },
      {
        "description": "Concentrate kettle scheduling: produce Organic Lemonade Concentrate in batches of at least 20 cases, or not at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p8",
            20
          ]
        }
      },
      {
        "description": "Smoothie line changeover: produce Mango Lassi Smoothie in batches of at least 20 cases, or not at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p11",
            20
          ]
        }
      }
    ],
    "instruction": "Maximize total profit while satisfying all resource constraints, meeting demand requirements, respecting production min/max limits, and complying with the additional mix, linkage, batching, and capacity-percentage constraints.",
    "analysis": {
      "anti_patterns": [
        "Greedy allocation to the highest per-unit-profit fermented SKU (p2) quickly hits the fermentation cap (r2) and also forces companion production (p9) that consumes fruit puree (r9), creating a dead end.",
        "Overproducing the seemingly \u2018resource-light\u2019 private-label sparkling water (p6) can violate max_single_product and silently crowd out higher-margin items via shared bottling/capping time (r3) under a tight percentage cap.",
        "Treating ratio constraints independently fails: increasing p2 to chase profit may require increasing p3 (ratio), which then pressures r3 and r9, and can indirectly limit p11/p8 choices due to shared puree limits."
      ],
      "strategic_insights": [
        "Identify the true binding constraints as the *percentage-capped* bottlenecks (not raw availability): r2 fermentation and r3 bottling time become effectively tight ceilings.",
        "Exploit products with good profit-to-bottling-time and low fruit usage to grow profit without triggering the strongest coupling constraints (especially when r9 is near its cap).",
        "Use ratio constraints to your advantage: sometimes increasing a lower-margin denominator product (e.g., p10 or p3) can unlock feasible increases in a higher-margin numerator product without breaching caps elsewhere."
      ],
      "expected_difficulty": "Expert: requires multi-bottleneck reasoning with percentage caps, chained ratio implications, batch/variety restrictions, and linked-production dependencies that create non-obvious feasible regions where greedy heuristics fail."
    },
    "feasible": true,
    "solution": {
      "domain": "production_mix",
      "decisions": [
        {
          "product_id": "p1",
          "quantity": 170
        },
        {
          "product_id": "p2",
          "quantity": 80
        },
        {
          "product_id": "p3",
          "quantity": 40
        },
        {
          "product_id": "p4",
          "quantity": 55
        },
        {
          "product_id": "p5",
          "quantity": 35
        },
        {
          "product_id": "p6",
          "quantity": 100
        },
        {
          "product_id": "p7",
          "quantity": 30
        },
        {
          "product_id": "p8",
          "quantity": 31
        },
        {
          "product_id": "p9",
          "quantity": 22
        },
        {
          "product_id": "p10",
          "quantity": 60
        },
        {
          "product_id": "p11",
          "quantity": 29
        }
      ],
      "total_profit": 12646.820000000002,
      "total_units": 652
    }
  },
  {
    "id": "production_mix_7b221b93",
    "difficulty": "expert",
    "scenario": {
      "domain": "production_mix",
      "description": "PrairieForge Ag Systems (a mid-size agricultural equipment manufacturing plant in Wichita, KS) is planning next month\u2019s production across fabricated steel components, hydraulic subassemblies, and precision-machined parts for OEM tractor/implement customers. The plant must meet contractual demand, respect batch/changeover realities, and avoid overloading bottleneck resources (heat treat and electronics modules).",
      "resources": [
        {
          "id": "r1",
          "name": "CNC Machining Time",
          "available": 471.5,
          "unit": "hours"
        },
        {
          "id": "r2",
          "name": "Robotic Weld Cell Time",
          "available": 143.7,
          "unit": "hours"
        },
        {
          "id": "r3",
          "name": "Heat-Treat Furnace Time",
          "available": 178.4,
          "unit": "hours"
        },
        {
          "id": "r4",
          "name": "Powder-Coat Booth Time",
          "available": 26.3,
          "unit": "hours"
        },
        {
          "id": "r5",
          "name": "Final Assembly Labor",
          "available": 126.8,
          "unit": "hours"
        },
        {
          "id": "r6",
          "name": "HSLA Steel Stock",
          "available": 664.2,
          "unit": "kg"
        },
        {
          "id": "r7",
          "name": "Hydraulic Component Kits",
          "available": 112.6,
          "unit": "kits"
        },
        {
          "id": "r8",
          "name": "Tire/Wheel Set Pairs",
          "available": 18.9,
          "unit": "pairs"
        },
        {
          "id": "r9",
          "name": "Electronics/Telematics Modules",
          "available": 46.2,
          "unit": "modules"
        },
        {
          "id": "r10",
          "name": "Crating & Packaging Volume",
          "available": 152.7,
          "unit": "m^3"
        }
      ],
      "products": [
        {
          "id": "p1",
          "name": "FieldPro Quick-Hitch Frame",
          "profit_per_unit": 84.73,
          "resource_usage": {
            "r1": 1.65,
            "r2": 0.55,
            "r3": 1.2,
            "r5": 0.6,
            "r6": 2.1,
            "r7": 0.18,
            "r9": 0.02,
            "r10": 0.38
          },
          "min_production": 0,
          "max_production": 140,
          "demand": 65
        },
        {
          "id": "p2",
          "name": "TerraGrip Loader Mount Bracket Set",
          "profit_per_unit": 61.28,
          "resource_usage": {
            "r1": 0.95,
            "r5": 0.18,
            "r6": 1.55,
            "r7": 0.22,
            "r9": 0.03,
            "r10": 0.22
          },
          "min_production": 0,
          "max_production": 180,
          "demand": 80
        },
        {
          "id": "p3",
          "name": "Hardpan Cultivator Shank (Forged)",
          "profit_per_unit": 132.41,
          "resource_usage": {
            "r1": 2.8,
            "r4": 0.55,
            "r6": 0.75,
            "r7": 0.25,
            "r9": 0.0005,
            "r10": 0.52
          },
          "min_production": 0,
          "max_production": 60,
          "demand": 18
        },
        {
          "id": "p4",
          "name": "RowMaster Planter Marker Arm",
          "profit_per_unit": 74.56,
          "resource_usage": {
            "r1": 2.35,
            "r6": 0.4,
            "r7": 0.3,
            "r9": 0.01,
            "r10": 0.28
          },
          "min_production": 0,
          "max_production": 130,
          "demand": 45
        },
        {
          "id": "p5",
          "name": "AgriBolt Fastener Kit (Bulk)",
          "profit_per_unit": 18.37,
          "resource_usage": {
            "r1": 0.28,
            "r5": 0.05,
            "r6": 0.35,
            "r7": 0.08,
            "r10": 0.05
          },
          "min_production": 0,
          "max_production": 520,
          "demand": 240
        },
        {
          "id": "p6",
          "name": "HydraFlex Valve Manifold",
          "profit_per_unit": 96.15,
          "resource_usage": {
            "r4": 0.25,
            "r5": 0.12,
            "r6": 0.06,
            "r7": 0.05,
            "r8": 0.4,
            "r9": 0.04,
            "r10": 0.25
          },
          "min_production": 0,
          "max_production": 90,
          "demand": 36
        },
        {
          "id": "p7",
          "name": "Driveline Guard Assembly",
          "profit_per_unit": 69.92,
          "resource_usage": {
            "r2": 0.8,
            "r3": 1.05,
            "r5": 0.33,
            "r6": 0.5,
            "r7": 0.12,
            "r10": 0.25
          },
          "min_production": 0,
          "max_production": 120,
          "demand": 70
        },
        {
          "id": "p8",
          "name": "TrailTough Wheel Hub (Machined)",
          "profit_per_unit": 41.63,
          "resource_usage": {
            "r2": 0.22,
            "r5": 0.1,
            "r6": 0.65,
            "r7": 0.06,
            "r9": 0.05,
            "r10": 0.1
          },
          "min_production": 0,
          "max_production": 240,
          "demand": 140
        },
        {
          "id": "p9",
          "name": "Canopy Light & Telematics Harness",
          "profit_per_unit": 29.84,
          "resource_usage": {
            "r6": 0.3,
            "r7": 0.04,
            "r9": 0.1175,
            "r10": 0.0566
          },
          "min_production": 0,
          "max_production": 340,
          "demand": 200
        },
        {
          "id": "p10",
          "name": "SoilSense Sensor Pod",
          "profit_per_unit": 57.11,
          "resource_usage": {
            "r1": 0.12,
            "r5": 0.06,
            "r6": 0.12,
            "r7": 0.02,
            "r9": 0.18,
            "r10": 0.08
          },
          "min_production": 0,
          "max_production": 85,
          "demand": 0
        },
        {
          "id": "p11",
          "name": "PTO Shaft Adapter Sleeve",
          "profit_per_unit": 22.49,
          "resource_usage": {
            "r1": 0.22,
            "r5": 0.03,
            "r6": 0.08,
            "r7": 0.01,
            "r9": 0.002,
            "r10": 0.04
          },
          "min_production": 0,
          "max_production": 160,
          "demand": 0
        }
      ],
      "min_total_units": null,
      "max_total_units": null
    },
    "constraints": [
      {
        "description": "Achieve at least $43,500 total contribution profit to cover fixed plant overhead and OEM penalty reserves",
        "_spec": {
          "fn": "min_profit",
          "args": [
            43500
          ]
        }
      },
      {
        "description": "Produce the full catalog breadth: at least 11 different product types must be produced (forces inclusion of optional kits)",
        "_spec": {
          "fn": "minimum_variety",
          "args": [
            11
          ]
        }
      },
      {
        "description": "No single product may exceed 33% of total units (prevents solving by flooding low-complexity fastener kits)",
        "_spec": {
          "fn": "max_single_product",
          "args": [
            0.33
          ]
        }
      },
      {
        "description": "Quick-Hitch Frames must be run in minimum batches of 30 units (setup/jig qualification)",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p1",
            30
          ]
        }
      },
      {
        "description": "Cultivator Shanks must be run in minimum batches of 18 units (forge die warm-up)",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p3",
            18
          ]
        }
      },
      {
        "description": "Valve Manifolds must be run in minimum batches of 24 units (hydraulic test stand changeover)",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p6",
            24
          ]
        }
      },
      {
        "description": "Wheel Hubs must be run in minimum batches of 35 units (tooling offset validation)",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p8",
            35
          ]
        }
      },
      {
        "description": "SoilSense Sensor Pods must be run in minimum batches of 15 units (firmware flashing station setup)",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p10",
            15
          ]
        }
      },
      {
        "description": "PTO Adapter Sleeves must be run in minimum batches of 20 units (broach fixture setup)",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p11",
            20
          ]
        }
      },
      {
        "description": "Loader Mount Bracket Sets must stay tightly coupled to Marker Arms: p2/p4 between 1.65 and 2.05 (OEM kitting rules)",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p2",
            "p4",
            1.65,
            2.05
          ]
        }
      },
      {
        "description": "Wheel Hubs must track Driveline Guards: p8/p7 between 1.85 and 2.25 (shared shipment bundles)",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p8",
            "p7",
            1.85,
            2.25
          ]
        }
      },
      {
        "description": "PTO Adapter Sleeves must remain proportional to Telematics Harnesses: p11/p9 between 0.085 and 0.14 (field retrofit bundle policy)",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p11",
            "p9",
            0.085,
            0.14
          ]
        }
      },
      {
        "description": "If PTO Adapter Sleeves (p11) are produced, at least 50 Marker Arms (p4) must be produced (compliance labeling bundled on same line)",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p11",
            "p4",
            50
          ]
        }
      },
      {
        "description": "If Quick-Hitch Frames (p1) are produced, at least 70 Driveline Guards (p7) must be produced (dealer program requires guard bundle)",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p1",
            "p7",
            70
          ]
        }
      },
      {
        "description": "If Telematics Harnesses (p9) are produced, at least 15 SoilSense Sensor Pods (p10) must be produced (complete \u2018Connected Implements\u2019 kit)",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p9",
            "p10",
            15
          ]
        }
      },
      {
        "description": "Heat-treat furnace utilization may not exceed 94% due to a planned preventive-maintenance window",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r3",
            0.94
          ]
        }
      },
      {
        "description": "Electronics/telematics modules utilization may not exceed 92% due to supplier allocation limits",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r9",
            0.92
          ]
        }
      },
      {
        "description": "HSLA steel utilization may not exceed 97% to preserve safety stock for scrap/rework variability",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r6",
            0.97
          ]
        }
      }
    ],
    "instruction": "Maximize total profit while satisfying all resource constraints, meeting each product\u2019s demand, and respecting min/max production limits and all listed constraints.",
    "analysis": {
      "anti_patterns": [
        "Greedy \u2018make more fastener kits (p5)\u2019 to raise profit quickly can violate max_single_product and consume CNC/steel slack needed to satisfy ratio/linked constraints.",
        "Greedy \u2018expand telematics harnesses (p9) because they look steel-light\u2019 can hit the electronics module cap (r9) and then cascade into needing more PTO sleeves (p11) due to the p11/p9 ratio\u2014consuming CNC time (r1).",
        "Treating the p11\u2192p4 link as independent of the p2/p4 ratio is a trap: forcing p4 upward can silently force p2 upward, tightening CNC capacity and shifting the best profit mix."
      ],
      "strategic_insights": [
        "Work from the binding caps backward: r9 (electronics) and r3 (heat treat) restrict which products can be used to satisfy min_profit, so profit must be achieved with a balanced mix rather than a single \u2018hero\u2019 product.",
        "Use the ratio windows as \u2018rails\u2019 for expansion: increasing p4 to satisfy the p11 link requires a coordinated increase in p2 to stay within the p2/p4 band.",
        "Because minimum_variety=11 forces all products, the real optimization is choosing which demanded items to overproduce to hit min_profit without breaking r9 and without violating max_single_product."
      ],
      "expected_difficulty": "Expert: requires multi-resource reasoning with tight ratio windows, forced-production cascades from linked constraints, batch-size discontinuities, and at least two near-bottleneck resources at baseline demand."
    },
    "feasible": true,
    "solution": {
      "domain": "production_mix",
      "decisions": [
        {
          "product_id": "p1",
          "quantity": 65
        },
        {
          "product_id": "p2",
          "quantity": 83
        },
        {
          "product_id": "p3",
          "quantity": 25
        },
        {
          "product_id": "p4",
          "quantity": 50
        },
        {
          "product_id": "p5",
          "quantity": 319
        },
        {
          "product_id": "p6",
          "quantity": 47
        },
        {
          "product_id": "p7",
          "quantity": 84
        },
        {
          "product_id": "p8",
          "quantity": 183
        },
        {
          "product_id": "p9",
          "quantity": 200
        },
        {
          "product_id": "p10",
          "quantity": 20
        },
        {
          "product_id": "p11",
          "quantity": 28
        }
      ],
      "total_profit": 49242.51,
      "total_units": 1104
    }
  },
  {
    "id": "production_mix_03c8cb69",
    "difficulty": "expert",
    "scenario": {
      "domain": "production_mix",
      "description": "HelixNova Therapeutics operates an FDA-regulated pharmaceutical drug manufacturing facility running parallel campaigns across aseptic injectables, oral solid dose (OSD), and liquid dosage forms. Each product consumes a different mix of aseptic suite time, lyophilizer time, QC analytical capacity, packaging, and validation documentation hours. Management must choose a production mix that meets contract demand commitments while maximizing profit under tight GMP bottlenecks and coupling constraints (ratios, linked lots, and minimum campaign batch sizes).",
      "resources": [
        {
          "id": "r1",
          "name": "Aseptic Compounding Cleanroom Hours (ISO 5/7)",
          "available": 351.2,
          "unit": "hours"
        },
        {
          "id": "r2",
          "name": "Lyophilizer Chamber Hours",
          "available": 251.9,
          "unit": "hours"
        },
        {
          "id": "r3",
          "name": "Non-Sterile Formulation Suite Hours (OSD/Liquid)",
          "available": 170.4,
          "unit": "hours"
        },
        {
          "id": "r4",
          "name": "Encapsulation/Softgel Line Hours",
          "available": 84.6,
          "unit": "hours"
        },
        {
          "id": "r5",
          "name": "Sterile Filling Line Hours",
          "available": 220.7,
          "unit": "hours"
        },
        {
          "id": "r6",
          "name": "Packaging & Serialization Line Hours",
          "available": 350.8,
          "unit": "hours"
        },
        {
          "id": "r7",
          "name": "QC Lab Analytical Hours (HPLC/GC/Micro)",
          "available": 310.4,
          "unit": "hours"
        },
        {
          "id": "r8",
          "name": "Validation/Batch-Record Review & Regulatory Documentation Hours",
          "available": 503.7,
          "unit": "hours"
        },
        {
          "id": "r9",
          "name": "High-Purity Solvent (WFI/ACN/EtOH blend)",
          "available": 1285.6,
          "unit": "kg"
        },
        {
          "id": "r10",
          "name": "Segregated Beta-Lactam Containment Suite Hours",
          "available": 330.5,
          "unit": "hours"
        }
      ],
      "products": [
        {
          "id": "p1",
          "name": "Cefroxyl Sterile Injection, 1 g Vial (beta-lactam)",
          "profit_per_unit": 184.37,
          "resource_usage": {
            "r1": 3.85,
            "r2": 2.74,
            "r5": 1.92,
            "r6": 0.88,
            "r7": 1.15,
            "r8": 2.35,
            "r9": 6.4,
            "r10": 3.1
          },
          "min_production": 38,
          "max_production": 85,
          "demand": 38
        },
        {
          "id": "p2",
          "name": "Pantorin Sterile Injection, 500 mg Vial (beta-lactam)",
          "profit_per_unit": 169.82,
          "resource_usage": {
            "r1": 3.15,
            "r2": 2.28,
            "r5": 1.61,
            "r6": 0.79,
            "r7": 1.02,
            "r8": 2.05,
            "r9": 5.7,
            "r10": 2.6
          },
          "min_production": 34,
          "max_production": 80,
          "demand": 34
        },
        {
          "id": "p3",
          "name": "Zytrel Lyophilized Oncology, 50 mg Vial",
          "profit_per_unit": 246.55,
          "resource_usage": {
            "r1": 2.45,
            "r2": 1.86,
            "r5": 1.33,
            "r6": 0.71,
            "r7": 0.94,
            "r8": 1.74,
            "r9": 4.9,
            "r10": 2.1
          },
          "min_production": 22,
          "max_production": 60,
          "demand": 22
        },
        {
          "id": "p4",
          "name": "Metabex XR Tablets, 500 mg Bottle (OSD)",
          "profit_per_unit": 41.73,
          "resource_usage": {
            "r3": 0.62,
            "r6": 0.58,
            "r7": 0.44,
            "r8": 0.73,
            "r9": 1.85
          },
          "min_production": 120,
          "max_production": 260,
          "demand": 120
        },
        {
          "id": "p5",
          "name": "Neurocalm Oral Solution, 100 mL Bottle",
          "profit_per_unit": 33.68,
          "resource_usage": {
            "r3": 0.55,
            "r6": 0.63,
            "r7": 0.39,
            "r8": 0.69,
            "r9": 1.62
          },
          "min_production": 90,
          "max_production": 210,
          "demand": 90
        },
        {
          "id": "p6",
          "name": "Cardiolin Softgels, 30-count Blister",
          "profit_per_unit": 52.41,
          "resource_usage": {
            "r4": 0.98,
            "r6": 0.69,
            "r7": 0.41,
            "r8": 0.77,
            "r9": 0.95
          },
          "min_production": 75,
          "max_production": 180,
          "demand": 75
        },
        {
          "id": "p7",
          "name": "OncoSure Cytotoxic Trial Lot, Liquid Vial (high oversight)",
          "profit_per_unit": 312.29,
          "resource_usage": {
            "r1": 4.35,
            "r5": 0.86,
            "r6": 0.74,
            "r7": 0.88,
            "r8": 0.32,
            "r9": 8.6,
            "r10": 0.95
          },
          "min_production": 0,
          "max_production": 45,
          "demand": 0
        },
        {
          "id": "p8",
          "name": "Aurelia mRNA-LNP Bulk Concentrate (sterile bulk)",
          "profit_per_unit": 274.66,
          "resource_usage": {
            "r1": 2.1,
            "r6": 0.36,
            "r7": 0.96,
            "r8": 0.21,
            "r9": 3.4
          },
          "min_production": 0,
          "max_production": 70,
          "demand": 0
        },
        {
          "id": "p9",
          "name": "Sterile Water for Injection (WFI), 10 mL Ampoule",
          "profit_per_unit": 9.84,
          "resource_usage": {
            "r5": 0.44,
            "r6": 0.52,
            "r7": 0.63,
            "r8": 0.27,
            "r9": 0.22
          },
          "min_production": 0,
          "max_production": 500,
          "demand": 0
        },
        {
          "id": "p10",
          "name": "Comparator Placebo Tablets (Blinded Clinical Lot)",
          "profit_per_unit": 24.17,
          "resource_usage": {
            "r3": 0.71,
            "r6": 0.52,
            "r7": 0.63,
            "r8": 0.27,
            "r9": 1.12
          },
          "min_production": 0,
          "max_production": 160,
          "demand": 0
        },
        {
          "id": "p11",
          "name": "Stability/Retain Sample Kits (QA Release Packs)",
          "profit_per_unit": 6.92,
          "resource_usage": {
            "r6": 0.66,
            "r7": 0.57,
            "r8": 0.24,
            "r9": 0.35
          },
          "min_production": 0,
          "max_production": 300,
          "demand": 0
        }
      ],
      "min_total_units": null,
      "max_total_units": null
    },
    "constraints": [
      {
        "description": "Cover fixed GMP overhead by achieving at least $32,250 total profit.",
        "_spec": {
          "fn": "min_profit",
          "args": [
            32250
          ]
        }
      },
      {
        "description": "Maintain catalog breadth and regulatory commitments by producing at least 8 different product types (nonzero output).",
        "_spec": {
          "fn": "minimum_variety",
          "args": [
            8
          ]
        }
      },
      {
        "description": "Risk/compliance rule: no single product may exceed 32% of total units produced (prevents overconcentration in one campaign).",
        "_spec": {
          "fn": "max_single_product",
          "args": [
            0.32
          ]
        }
      },
      {
        "description": "Aseptic campaign balance: Cefroxyl (p1) must be between 1.05\u00d7 and 1.35\u00d7 Pantorin (p2).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p1",
            "p2",
            1.05,
            1.35
          ]
        }
      },
      {
        "description": "Fill/lyo sequencing constraint: Pantorin (p2) must be between 1.30\u00d7 and 1.85\u00d7 Zytrel (p3) to keep shared sterile setup windows consistent.",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p2",
            "p3",
            1.3,
            1.85
          ]
        }
      },
      {
        "description": "Patient-program mix requirement: Softgels (p6) must be between 0.50\u00d7 and 0.80\u00d7 Metabex XR tablets (p4).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p6",
            "p4",
            0.5,
            0.8
          ]
        }
      },
      {
        "description": "If producing the cytotoxic trial lot (p7), QA requires at least 25 Stability/Retain Sample Kits (p11).",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p7",
            "p11",
            25
          ]
        }
      },
      {
        "description": "If producing mRNA-LNP bulk (p8), the site must also run an aseptic Cefroxyl campaign of at least 45 units (p1) to amortize sterile change-control and environmental monitoring overhead.",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p8",
            "p1",
            45
          ]
        }
      },
      {
        "description": "Lyophilizer hours are capped at 91% of nominal availability due to preventive maintenance and requalification windows.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r2",
            0.91
          ]
        }
      },
      {
        "description": "QC lab hours are capped at 90% of nominal availability (holdback for OOS investigations and stability pulls).",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r7",
            0.9
          ]
        }
      },
      {
        "description": "Documentation/review hours are capped at 90% of nominal availability (deviation/CAPA reserve).",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r8",
            0.9
          ]
        }
      },
      {
        "description": "High-purity solvent usage is capped at 88% of nominal availability due to incoming-lot variability and quarantine holds.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r9",
            0.88
          ]
        }
      },
      {
        "description": "If OncoSure (p7) is produced, it must be a campaign batch of at least 18 units (or not produced).",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p7",
            18
          ]
        }
      },
      {
        "description": "If Aurelia mRNA-LNP bulk (p8) is produced, it must be at least 22 units (or not produced).",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p8",
            22
          ]
        }
      },
      {
        "description": "If WFI ampoules (p9) are produced, they must be in runs of at least 40 units (or not produced).",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p9",
            40
          ]
        }
      },
      {
        "description": "If Comparator Placebo Tablets (p10) are produced, they must be at least 30 units (or not produced).",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p10",
            30
          ]
        }
      },
      {
        "description": "If Stability/Retain Sample Kits (p11) are produced, they must be at least 25 units (or not produced).",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p11",
            25
          ]
        }
      }
    ],
    "instruction": "Maximize total profit while satisfying all resource limits, meeting each product\u2019s demand (produce at least its demand and min_production), respecting min/max production bounds, and obeying all listed constraints (ratios, linked production, max resource usage caps, variety, max single-product share, and minimum batch requirements).",
    "analysis": {
      "anti_patterns": [
        "Greedy selection of the highest profit/unit product (e.g., p3 or p7) can trigger tight ratio constraints (p1/p2 and p2/p3) and quickly hit the lyophilizer cap (r2), causing a dead end.",
        "Satisfying minimum_variety by adding the \u2018wrong\u2019 optional products can silently consume capped QC/documentation/solvent reserves (r7/r8/r9), preventing attainment of min_profit without violating max_resource_usage.",
        "Over-allocating to the seemingly scalable OSD product (p4) can violate max_single_product unless additional (possibly low-margin) units are produced elsewhere\u2014creating a cascading effect across resources and ratios.",
        "Choosing p8 for its attractive margin is a decoy if the linked p1>=45 requirement forces extra lyophilizer usage via p1, making the overall plan infeasible under r2\u2019s cap."
      ],
      "strategic_insights": [
        "Treat r2 (lyophilizer) and the capped percentages (r7/r8/r9) as the true bottlenecks; marginal profit should be evaluated per unit of these capped resources rather than per unit overall.",
        "Use the ratio bands as a coupled system: changing p3 forces changes in p2, which can force changes in p1\u2014so expansions should be planned as coordinated bundles, not single-product increments.",
        "Minimum batch and variety constraints mean feasibility depends on discrete \u2018activation\u2019 decisions; selecting optional products with low consumption of capped resources can unlock variety/min_profit compliance at minimal opportunity cost.",
        "max_single_product turns total volume into a decision variable: sometimes adding a low-margin but resource-light batch can enable additional high-margin output without violating the concentration rule."
      ],
      "expected_difficulty": "Expert: requires solving a mixed discrete/continuous production mix with multiple near-bottlenecks, capped resource utilization, transitive ratio coupling among sterile products, and linked-production + minimum-batch activation effects that make greedy heuristics fail."
    },
    "feasible": true,
    "solution": {
      "domain": "production_mix",
      "decisions": [
        {
          "product_id": "p1",
          "quantity": 38
        },
        {
          "product_id": "p2",
          "quantity": 34
        },
        {
          "product_id": "p3",
          "quantity": 25
        },
        {
          "product_id": "p4",
          "quantity": 142
        },
        {
          "product_id": "p5",
          "quantity": 91
        },
        {
          "product_id": "p6",
          "quantity": 86
        },
        {
          "product_id": "p10",
          "quantity": 45
        },
        {
          "product_id": "p11",
          "quantity": 25
        }
      ],
      "total_profit": 33702.14,
      "total_units": 486
    }
  },
  {
    "id": "production_mix_c56ca7eb",
    "difficulty": "expert",
    "scenario": {
      "domain": "production_mix",
      "description": "NexSilicon Foundry runs a semiconductor wafer fabrication plant with shared EUV scanners, HAR etchers, metrology tools, wet benches, deposition reactors, and CMP polishers. Each 'unit' below is a wafer-lot release for the coming planning week. Customer commitments (demand) must be met, but the fab can optionally build additional lots (up to max_production) to increase profit\u2014subject to tight, interacting tool-time and consumables constraints plus several portfolio/qualification rules.",
      "resources": [
        {
          "id": "r1",
          "name": "EUV Lithography Tool Time",
          "available": 1468.7,
          "unit": "tool-hours"
        },
        {
          "id": "r2",
          "name": "High-Aspect-Ratio Etch Tool Time",
          "available": 1012.4,
          "unit": "tool-hours"
        },
        {
          "id": "r3",
          "name": "Metrology & Inspection Time",
          "available": 1170.5,
          "unit": "tool-hours"
        },
        {
          "id": "r4",
          "name": "Wet Bench / Clean Time",
          "available": 537.6,
          "unit": "tool-hours"
        },
        {
          "id": "r5",
          "name": "ALD/CVD Deposition Tool Time",
          "available": 615.2,
          "unit": "tool-hours"
        },
        {
          "id": "r6",
          "name": "CMP Tool Time",
          "available": 883.6,
          "unit": "tool-hours"
        },
        {
          "id": "r7",
          "name": "RF Power Budget",
          "available": 249.7,
          "unit": "MWh"
        },
        {
          "id": "r8",
          "name": "Specialty Process Gases",
          "available": 106.9,
          "unit": "kg-eq"
        },
        {
          "id": "r9",
          "name": "EUV Photoresist Chemical",
          "available": 83.8,
          "unit": "L"
        },
        {
          "id": "r10",
          "name": "Cleanroom Direct Labor",
          "available": 679.4,
          "unit": "labor-hours"
        }
      ],
      "products": [
        {
          "id": "p1",
          "name": "N7 HPC Logic Wafer Lot (EUV-heavy)",
          "profit_per_unit": 412.8,
          "resource_usage": {
            "r1": 12.6,
            "r2": 8.15,
            "r3": 9.4,
            "r4": 4.25,
            "r5": 3.9,
            "r6": 6.3,
            "r7": 1.85,
            "r8": 0.74,
            "r9": 0.62,
            "r10": 5.1
          },
          "min_production": 18,
          "max_production": 45,
          "demand": 18
        },
        {
          "id": "p2",
          "name": "N10 Analog/Mixed-Signal Wafer Lot",
          "profit_per_unit": 366.4,
          "resource_usage": {
            "r1": 11.2,
            "r2": 7.55,
            "r3": 8.9,
            "r4": 3.95,
            "r5": 4.4,
            "r6": 5.8,
            "r7": 1.62,
            "r8": 0.69,
            "r9": 0.58,
            "r10": 4.7
          },
          "min_production": 14,
          "max_production": 40,
          "demand": 14
        },
        {
          "id": "p3",
          "name": "N14 RF Front-End Wafer Lot",
          "profit_per_unit": 224.1,
          "resource_usage": {
            "r1": 6.75,
            "r2": 5.1,
            "r3": 4.8,
            "r4": 2.35,
            "r5": 2.95,
            "r6": 4.15,
            "r7": 1.12,
            "r8": 0.51,
            "r9": 0.41,
            "r10": 3.2
          },
          "min_production": 20,
          "max_production": 55,
          "demand": 20
        },
        {
          "id": "p4",
          "name": "3D NAND 176L String-Stack Lot",
          "profit_per_unit": 172.9,
          "resource_usage": {
            "r1": 5.25,
            "r2": 3.7,
            "r3": 3.9,
            "r4": 1.95,
            "r5": 2.1,
            "r6": 3.55,
            "r7": 0.98,
            "r8": 0.43,
            "r9": 0.34,
            "r10": 2.8
          },
          "min_production": 26,
          "max_production": 60,
          "demand": 26
        },
        {
          "id": "p5",
          "name": "DRAM 1\u03b2 Cell-Array Lot",
          "profit_per_unit": 301.3,
          "resource_usage": {
            "r1": 8.4,
            "r2": 4.6,
            "r3": 7.8,
            "r4": 3.15,
            "r5": 3.35,
            "r6": 4.95,
            "r7": 1.44,
            "r8": 0.66,
            "r9": 0.49,
            "r10": 3.9
          },
          "min_production": 18,
          "max_production": 50,
          "demand": 18
        },
        {
          "id": "p6",
          "name": "SiGe BiCMOS mmWave Lot",
          "profit_per_unit": 141.2,
          "resource_usage": {
            "r1": 3.95,
            "r2": 2.85,
            "r3": 3.1,
            "r4": 1.55,
            "r5": 2.65,
            "r6": 2.95,
            "r7": 0.76,
            "r8": 0.29,
            "r9": 0.22,
            "r10": 1.9
          },
          "min_production": 25,
          "max_production": 44,
          "demand": 25
        },
        {
          "id": "p7",
          "name": "GaN Power HEMT Lot",
          "profit_per_unit": 276.8,
          "resource_usage": {
            "r1": 9.15,
            "r2": 6.9,
            "r3": 8.35,
            "r4": 3.45,
            "r5": 3.55,
            "r6": 5.25,
            "r7": 1.58,
            "r8": 0.71,
            "r9": 0.54,
            "r10": 4.25
          },
          "min_production": 12,
          "max_production": 35,
          "demand": 12
        },
        {
          "id": "p8",
          "name": "SiC MOSFET Power Lot",
          "profit_per_unit": 128.5,
          "resource_usage": {
            "r1": 4.6,
            "r2": 3.25,
            "r3": 3.45,
            "r4": 1.65,
            "r5": 2.05,
            "r6": 3.05,
            "r7": 0.88,
            "r8": 0.34,
            "r9": 0.27,
            "r10": 2.15
          },
          "min_production": 20,
          "max_production": 48,
          "demand": 20
        },
        {
          "id": "p9",
          "name": "Wafer-Level Chip-Scale Package (WLCSP) Lot",
          "profit_per_unit": 212.9,
          "resource_usage": {
            "r1": 7.25,
            "r2": 5.85,
            "r3": 6.05,
            "r4": 2.75,
            "r5": 3.15,
            "r6": 4.55,
            "r7": 1.24,
            "r8": 0.56,
            "r9": 0.44,
            "r10": 3.65
          },
          "min_production": 10,
          "max_production": 28,
          "demand": 10
        },
        {
          "id": "p10",
          "name": "Legacy 65nm Automotive MCU Lot",
          "profit_per_unit": 105.7,
          "resource_usage": {
            "r1": 2.95,
            "r2": 2.15,
            "r3": 2.55,
            "r4": 1.25,
            "r5": 1.65,
            "r6": 2.15,
            "r7": 0.63,
            "r8": 0.22,
            "r9": 0.18,
            "r10": 1.55
          },
          "min_production": 22,
          "max_production": 70,
          "demand": 22
        },
        {
          "id": "p11",
          "name": "Advanced Heterogeneous Integration Interposer Lot (High-margin, qualification-sensitive)",
          "profit_per_unit": 498.6,
          "resource_usage": {
            "r1": 10.85,
            "r2": 6.95,
            "r3": 7.15,
            "r4": 3.25,
            "r5": 2.85,
            "r6": 4.35,
            "r7": 1.22,
            "r8": 0.61,
            "r9": 0.57,
            "r10": 3.75
          },
          "min_production": 0,
          "max_production": 24,
          "demand": 0
        },
        {
          "id": "p12",
          "name": "Process Control Monitor (PCM) Coupon Lot",
          "profit_per_unit": 265.4,
          "resource_usage": {
            "r1": 2.25,
            "r2": 1.35,
            "r3": 2.25,
            "r4": 0.85,
            "r5": 0.95,
            "r6": 1.05,
            "r7": 0.42,
            "r8": 0.18,
            "r9": 0.15,
            "r10": 0.88
          },
          "min_production": 0,
          "max_production": 40,
          "demand": 0
        }
      ],
      "min_total_units": null,
      "max_total_units": null
    },
    "constraints": [
      {
        "description": "Cover weekly fixed fab overhead and contract penalties by achieving at least $46,500 total profit.",
        "_spec": {
          "fn": "min_profit",
          "args": [
            46500
          ]
        }
      },
      {
        "description": "Maintain customer-portfolio breadth and internal learning: produce at least 11 distinct product types (nonzero lots).",
        "_spec": {
          "fn": "minimum_variety",
          "args": [
            11
          ]
        }
      },
      {
        "description": "Risk control: no single product may exceed 23% of total lots released (prevents over-concentration on one flow).",
        "_spec": {
          "fn": "max_single_product",
          "args": [
            0.23
          ]
        }
      },
      {
        "description": "Keep EUV utilization below 97.2% to preserve contingency for rework and tool down events.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r1",
            0.972
          ]
        }
      },
      {
        "description": "Keep HAR etch utilization below 96.8% due to chamber seasoning constraints and queue stability targets.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r2",
            0.968
          ]
        }
      },
      {
        "description": "Keep metrology utilization below 97.1% to maintain statistical sampling cadence and avoid WIP aging.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r3",
            0.971
          ]
        }
      },
      {
        "description": "Specialty process gases are supply-constrained this week: cap usage at 96.5% of availability.",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r8",
            0.965
          ]
        }
      },
      {
        "description": "Node-mix guardband: N7 HPC (p1) lots must be between 1.18\u00d7 and 1.45\u00d7 N10 AMS (p2) lots (shared mask/reticle set policy).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p1",
            "p2",
            1.18,
            1.45
          ]
        }
      },
      {
        "description": "RF pipeline balance: N14 RF (p3) lots must be at least 1.05\u00d7 the N7 HPC (p1) lots to match back-end RF test capacity.",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p3",
            "p1",
            1.05,
            null
          ]
        }
      },
      {
        "description": "Memory line balance: 3D NAND (p4) lots must be between 1.15\u00d7 and 1.40\u00d7 N14 RF (p3) lots (shared thin-film stack constraints).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p4",
            "p3",
            1.15,
            1.4
          ]
        }
      },
      {
        "description": "PCM coverage relative to legacy flow: PCM coupon lots (p12) must be between 0.60\u00d7 and 0.90\u00d7 the 65nm MCU (p10) lots (sampling plan requirement).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p12",
            "p10",
            0.6,
            0.9
          ]
        }
      },
      {
        "description": "Qualification dependency: if any N14 RF lots (p3) are run, at least 18 DRAM 1\u03b2 lots (p5) must also run to keep inline monitors statistically meaningful.",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p3",
            "p5",
            18
          ]
        }
      },
      {
        "description": "Packaging dependency: if any WLCSP lots (p9) are run, at least 12 GaN power lots (p7) must be run (shared bump metallization qualifications).",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p9",
            "p7",
            12
          ]
        }
      },
      {
        "description": "Decoy/hidden cost: if any high-margin interposer lots (p11) are produced, at least 34 NAND lots (p4) must also be produced (co-run qualification split lots).",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p11",
            "p4",
            34
          ]
        }
      },
      {
        "description": "Lot-release policy: N7 HPC (p1) must be released in batches of 18 lots or not at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p1",
            18
          ]
        }
      },
      {
        "description": "Lot-release policy: SiGe BiCMOS mmWave (p6) must be released in batches of 25 lots or not at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p6",
            25
          ]
        }
      },
      {
        "description": "Lot-release policy: SiC MOSFET power (p8) must be released in batches of 20 lots or not at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p8",
            20
          ]
        }
      },
      {
        "description": "Lot-release policy: PCM coupon lots (p12) must be released in batches of at least 16 lots or not at all (metrology sampling plan minimum).",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p12",
            16
          ]
        }
      }
    ],
    "instruction": "Maximize total profit while satisfying all resource constraints, meeting demand requirements (produce at least each product's demand), and respecting production limits and all additional constraints.",
    "analysis": {
      "anti_patterns": [
        "Greedy expansion of the highest profit-per-lot option (p11) can backfire because it triggers a large, low-margin NAND requirement (p4>=34) while simultaneously pushing the tight specialty-gas cap (r8).",
        "Maximizing a single 'efficient' product to hit min_profit can violate max_single_product and also silently break the ratio chain (p1/p2 bounds + p3/p1 minimum + p4/p3 bounds), forcing compensating increases elsewhere that consume the same bottleneck tools.",
        "Treating EUV (r1) as the only bottleneck is a trap: the specialty-gas cap (r8) can become binding first, making otherwise attractive EUV-efficient add-ons infeasible."
      ],
      "strategic_insights": [
        "Use the ratio constraints as a coupled system: increasing p1 may force increases in p3 and p4 (and bounded p1/p2), so profit must be evaluated on the induced bundle rather than per-product margin.",
        "Because minimum_variety=11 and p12 has a 16-lot minimum batch, a feasible high-profit plan often starts by selecting the least-disruptive '11th product' choice, then allocating remaining headroom across products with favorable profit per unit of the tightest constrained resources (often r8 and r3, not just r1).",
        "Linked-production constraints can be exploited defensively: keeping p11 at zero avoids the p4>=34 escalation, freeing scarce metrology and specialty-gas capacity for higher-return increases in other products."
      ],
      "expected_difficulty": "Expert: multiple near-bottleneck resources with tight utilization caps, a non-obvious ratio chain with both lower and upper bounds, batch-size discontinuities, and a high-margin decoy product whose hidden linked requirement creates cascading feasibility/optimality tradeoffs."
    },
    "feasible": true,
    "solution": {
      "domain": "production_mix",
      "decisions": [
        {
          "product_id": "p1",
          "quantity": 18
        },
        {
          "product_id": "p2",
          "quantity": 14
        },
        {
          "product_id": "p3",
          "quantity": 20
        },
        {
          "product_id": "p4",
          "quantity": 26
        },
        {
          "product_id": "p5",
          "quantity": 18
        },
        {
          "product_id": "p6",
          "quantity": 25
        },
        {
          "product_id": "p7",
          "quantity": 12
        },
        {
          "product_id": "p8",
          "quantity": 20
        },
        {
          "product_id": "p9",
          "quantity": 10
        },
        {
          "product_id": "p10",
          "quantity": 44
        },
        {
          "product_id": "p12",
          "quantity": 38
        }
      ],
      "total_profit": 53247.4,
      "total_units": 245
    }
  },
  {
    "id": "production_mix_e3cfc647",
    "difficulty": "expert",
    "scenario": {
      "domain": "production_mix",
      "description": "StoneForge Construction Products (a building materials factory in Tacoma, WA) must plan next month\u2019s output across precast, mortar/adhesives, stonework, and light-gauge metal accessories. The plant is constrained by shared bottlenecks (CNC stonework, skilled labor, resin allotments) and must satisfy contractor commitments while respecting batch-size realities on the press line and slab cell.",
      "resources": [
        {
          "id": "r1",
          "name": "CNC Stone Saw + Router Time",
          "available": 533.2,
          "unit": "hours"
        },
        {
          "id": "r2",
          "name": "Kiln & Drying Tunnel Time",
          "available": 221.0,
          "unit": "hours"
        },
        {
          "id": "r3",
          "name": "Batch Mixer Time",
          "available": 284.0,
          "unit": "hours"
        },
        {
          "id": "r4",
          "name": "Press Line Time",
          "available": 800.0,
          "unit": "hours"
        },
        {
          "id": "r5",
          "name": "Finishing & Polishing Cell",
          "available": 265.0,
          "unit": "hours"
        },
        {
          "id": "r6",
          "name": "Skilled Labor Hours",
          "available": 1140.0,
          "unit": "hours"
        },
        {
          "id": "r7",
          "name": "Polymer Resin (allocation-limited)",
          "available": 41.0,
          "unit": "tons"
        },
        {
          "id": "r8",
          "name": "Structural Steel Inserts",
          "available": 24.0,
          "unit": "tons"
        },
        {
          "id": "r9",
          "name": "Packaging & Palletizing",
          "available": 610.0,
          "unit": "pallets"
        }
      ],
      "products": [
        {
          "id": "p1",
          "name": "Granite Stair Treads (CNC-cut)",
          "profit_per_unit": 86.45,
          "resource_usage": {
            "r1": 1.37,
            "r2": 0.28,
            "r3": 0.62,
            "r4": 3.85,
            "r5": 0.44,
            "r6": 2.15,
            "r7": 0.084,
            "r8": 0.004,
            "r9": 1.0
          },
          "min_production": 48,
          "max_production": 127,
          "demand": 48
        },
        {
          "id": "p2",
          "name": "Fiber-Cement Siding Panels",
          "profit_per_unit": 39.6,
          "resource_usage": {
            "r1": 0.18,
            "r2": 0.05,
            "r3": 0.91,
            "r4": 1.25,
            "r5": 0.08,
            "r6": 1.74,
            "r7": 0.142,
            "r8": 0.0,
            "r9": 0.8
          },
          "min_production": 70,
          "max_production": 113,
          "demand": 70
        },
        {
          "id": "p3",
          "name": "Textured Precast Pavers",
          "profit_per_unit": 51.75,
          "resource_usage": {
            "r1": 0.88,
            "r2": 0.06,
            "r3": 0.57,
            "r4": 2.94,
            "r5": 0.0,
            "r6": 1.63,
            "r7": 0.118,
            "r8": 0.0,
            "r9": 1.1
          },
          "min_production": 55,
          "max_production": 149,
          "demand": 55
        },
        {
          "id": "p4",
          "name": "Engineered Quartz Countertop Slabs",
          "profit_per_unit": 64.3,
          "resource_usage": {
            "r1": 1.92,
            "r2": 0.41,
            "r3": 0.12,
            "r4": 0.0,
            "r5": 0.73,
            "r6": 2.48,
            "r7": 0.0,
            "r8": 0.096,
            "r9": 1.0
          },
          "min_production": 40,
          "max_production": 91,
          "demand": 40
        },
        {
          "id": "p5",
          "name": "Drywall Joint Compound (bagged)",
          "profit_per_unit": 44.1,
          "resource_usage": {
            "r1": 1.05,
            "r2": 0.09,
            "r3": 0.0,
            "r4": 0.0,
            "r5": 0.11,
            "r6": 1.11,
            "r7": 0.0,
            "r8": 0.052,
            "r9": 0.6
          },
          "min_production": 75,
          "max_production": 163,
          "demand": 75
        },
        {
          "id": "p6",
          "name": "Type S Masonry Mortar Mix",
          "profit_per_unit": 58.55,
          "resource_usage": {
            "r1": 0.33,
            "r2": 1.26,
            "r3": 0.0,
            "r4": 0.0,
            "r5": 0.58,
            "r6": 2.76,
            "r7": 0.0,
            "r8": 0.031,
            "r9": 0.9
          },
          "min_production": 54,
          "max_production": 97,
          "demand": 54
        },
        {
          "id": "p7",
          "name": "Self-Leveling Underlayment (polymer-modified)",
          "profit_per_unit": 28.8,
          "resource_usage": {
            "r1": 0.07,
            "r2": 0.04,
            "r3": 1.03,
            "r4": 0.92,
            "r5": 0.06,
            "r6": 1.69,
            "r7": 0.156,
            "r8": 0.0,
            "r9": 0.85
          },
          "min_production": 50,
          "max_production": 121,
          "demand": 50
        },
        {
          "id": "p8",
          "name": "Epoxy Concrete Repair Kits",
          "profit_per_unit": 47.35,
          "resource_usage": {
            "r1": 0.77,
            "r2": 0.07,
            "r3": 0.15,
            "r4": 0.48,
            "r5": 1.14,
            "r6": 1.92,
            "r7": 0.0,
            "r8": 0.044,
            "r9": 1.2
          },
          "min_production": 45,
          "max_production": 99,
          "demand": 45
        },
        {
          "id": "p9",
          "name": "Galvanized Rebar Coupler Kits",
          "profit_per_unit": 96.9,
          "resource_usage": {
            "r1": 1.43,
            "r2": 0.62,
            "r3": 0.34,
            "r4": 4.12,
            "r5": 0.51,
            "r6": 2.39,
            "r7": 0.073,
            "r8": 0.018,
            "r9": 0.95
          },
          "min_production": 18,
          "max_production": 73,
          "demand": 18
        },
        {
          "id": "p10",
          "name": "Cold-Rolled Steel Corner Beads",
          "profit_per_unit": 41.2,
          "resource_usage": {
            "r1": 1.58,
            "r2": 0.29,
            "r3": 0.08,
            "r4": 0.0,
            "r5": 0.66,
            "r6": 2.04,
            "r7": 0.0,
            "r8": 0.082,
            "r9": 0.9
          },
          "min_production": 22,
          "max_production": 157,
          "demand": 22
        },
        {
          "id": "p11",
          "name": "HDPE Vapor Barrier Rolls",
          "profit_per_unit": 16.75,
          "resource_usage": {
            "r1": 0.46,
            "r2": 0.03,
            "r3": 0.0,
            "r4": 0.0,
            "r5": 0.05,
            "r6": 0.74,
            "r7": 0.0,
            "r8": 0.019,
            "r9": 0.25
          },
          "min_production": 35,
          "max_production": 203,
          "demand": 35
        },
        {
          "id": "p12",
          "name": "Concrete Form Release Oil (pails)",
          "profit_per_unit": 22.4,
          "resource_usage": {
            "r1": 0.63,
            "r2": 0.04,
            "r3": 0.0,
            "r4": 0.15,
            "r5": 0.22,
            "r6": 0.98,
            "r7": 0.0,
            "r8": 0.027,
            "r9": 0.3
          },
          "min_production": 27,
          "max_production": 181,
          "demand": 27
        }
      ],
      "min_total_units": null,
      "max_total_units": null
    },
    "constraints": [
      {
        "description": "Cover StoneForge\u2019s fixed overhead and equipment lease: achieve at least $29,200 total profit for the month.",
        "_spec": {
          "fn": "min_profit",
          "args": [
            29200
          ]
        }
      },
      {
        "description": "Field-installation balance: Granite stair treads must be at least 0.82\u00d7 the fiber-cement siding output (avoids crew downtime on mixed-site deliveries).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p1",
            "p2",
            0.82,
            null
          ]
        }
      },
      {
        "description": "Mix-design continuity: Siding panels cannot exceed 1.22\u00d7 the paver output (shared curing racks and QA sampling cadence).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p2",
            "p3",
            null,
            1.22
          ]
        }
      },
      {
        "description": "Aggregate procurement constraint: Pavers must be at least 1.06\u00d7 quartz slab output (keeps the gravel/sand blend within contracted take-or-pay bands).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p3",
            "p4",
            1.06,
            null
          ]
        }
      },
      {
        "description": "Backer-board coordination: Quartz slabs cannot exceed 0.74\u00d7 joint compound (countertop jobs require finishing materials shipping with slabs).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p4",
            "p5",
            null,
            0.74
          ]
        }
      },
      {
        "description": "Installer pairing rule: Joint compound output must be at least 1.34\u00d7 mortar mix output (prevents shortage of finishing material on masonry-heavy projects).",
        "_spec": {
          "fn": "product_ratio",
          "args": [
            "p5",
            "p6",
            1.34,
            null
          ]
        }
      },
      {
        "description": "If quartz slabs are produced at all, at least 30 units of steel corner beads must also be produced (same distributor route; bundled SKU program).",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p4",
            "p10",
            30
          ]
        }
      },
      {
        "description": "If rebar coupler kits are produced at all, at least 54 units of mortar mix must be produced (project submittals require both structural connections and grout/mortar items).",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p9",
            "p6",
            54
          ]
        }
      },
      {
        "description": "If siding panels are produced at all, at least 56 units of polymer-modified self-leveling underlayment must be produced (same GC contracts; floor prep line items bundled).",
        "_spec": {
          "fn": "linked_production",
          "args": [
            "p2",
            "p7",
            56
          ]
        }
      },
      {
        "description": "Catalog breadth requirement for StoneForge\u2019s distributor agreements: produce at least 11 different product types this month.",
        "_spec": {
          "fn": "minimum_variety",
          "args": [
            11
          ]
        }
      },
      {
        "description": "Channel risk control: no single product may exceed 19% of the total monthly units produced.",
        "_spec": {
          "fn": "max_single_product",
          "args": [
            0.19
          ]
        }
      },
      {
        "description": "Do not exceed 95% of available CNC Stone Saw + Router capacity (maintenance windows must remain open).",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r1",
            0.95
          ]
        }
      },
      {
        "description": "Do not exceed 94% of available Skilled Labor Hours (training and safety stand-down hours are pre-booked).",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r6",
            0.94
          ]
        }
      },
      {
        "description": "Do not exceed 88% of the polymer resin allocation (supplier cap due to upstream shortages).",
        "_spec": {
          "fn": "max_resource_usage",
          "args": [
            "r7",
            0.88
          ]
        }
      },
      {
        "description": "Granite stair treads must be produced in lots of at least 60 units (setup + tooling changeover), or not produced at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p1",
            60
          ]
        }
      },
      {
        "description": "Engineered quartz countertop slabs must be produced in lots of at least 52 units (resin-binder calibration cycle), or not produced at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p4",
            52
          ]
        }
      },
      {
        "description": "Rebar coupler kits must be produced in lots of at least 24 units (galvanizing rack utilization), or not produced at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p9",
            24
          ]
        }
      },
      {
        "description": "Steel corner beads must be produced in lots of at least 30 units (roll-former changeover), or not produced at all.",
        "_spec": {
          "fn": "min_batch",
          "args": [
            "p10",
            30
          ]
        }
      }
    ],
    "instruction": "Maximize total profit while satisfying all resource constraints, meeting demand requirements, and respecting production limits and the additional policy/interaction constraints.",
    "analysis": {
      "anti_patterns": [
        "Greedy maximization of the highest-profit item (Rebar Coupler Kits) tends to blow up Press/CNC usage and can indirectly force more Mortar Mix, which then triggers the Joint Compound : Mortar ratio and cascades into additional CNC and labor draw",
        "Treating batch sizes independently fails: min_batch on p1 and p4 quietly raises the true minimum plan, which then tightens the labor-cap (max_resource_usage on Skilled Labor) and blocks otherwise-attractive \u2018just add one more high-margin unit\u2019 moves",
        "Focusing only on per-unit profit ignores ratio chains (p1/p2, p2/p3, p3/p4, p4/p5, p5/p6) that can force extra output of lower-margin or more resource-intensive items to keep the chain feasible"
      ],
      "strategic_insights": [
        "Build a feasible baseline that satisfies the binding batch minima first (p1, p4, p9, p10), then adjust to satisfy the p2/p3 cap and the p5/p6 lower-bound ratio without pushing Skilled Labor above its 94% ceiling",
        "Watch the hidden \u2018resin + labor\u2019 coupling: the p2\u2192p7 linked production increases resin consumption while also consuming labor and mixer time, so pushing p2 for profit can be counterproductive under the resin percentage cap",
        "Because max_single_product limits concentration, the optimal plan typically mixes several mid-margin, low-bottleneck products rather than maximizing any single high-margin product"
      ],
      "expected_difficulty": "Expert: feasibility requires satisfying batch minima plus a five-link ratio chain under tight percentage caps on CNC and labor; profitable expansions are highly non-local due to linked production and the max_single_product diversification limit."
    },
    "feasible": true,
    "solution": {
      "domain": "production_mix",
      "decisions": [
        {
          "product_id": "p1",
          "quantity": 64
        },
        {
          "product_id": "p2",
          "quantity": 70
        },
        {
          "product_id": "p3",
          "quantity": 58
        },
        {
          "product_id": "p4",
          "quantity": 52
        },
        {
          "product_id": "p5",
          "quantity": 79
        },
        {
          "product_id": "p6",
          "quantity": 54
        },
        {
          "product_id": "p7",
          "quantity": 56
        },
        {
          "product_id": "p8",
          "quantity": 45
        },
        {
          "product_id": "p9",
          "quantity": 24
        },
        {
          "product_id": "p10",
          "quantity": 30
        },
        {
          "product_id": "p11",
          "quantity": 35
        },
        {
          "product_id": "p12",
          "quantity": 27
        }
      ],
      "total_profit": 29791.7,
      "total_units": 594
    }
  },
  {
    "id": "project_planning_af100009",
    "difficulty": "expert",
    "scenario": {
      "domain": "project_planning",
      "description": "Retail store chain rollout project for 'NorthStar Grocers': launch the 'QuickLane Express' format in 3 pilot stores (Downtown, Lakeside, and Westgate). The PM must coordinate store-fixture installation, POS/data integrations, staff training, merchandising, and compliance approvals under tight per-period capacity limits and staged dependencies. Some tasks look optional/parallel but share scarce resources, creating greedy traps and hidden interactions.",
      "horizon": 30,
      "target_completion": 25,
      "resources": [
        {
          "id": "r1",
          "name": "Implementation Crew (fixtures/signage/electrical)",
          "capacity_per_period": 6.0
        },
        {
          "id": "r2",
          "name": "IT & Data Engineers (POS, pricing, integrations)",
          "capacity_per_period": 6.0
        },
        {
          "id": "r3",
          "name": "Store Ops Trainers (SOPs, training, readiness)",
          "capacity_per_period": 4.0
        },
        {
          "id": "r4",
          "name": "Compliance & Vendor Managers (permits, contracts, audits)",
          "capacity_per_period": 3.0
        }
      ],
      "tasks": [
        {
          "id": "t1",
          "name": "Rollout blueprint & site surveys (3 stores)",
          "duration": 3,
          "resource_needs": {
            "r4": 1.0,
            "r1": 1.0
          },
          "predecessors": [],
          "deadline": 8
        },
        {
          "id": "t2",
          "name": "Vendor contracting: fixtures + refrigeration + signage",
          "duration": 4,
          "resource_needs": {
            "r4": 2.0
          },
          "predecessors": [
            "t1"
          ],
          "deadline": 12
        },
        {
          "id": "t3",
          "name": "POS hardware procurement & imaging plan",
          "duration": 3,
          "resource_needs": {
            "r2": 2.0,
            "r4": 1.0
          },
          "predecessors": [
            "t1"
          ],
          "deadline": 12
        },
        {
          "id": "t4",
          "name": "Data migration prep (product/pricing/customer)",
          "duration": 5,
          "resource_needs": {
            "r2": 3.0
          },
          "predecessors": [
            "t1"
          ],
          "deadline": 16
        },
        {
          "id": "t5",
          "name": "Store electrical + network drops (pilot stores)",
          "duration": 4,
          "resource_needs": {
            "r1": 4.0,
            "r2": 1.0
          },
          "predecessors": [
            "t2"
          ],
          "deadline": 18
        },
        {
          "id": "t6",
          "name": "Fixture + cooler installation (pilot stores)",
          "duration": 5,
          "resource_needs": {
            "r1": 5.0,
            "r4": 1.0
          },
          "predecessors": [
            "t5"
          ],
          "deadline": 22
        },
        {
          "id": "t7",
          "name": "POS install + payment certification",
          "duration": 4,
          "resource_needs": {
            "r2": 4.0,
            "r4": 1.0
          },
          "predecessors": [
            "t3",
            "t5"
          ],
          "deadline": 22
        },
        {
          "id": "t8",
          "name": "Pricing & promo rules engine configuration",
          "duration": 4,
          "resource_needs": {
            "r2": 3.0
          },
          "predecessors": [
            "t4"
          ],
          "deadline": 21
        },
        {
          "id": "t9",
          "name": "Planogram & assortment reset (QuickLane Express)",
          "duration": 4,
          "resource_needs": {
            "r3": 2.0,
            "r4": 1.0
          },
          "predecessors": [
            "t2"
          ],
          "deadline": 20
        },
        {
          "id": "t10",
          "name": "Staff training: QuickLane SOPs + shrink controls",
          "duration": 4,
          "resource_needs": {
            "r3": 3.0
          },
          "predecessors": [
            "t9"
          ],
          "deadline": 24
        },
        {
          "id": "t11",
          "name": "End-to-end pilot dry run (transaction, inventory, returns)",
          "duration": 3,
          "resource_needs": {
            "r2": 2.0,
            "r3": 2.0
          },
          "predecessors": [
            "t6",
            "t7",
            "t8",
            "t10"
          ],
          "deadline": 26
        },
        {
          "id": "t12",
          "name": "Grand opening readiness: signage, punch list, go/no-go",
          "duration": 2,
          "resource_needs": {
            "r1": 2.0,
            "r3": 1.0,
            "r4": 1.0
          },
          "predecessors": [
            "t11"
          ],
          "deadline": 27
        }
      ]
    },
    "constraints": [
      {
        "description": "Implementation Crew can deliver at most 6 crew-units per period across all rollout work (tight periods create install bottlenecks).",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r1",
            6
          ]
        }
      },
      {
        "description": "IT & Data Engineers can deliver at most 6 engineer-units per period; pushing too much POS work early can starve data migration.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r2",
            6
          ]
        }
      },
      {
        "description": "Store Ops Trainers can deliver at most 4 trainer-units per period; overlapping training with dry-run preparations creates a hidden bottleneck.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r3",
            4
          ]
        }
      },
      {
        "description": "Compliance & Vendor Managers can deliver at most 3 manager-units per period; contracting and certification compete for the same people.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r4",
            3
          ]
        }
      },
      {
        "description": "To avoid lead-time and permitting risk, the blueprint & surveys must start by period 2.",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t1",
            2
          ]
        }
      },
      {
        "description": "Vendor contracting must start by period 5 to keep fixture and signage deliveries on track.",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t2",
            5
          ]
        }
      },
      {
        "description": "POS procurement & imaging plan must start by period 5; delaying it looks harmless but cascades into certification delays.",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t3",
            5
          ]
        }
      },
      {
        "description": "Electrical + network drops must complete by period 18 (stores have restricted after-hours access windows).",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t5",
            18
          ]
        }
      },
      {
        "description": "Fixture + cooler installation must complete by period 22 to allow merchandising and store-walk punch lists.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t6",
            22
          ]
        }
      },
      {
        "description": "POS install + payment certification must complete by period 22; failing this blocks any dry run.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t7",
            22
          ]
        }
      },
      {
        "description": "Pricing & promo rules configuration must complete by period 21; late pricing creates rework during the dry run.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t8",
            21
          ]
        }
      },
      {
        "description": "Planogram & assortment reset must complete by period 20; otherwise training content and stocking plans become invalid.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t9",
            20
          ]
        }
      },
      {
        "description": "Because the same training team also supports planogram reset and the dry run, these tasks cannot overlap (greedy parallelization fails).",
        "_spec": {
          "fn": "no_overlap",
          "args": [
            [
              "t9",
              "t10",
              "t11"
            ]
          ]
        }
      },
      {
        "description": "Grand opening readiness must complete by period 27, supporting a target completion by period 25 when possible but allowing contingency slack.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t12",
            27
          ]
        }
      }
    ],
    "instruction": "Minimize total project duration (earliest completion of t12) while respecting task dependencies, per-period resource capacity limits, no-overlap constraints, individual task deadlines/milestones, and the overall target completion date (25).",
    "feasible": true,
    "solution": {
      "domain": "project_planning",
      "schedule": [
        {
          "task_id": "t1",
          "start_period": 0,
          "end_period": 3
        },
        {
          "task_id": "t2",
          "start_period": 3,
          "end_period": 7
        },
        {
          "task_id": "t3",
          "start_period": 3,
          "end_period": 6
        },
        {
          "task_id": "t4",
          "start_period": 3,
          "end_period": 8
        },
        {
          "task_id": "t5",
          "start_period": 7,
          "end_period": 11
        },
        {
          "task_id": "t6",
          "start_period": 11,
          "end_period": 16
        },
        {
          "task_id": "t7",
          "start_period": 12,
          "end_period": 16
        },
        {
          "task_id": "t8",
          "start_period": 8,
          "end_period": 12
        },
        {
          "task_id": "t9",
          "start_period": 7,
          "end_period": 11
        },
        {
          "task_id": "t10",
          "start_period": 11,
          "end_period": 15
        },
        {
          "task_id": "t11",
          "start_period": 16,
          "end_period": 19
        },
        {
          "task_id": "t12",
          "start_period": 19,
          "end_period": 21
        }
      ],
      "project_duration": 21,
      "resource_utilization": {}
    }
  },
  {
    "id": "project_planning_87edcb65",
    "difficulty": "expert",
    "scenario": {
      "domain": "project_planning",
      "description": "Commercial building construction project: Fit-out and commissioning of the new \"Riverview Commerce Center\" (a 6-story mixed-use commercial building) for owner Riverview Property Partners. General contractor: HarborStone Builders. Major systems include tenant-ready interior build-out, base-building MEP tie-ins, fire alarm/sprinkler certification, access control/CCTV, elevator readiness, and final inspections for Temporary Certificate of Occupancy (TCO).",
      "horizon": 32,
      "target_completion": 27,
      "resources": [
        {
          "id": "r1",
          "name": "Site Crew (Carpenters/Laborers)",
          "capacity_per_period": 6.0
        },
        {
          "id": "r2",
          "name": "Specialty Subcontractors (MEP/Fire/Security)",
          "capacity_per_period": 3.0
        },
        {
          "id": "r3",
          "name": "Project Engineers / Automation (BIM + Controls)",
          "capacity_per_period": 4.0
        },
        {
          "id": "r4",
          "name": "Inspection & QA Coordination (Owner/City-facing)",
          "capacity_per_period": 2.0
        }
      ],
      "tasks": [
        {
          "id": "t1",
          "name": "Mobilize + Safety Plan (HarborStone)",
          "duration": 2,
          "resource_needs": {
            "r1": 2.0,
            "r3": 1.0,
            "r4": 1.0
          },
          "predecessors": [],
          "deadline": 6
        },
        {
          "id": "t2",
          "name": "Structural Punch & Slab Repairs (Riverview levels)",
          "duration": 1,
          "resource_needs": {
            "r1": 3.0
          },
          "predecessors": [
            "t1"
          ],
          "deadline": 8
        },
        {
          "id": "t3",
          "name": "MEP Rough-In \u2014 Levels 1\u20133 (Bayside MEP)",
          "duration": 2,
          "resource_needs": {
            "r1": 2.0,
            "r2": 2.0,
            "r3": 1.0
          },
          "predecessors": [
            "t2"
          ],
          "deadline": 18
        },
        {
          "id": "t4",
          "name": "MEP Rough-In \u2014 Levels 4\u20136 (Bayside MEP)",
          "duration": 2,
          "resource_needs": {
            "r1": 2.0,
            "r2": 2.0,
            "r3": 1.0
          },
          "predecessors": [
            "t2"
          ],
          "deadline": 18
        },
        {
          "id": "t5",
          "name": "Framing + Drywall \u2014 Levels 1\u20133 (HarborStone Interiors)",
          "duration": 3,
          "resource_needs": {
            "r1": 4.0,
            "r3": 1.0
          },
          "predecessors": [
            "t3"
          ],
          "deadline": 22
        },
        {
          "id": "t6",
          "name": "Framing + Drywall \u2014 Levels 4\u20136 (HarborStone Interiors)",
          "duration": 3,
          "resource_needs": {
            "r1": 4.0,
            "r3": 1.0
          },
          "predecessors": [
            "t4"
          ],
          "deadline": 22
        },
        {
          "id": "t7",
          "name": "Electrical Panel Terminations + Lighting Controls (VoltEdge Electric)",
          "duration": 3,
          "resource_needs": {
            "r2": 2.0,
            "r3": 2.0
          },
          "predecessors": [
            "t5",
            "t6"
          ],
          "deadline": 26
        },
        {
          "id": "t8",
          "name": "Sprinkler/Fire Alarm Trim & Testing (RedShield Fire Systems)",
          "duration": 3,
          "resource_needs": {
            "r2": 2.0,
            "r4": 1.0
          },
          "predecessors": [
            "t5",
            "t6"
          ],
          "deadline": 26
        },
        {
          "id": "t9",
          "name": "Elevator Readiness + Vendor Coordination (SkyLift)",
          "duration": 3,
          "resource_needs": {
            "r2": 1.0,
            "r1": 1.0,
            "r4": 1.0
          },
          "predecessors": [
            "t2"
          ],
          "deadline": 24
        },
        {
          "id": "t10",
          "name": "Access Control + CCTV (SecureAxis)",
          "duration": 2,
          "resource_needs": {
            "r2": 1.0,
            "r3": 2.0
          },
          "predecessors": [
            "t7"
          ],
          "deadline": 27
        },
        {
          "id": "t11",
          "name": "Interior Finishes (ACT ceilings, paint, flooring) \u2014 All Levels",
          "duration": 1,
          "resource_needs": {
            "r1": 5.0,
            "r2": 1.0
          },
          "predecessors": [
            "t7",
            "t8"
          ],
          "deadline": 27
        },
        {
          "id": "t12",
          "name": "Integrated Commissioning + Final Inspections for TCO (City + Owner)",
          "duration": 2,
          "resource_needs": {
            "r2": 1.0,
            "r3": 1.0,
            "r4": 2.0
          },
          "predecessors": [
            "t9",
            "t10",
            "t11"
          ],
          "deadline": 30
        }
      ]
    },
    "constraints": [
      {
        "description": "Site crew availability capped (other HarborStone projects share labor pool): at most 5 crew-units per period.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r1",
            5
          ]
        }
      },
      {
        "description": "Specialty subcontractor bandwidth capped due to union dispatch constraints: at most 2 subcontractor-units per period.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r2",
            2
          ]
        }
      },
      {
        "description": "Project engineers/automation team capped (BIM + controls engineers shared across sites): at most 3 engineer-units per period.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r3",
            3
          ]
        }
      },
      {
        "description": "Inspection & QA coordination constrained by city/owner availability: at most 2 QA-units per period.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r4",
            2
          ]
        }
      },
      {
        "description": "Mobilization must start early to lock in street-closure permits and crane time.",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t1",
            2
          ]
        }
      },
      {
        "description": "Electrical controls (t7), fire testing (t8), and elevator readiness (t9) cannot overlap due to shared after-hours shutdown windows and limited building access supervision.",
        "_spec": {
          "fn": "no_overlap",
          "args": [
            [
              "t7",
              "t8",
              "t9"
            ]
          ]
        }
      },
      {
        "description": "MEP Rough-In on Levels 1\u20133 must finish by day 18 to avoid tenant improvement penalty.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t3",
            18
          ]
        }
      },
      {
        "description": "MEP Rough-In on Levels 4\u20136 must finish by day 18 to keep riser inspection slot.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t4",
            18
          ]
        }
      },
      {
        "description": "Framing + Drywall (Levels 1\u20133) must complete by day 22 to maintain the finish-material delivery window.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t5",
            22
          ]
        }
      },
      {
        "description": "Framing + Drywall (Levels 4\u20136) must complete by day 22 to maintain the finish-material delivery window.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t6",
            22
          ]
        }
      },
      {
        "description": "Integrated commissioning + final inspections for TCO must complete by day 30 (city inspection cycle cutoff).",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t12",
            30
          ]
        }
      }
    ],
    "instruction": "Minimize total project duration (earliest possible completion of the final task) while respecting task dependencies, per-period resource capacity limits, no-overlap constraints, individual task deadlines/milestones, and the target completion date.",
    "feasible": true,
    "solution": {
      "domain": "project_planning",
      "schedule": [
        {
          "task_id": "t1",
          "start_period": 0,
          "end_period": 2
        },
        {
          "task_id": "t2",
          "start_period": 2,
          "end_period": 3
        },
        {
          "task_id": "t3",
          "start_period": 3,
          "end_period": 5
        },
        {
          "task_id": "t4",
          "start_period": 5,
          "end_period": 7
        },
        {
          "task_id": "t5",
          "start_period": 10,
          "end_period": 13
        },
        {
          "task_id": "t6",
          "start_period": 7,
          "end_period": 10
        },
        {
          "task_id": "t7",
          "start_period": 13,
          "end_period": 16
        },
        {
          "task_id": "t8",
          "start_period": 16,
          "end_period": 19
        },
        {
          "task_id": "t9",
          "start_period": 7,
          "end_period": 10
        },
        {
          "task_id": "t10",
          "start_period": 19,
          "end_period": 21
        },
        {
          "task_id": "t11",
          "start_period": 19,
          "end_period": 20
        },
        {
          "task_id": "t12",
          "start_period": 21,
          "end_period": 23
        }
      ],
      "project_duration": 23,
      "resource_utilization": {}
    }
  },
  {
    "id": "project_planning_57abef2d",
    "difficulty": "expert",
    "scenario": {
      "domain": "project_planning",
      "description": "VoltWave Mobile is building a new iOS/Android app, \u201cPulsePay,\u201d with deep backend integration to the existing \u201cLedgerLine\u201d payments API. The PM must schedule mobile work, backend API changes, QA, and DevOps rollout across limited weekly team capacity. Several tasks look safe to start early but create resource contention that delays deadline-bound integration and launch activities.",
      "horizon": 30,
      "target_completion": 25,
      "resources": [
        {
          "id": "r1",
          "name": "Mobile Engineers",
          "capacity_per_period": 3.5
        },
        {
          "id": "r2",
          "name": "Backend Engineers",
          "capacity_per_period": 3.0
        },
        {
          "id": "r3",
          "name": "QA Engineers",
          "capacity_per_period": 2.5
        },
        {
          "id": "r4",
          "name": "DevOps/SRE",
          "capacity_per_period": 1.5
        }
      ],
      "tasks": [
        {
          "id": "t1",
          "name": "Product discovery & UX flows for PulsePay",
          "duration": 2,
          "resource_needs": {
            "r1": 0.5,
            "r2": 0.2
          },
          "predecessors": [],
          "deadline": 8
        },
        {
          "id": "t2",
          "name": "Mobile architecture spike (offline cache + auth scaffolding)",
          "duration": 2,
          "resource_needs": {
            "r1": 1.2
          },
          "predecessors": [
            "t1"
          ],
          "deadline": 10
        },
        {
          "id": "t3",
          "name": "Backend API contract design (LedgerLine v2 endpoints)",
          "duration": 2,
          "resource_needs": {
            "r2": 1.2
          },
          "predecessors": [
            "t1"
          ],
          "deadline": 10
        },
        {
          "id": "t4",
          "name": "CI/CD pipeline setup for mobile + backend (build, lint, unit tests)",
          "duration": 2,
          "resource_needs": {
            "r4": 1.0,
            "r1": 0.3,
            "r2": 0.3
          },
          "predecessors": [],
          "deadline": 14
        },
        {
          "id": "t5",
          "name": "Backend: Implement payment initiation + token exchange endpoints",
          "duration": 5,
          "resource_needs": {
            "r2": 1.8
          },
          "predecessors": [
            "t3",
            "t4"
          ],
          "deadline": 18
        },
        {
          "id": "t6",
          "name": "Mobile: Core UI screens (amount entry, confirmation, receipt)",
          "duration": 3,
          "resource_needs": {
            "r1": 1.8
          },
          "predecessors": [
            "t2"
          ],
          "deadline": 20
        },
        {
          "id": "t7",
          "name": "Backend: Webhooks + reconciliation job (idempotency, retries)",
          "duration": 3,
          "resource_needs": {
            "r2": 1.5,
            "r4": 0.2
          },
          "predecessors": [
            "t5"
          ],
          "deadline": 22
        },
        {
          "id": "t8",
          "name": "Mobile-Backend integration (SDK wiring + error handling)",
          "duration": 3,
          "resource_needs": {
            "r1": 1.2,
            "r2": 1.0
          },
          "predecessors": [
            "t5",
            "t6"
          ],
          "deadline": 22
        },
        {
          "id": "t9",
          "name": "End-to-end test plan + test data seeding",
          "duration": 2,
          "resource_needs": {
            "r3": 1.2,
            "r2": 0.3,
            "r4": 0.3
          },
          "predecessors": [
            "t3",
            "t4"
          ],
          "deadline": 20
        },
        {
          "id": "t10",
          "name": "QA: Automated regression suite for payments + smoke tests",
          "duration": 3,
          "resource_needs": {
            "r3": 1.8,
            "r1": 0.2
          },
          "predecessors": [
            "t8",
            "t9"
          ],
          "deadline": 24
        },
        {
          "id": "t11",
          "name": "Security review & PCI-lite compliance checklist (threat model + fixes)",
          "duration": 2,
          "resource_needs": {
            "r2": 0.8,
            "r4": 0.6
          },
          "predecessors": [
            "t5"
          ],
          "deadline": 24
        },
        {
          "id": "t12",
          "name": "Production rollout (feature flag, monitoring dashboards, staged release)",
          "duration": 2,
          "resource_needs": {
            "r4": 1.0,
            "r2": 0.2
          },
          "predecessors": [
            "t7",
            "t10",
            "t11"
          ],
          "deadline": 25
        }
      ]
    },
    "constraints": [
      {
        "description": "Mobile engineering allocation is capped (small squad + on-call): do not exceed 3.0 Mobile Engineer FTE per period.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r1",
            3.0
          ]
        }
      },
      {
        "description": "Backend engineering allocation is capped (shared LedgerLine team): do not exceed 2.6 Backend Engineer FTE per period.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r2",
            2.6
          ]
        }
      },
      {
        "description": "QA allocation is capped (QA split across products): do not exceed 2.2 QA Engineer FTE per period.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r3",
            2.2
          ]
        }
      },
      {
        "description": "DevOps/SRE allocation is capped (one SRE plus rotation): do not exceed 1.2 DevOps/SRE FTE per period.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r4",
            1.2
          ]
        }
      },
      {
        "description": "To align with stakeholder review, discovery must start early.",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t1",
            2
          ]
        }
      },
      {
        "description": "To avoid late pipeline risk, CI/CD pipeline setup must start early.",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t4",
            5
          ]
        }
      },
      {
        "description": "The payments API contract must be completed by period 10 to unlock downstream integration planning.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t3",
            10
          ]
        }
      },
      {
        "description": "Payment initiation endpoints must be complete by period 18 to support partner sandbox certification.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t5",
            18
          ]
        }
      },
      {
        "description": "Mobile-backend integration must complete by period 22 to leave buffer for QA and rollout.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t8",
            22
          ]
        }
      },
      {
        "description": "Rollout must complete by the target launch window.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t12",
            25
          ]
        }
      },
      {
        "description": "Integration work (t8) and webhook/reconciliation work (t7) share a scarce backend specialist; they cannot overlap.",
        "_spec": {
          "fn": "no_overlap",
          "args": [
            [
              "t7",
              "t8"
            ]
          ]
        }
      },
      {
        "description": "Security review (t11) competes for the same senior backend/SRE reviewer as rollout prep (t12); they cannot overlap.",
        "_spec": {
          "fn": "no_overlap",
          "args": [
            [
              "t11",
              "t12"
            ]
          ]
        }
      }
    ],
    "instruction": "Minimize total project duration (earliest completion of the final rollout task) while respecting task dependencies, per-period resource capacity limits, all milestones/deadlines, no-overlap constraints, and the target completion date.",
    "feasible": true,
    "solution": {
      "domain": "project_planning",
      "schedule": [
        {
          "task_id": "t1",
          "start_period": 0,
          "end_period": 2
        },
        {
          "task_id": "t2",
          "start_period": 2,
          "end_period": 4
        },
        {
          "task_id": "t3",
          "start_period": 2,
          "end_period": 4
        },
        {
          "task_id": "t4",
          "start_period": 0,
          "end_period": 2
        },
        {
          "task_id": "t5",
          "start_period": 4,
          "end_period": 9
        },
        {
          "task_id": "t6",
          "start_period": 6,
          "end_period": 9
        },
        {
          "task_id": "t7",
          "start_period": 12,
          "end_period": 15
        },
        {
          "task_id": "t8",
          "start_period": 9,
          "end_period": 12
        },
        {
          "task_id": "t9",
          "start_period": 10,
          "end_period": 12
        },
        {
          "task_id": "t10",
          "start_period": 12,
          "end_period": 15
        },
        {
          "task_id": "t11",
          "start_period": 9,
          "end_period": 11
        },
        {
          "task_id": "t12",
          "start_period": 15,
          "end_period": 17
        }
      ],
      "project_duration": 17,
      "resource_utilization": {}
    }
  },
  {
    "id": "project_planning_0c72b1fd",
    "difficulty": "expert",
    "scenario": {
      "domain": "project_planning",
      "description": "University campus renovation project: Renovate the North Quad Learning Commons (lecture hall + adjacent study lounge) during an active semester. Work must coordinate facilities crews, licensed electricians, and campus IT/AV technicians while keeping inspection gates and academic-calendar deadlines. The goal is to minimize overall duration while meeting all task dependencies, resource limits, and milestone deadlines.",
      "horizon": 30,
      "target_completion": 25,
      "resources": [
        {
          "id": "r1",
          "name": "Facilities Crew (General)",
          "capacity_per_period": 7.0
        },
        {
          "id": "r2",
          "name": "Licensed Electricians",
          "capacity_per_period": 2.8
        },
        {
          "id": "r3",
          "name": "Campus IT / AV Techs",
          "capacity_per_period": 2.8
        },
        {
          "id": "r4",
          "name": "Environmental Health & Safety (EHS) Inspectors",
          "capacity_per_period": 1.4
        }
      ],
      "tasks": [
        {
          "id": "t1",
          "name": "Site walk + as-built verification (North Quad Learning Commons)",
          "duration": 1,
          "resource_needs": {
            "r1": 2.0,
            "r4": 0.5
          },
          "predecessors": [],
          "deadline": 6
        },
        {
          "id": "t2",
          "name": "Temporary partitions, signage, and protected egress setup",
          "duration": 2,
          "resource_needs": {
            "r1": 3.0
          },
          "predecessors": [
            "t1"
          ],
          "deadline": 9
        },
        {
          "id": "t3",
          "name": "Selective demolition (ceiling grid + obsolete casework)",
          "duration": 2,
          "resource_needs": {
            "r1": 4.0
          },
          "predecessors": [
            "t2"
          ],
          "deadline": 12
        },
        {
          "id": "t4",
          "name": "Hazardous materials abatement oversight + clearance sampling",
          "duration": 1,
          "resource_needs": {
            "r1": 1.0,
            "r4": 1.0
          },
          "predecessors": [
            "t3"
          ],
          "deadline": 14
        },
        {
          "id": "t5",
          "name": "Electrical rough-in for new lighting & outlets (lecture hall)",
          "duration": 2,
          "resource_needs": {
            "r2": 2.0,
            "r1": 1.0
          },
          "predecessors": [
            "t4"
          ],
          "deadline": 18
        },
        {
          "id": "t6",
          "name": "Low-voltage cabling rough-in (data drops + AV conduit pulls)",
          "duration": 1,
          "resource_needs": {
            "r3": 2.0,
            "r1": 1.0
          },
          "predecessors": [
            "t4"
          ],
          "deadline": 18
        },
        {
          "id": "t7",
          "name": "HVAC balancing + diffuser relocation (coordination with ceiling)",
          "duration": 3,
          "resource_needs": {
            "r1": 3.0
          },
          "predecessors": [
            "t4"
          ],
          "deadline": 22
        },
        {
          "id": "t8",
          "name": "Drywall patching and paint (study lounge + lecture hall touch-ups)",
          "duration": 1,
          "resource_needs": {
            "r1": 4.0
          },
          "predecessors": [
            "t5",
            "t6",
            "t7"
          ],
          "deadline": 24
        },
        {
          "id": "t9",
          "name": "Ceiling grid reinstall + acoustic panels",
          "duration": 2,
          "resource_needs": {
            "r1": 4.0
          },
          "predecessors": [
            "t8"
          ],
          "deadline": 26
        },
        {
          "id": "t10",
          "name": "Lighting fixtures set + electrical trim-out",
          "duration": 2,
          "resource_needs": {
            "r2": 2.0,
            "r1": 1.0
          },
          "predecessors": [
            "t9"
          ],
          "deadline": 28
        },
        {
          "id": "t11",
          "name": "AV install: projector, lectern DSP, room mics, confidence monitor",
          "duration": 2,
          "resource_needs": {
            "r3": 2.0,
            "r1": 1.0
          },
          "predecessors": [
            "t9"
          ],
          "deadline": 28
        },
        {
          "id": "t12",
          "name": "Network switch install + Wi\u2011Fi AP mounting + patch panel labeling",
          "duration": 2,
          "resource_needs": {
            "r3": 2.0
          },
          "predecessors": [
            "t6",
            "t9"
          ],
          "deadline": 29
        },
        {
          "id": "t13",
          "name": "Integrated systems testing (AV + network + lighting controls)",
          "duration": 3,
          "resource_needs": {
            "r3": 2.0,
            "r2": 1.0,
            "r4": 0.5
          },
          "predecessors": [
            "t10",
            "t11",
            "t12"
          ],
          "deadline": 30
        },
        {
          "id": "t14",
          "name": "Final EHS + Fire Marshal inspection and turnover walk",
          "duration": 1,
          "resource_needs": {
            "r4": 1.0,
            "r1": 1.0
          },
          "predecessors": [
            "t13"
          ],
          "deadline": 30
        }
      ]
    },
    "constraints": [
      {
        "description": "Facilities Crew availability is capped below nominal capacity due to concurrent dorm move-in work; do not exceed 6 crew-units per period.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r1",
            6
          ]
        }
      },
      {
        "description": "Licensed Electricians are shared with another campus project; do not exceed 2 electrician-units per period.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r2",
            2
          ]
        }
      },
      {
        "description": "Campus IT/AV Techs are limited during midterm support weeks; do not exceed 2 tech-units per period.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r3",
            2
          ]
        }
      },
      {
        "description": "EHS Inspectors are only available part-time; do not exceed 1 inspector-unit per period.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r4",
            1
          ]
        }
      },
      {
        "description": "To avoid rework, low-voltage rough-in (t6) must start by period 8 (cabling lead-times and ceiling coordination).",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t6",
            8
          ]
        }
      },
      {
        "description": "Electrical rough-in (t5) must start by period 9 to keep fixture procurement and trim-out on schedule.",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t5",
            9
          ]
        }
      },
      {
        "description": "Abatement clearance (t4) must complete by period 14 (regulatory window for the semester work permit).",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t4",
            14
          ]
        }
      },
      {
        "description": "Ceiling reinstall (t9) must complete by period 20 to allow AV mounting and inspection preparation.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t9",
            20
          ]
        }
      },
      {
        "description": "Integrated systems testing (t13) must complete by period 24 to meet the target completion buffer before reopening.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t13",
            24
          ]
        }
      },
      {
        "description": "Final inspection and turnover (t14) must complete by period 25 to meet the campus reopening target.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t14",
            25
          ]
        }
      },
      {
        "description": "These high-disruption tasks cannot overlap due to noise/dust control in the adjacent active library wing: selective demolition (t3), HVAC balancing/relocation (t7), and ceiling reinstall (t9).",
        "_spec": {
          "fn": "no_overlap",
          "args": [
            [
              "t3",
              "t7",
              "t9"
            ]
          ]
        }
      },
      {
        "description": "These finish-critical tasks cannot overlap because they require the same swing space and lift access: electrical trim-out (t10), AV install (t11), and network/Wi\u2011Fi installation (t12).",
        "_spec": {
          "fn": "no_overlap",
          "args": [
            [
              "t10",
              "t11",
              "t12"
            ]
          ]
        }
      }
    ],
    "instruction": "Minimize total project duration while respecting task dependencies, per-period resource capacity limits, all must-start-by constraints, all milestone deadlines, and the target completion date.",
    "feasible": true,
    "solution": {
      "domain": "project_planning",
      "schedule": [
        {
          "task_id": "t1",
          "start_period": 0,
          "end_period": 1
        },
        {
          "task_id": "t2",
          "start_period": 1,
          "end_period": 3
        },
        {
          "task_id": "t3",
          "start_period": 3,
          "end_period": 5
        },
        {
          "task_id": "t4",
          "start_period": 5,
          "end_period": 6
        },
        {
          "task_id": "t5",
          "start_period": 6,
          "end_period": 8
        },
        {
          "task_id": "t6",
          "start_period": 6,
          "end_period": 7
        },
        {
          "task_id": "t7",
          "start_period": 6,
          "end_period": 9
        },
        {
          "task_id": "t8",
          "start_period": 9,
          "end_period": 10
        },
        {
          "task_id": "t9",
          "start_period": 10,
          "end_period": 12
        },
        {
          "task_id": "t10",
          "start_period": 12,
          "end_period": 14
        },
        {
          "task_id": "t11",
          "start_period": 16,
          "end_period": 18
        },
        {
          "task_id": "t12",
          "start_period": 14,
          "end_period": 16
        },
        {
          "task_id": "t13",
          "start_period": 18,
          "end_period": 21
        },
        {
          "task_id": "t14",
          "start_period": 21,
          "end_period": 22
        }
      ],
      "project_duration": 22,
      "resource_utilization": {}
    }
  },
  {
    "id": "project_planning_b3861f50",
    "difficulty": "expert",
    "scenario": {
      "domain": "project_planning",
      "description": "Aurelia Renewables is building the \u201cCedar Ridge Hybrid Plant\u201d: a 42 MW wind farm + 18 MWh battery energy storage system (BESS) with a new 34.5 kV collector system and SCADA tie-in. The project manager must schedule engineering, civil works, heavy lifts, electrical interconnection, and commissioning while managing scarce specialty resources (grid-protection engineers and a heavy-lift crane) and deadlines driven by utility energization windows and turbine delivery slots. The goal is to minimize overall duration and hit the target completion date despite resource bottlenecks and dependencies.",
      "horizon": 30,
      "target_completion": 25,
      "resources": [
        {
          "id": "r1",
          "name": "Civil Crew (earthworks & foundations)",
          "capacity_per_period": 5.0
        },
        {
          "id": "r2",
          "name": "Electrical & Grid Crew (MV/HV + SCADA field work)",
          "capacity_per_period": 4.0
        },
        {
          "id": "r3",
          "name": "Heavy-Lift Crane (turbine erection time blocks)",
          "capacity_per_period": 2.0
        },
        {
          "id": "r4",
          "name": "Grid Protection Engineers (relay settings & utility studies)",
          "capacity_per_period": 2.0
        }
      ],
      "tasks": [
        {
          "id": "t1",
          "name": "Geotech & foundation design package (Cedar Ridge)",
          "duration": 2,
          "resource_needs": {
            "r4": 1.0
          },
          "predecessors": [],
          "deadline": 8
        },
        {
          "id": "t2",
          "name": "Site access roads and laydown yard grading",
          "duration": 4,
          "resource_needs": {
            "r1": 3.0
          },
          "predecessors": [],
          "deadline": 12
        },
        {
          "id": "t3",
          "name": "Collector trenching & duct bank (34.5 kV)",
          "duration": 5,
          "resource_needs": {
            "r1": 2.0,
            "r2": 1.0
          },
          "predecessors": [
            "t2"
          ],
          "deadline": 18
        },
        {
          "id": "t4",
          "name": "Turbine foundation pours & cure window",
          "duration": 3,
          "resource_needs": {
            "r1": 4.0
          },
          "predecessors": [
            "t1",
            "t2"
          ],
          "deadline": 14
        },
        {
          "id": "t5",
          "name": "Turbine delivery coordination (Vestas V136 logistics slot)",
          "duration": 3,
          "resource_needs": {
            "r2": 1.0
          },
          "predecessors": [
            "t2"
          ],
          "deadline": 16
        },
        {
          "id": "t6",
          "name": "Turbine erection (crane picks and mechanical completion)",
          "duration": 4,
          "resource_needs": {
            "r3": 2.0,
            "r1": 1.0
          },
          "predecessors": [
            "t4",
            "t5"
          ],
          "deadline": 22
        },
        {
          "id": "t7",
          "name": "BESS pad, containment, and inverter skids set",
          "duration": 3,
          "resource_needs": {
            "r1": 3.0
          },
          "predecessors": [
            "t2"
          ],
          "deadline": 17
        },
        {
          "id": "t8",
          "name": "BESS electrical integration (PCS, EMS wiring, HVAC power)",
          "duration": 4,
          "resource_needs": {
            "r2": 3.0
          },
          "predecessors": [
            "t7"
          ],
          "deadline": 23
        },
        {
          "id": "t9",
          "name": "Utility interconnection application + relay coordination study",
          "duration": 3,
          "resource_needs": {
            "r4": 2.0
          },
          "predecessors": [],
          "deadline": 10
        },
        {
          "id": "t10",
          "name": "Substation foundation & steel prep (34.5/115 kV)",
          "duration": 3,
          "resource_needs": {
            "r1": 3.0
          },
          "predecessors": [
            "t2"
          ],
          "deadline": 16
        },
        {
          "id": "t11",
          "name": "Substation build & transformer set (requires crane)",
          "duration": 4,
          "resource_needs": {
            "r2": 2.0,
            "r3": 1.0
          },
          "predecessors": [
            "t10",
            "t9"
          ],
          "deadline": 24
        },
        {
          "id": "t12",
          "name": "SCADA + meteorological mast integration (RTU, fiber, point-to-point test)",
          "duration": 3,
          "resource_needs": {
            "r2": 2.0,
            "r4": 1.0
          },
          "predecessors": [
            "t3",
            "t11"
          ],
          "deadline": 25
        },
        {
          "id": "t13",
          "name": "Plant commissioning & performance verification (wind + BESS)",
          "duration": 4,
          "resource_needs": {
            "r2": 3.0,
            "r4": 1.0
          },
          "predecessors": [
            "t6",
            "t8",
            "t12"
          ],
          "deadline": 29
        }
      ]
    },
    "constraints": [
      {
        "description": "Civil crew allocation may not exceed 5 per period (earthworks, foundations, and pads share the same foreman and equipment fleet).",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r1",
            5
          ]
        }
      },
      {
        "description": "Electrical & grid crew allocation may not exceed 4 per period (MV splicing and SCADA electricians are the same team).",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r2",
            4
          ]
        }
      },
      {
        "description": "Heavy-lift crane availability is capped at 2 blocks per period (weather windows plus one crane).",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r3",
            2
          ]
        }
      },
      {
        "description": "Grid protection engineers are capped at 2 per period (single specialty engineering pair).",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r4",
            2
          ]
        }
      },
      {
        "description": "Heavy-lift crane tasks cannot overlap because the single crane cannot be in two places at once (choose sequencing carefully).",
        "_spec": {
          "fn": "no_overlap",
          "args": [
            [
              "t6",
              "t11"
            ]
          ]
        }
      },
      {
        "description": "Utility study must start by period 3 to secure the utility review slot; delaying it often looks safe early but cascades into substation and SCADA delays.",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t9",
            3
          ]
        }
      },
      {
        "description": "Geotech & foundation design must start by period 2 to avoid rework with the fabricator\u2019s foundation drawings.",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t1",
            2
          ]
        }
      },
      {
        "description": "Turbine delivery coordination must complete by period 16 to hold the Vestas delivery window (decoy: starting later appears fine until it blocks erection).",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t5",
            16
          ]
        }
      },
      {
        "description": "Foundation pours & cure window must complete by period 14 to avoid winter concrete additives and a longer cure cycle.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t4",
            14
          ]
        }
      },
      {
        "description": "Collector trenching & duct bank must complete by period 18 to meet cable pull scheduling and avoid a penalty from the cable vendor.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t3",
            18
          ]
        }
      },
      {
        "description": "Substation build & transformer set must complete by period 24 to align with the utility energization window.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t11",
            24
          ]
        }
      },
      {
        "description": "SCADA + met mast integration must complete by period 25 to allow commissioning by the target completion date.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t12",
            25
          ]
        }
      },
      {
        "description": "Commissioning & performance verification must complete by period 29 (final contractual completion milestone).",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t13",
            29
          ]
        }
      }
    ],
    "instruction": "Minimize total project duration while respecting task dependencies, per-period resource capacity limits, non-overlap constraints, individual task deadlines/milestones, and the target completion date.",
    "feasible": true,
    "solution": {
      "domain": "project_planning",
      "schedule": [
        {
          "task_id": "t1",
          "start_period": 0,
          "end_period": 2
        },
        {
          "task_id": "t2",
          "start_period": 0,
          "end_period": 4
        },
        {
          "task_id": "t3",
          "start_period": 4,
          "end_period": 9
        },
        {
          "task_id": "t4",
          "start_period": 10,
          "end_period": 13
        },
        {
          "task_id": "t5",
          "start_period": 4,
          "end_period": 7
        },
        {
          "task_id": "t6",
          "start_period": 13,
          "end_period": 17
        },
        {
          "task_id": "t7",
          "start_period": 7,
          "end_period": 10
        },
        {
          "task_id": "t8",
          "start_period": 11,
          "end_period": 15
        },
        {
          "task_id": "t9",
          "start_period": 2,
          "end_period": 5
        },
        {
          "task_id": "t10",
          "start_period": 4,
          "end_period": 7
        },
        {
          "task_id": "t11",
          "start_period": 7,
          "end_period": 11
        },
        {
          "task_id": "t12",
          "start_period": 15,
          "end_period": 18
        },
        {
          "task_id": "t13",
          "start_period": 18,
          "end_period": 22
        }
      ],
      "project_duration": 22,
      "resource_utilization": {}
    }
  },
  {
    "id": "project_planning_c43b45a5",
    "difficulty": "expert",
    "scenario": {
      "domain": "project_planning",
      "description": "Arbor Peak Systems is delivering an enterprise software release for its flagship product, NimbusCRM Enterprise. The release adds a new 'Regulated Accounts' module (role-based access, audit trails, and compliance exports) for a Fortune 500 customer. The project manager must schedule cross-functional work (backend, frontend, QA automation, DevOps/SRE) under per-period resource limits, task dependencies, and milestone deadlines while minimizing overall project duration and hitting the target release window.",
      "horizon": 30,
      "target_completion": 25,
      "resources": [
        {
          "id": "r1",
          "name": "Backend Engineers",
          "capacity_per_period": 5.0
        },
        {
          "id": "r2",
          "name": "Frontend Engineers",
          "capacity_per_period": 4.0
        },
        {
          "id": "r3",
          "name": "QA Automation Engineers",
          "capacity_per_period": 3.0
        },
        {
          "id": "r4",
          "name": "DevOps/SRE",
          "capacity_per_period": 2.0
        }
      ],
      "tasks": [
        {
          "id": "t1",
          "name": "Discovery Workshops & Domain Modeling (NimbusCRM Regulated Accounts)",
          "duration": 3,
          "resource_needs": {
            "r1": 1.0,
            "r2": 1.0
          },
          "predecessors": [],
          "deadline": 8
        },
        {
          "id": "t2",
          "name": "Security/Compliance Threat Model (SOC2 + Customer Controls Mapping)",
          "duration": 3,
          "resource_needs": {
            "r1": 1.0,
            "r4": 1.0
          },
          "predecessors": [
            "t1"
          ],
          "deadline": 10
        },
        {
          "id": "t3",
          "name": "UX Flow + Component Spec for Regulated Accounts Console",
          "duration": 4,
          "resource_needs": {
            "r2": 2.0
          },
          "predecessors": [
            "t1"
          ],
          "deadline": 12
        },
        {
          "id": "t4",
          "name": "API Contract + Data Model Finalization (Permissions, Audit Events, Exports)",
          "duration": 4,
          "resource_needs": {
            "r1": 3.0
          },
          "predecessors": [
            "t2"
          ],
          "deadline": 14
        },
        {
          "id": "t5",
          "name": "Backend Implementation: Permission Engine + Audit Trail Service",
          "duration": 3,
          "resource_needs": {
            "r1": 4.0
          },
          "predecessors": [
            "t4"
          ],
          "deadline": 18
        },
        {
          "id": "t6",
          "name": "Frontend Implementation: Console Shell + RBAC UI Integration",
          "duration": 3,
          "resource_needs": {
            "r2": 3.0
          },
          "predecessors": [
            "t3"
          ],
          "deadline": 18
        },
        {
          "id": "t7",
          "name": "Full-Stack Integration: Wire API + State Management + Error Handling",
          "duration": 4,
          "resource_needs": {
            "r1": 2.0,
            "r2": 2.0
          },
          "predecessors": [
            "t5",
            "t6"
          ],
          "deadline": 22
        },
        {
          "id": "t8",
          "name": "QA Automation Upgrade: Regulated Data Fixtures + CI Parallelization",
          "duration": 3,
          "resource_needs": {
            "r3": 2.0,
            "r4": 1.0
          },
          "predecessors": [
            "t2"
          ],
          "deadline": 16
        },
        {
          "id": "t9",
          "name": "E2E Automated Tests: Access Control, Audit Trails, Export Flows",
          "duration": 3,
          "resource_needs": {
            "r3": 3.0,
            "r1": 1.0
          },
          "predecessors": [
            "t7",
            "t8"
          ],
          "deadline": 24
        },
        {
          "id": "t10",
          "name": "Performance & Load Validation: Tune Queries + Cache Strategy",
          "duration": 3,
          "resource_needs": {
            "r1": 2.0,
            "r4": 1.0
          },
          "predecessors": [
            "t5"
          ],
          "deadline": 23
        },
        {
          "id": "t11",
          "name": "Staging Deployment + Security Scan (SAST/DAST + Config Review)",
          "duration": 1,
          "resource_needs": {
            "r4": 2.0
          },
          "predecessors": [
            "t9",
            "t10"
          ],
          "deadline": 24
        },
        {
          "id": "t12",
          "name": "Release Hardening: Bugfix Sprint + Go/No-Go Checklist",
          "duration": 2,
          "resource_needs": {
            "r1": 2.0,
            "r2": 1.0,
            "r3": 1.0,
            "r4": 1.0
          },
          "predecessors": [
            "t11"
          ],
          "deadline": 25
        },
        {
          "id": "t13",
          "name": "Decoy Deliverable: Internal Admin Console Enhancements (Non-critical Stakeholder Request)",
          "duration": 4,
          "resource_needs": {
            "r1": 2.0,
            "r2": 2.0
          },
          "predecessors": [
            "t1"
          ],
          "deadline": 25
        },
        {
          "id": "t14",
          "name": "Observability & Runbooks: Alerts, Dashboards, and On-Call Playbook",
          "duration": 2,
          "resource_needs": {
            "r1": 1.0,
            "r4": 1.0
          },
          "predecessors": [
            "t5"
          ],
          "deadline": 24
        }
      ]
    },
    "constraints": [
      {
        "description": "Backend engineer allocation is effectively capped by code-review throughput; do not exceed 4 backend-engineer units in any period.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r1",
            4
          ]
        }
      },
      {
        "description": "Frontend engineer allocation is capped by design-system gatekeeping; do not exceed 3 frontend-engineer units in any period.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r2",
            3
          ]
        }
      },
      {
        "description": "QA automation team cannot exceed 3 units per period.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r3",
            3
          ]
        }
      },
      {
        "description": "DevOps/SRE capacity is limited to 2 units per period due to on-call load.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r4",
            2
          ]
        }
      },
      {
        "description": "UX specification must start by period 6 to avoid cascading UI rework and procurement delays for accessibility review.",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t3",
            6
          ]
        }
      },
      {
        "description": "API contract work must start by period 8 or downstream integration/testing cannot realistically hit the release window.",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t4",
            8
          ]
        }
      },
      {
        "description": "QA automation upgrade must start by period 8 because the CI pipeline changes have a fixed review window.",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t8",
            8
          ]
        }
      },
      {
        "description": "Compliance threat model must be completed by period 10 (customer security checkpoint).",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t2",
            10
          ]
        }
      },
      {
        "description": "Backend permission engine + audit trail service must complete by period 16 to leave enough runway for integration and E2E validation.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t5",
            16
          ]
        }
      },
      {
        "description": "Staging deployment and security scan must complete by period 24 (production change-freeze begins immediately after).",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t11",
            24
          ]
        }
      },
      {
        "description": "Final release hardening must complete by period 25 to meet the contractual target completion date.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t12",
            25
          ]
        }
      },
      {
        "description": "Hidden interaction: the same principal architect must attend all contract reviews; therefore, the API contract finalization and the internal admin-console enhancements cannot overlap.",
        "_spec": {
          "fn": "no_overlap",
          "args": [
            [
              "t4",
              "t13"
            ]
          ]
        }
      }
    ],
    "instruction": "Minimize total project duration (earliest possible completion) while respecting task dependencies, per-period resource capacity limits, all must-start-by constraints, and all milestone deadlines, and ensuring completion by the target completion date.",
    "feasible": true,
    "solution": {
      "domain": "project_planning",
      "schedule": [
        {
          "task_id": "t1",
          "start_period": 0,
          "end_period": 3
        },
        {
          "task_id": "t2",
          "start_period": 3,
          "end_period": 6
        },
        {
          "task_id": "t3",
          "start_period": 3,
          "end_period": 7
        },
        {
          "task_id": "t4",
          "start_period": 6,
          "end_period": 10
        },
        {
          "task_id": "t5",
          "start_period": 10,
          "end_period": 13
        },
        {
          "task_id": "t6",
          "start_period": 7,
          "end_period": 10
        },
        {
          "task_id": "t7",
          "start_period": 13,
          "end_period": 17
        },
        {
          "task_id": "t8",
          "start_period": 6,
          "end_period": 9
        },
        {
          "task_id": "t9",
          "start_period": 17,
          "end_period": 20
        },
        {
          "task_id": "t10",
          "start_period": 13,
          "end_period": 16
        },
        {
          "task_id": "t11",
          "start_period": 20,
          "end_period": 21
        },
        {
          "task_id": "t12",
          "start_period": 21,
          "end_period": 23
        },
        {
          "task_id": "t13",
          "start_period": 17,
          "end_period": 21
        },
        {
          "task_id": "t14",
          "start_period": 16,
          "end_period": 18
        }
      ],
      "project_duration": 23,
      "resource_utilization": {}
    }
  },
  {
    "id": "project_planning_4fb2f353",
    "difficulty": "expert",
    "scenario": {
      "domain": "project_planning",
      "description": "NeonForge Studios is building a vertical-slice demo for its cyberpunk action-RPG \"Chrome Requiem\" to pitch at the NightCity Games Showcase. The project manager must schedule cross-discipline work (engineering, art, QA, DevOps) under tight per-period capacity limits, interlocking dependencies (build pipeline gates, content lock, compliance), and several hard milestones for the showcase submission.",
      "horizon": 30,
      "target_completion": 25,
      "resources": [
        {
          "id": "r1",
          "name": "Gameplay/Engine Developers",
          "capacity_per_period": 5.0
        },
        {
          "id": "r2",
          "name": "3D Artists & Animators",
          "capacity_per_period": 4.0
        },
        {
          "id": "r3",
          "name": "QA Testers",
          "capacity_per_period": 3.0
        },
        {
          "id": "r4",
          "name": "Build/DevOps Engineers",
          "capacity_per_period": 2.0
        }
      ],
      "tasks": [
        {
          "id": "t1",
          "name": "Core Combat Prototype (hitbox, stamina, targeting)",
          "duration": 4,
          "resource_needs": {
            "r1": 3.0
          },
          "predecessors": [],
          "deadline": 10
        },
        {
          "id": "t2",
          "name": "Movement + Parkour Controller",
          "duration": 3,
          "resource_needs": {
            "r1": 2.0
          },
          "predecessors": [],
          "deadline": 11
        },
        {
          "id": "t3",
          "name": "Vertical Slice Level Blockout (Megablock Alley)",
          "duration": 4,
          "resource_needs": {
            "r2": 3.0
          },
          "predecessors": [],
          "deadline": 12
        },
        {
          "id": "t4",
          "name": "Build Pipeline + Automated Nightly Builds (ChromeCI)",
          "duration": 3,
          "resource_needs": {
            "r4": 2.0
          },
          "predecessors": [],
          "deadline": 9
        },
        {
          "id": "t5",
          "name": "AI Enemy Behaviors (patrol, alert, melee/ranged)",
          "duration": 4,
          "resource_needs": {
            "r1": 3.0
          },
          "predecessors": [
            "t1",
            "t2"
          ],
          "deadline": 16
        },
        {
          "id": "t6",
          "name": "Hero Character Model + Rig (Nyx)",
          "duration": 5,
          "resource_needs": {
            "r2": 3.0
          },
          "predecessors": [],
          "deadline": 15
        },
        {
          "id": "t7",
          "name": "Enemy Grunt Model + Anim Set",
          "duration": 4,
          "resource_needs": {
            "r2": 3.0
          },
          "predecessors": [],
          "deadline": 16
        },
        {
          "id": "t8",
          "name": "Weapon VFX + UI Feedback (muzzle flash, hit sparks, damage numbers)",
          "duration": 3,
          "resource_needs": {
            "r2": 2.0,
            "r1": 1.0
          },
          "predecessors": [
            "t1"
          ],
          "deadline": 18
        },
        {
          "id": "t9",
          "name": "Integration: Combat + AI + Level (first playable loop)",
          "duration": 5,
          "resource_needs": {
            "r1": 4.0,
            "r4": 1.0
          },
          "predecessors": [
            "t3",
            "t4",
            "t5"
          ],
          "deadline": 22
        },
        {
          "id": "t10",
          "name": "Performance Pass (frame pacing + streaming budget)",
          "duration": 3,
          "resource_needs": {
            "r1": 3.0,
            "r4": 1.0
          },
          "predecessors": [
            "t9"
          ],
          "deadline": 24
        },
        {
          "id": "t11",
          "name": "QA Test Plan + Smoke Suite for Vertical Slice",
          "duration": 2,
          "resource_needs": {
            "r3": 2.0
          },
          "predecessors": [
            "t4"
          ],
          "deadline": 14
        },
        {
          "id": "t12",
          "name": "QA Bug Bash Round 1 (stability + blockers)",
          "duration": 3,
          "resource_needs": {
            "r3": 3.0,
            "r1": 1.0
          },
          "predecessors": [
            "t9",
            "t11"
          ],
          "deadline": 25
        },
        {
          "id": "t13",
          "name": "Compliance/Controller-Cert Checklist (TRC-lite)",
          "duration": 2,
          "resource_needs": {
            "r4": 1.0,
            "r1": 1.0
          },
          "predecessors": [
            "t4",
            "t9"
          ],
          "deadline": 24
        },
        {
          "id": "t14",
          "name": "Release Candidate Packaging + Showcase Submission Build",
          "duration": 2,
          "resource_needs": {
            "r4": 2.0,
            "r1": 1.0
          },
          "predecessors": [
            "t10",
            "t12",
            "t13"
          ],
          "deadline": 25
        }
      ]
    },
    "constraints": [
      {
        "description": "Gameplay/Engine developer allocation cannot exceed 4 per period (shared across engine work and integration support).",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r1",
            4
          ]
        }
      },
      {
        "description": "3D art allocation cannot exceed 3 per period (outsourcing coordination consumes remaining capacity).",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r2",
            3
          ]
        }
      },
      {
        "description": "QA allocation cannot exceed 3 per period.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r3",
            3
          ]
        }
      },
      {
        "description": "Build/DevOps allocation cannot exceed 2 per period.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r4",
            2
          ]
        }
      },
      {
        "description": "Build Pipeline + Automated Nightly Builds (ChromeCI) must start by period 3 to avoid downstream gating delays.",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t4",
            3
          ]
        }
      },
      {
        "description": "Core Combat Prototype must start by period 4 to ensure AI and feedback tasks can complete on time.",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t1",
            4
          ]
        }
      },
      {
        "description": "Integration (first playable loop) is a gated engineering focus; it cannot overlap with Performance Pass or Release Candidate Packaging.",
        "_spec": {
          "fn": "no_overlap",
          "args": [
            [
              "t9",
              "t10",
              "t14"
            ]
          ]
        }
      },
      {
        "description": "Hero Character Model + Rig (Nyx) must complete by period 17 (content lock for animation retargeting).",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t6",
            17
          ]
        }
      },
      {
        "description": "Integration: first playable loop must complete by period 22 (internal greenlight gate).",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t9",
            22
          ]
        }
      },
      {
        "description": "Release Candidate Packaging + Showcase Submission Build must complete by period 25 (NightCity Showcase submission cutoff).",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t14",
            25
          ]
        }
      }
    ],
    "instruction": "Minimize total project duration while respecting task dependencies, per-period resource capacity limits, the no-overlap and must-start constraints, individual task deadlines, and the target completion date (period 25).",
    "feasible": true,
    "solution": {
      "domain": "project_planning",
      "schedule": [
        {
          "task_id": "t1",
          "start_period": 0,
          "end_period": 4
        },
        {
          "task_id": "t2",
          "start_period": 4,
          "end_period": 7
        },
        {
          "task_id": "t3",
          "start_period": 0,
          "end_period": 4
        },
        {
          "task_id": "t4",
          "start_period": 0,
          "end_period": 3
        },
        {
          "task_id": "t5",
          "start_period": 7,
          "end_period": 11
        },
        {
          "task_id": "t6",
          "start_period": 7,
          "end_period": 12
        },
        {
          "task_id": "t7",
          "start_period": 12,
          "end_period": 16
        },
        {
          "task_id": "t8",
          "start_period": 4,
          "end_period": 7
        },
        {
          "task_id": "t9",
          "start_period": 11,
          "end_period": 16
        },
        {
          "task_id": "t10",
          "start_period": 16,
          "end_period": 19
        },
        {
          "task_id": "t11",
          "start_period": 3,
          "end_period": 5
        },
        {
          "task_id": "t12",
          "start_period": 16,
          "end_period": 19
        },
        {
          "task_id": "t13",
          "start_period": 19,
          "end_period": 21
        },
        {
          "task_id": "t14",
          "start_period": 21,
          "end_period": 23
        }
      ],
      "project_duration": 23,
      "resource_utilization": {}
    }
  },
  {
    "id": "project_planning_b848f775",
    "difficulty": "expert",
    "scenario": {
      "domain": "project_planning",
      "description": "Film post-production & VFX schedule for LumenGate Pictures' feature \"Neon Cathedral\". SilverReel Post (editorial/online, DI) and Parallax VFX (shots, renders, comps) must coordinate a locked-cut turnover, VFX production, client review, final DI grade, final mix, and mastering/delivery. The PM must minimize makespan while respecting per-period resource caps, task dependencies, and deliverable deadlines\u2014despite bottlenecks like limited producer bandwidth and a single final-approval theater that cannot host DI, mix, and mastering simultaneously.",
      "horizon": 30,
      "target_completion": 25,
      "resources": [
        {
          "id": "r1",
          "name": "VFX Artists/TDs (Parallax VFX)",
          "capacity_per_period": 10.0
        },
        {
          "id": "r2",
          "name": "Compositors (Parallax VFX)",
          "capacity_per_period": 8.0
        },
        {
          "id": "r3",
          "name": "Render Farm Nodes (Parallax RenderGrid)",
          "capacity_per_period": 12.0
        },
        {
          "id": "r4",
          "name": "Editorial/Online Ops (SilverReel Post)",
          "capacity_per_period": 4.0
        },
        {
          "id": "r5",
          "name": "Producers/Coordinators (Post PM + VFX Coord)",
          "capacity_per_period": 3.0
        },
        {
          "id": "r6",
          "name": "DI Color Suite (Resolve Theater A)",
          "capacity_per_period": 2.0
        },
        {
          "id": "r7",
          "name": "Sound Mix Stage (Dolby 5.1 Room B)",
          "capacity_per_period": 2.0
        }
      ],
      "tasks": [
        {
          "id": "t1",
          "name": "Offline ingest & conform (Avid project setup, EDL/AAF sanity)",
          "duration": 1,
          "resource_needs": {
            "r4": 2.0,
            "r5": 1.0
          },
          "predecessors": [],
          "deadline": 4
        },
        {
          "id": "t2",
          "name": "Picture lock & VFX turnover pack (plates, handles, CDL refs, shot list v1.0)",
          "duration": 3,
          "resource_needs": {
            "r4": 2.0,
            "r5": 2.0
          },
          "predecessors": [
            "t1"
          ],
          "deadline": 8
        },
        {
          "id": "t3",
          "name": "LIDAR/photogrammetry + asset scan ingest (Neon Chase set pieces)",
          "duration": 4,
          "resource_needs": {
            "r1": 3.0,
            "r3": 2.0,
            "r5": 1.0
          },
          "predecessors": [
            "t2"
          ],
          "deadline": 13
        },
        {
          "id": "t4",
          "name": "Matchmove + layout (\"Neon Chase\" sequence: camera solve, proxy geo, techvis)",
          "duration": 4,
          "resource_needs": {
            "r1": 5.0
          },
          "predecessors": [
            "t3"
          ],
          "deadline": 18
        },
        {
          "id": "t5",
          "name": "2D cleanup + screen inserts (\"Metro Billboards\" sequence)",
          "duration": 3,
          "resource_needs": {
            "r1": 2.0,
            "r2": 2.0
          },
          "predecessors": [
            "t3"
          ],
          "deadline": 19
        },
        {
          "id": "t6",
          "name": "FX sims + lookdev renders (\"Neon Chase\": rain interactions, hologram FX, finals)",
          "duration": 4,
          "resource_needs": {
            "r1": 5.0,
            "r3": 7.0
          },
          "predecessors": [
            "t4"
          ],
          "deadline": 22
        },
        {
          "id": "t7",
          "name": "Temp comps for editorial screenings (quick comps + continuity check)",
          "duration": 2,
          "resource_needs": {
            "r2": 4.0,
            "r5": 1.0
          },
          "predecessors": [
            "t5",
            "t6"
          ],
          "deadline": 21
        },
        {
          "id": "t11",
          "name": "Director review round + consolidated notes integration (single round)",
          "duration": 2,
          "resource_needs": {
            "r1": 2.0,
            "r2": 2.0,
            "r5": 2.0
          },
          "predecessors": [
            "t7"
          ],
          "deadline": 22
        },
        {
          "id": "t8",
          "name": "Final comps + shot QC + delivery archive (EXR + ProRes VFX pulls)",
          "duration": 3,
          "resource_needs": {
            "r2": 5.0
          },
          "predecessors": [
            "t11"
          ],
          "deadline": 24
        },
        {
          "id": "t9",
          "name": "DI grade pass (theatrical look, VFX-aware trims)",
          "duration": 2,
          "resource_needs": {
            "r6": 2.0
          },
          "predecessors": [
            "t7"
          ],
          "deadline": 24
        },
        {
          "id": "t10",
          "name": "Final sound edit + 5.1 mix (dialogue, FX, music stems)",
          "duration": 3,
          "resource_needs": {
            "r7": 2.0,
            "r5": 1.0
          },
          "predecessors": [
            "t2"
          ],
          "deadline": 23
        },
        {
          "id": "t12",
          "name": "Online mastering + delivery (IMF, DCP, ProRes, QC reports to LumenGate)",
          "duration": 1,
          "resource_needs": {
            "r4": 2.0,
            "r5": 1.0
          },
          "predecessors": [
            "t8",
            "t9",
            "t10"
          ],
          "deadline": 25
        }
      ]
    },
    "constraints": [
      {
        "description": "VFX artist/TD utilization is capped to protect shot quality and reduce context-switching across sequences.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r1",
            7
          ]
        }
      },
      {
        "description": "Compositing throughput is limited by available Nuke seats and lead-comp review bandwidth.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r2",
            5
          ]
        }
      },
      {
        "description": "RenderGrid allocation cannot exceed the nightly priority quota.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r3",
            9
          ]
        }
      },
      {
        "description": "Producer/coordinator attention is capped; high-touch milestones consume most of it.",
        "_spec": {
          "fn": "resource_limit",
          "args": [
            "r5",
            2
          ]
        }
      },
      {
        "description": "To keep vendor bookings, the picture-lock turnover pack must begin early.",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t2",
            3
          ]
        }
      },
      {
        "description": "Scanning/photogrammetry ingest must start soon after turnover to avoid losing the capture team window.",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t3",
            6
          ]
        }
      },
      {
        "description": "The Dolby mix stage is pre-booked; sound work must start by the booking window or the project slips.",
        "_spec": {
          "fn": "must_start_by",
          "args": [
            "t10",
            7
          ]
        }
      },
      {
        "description": "Resolve Theater A doubles as the final-approval room: DI grade, final mix playback, and mastering/QC cannot overlap (single room + single client sign-off slot).",
        "_spec": {
          "fn": "no_overlap",
          "args": [
            [
              "t9",
              "t10",
              "t12"
            ]
          ]
        }
      },
      {
        "description": "Editorial must have temp comps ready for the internal screening by period 21.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t7",
            21
          ]
        }
      },
      {
        "description": "The DI grade must complete by period 24 to leave a clean runway for mastering under the single-theater constraint.",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t9",
            24
          ]
        }
      },
      {
        "description": "Final mastering and delivery must complete by period 25 (festival submission + distributor ingest).",
        "_spec": {
          "fn": "milestone",
          "args": [
            "t12",
            25
          ]
        }
      }
    ],
    "instruction": "Minimize total project duration while respecting task dependencies, per-period resource capacity limits, the explicit resource_limit constraints, all individual task deadlines/milestones, and the target completion date.",
    "feasible": true,
    "solution": {
      "domain": "project_planning",
      "schedule": [
        {
          "task_id": "t1",
          "start_period": 0,
          "end_period": 1
        },
        {
          "task_id": "t2",
          "start_period": 1,
          "end_period": 4
        },
        {
          "task_id": "t3",
          "start_period": 4,
          "end_period": 8
        },
        {
          "task_id": "t4",
          "start_period": 8,
          "end_period": 12
        },
        {
          "task_id": "t5",
          "start_period": 8,
          "end_period": 11
        },
        {
          "task_id": "t6",
          "start_period": 12,
          "end_period": 16
        },
        {
          "task_id": "t7",
          "start_period": 16,
          "end_period": 18
        },
        {
          "task_id": "t11",
          "start_period": 18,
          "end_period": 20
        },
        {
          "task_id": "t8",
          "start_period": 20,
          "end_period": 23
        },
        {
          "task_id": "t9",
          "start_period": 18,
          "end_period": 20
        },
        {
          "task_id": "t10",
          "start_period": 4,
          "end_period": 7
        },
        {
          "task_id": "t12",
          "start_period": 23,
          "end_period": 24
        }
      ],
      "project_duration": 24,
      "resource_utilization": {}
    }
  },
  {
    "id": "shift_scheduling_a90acfb0",
    "difficulty": "expert",
    "scenario": {
      "domain": "shift_scheduling",
      "description": "Rivergate Police Department must staff patrol and support details for a high-activity weekend. The watch commander must assign officers/civilian staff to six shift details based on certifications (patrol, CIT, traffic, bilingual), availability, overtime limits, fairness, and total labor cost.",
      "employees": [
        {
          "id": "e1",
          "name": "Sgt. Maya Torres",
          "skills": [
            "patrol",
            "cit",
            "traffic",
            "supervisor"
          ],
          "availability": [
            "day_patrol",
            "swing_patrol",
            "traffic"
          ],
          "max_shifts": 6,
          "hourly_rate": 42.0
        },
        {
          "id": "e2",
          "name": "Ofc. Liam Chen",
          "skills": [
            "patrol",
            "cit"
          ],
          "availability": [
            "night_patrol",
            "swing_patrol"
          ],
          "max_shifts": 6,
          "hourly_rate": 34.0
        },
        {
          "id": "e3",
          "name": "Ofc. Jenna Price",
          "skills": [
            "patrol",
            "traffic"
          ],
          "availability": [
            "day_patrol",
            "traffic"
          ],
          "max_shifts": 6,
          "hourly_rate": 31.0
        },
        {
          "id": "e4",
          "name": "Ofc. Omar Haddad",
          "skills": [
            "patrol",
            "cit",
            "spanish"
          ],
          "availability": [
            "night_patrol",
            "community",
            "swing_patrol"
          ],
          "max_shifts": 6,
          "hourly_rate": 36.0
        },
        {
          "id": "e5",
          "name": "Ofc. Riley Novak",
          "skills": [
            "patrol",
            "spanish"
          ],
          "availability": [
            "day_patrol",
            "community"
          ],
          "max_shifts": 6,
          "hourly_rate": 29.0
        },
        {
          "id": "e6",
          "name": "Det. Erin Walsh",
          "skills": [
            "patrol",
            "booking"
          ],
          "availability": [
            "day_patrol",
            "booking"
          ],
          "max_shifts": 6,
          "hourly_rate": 38.0
        },
        {
          "id": "e7",
          "name": "Civ. Tech. Ava Brooks",
          "skills": [
            "booking"
          ],
          "availability": [
            "booking",
            "swing_patrol"
          ],
          "max_shifts": 6,
          "hourly_rate": 22.0
        },
        {
          "id": "e8",
          "name": "Civ. Tech. Noah Grant",
          "skills": [
            "booking",
            "spanish"
          ],
          "availability": [
            "booking",
            "community"
          ],
          "max_shifts": 6,
          "hourly_rate": 23.0
        },
        {
          "id": "e9",
          "name": "Ofc. Sofia Mendes",
          "skills": [
            "patrol",
            "cit",
            "spanish"
          ],
          "availability": [
            "night_patrol",
            "community",
            "day_patrol"
          ],
          "max_shifts": 6,
          "hourly_rate": 35.0
        },
        {
          "id": "e10",
          "name": "Ofc. Victor Singh",
          "skills": [
            "patrol",
            "traffic"
          ],
          "availability": [
            "day_patrol",
            "swing_patrol",
            "night_patrol",
            "traffic"
          ],
          "max_shifts": 6,
          "hourly_rate": 28.0
        },
        {
          "id": "e11",
          "name": "Ofc. Hannah Kim",
          "skills": [
            "patrol",
            "traffic",
            "cit"
          ],
          "availability": [
            "swing_patrol",
            "traffic",
            "night_patrol"
          ],
          "max_shifts": 6,
          "hourly_rate": 32.0
        },
        {
          "id": "e12",
          "name": "Ofc. Caleb Morgan",
          "skills": [
            "patrol"
          ],
          "availability": [
            "day_patrol",
            "swing_patrol"
          ],
          "max_shifts": 6,
          "hourly_rate": 27.0
        },
        {
          "id": "e13",
          "name": "Ofc. Tessa Alvarez",
          "skills": [
            "patrol",
            "cit"
          ],
          "availability": [
            "night_patrol",
            "day_patrol"
          ],
          "max_shifts": 6,
          "hourly_rate": 33.0
        },
        {
          "id": "e14",
          "name": "Reserve Eli Parker",
          "skills": [
            "patrol",
            "booking",
            "spanish"
          ],
          "availability": [
            "swing_patrol",
            "booking",
            "night_patrol",
            "community"
          ],
          "max_shifts": 6,
          "hourly_rate": 26.0
        }
      ],
      "shifts": [
        {
          "id": "day_patrol",
          "name": "Day Patrol Watch (0600-1600)",
          "required_skills": [
            "patrol"
          ],
          "min_staff": 5,
          "max_staff": 8,
          "hours": 10.0
        },
        {
          "id": "swing_patrol",
          "name": "Swing Patrol Watch (1400-2400)",
          "required_skills": [
            "patrol"
          ],
          "min_staff": 5,
          "max_staff": 8,
          "hours": 10.0
        },
        {
          "id": "night_patrol",
          "name": "Night Patrol Watch (2200-0800) \u2014 CIT-heavy call load",
          "required_skills": [
            "patrol",
            "cit"
          ],
          "min_staff": 3,
          "max_staff": 6,
          "hours": 10.0
        },
        {
          "id": "traffic",
          "name": "Traffic Enforcement Detail (1200-2000)",
          "required_skills": [
            "traffic"
          ],
          "min_staff": 2,
          "max_staff": 4,
          "hours": 8.0
        },
        {
          "id": "community",
          "name": "Community Outreach / Spanish-Language Liaison (1000-1800)",
          "required_skills": [
            "patrol",
            "spanish"
          ],
          "min_staff": 2,
          "max_staff": 4,
          "hours": 8.0
        },
        {
          "id": "booking",
          "name": "Booking & Records Desk (1600-2400)",
          "required_skills": [
            "booking"
          ],
          "min_staff": 2,
          "max_staff": 4,
          "hours": 8.0
        }
      ]
    },
    "constraints": [
      {
        "description": "No employee may work more than 10 overtime hours beyond 40 regular hours (total hours assigned beyond 40 must be <= 10).",
        "_spec": {
          "fn": "max_overtime",
          "args": [
            10,
            40
          ]
        }
      },
      {
        "description": "Fairness requirement: no employee should have more than 2 shifts more than any other employee.",
        "_spec": {
          "fn": "fairness",
          "args": [
            2
          ]
        }
      },
      {
        "description": "No employee may be assigned more than 6 total shifts across the scheduling horizon.",
        "_spec": {
          "fn": "max_total",
          "args": [
            6
          ]
        }
      },
      {
        "description": "Minimum coverage baseline: every shift must have at least 2 staff (shift-specific minimums may be higher).",
        "_spec": {
          "fn": "min_coverage",
          "args": [
            2
          ]
        }
      },
      {
        "description": "Rest/role separation rules: nobody can work Day Patrol + Night Patrol, Swing Patrol + Night Patrol, or Traffic + Booking on the same schedule.",
        "_spec": {
          "fn": "no_double",
          "args": [
            [
              [
                "day_patrol",
                "night_patrol"
              ],
              [
                "swing_patrol",
                "night_patrol"
              ],
              [
                "traffic",
                "booking"
              ]
            ]
          ]
        }
      }
    ],
    "instruction": "Minimize total labor cost while meeting all shift staffing requirements, respecting each employee\u2019s availability and required skills, and complying with overtime limits, maximum total shifts, fairness, and no-double (rest/role separation) constraints.",
    "feasible": true,
    "solution": {
      "domain": "shift_scheduling",
      "assignments": [
        {
          "employee_id": "e2",
          "shift_id": "swing_patrol"
        },
        {
          "employee_id": "e3",
          "shift_id": "day_patrol"
        },
        {
          "employee_id": "e3",
          "shift_id": "traffic"
        },
        {
          "employee_id": "e4",
          "shift_id": "night_patrol"
        },
        {
          "employee_id": "e5",
          "shift_id": "day_patrol"
        },
        {
          "employee_id": "e5",
          "shift_id": "community"
        },
        {
          "employee_id": "e6",
          "shift_id": "day_patrol"
        },
        {
          "employee_id": "e7",
          "shift_id": "booking"
        },
        {
          "employee_id": "e8",
          "shift_id": "booking"
        },
        {
          "employee_id": "e9",
          "shift_id": "night_patrol"
        },
        {
          "employee_id": "e10",
          "shift_id": "day_patrol"
        },
        {
          "employee_id": "e10",
          "shift_id": "swing_patrol"
        },
        {
          "employee_id": "e11",
          "shift_id": "swing_patrol"
        },
        {
          "employee_id": "e11",
          "shift_id": "traffic"
        },
        {
          "employee_id": "e12",
          "shift_id": "day_patrol"
        },
        {
          "employee_id": "e12",
          "shift_id": "swing_patrol"
        },
        {
          "employee_id": "e13",
          "shift_id": "night_patrol"
        },
        {
          "employee_id": "e14",
          "shift_id": "swing_patrol"
        },
        {
          "employee_id": "e14",
          "shift_id": "community"
        }
      ],
      "total_cost": 5344.0,
      "total_hours": 178.0
    }
  },
  {
    "id": "shift_scheduling_1cc0e99e",
    "difficulty": "expert",
    "scenario": {
      "domain": "shift_scheduling",
      "description": "Riverview Metro Transit must staff weekday bus service with a mix of standard routes, an articulated-bus express block, and a stadium shuttle. The manager must assign qualified operators while respecting availability windows, minimizing labor cost, and keeping overtime and workload distribution fair. Several low-cost operators are missing key endorsements (air-brake or articulated), creating greedy traps where filling early shifts cheaply can block later specialty coverage and force expensive overtime.",
      "employees": [
        {
          "id": "e1",
          "name": "Maya Ortiz",
          "skills": [
            "bus_operator",
            "air_brake",
            "wheelchair_securement",
            "farebox"
          ],
          "availability": [
            "am_peak",
            "midday_relief",
            "pm_peak"
          ],
          "max_shifts": 4,
          "hourly_rate": 33.0
        },
        {
          "id": "e2",
          "name": "Derek Han",
          "skills": [
            "bus_operator",
            "wheelchair_securement",
            "farebox"
          ],
          "availability": [
            "am_peak",
            "midday_relief",
            "pm_peak"
          ],
          "max_shifts": 5,
          "hourly_rate": 26.0
        },
        {
          "id": "e3",
          "name": "Lena Cho",
          "skills": [
            "bus_operator",
            "air_brake",
            "wheelchair_securement",
            "farebox",
            "articulated_endorsement"
          ],
          "availability": [
            "am_peak",
            "pm_peak",
            "articulated_express"
          ],
          "max_shifts": 4,
          "hourly_rate": 42.0
        },
        {
          "id": "e4",
          "name": "Noah Patel",
          "skills": [
            "bus_operator",
            "wheelchair_securement",
            "farebox"
          ],
          "availability": [
            "am_peak",
            "pm_peak"
          ],
          "max_shifts": 4,
          "hourly_rate": 24.0
        },
        {
          "id": "e5",
          "name": "Tanya Brooks",
          "skills": [
            "bus_operator",
            "air_brake",
            "wheelchair_securement",
            "farebox"
          ],
          "availability": [
            "midday_relief",
            "pm_peak",
            "late_night"
          ],
          "max_shifts": 4,
          "hourly_rate": 31.0
        },
        {
          "id": "e6",
          "name": "Samir Khan",
          "skills": [
            "bus_operator",
            "wheelchair_securement",
            "farebox"
          ],
          "availability": [
            "midday_relief",
            "pm_peak",
            "stadium_shuttle"
          ],
          "max_shifts": 5,
          "hourly_rate": 23.0
        },
        {
          "id": "e7",
          "name": "Grace Kim",
          "skills": [
            "bus_operator",
            "air_brake",
            "wheelchair_securement",
            "farebox",
            "event_shuttle"
          ],
          "availability": [
            "pm_peak",
            "late_night",
            "stadium_shuttle"
          ],
          "max_shifts": 4,
          "hourly_rate": 34.0
        },
        {
          "id": "e8",
          "name": "Omar El-Sayed",
          "skills": [
            "bus_operator",
            "air_brake",
            "wheelchair_securement",
            "farebox"
          ],
          "availability": [
            "am_peak",
            "late_night"
          ],
          "max_shifts": 3,
          "hourly_rate": 29.0
        },
        {
          "id": "e9",
          "name": "Priya Nair",
          "skills": [
            "bus_operator",
            "wheelchair_securement",
            "farebox",
            "event_shuttle"
          ],
          "availability": [
            "midday_relief",
            "stadium_shuttle"
          ],
          "max_shifts": 3,
          "hourly_rate": 22.0
        },
        {
          "id": "e10",
          "name": "Jordan Miles",
          "skills": [
            "bus_operator",
            "air_brake",
            "wheelchair_securement",
            "farebox",
            "articulated_endorsement"
          ],
          "availability": [
            "am_peak",
            "midday_relief",
            "articulated_express",
            "late_night"
          ],
          "max_shifts": 4,
          "hourly_rate": 40.0
        },
        {
          "id": "e11",
          "name": "Carla Ruiz",
          "skills": [
            "bus_operator",
            "wheelchair_securement",
            "farebox"
          ],
          "availability": [
            "am_peak",
            "midday_relief",
            "late_night"
          ],
          "max_shifts": 4,
          "hourly_rate": 25.0
        },
        {
          "id": "e12",
          "name": "Evan Park",
          "skills": [
            "bus_operator",
            "air_brake",
            "wheelchair_securement",
            "farebox",
            "event_shuttle"
          ],
          "availability": [
            "am_peak",
            "pm_peak",
            "stadium_shuttle",
            "late_night"
          ],
          "max_shifts": 4,
          "hourly_rate": 32.0
        }
      ],
      "shifts": [
        {
          "id": "am_peak",
          "name": "AM Peak Pull-Out (05:00\u201311:00)",
          "required_skills": [
            "bus_operator",
            "wheelchair_securement",
            "farebox"
          ],
          "min_staff": 3,
          "max_staff": 6,
          "hours": 6.0
        },
        {
          "id": "midday_relief",
          "name": "Midday Relief & Layover Coverage (10:00\u201316:00)",
          "required_skills": [
            "bus_operator",
            "wheelchair_securement",
            "farebox"
          ],
          "min_staff": 2,
          "max_staff": 5,
          "hours": 6.0
        },
        {
          "id": "pm_peak",
          "name": "PM Peak Pull-In (14:00\u201320:00)",
          "required_skills": [
            "bus_operator",
            "wheelchair_securement",
            "farebox"
          ],
          "min_staff": 3,
          "max_staff": 6,
          "hours": 6.0
        },
        {
          "id": "late_night",
          "name": "Late Night Owl Service (22:00\u201304:00)",
          "required_skills": [
            "bus_operator",
            "air_brake",
            "wheelchair_securement"
          ],
          "min_staff": 1,
          "max_staff": 3,
          "hours": 6.0
        },
        {
          "id": "articulated_express",
          "name": "Articulated Express Block (16:00\u201322:00)",
          "required_skills": [
            "bus_operator",
            "air_brake",
            "articulated_endorsement"
          ],
          "min_staff": 2,
          "max_staff": 3,
          "hours": 6.0
        },
        {
          "id": "stadium_shuttle",
          "name": "Stadium Event Shuttle (18:00\u201324:00)",
          "required_skills": [
            "bus_operator",
            "event_shuttle"
          ],
          "min_staff": 3,
          "max_staff": 5,
          "hours": 6.0
        }
      ]
    },
    "constraints": [
      {
        "description": "No operator may exceed 10 overtime hours beyond 40 regular hours for the week (treat each assigned shift as its listed hours).",
        "_spec": {
          "fn": "max_overtime",
          "args": [
            10,
            40
          ]
        }
      },
      {
        "description": "For fairness, the difference between the most-assigned and least-assigned operators must be at most 2 shifts.",
        "_spec": {
          "fn": "fairness",
          "args": [
            2
          ]
        }
      },
      {
        "description": "No operator may be assigned more than 4 total shifts this week (regardless of availability).",
        "_spec": {
          "fn": "max_total",
          "args": [
            4
          ]
        }
      },
      {
        "description": "Each shift must meet its minimum staffing requirement (at least the shift min_staff).",
        "_spec": {
          "fn": "min_coverage",
          "args": [
            1
          ]
        }
      },
      {
        "description": "Rest rule: no operator may work AM Peak and Late Night in the same schedule period; and no operator may work PM Peak and Stadium Shuttle in the same schedule period (insufficient turnaround).",
        "_spec": {
          "fn": "no_double",
          "args": [
            [
              [
                "am_peak",
                "late_night"
              ],
              [
                "pm_peak",
                "stadium_shuttle"
              ]
            ]
          ]
        }
      }
    ],
    "instruction": "Assign employees to shifts to minimize total labor cost while meeting all shift staffing minimums and respecting each employee\u2019s availability and skills. Also respect the overtime limit, the max-total-shifts limit, the fairness constraint (max shift-count difference), and the no-double rest rules.",
    "feasible": true,
    "solution": {
      "domain": "shift_scheduling",
      "assignments": [
        {
          "employee_id": "e2",
          "shift_id": "am_peak"
        },
        {
          "employee_id": "e2",
          "shift_id": "pm_peak"
        },
        {
          "employee_id": "e3",
          "shift_id": "articulated_express"
        },
        {
          "employee_id": "e4",
          "shift_id": "am_peak"
        },
        {
          "employee_id": "e4",
          "shift_id": "pm_peak"
        },
        {
          "employee_id": "e6",
          "shift_id": "midday_relief"
        },
        {
          "employee_id": "e6",
          "shift_id": "pm_peak"
        },
        {
          "employee_id": "e7",
          "shift_id": "stadium_shuttle"
        },
        {
          "employee_id": "e8",
          "shift_id": "late_night"
        },
        {
          "employee_id": "e9",
          "shift_id": "midday_relief"
        },
        {
          "employee_id": "e9",
          "shift_id": "stadium_shuttle"
        },
        {
          "employee_id": "e10",
          "shift_id": "articulated_express"
        },
        {
          "employee_id": "e11",
          "shift_id": "am_peak"
        },
        {
          "employee_id": "e12",
          "shift_id": "stadium_shuttle"
        }
      ],
      "total_cost": 2352.0,
      "total_hours": 84.0
    }
  },
  {
    "id": "shift_scheduling_cd5ff255",
    "difficulty": "expert",
    "scenario": {
      "domain": "shift_scheduling",
      "description": "SkyRidge Adventure Park (rides: Thundercoil Coaster + Lagoon Splash Zone) needs a one-day staffing plan for ride operators and attendants during peak season. The manager must cover dispatch-certified coaster operations, waterfront safety, first-aid response, parade crowd control, and a keyholder-led closing lockdown while keeping labor cost low, avoiding excessive overtime, and maintaining fairness across the team.",
      "employees": [
        {
          "id": "e1",
          "name": "Maya Ortiz (Thundercoil Lead)",
          "skills": [
            "dispatch_cert",
            "coaster_operator",
            "crowd_control"
          ],
          "availability": [
            "opening_rush",
            "midday_rotation",
            "parade_crowd"
          ],
          "max_shifts": 6,
          "hourly_rate": 26.0
        },
        {
          "id": "e2",
          "name": "Jordan Kim (Coaster Operator)",
          "skills": [
            "dispatch_cert",
            "coaster_operator"
          ],
          "availability": [
            "opening_rush",
            "midday_rotation"
          ],
          "max_shifts": 6,
          "hourly_rate": 20.0
        },
        {
          "id": "e3",
          "name": "Priya Shah (Dispatch + Guest Screening)",
          "skills": [
            "dispatch_cert",
            "darkride_operator",
            "height_check"
          ],
          "availability": [
            "opening_rush",
            "midday_rotation"
          ],
          "max_shifts": 5,
          "hourly_rate": 18.0
        },
        {
          "id": "e4",
          "name": "Leo Nguyen (Budget Keyholder)",
          "skills": [
            "dispatch_cert",
            "height_check",
            "keyholder"
          ],
          "availability": [
            "opening_rush",
            "closing_lockdown"
          ],
          "max_shifts": 4,
          "hourly_rate": 17.0
        },
        {
          "id": "e5",
          "name": "Tessa Brooks (Queue Attendant)",
          "skills": [
            "height_check",
            "attendant",
            "crowd_control"
          ],
          "availability": [
            "opening_rush",
            "parade_crowd"
          ],
          "max_shifts": 5,
          "hourly_rate": 16.0
        },
        {
          "id": "e6",
          "name": "Ramon Silva (Dispatch + EMT Cross-Train)",
          "skills": [
            "dispatch_cert",
            "coaster_operator",
            "first_aid"
          ],
          "availability": [
            "opening_rush",
            "midday_rotation",
            "safety_response"
          ],
          "max_shifts": 6,
          "hourly_rate": 28.0
        },
        {
          "id": "e7",
          "name": "Hana Park (Dispatch + First Aid)",
          "skills": [
            "dispatch_cert",
            "first_aid"
          ],
          "availability": [
            "opening_rush",
            "safety_response"
          ],
          "max_shifts": 5,
          "hourly_rate": 22.0
        },
        {
          "id": "e8",
          "name": "Diego Alvarez (Splash Zone Responder)",
          "skills": [
            "water_safety",
            "first_aid"
          ],
          "availability": [
            "waterfront_patrol",
            "safety_response",
            "parade_crowd"
          ],
          "max_shifts": 6,
          "hourly_rate": 24.0
        },
        {
          "id": "e9",
          "name": "Chloe Bennett (Lifeguard Attendant)",
          "skills": [
            "water_safety"
          ],
          "availability": [
            "waterfront_patrol",
            "parade_crowd"
          ],
          "max_shifts": 5,
          "hourly_rate": 15.0
        },
        {
          "id": "e10",
          "name": "Aiden Ross (Waterfront + Crowd Control)",
          "skills": [
            "water_safety",
            "crowd_control"
          ],
          "availability": [
            "waterfront_patrol",
            "parade_crowd"
          ],
          "max_shifts": 6,
          "hourly_rate": 19.0
        },
        {
          "id": "e11",
          "name": "Samira El-Masri (Waterfront Keyholder)",
          "skills": [
            "water_safety",
            "keyholder"
          ],
          "availability": [
            "waterfront_patrol",
            "closing_lockdown"
          ],
          "max_shifts": 4,
          "hourly_rate": 23.0
        },
        {
          "id": "e12",
          "name": "Kai Watanabe (First Aid + Parade Marshal)",
          "skills": [
            "first_aid",
            "crowd_control"
          ],
          "availability": [
            "safety_response",
            "parade_crowd",
            "closing_lockdown"
          ],
          "max_shifts": 5,
          "hourly_rate": 21.0
        },
        {
          "id": "e13",
          "name": "Brooke Chen (Guest Ops Keyholder)",
          "skills": [
            "keyholder",
            "crowd_control"
          ],
          "availability": [
            "parade_crowd",
            "closing_lockdown",
            "midday_rotation"
          ],
          "max_shifts": 5,
          "hourly_rate": 18.0
        },
        {
          "id": "e14",
          "name": "Nolan Price (Senior Keyholder Operator)",
          "skills": [
            "coaster_operator",
            "dispatch_cert",
            "keyholder"
          ],
          "availability": [
            "midday_rotation",
            "closing_lockdown",
            "opening_rush"
          ],
          "max_shifts": 6,
          "hourly_rate": 30.0
        },
        {
          "id": "e15",
          "name": "Elena Garc\u00eda (Coaster Op + Parade Support)",
          "skills": [
            "coaster_operator",
            "crowd_control"
          ],
          "availability": [
            "midday_rotation",
            "parade_crowd"
          ],
          "max_shifts": 5,
          "hourly_rate": 17.0
        },
        {
          "id": "e16",
          "name": "Marcus Reed (Coaster Op + Height Check)",
          "skills": [
            "coaster_operator",
            "height_check"
          ],
          "availability": [
            "midday_rotation",
            "opening_rush"
          ],
          "max_shifts": 6,
          "hourly_rate": 19.0
        },
        {
          "id": "e17",
          "name": "Sienna Patel (Aquatics EMT)",
          "skills": [
            "water_safety",
            "first_aid"
          ],
          "availability": [
            "waterfront_patrol",
            "safety_response"
          ],
          "max_shifts": 5,
          "hourly_rate": 20.0
        },
        {
          "id": "e18",
          "name": "Gus Harper (Seasonal Waterfront)",
          "skills": [
            "water_safety",
            "crowd_control"
          ],
          "availability": [
            "waterfront_patrol",
            "parade_crowd"
          ],
          "max_shifts": 5,
          "hourly_rate": 16.0
        }
      ],
      "shifts": [
        {
          "id": "opening_rush",
          "name": "Gate-Open Ride Dispatch Rush (Thundercoil + Neon Caverns)",
          "required_skills": [
            "dispatch_cert"
          ],
          "min_staff": 4,
          "max_staff": 7,
          "hours": 8.0
        },
        {
          "id": "midday_rotation",
          "name": "Midday Coaster Rotation (Operator Relief Block)",
          "required_skills": [
            "coaster_operator"
          ],
          "min_staff": 4,
          "max_staff": 7,
          "hours": 8.0
        },
        {
          "id": "waterfront_patrol",
          "name": "Lagoon Splash Zone Waterfront Patrol",
          "required_skills": [
            "water_safety"
          ],
          "min_staff": 3,
          "max_staff": 6,
          "hours": 8.0
        },
        {
          "id": "safety_response",
          "name": "Parkwide First-Aid & Incident Response Team",
          "required_skills": [
            "first_aid"
          ],
          "min_staff": 3,
          "max_staff": 6,
          "hours": 8.0
        },
        {
          "id": "parade_crowd",
          "name": "Starlight Parade Crowd Control (Route Marshals)",
          "required_skills": [
            "crowd_control"
          ],
          "min_staff": 3,
          "max_staff": 7,
          "hours": 6.0
        },
        {
          "id": "closing_lockdown",
          "name": "Closing Lockdown (Ride Securing + Cash-Out Escort)",
          "required_skills": [
            "keyholder"
          ],
          "min_staff": 1,
          "max_staff": 3,
          "hours": 6.0
        }
      ]
    },
    "constraints": [
      {
        "description": "No employee may work more than 8 overtime hours beyond 40 regular hours",
        "_spec": {
          "fn": "max_overtime",
          "args": [
            8,
            40
          ]
        }
      },
      {
        "description": "For fairness, no employee should have more than 2 shifts more than any other",
        "_spec": {
          "fn": "fairness",
          "args": [
            2
          ]
        }
      },
      {
        "description": "No employee may be assigned more than 6 total shifts",
        "_spec": {
          "fn": "max_total",
          "args": [
            6
          ]
        }
      },
      {
        "description": "All shifts must have at least 1 assigned employee (shift-level minimums still apply)",
        "_spec": {
          "fn": "min_coverage",
          "args": [
            1
          ]
        }
      },
      {
        "description": "Fatigue/safety rules: no employee may work certain high-strain combinations on the same day",
        "_spec": {
          "fn": "no_double",
          "args": [
            [
              [
                "opening_rush",
                "closing_lockdown"
              ],
              [
                "waterfront_patrol",
                "safety_response"
              ],
              [
                "midday_rotation",
                "parade_crowd"
              ]
            ]
          ]
        }
      }
    ],
    "instruction": "Assign employees to shifts to minimize total labor cost while meeting each shift\u2019s min_staff requirement and respecting employee availability, required skills, overtime limits, the max total shifts limit, no-double rules, and the fairness constraint.",
    "feasible": true,
    "solution": {
      "domain": "shift_scheduling",
      "assignments": [
        {
          "employee_id": "e1",
          "shift_id": "midday_rotation"
        },
        {
          "employee_id": "e2",
          "shift_id": "opening_rush"
        },
        {
          "employee_id": "e2",
          "shift_id": "midday_rotation"
        },
        {
          "employee_id": "e3",
          "shift_id": "opening_rush"
        },
        {
          "employee_id": "e4",
          "shift_id": "opening_rush"
        },
        {
          "employee_id": "e5",
          "shift_id": "parade_crowd"
        },
        {
          "employee_id": "e7",
          "shift_id": "opening_rush"
        },
        {
          "employee_id": "e7",
          "shift_id": "safety_response"
        },
        {
          "employee_id": "e9",
          "shift_id": "waterfront_patrol"
        },
        {
          "employee_id": "e10",
          "shift_id": "waterfront_patrol"
        },
        {
          "employee_id": "e12",
          "shift_id": "safety_response"
        },
        {
          "employee_id": "e13",
          "shift_id": "parade_crowd"
        },
        {
          "employee_id": "e13",
          "shift_id": "closing_lockdown"
        },
        {
          "employee_id": "e15",
          "shift_id": "midday_rotation"
        },
        {
          "employee_id": "e16",
          "shift_id": "midday_rotation"
        },
        {
          "employee_id": "e17",
          "shift_id": "safety_response"
        },
        {
          "employee_id": "e18",
          "shift_id": "waterfront_patrol"
        },
        {
          "employee_id": "e18",
          "shift_id": "parade_crowd"
        }
      ],
      "total_cost": 2584.0,
      "total_hours": 136.0
    }
  },
  {
    "id": "shift_scheduling_d118cb0a",
    "difficulty": "expert",
    "scenario": {
      "domain": "shift_scheduling",
      "description": "Riverview Community Bank (Downtown Branch) must staff teller lines, drive-thru, new account openings, and end-of-day vault balancing for a high-traffic week. The manager must assign cross-trained tellers and platform staff while respecting availability windows, skills, overtime limits, and fairness\u2014minimizing total labor cost without getting trapped by cheap-but-inflexible staffing choices that block critical coverage later.",
      "employees": [
        {
          "id": "e1",
          "name": "Maya Patel",
          "skills": [
            "teller",
            "vault"
          ],
          "availability": [
            "lobby_teller_open",
            "platform_accounts",
            "lobby_teller_close"
          ],
          "max_shifts": 5,
          "hourly_rate": 22.0
        },
        {
          "id": "e2",
          "name": "Jordan Kim",
          "skills": [
            "teller",
            "drive_thru"
          ],
          "availability": [
            "lobby_teller_open",
            "drive_thru",
            "lobby_teller_close"
          ],
          "max_shifts": 5,
          "hourly_rate": 18.0
        },
        {
          "id": "e3",
          "name": "Elena Garcia",
          "skills": [
            "teller"
          ],
          "availability": [
            "lobby_teller_open",
            "platform_accounts",
            "lobby_teller_close"
          ],
          "max_shifts": 5,
          "hourly_rate": 16.0
        },
        {
          "id": "e4",
          "name": "Samir Hassan",
          "skills": [
            "teller",
            "platform"
          ],
          "availability": [
            "platform_accounts",
            "lobby_teller_close",
            "vault_balancing"
          ],
          "max_shifts": 5,
          "hourly_rate": 23.0
        },
        {
          "id": "e5",
          "name": "Brianna Chen",
          "skills": [
            "platform",
            "business"
          ],
          "availability": [
            "platform_accounts",
            "business_banking",
            "lobby_teller_close"
          ],
          "max_shifts": 5,
          "hourly_rate": 28.0
        },
        {
          "id": "e6",
          "name": "Noah Williams",
          "skills": [
            "teller",
            "platform"
          ],
          "availability": [
            "lobby_teller_open",
            "platform_accounts",
            "lobby_teller_close"
          ],
          "max_shifts": 5,
          "hourly_rate": 20.0
        },
        {
          "id": "e7",
          "name": "Aisha Johnson",
          "skills": [
            "teller",
            "drive_thru"
          ],
          "availability": [
            "lobby_teller_open",
            "drive_thru",
            "platform_accounts"
          ],
          "max_shifts": 5,
          "hourly_rate": 17.0
        },
        {
          "id": "e8",
          "name": "Luis Romero",
          "skills": [
            "teller",
            "vault"
          ],
          "availability": [
            "lobby_teller_open",
            "lobby_teller_close",
            "vault_balancing"
          ],
          "max_shifts": 5,
          "hourly_rate": 21.0
        },
        {
          "id": "e9",
          "name": "Grace O'Neill",
          "skills": [
            "teller",
            "platform",
            "vault"
          ],
          "availability": [
            "platform_accounts",
            "lobby_teller_close",
            "vault_balancing"
          ],
          "max_shifts": 5,
          "hourly_rate": 30.0
        },
        {
          "id": "e10",
          "name": "Devon Brooks",
          "skills": [
            "teller"
          ],
          "availability": [
            "lobby_teller_open",
            "lobby_teller_close"
          ],
          "max_shifts": 5,
          "hourly_rate": 15.0
        },
        {
          "id": "e11",
          "name": "Priya Nair",
          "skills": [
            "teller",
            "drive_thru",
            "vault"
          ],
          "availability": [
            "drive_thru",
            "lobby_teller_close",
            "vault_balancing"
          ],
          "max_shifts": 5,
          "hourly_rate": 26.0
        },
        {
          "id": "e12",
          "name": "Omar Ali",
          "skills": [
            "teller",
            "business"
          ],
          "availability": [
            "lobby_teller_open",
            "platform_accounts",
            "business_banking"
          ],
          "max_shifts": 5,
          "hourly_rate": 24.0
        }
      ],
      "shifts": [
        {
          "id": "lobby_teller_open",
          "name": "Lobby Teller Line (Open)",
          "required_skills": [
            "teller"
          ],
          "min_staff": 3,
          "max_staff": 6,
          "hours": 6.0
        },
        {
          "id": "drive_thru",
          "name": "Drive-Thru Teller Lanes",
          "required_skills": [
            "drive_thru"
          ],
          "min_staff": 2,
          "max_staff": 3,
          "hours": 6.0
        },
        {
          "id": "platform_accounts",
          "name": "Platform: New Accounts & Service",
          "required_skills": [
            "platform"
          ],
          "min_staff": 2,
          "max_staff": 4,
          "hours": 7.0
        },
        {
          "id": "business_banking",
          "name": "Small Business Banking Desk",
          "required_skills": [
            "business"
          ],
          "min_staff": 1,
          "max_staff": 2,
          "hours": 7.0
        },
        {
          "id": "lobby_teller_close",
          "name": "Lobby Teller Line (Close)",
          "required_skills": [
            "teller"
          ],
          "min_staff": 2,
          "max_staff": 5,
          "hours": 6.0
        },
        {
          "id": "vault_balancing",
          "name": "Vault Balancing & Night Drop Processing",
          "required_skills": [
            "vault"
          ],
          "min_staff": 1,
          "max_staff": 2,
          "hours": 4.0
        }
      ]
    },
    "constraints": [
      {
        "description": "No employee may work more than 10 overtime hours beyond 40 regular hours",
        "_spec": {
          "fn": "max_overtime",
          "args": [
            10,
            40
          ]
        }
      },
      {
        "description": "For fairness, no employee should have more than 2 shifts more than any other",
        "_spec": {
          "fn": "fairness",
          "args": [
            2
          ]
        }
      },
      {
        "description": "No employee may be assigned more than 5 total shifts in the planning period",
        "_spec": {
          "fn": "max_total",
          "args": [
            5
          ]
        }
      },
      {
        "description": "All shifts must meet at least their per-shift minimum staffing requirement",
        "_spec": {
          "fn": "min_coverage",
          "args": [
            1
          ]
        }
      },
      {
        "description": "No employee may work both a closing teller shift and the vault balancing shift (rest/security separation), and no employee may work both the drive-thru shift and the vault balancing shift (cash-handling separation)",
        "_spec": {
          "fn": "no_double",
          "args": [
            [
              [
                "lobby_teller_close",
                "vault_balancing"
              ],
              [
                "drive_thru",
                "vault_balancing"
              ]
            ]
          ]
        }
      }
    ],
    "instruction": "Minimize total labor cost while meeting all shift staffing requirements, respecting employee availability and required skills, overtime limits, maximum total shifts, the no-double restrictions, and fairness constraints.",
    "feasible": true,
    "solution": {
      "domain": "shift_scheduling",
      "assignments": [
        {
          "employee_id": "e2",
          "shift_id": "drive_thru"
        },
        {
          "employee_id": "e3",
          "shift_id": "lobby_teller_open"
        },
        {
          "employee_id": "e3",
          "shift_id": "lobby_teller_close"
        },
        {
          "employee_id": "e4",
          "shift_id": "platform_accounts"
        },
        {
          "employee_id": "e6",
          "shift_id": "platform_accounts"
        },
        {
          "employee_id": "e7",
          "shift_id": "lobby_teller_open"
        },
        {
          "employee_id": "e7",
          "shift_id": "drive_thru"
        },
        {
          "employee_id": "e8",
          "shift_id": "vault_balancing"
        },
        {
          "employee_id": "e10",
          "shift_id": "lobby_teller_open"
        },
        {
          "employee_id": "e10",
          "shift_id": "lobby_teller_close"
        },
        {
          "employee_id": "e12",
          "shift_id": "business_banking"
        }
      ],
      "total_cost": 1237.0,
      "total_hours": 67.0
    }
  },
  {
    "id": "shift_scheduling_120cb87f",
    "difficulty": "expert",
    "scenario": {
      "domain": "shift_scheduling",
      "description": "Granite & Gilt Department Store (downtown flagship) is staffing a high-traffic week with a dock delivery, daily sales coverage, a midweek inventory audit, closing supervision, overnight restocking, and a weekend promotional event. The manager must assign associates while respecting skill certifications, availability by shift type, overtime limits, fairness, and labor-cost minimization.",
      "employees": [
        {
          "id": "e1",
          "name": "Mia Chen (Front End Lead)",
          "skills": [
            "cashier",
            "customer_service",
            "visual_merchandising"
          ],
          "availability": [
            "day_sales",
            "evening_close",
            "weekend_promo"
          ],
          "max_shifts": 4,
          "hourly_rate": 17.0
        },
        {
          "id": "e2",
          "name": "Javier Ortiz (Backroom Specialist)",
          "skills": [
            "receiving",
            "forklift",
            "inventory"
          ],
          "availability": [
            "early_receiving",
            "inventory_audit",
            "night_restock"
          ],
          "max_shifts": 4,
          "hourly_rate": 19.0
        },
        {
          "id": "e3",
          "name": "Tasha Nguyen (Closing Manager)",
          "skills": [
            "cashier",
            "customer_service",
            "closing_manager"
          ],
          "availability": [
            "day_sales",
            "evening_close"
          ],
          "max_shifts": 4,
          "hourly_rate": 24.0
        },
        {
          "id": "e4",
          "name": "Ben Wallace (Dock & Stock Associate)",
          "skills": [
            "receiving",
            "forklift",
            "inventory"
          ],
          "availability": [
            "early_receiving",
            "night_restock"
          ],
          "max_shifts": 4,
          "hourly_rate": 18.0
        },
        {
          "id": "e5",
          "name": "Priya Singh (Inventory & Loss Prevention)",
          "skills": [
            "inventory",
            "loss_prevention"
          ],
          "availability": [
            "inventory_audit",
            "day_sales"
          ],
          "max_shifts": 3,
          "hourly_rate": 22.0
        },
        {
          "id": "e6",
          "name": "Lila Brooks (Service Desk Associate)",
          "skills": [
            "cashier",
            "customer_service",
            "visual_merchandising"
          ],
          "availability": [
            "day_sales",
            "weekend_promo"
          ],
          "max_shifts": 4,
          "hourly_rate": 16.0
        },
        {
          "id": "e7",
          "name": "Omar Haddad (Electronics Advisor)",
          "skills": [
            "electronics",
            "customer_service",
            "inventory"
          ],
          "availability": [
            "day_sales",
            "inventory_audit",
            "weekend_promo"
          ],
          "max_shifts": 4,
          "hourly_rate": 20.0
        },
        {
          "id": "e8",
          "name": "Serena Park (Certified Receiver)",
          "skills": [
            "receiving",
            "forklift"
          ],
          "availability": [
            "early_receiving"
          ],
          "max_shifts": 3,
          "hourly_rate": 18.0
        },
        {
          "id": "e9",
          "name": "Quinn Reese (Overnight Inventory Associate)",
          "skills": [
            "inventory",
            "forklift"
          ],
          "availability": [
            "inventory_audit",
            "night_restock"
          ],
          "max_shifts": 4,
          "hourly_rate": 21.0
        },
        {
          "id": "e10",
          "name": "Diego Morales (Promo Specialist)",
          "skills": [
            "cashier",
            "customer_service",
            "visual_merchandising"
          ],
          "availability": [
            "day_sales",
            "weekend_promo"
          ],
          "max_shifts": 4,
          "hourly_rate": 15.0
        },
        {
          "id": "e11",
          "name": "Harper Kim (Keyholder Supervisor)",
          "skills": [
            "cashier",
            "closing_manager"
          ],
          "availability": [
            "evening_close",
            "weekend_promo"
          ],
          "max_shifts": 4,
          "hourly_rate": 23.0
        },
        {
          "id": "e12",
          "name": "Nora Patel (Backroom Cross-Train)",
          "skills": [
            "receiving",
            "forklift",
            "inventory"
          ],
          "availability": [
            "early_receiving",
            "inventory_audit",
            "night_restock"
          ],
          "max_shifts": 4,
          "hourly_rate": 20.0
        },
        {
          "id": "e13",
          "name": "Caleb Johnson (Visual Merch Associate)",
          "skills": [
            "visual_merchandising",
            "customer_service"
          ],
          "availability": [
            "day_sales",
            "weekend_promo"
          ],
          "max_shifts": 3,
          "hourly_rate": 19.0
        },
        {
          "id": "e14",
          "name": "Elise Fournier (Customer Experience Manager)",
          "skills": [
            "cashier",
            "customer_service",
            "closing_manager"
          ],
          "availability": [
            "day_sales",
            "evening_close"
          ],
          "max_shifts": 4,
          "hourly_rate": 25.0
        },
        {
          "id": "e15",
          "name": "Jordan Price (Floor Supervisor)",
          "skills": [
            "cashier",
            "closing_manager",
            "inventory"
          ],
          "availability": [
            "evening_close",
            "inventory_audit"
          ],
          "max_shifts": 4,
          "hourly_rate": 26.0
        },
        {
          "id": "e16",
          "name": "Zoe Alvarez (Brand Ambassador)",
          "skills": [
            "customer_service",
            "visual_merchandising",
            "apparel"
          ],
          "availability": [
            "day_sales",
            "weekend_promo"
          ],
          "max_shifts": 4,
          "hourly_rate": 18.0
        }
      ],
      "shifts": [
        {
          "id": "early_receiving",
          "name": "Early Receiving Dock (Truck Unload)",
          "required_skills": [
            "receiving",
            "forklift"
          ],
          "min_staff": 2,
          "max_staff": 4,
          "hours": 9.0
        },
        {
          "id": "day_sales",
          "name": "Day Sales Floor (Registers + Service Desk)",
          "required_skills": [
            "cashier",
            "customer_service"
          ],
          "min_staff": 3,
          "max_staff": 6,
          "hours": 8.0
        },
        {
          "id": "inventory_audit",
          "name": "Inventory Audit (Cycle Counts + Shrink Checks)",
          "required_skills": [
            "inventory"
          ],
          "min_staff": 3,
          "max_staff": 6,
          "hours": 8.0
        },
        {
          "id": "evening_close",
          "name": "Evening Close (Cash Wrap + Keyholder Duties)",
          "required_skills": [
            "cashier",
            "closing_manager"
          ],
          "min_staff": 2,
          "max_staff": 4,
          "hours": 7.0
        },
        {
          "id": "night_restock",
          "name": "Overnight Restock (Pallet Moves + Replenishment)",
          "required_skills": [
            "inventory",
            "forklift"
          ],
          "min_staff": 2,
          "max_staff": 4,
          "hours": 9.0
        },
        {
          "id": "weekend_promo",
          "name": "Weekend Promo Event (Visual Reset + Customer Flow)",
          "required_skills": [
            "visual_merchandising",
            "customer_service"
          ],
          "min_staff": 3,
          "max_staff": 6,
          "hours": 6.0
        }
      ]
    },
    "constraints": [
      {
        "description": "No employee may work more than 8 overtime hours beyond 40 regular hours",
        "_spec": {
          "fn": "max_overtime",
          "args": [
            8,
            40
          ]
        }
      },
      {
        "description": "For fairness, no employee should have more than 2 shifts more than any other employee",
        "_spec": {
          "fn": "fairness",
          "args": [
            2
          ]
        }
      },
      {
        "description": "No employee may be assigned more than 4 total shifts",
        "_spec": {
          "fn": "max_total",
          "args": [
            4
          ]
        }
      },
      {
        "description": "All shifts must meet at least a baseline of 2 staff (in addition to each shift's own min_staff requirement)",
        "_spec": {
          "fn": "min_coverage",
          "args": [
            2
          ]
        }
      },
      {
        "description": "Rest rules: prevent hard turnarounds between key shift pairs (these pairs cannot be worked by the same employee)",
        "_spec": {
          "fn": "no_double",
          "args": [
            [
              [
                "early_receiving",
                "day_sales"
              ],
              [
                "day_sales",
                "evening_close"
              ],
              [
                "evening_close",
                "night_restock"
              ]
            ]
          ]
        }
      }
    ],
    "instruction": "Minimize total labor cost while meeting all shift staffing requirements, respecting employee availability and required skills, and satisfying overtime, max-total, no-double, and fairness constraints.",
    "feasible": true,
    "solution": {
      "domain": "shift_scheduling",
      "assignments": [
        {
          "employee_id": "e1",
          "shift_id": "day_sales"
        },
        {
          "employee_id": "e1",
          "shift_id": "weekend_promo"
        },
        {
          "employee_id": "e2",
          "shift_id": "inventory_audit"
        },
        {
          "employee_id": "e2",
          "shift_id": "night_restock"
        },
        {
          "employee_id": "e3",
          "shift_id": "evening_close"
        },
        {
          "employee_id": "e4",
          "shift_id": "early_receiving"
        },
        {
          "employee_id": "e4",
          "shift_id": "night_restock"
        },
        {
          "employee_id": "e6",
          "shift_id": "day_sales"
        },
        {
          "employee_id": "e6",
          "shift_id": "weekend_promo"
        },
        {
          "employee_id": "e7",
          "shift_id": "inventory_audit"
        },
        {
          "employee_id": "e8",
          "shift_id": "early_receiving"
        },
        {
          "employee_id": "e10",
          "shift_id": "day_sales"
        },
        {
          "employee_id": "e10",
          "shift_id": "weekend_promo"
        },
        {
          "employee_id": "e11",
          "shift_id": "evening_close"
        },
        {
          "employee_id": "e12",
          "shift_id": "inventory_audit"
        }
      ],
      "total_cost": 2130.0,
      "total_hours": 116.0
    }
  },
  {
    "id": "shift_scheduling_febb94af",
    "difficulty": "expert",
    "scenario": {
      "domain": "shift_scheduling",
      "description": "ForgeWorks Components operates a mixed-model manufacturing plant producing AxiomValve hydraulic manifolds. The production line runs three days (Mon\u2013Wed) with a Day shift focused on assembly/pack-out and a Night shift focused on CNC machining of valve bodies. The plant manager must staff each shift with appropriately skilled operators while controlling labor cost, avoiding excessive overtime, and keeping shift assignments fair. Cross-trained employees look attractive but create sequencing conflicts (day vs. night) and fairness/overtime cascades.",
      "employees": [
        {
          "id": "e1",
          "name": "Rosa Alvarez",
          "skills": [
            "assembly_operator",
            "forklift"
          ],
          "availability": [
            "mon_day",
            "tue_day",
            "wed_day"
          ],
          "max_shifts": 4,
          "hourly_rate": 22.0
        },
        {
          "id": "e2",
          "name": "Liam Chen",
          "skills": [
            "assembly_operator"
          ],
          "availability": [
            "mon_day",
            "tue_day"
          ],
          "max_shifts": 3,
          "hourly_rate": 19.0
        },
        {
          "id": "e3",
          "name": "Priya Nair",
          "skills": [
            "assembly_operator",
            "qc_inspector"
          ],
          "availability": [
            "mon_day",
            "tue_day",
            "wed_day"
          ],
          "max_shifts": 4,
          "hourly_rate": 24.0
        },
        {
          "id": "e4",
          "name": "Mateo Silva",
          "skills": [
            "assembly_operator"
          ],
          "availability": [
            "mon_day",
            "tue_day",
            "wed_day"
          ],
          "max_shifts": 4,
          "hourly_rate": 18.0
        },
        {
          "id": "e5",
          "name": "Hannah Brooks",
          "skills": [
            "assembly_operator",
            "cnc_operator"
          ],
          "availability": [
            "mon_day",
            "mon_night",
            "tue_day",
            "tue_night",
            "wed_day"
          ],
          "max_shifts": 3,
          "hourly_rate": 30.0
        },
        {
          "id": "e6",
          "name": "Victor Okoye",
          "skills": [
            "cnc_operator"
          ],
          "availability": [
            "mon_night",
            "tue_night",
            "wed_night"
          ],
          "max_shifts": 3,
          "hourly_rate": 28.0
        },
        {
          "id": "e7",
          "name": "Jun Park",
          "skills": [
            "cnc_operator",
            "maintenance_tech"
          ],
          "availability": [
            "mon_night",
            "wed_night"
          ],
          "max_shifts": 3,
          "hourly_rate": 32.0
        },
        {
          "id": "e8",
          "name": "Eleni Papadopoulos",
          "skills": [
            "cnc_operator"
          ],
          "availability": [
            "tue_night",
            "wed_night"
          ],
          "max_shifts": 2,
          "hourly_rate": 26.0
        },
        {
          "id": "e9",
          "name": "Omar Haddad",
          "skills": [
            "cnc_operator"
          ],
          "availability": [
            "mon_night",
            "tue_night",
            "wed_night"
          ],
          "max_shifts": 2,
          "hourly_rate": 25.0
        },
        {
          "id": "e10",
          "name": "Kayla Reed",
          "skills": [
            "assembly_operator"
          ],
          "availability": [
            "mon_day",
            "tue_day",
            "wed_day"
          ],
          "max_shifts": 2,
          "hourly_rate": 17.0
        },
        {
          "id": "e11",
          "name": "Sergei Ivanov",
          "skills": [
            "assembly_operator"
          ],
          "availability": [
            "tue_day",
            "wed_day"
          ],
          "max_shifts": 2,
          "hourly_rate": 16.0
        },
        {
          "id": "e12",
          "name": "Ingrid Larsen",
          "skills": [
            "cnc_operator",
            "qc_inspector"
          ],
          "availability": [
            "mon_night",
            "tue_night",
            "wed_night"
          ],
          "max_shifts": 3,
          "hourly_rate": 34.0
        }
      ],
      "shifts": [
        {
          "id": "mon_day",
          "name": "Monday Day (Assembly & Pack-out)",
          "required_skills": [
            "assembly_operator"
          ],
          "min_staff": 4,
          "max_staff": 7,
          "hours": 8.0
        },
        {
          "id": "mon_night",
          "name": "Monday Night (CNC Machining)",
          "required_skills": [
            "cnc_operator"
          ],
          "min_staff": 3,
          "max_staff": 6,
          "hours": 8.0
        },
        {
          "id": "tue_day",
          "name": "Tuesday Day (Assembly & Pack-out)",
          "required_skills": [
            "assembly_operator"
          ],
          "min_staff": 5,
          "max_staff": 8,
          "hours": 8.0
        },
        {
          "id": "tue_night",
          "name": "Tuesday Night (CNC Machining)",
          "required_skills": [
            "cnc_operator"
          ],
          "min_staff": 3,
          "max_staff": 6,
          "hours": 8.0
        },
        {
          "id": "wed_day",
          "name": "Wednesday Day (Assembly & Pack-out)",
          "required_skills": [
            "assembly_operator"
          ],
          "min_staff": 4,
          "max_staff": 7,
          "hours": 8.0
        },
        {
          "id": "wed_night",
          "name": "Wednesday Night (CNC Machining)",
          "required_skills": [
            "cnc_operator"
          ],
          "min_staff": 3,
          "max_staff": 6,
          "hours": 8.0
        }
      ]
    },
    "constraints": [
      {
        "description": "No employee may work more than 8 overtime hours beyond 40 regular hours (i.e., max 48 hours total)",
        "_spec": {
          "fn": "max_overtime",
          "args": [
            8,
            40
          ]
        }
      },
      {
        "description": "For fairness, no employee should have more than 2 shifts more than any other employee",
        "_spec": {
          "fn": "fairness",
          "args": [
            2
          ]
        }
      },
      {
        "description": "No employee may be assigned more than 4 total shifts across the planning horizon (in addition to each employee's own max_shifts)",
        "_spec": {
          "fn": "max_total",
          "args": [
            4
          ]
        }
      },
      {
        "description": "Every shift must have at least 3 employees assigned (note some shifts require more via their min_staff)",
        "_spec": {
          "fn": "min_coverage",
          "args": [
            3
          ]
        }
      },
      {
        "description": "No employee may work both the Day and Night shift of the same calendar day (prevents back-to-back doubles)",
        "_spec": {
          "fn": "no_double",
          "args": [
            [
              [
                "mon_day",
                "mon_night"
              ],
              [
                "tue_day",
                "tue_night"
              ],
              [
                "wed_day",
                "wed_night"
              ]
            ]
          ]
        }
      }
    ],
    "instruction": "Assign employees to shifts to minimize total labor cost while meeting each shift\u2019s staffing requirements and required skills, respecting employee availability, each employee\u2019s max_shifts, the global max_total limit, the max_overtime limit, the no_double restrictions, and the fairness constraint.",
    "feasible": true,
    "solution": {
      "domain": "shift_scheduling",
      "assignments": [
        {
          "employee_id": "e1",
          "shift_id": "mon_day"
        },
        {
          "employee_id": "e1",
          "shift_id": "tue_day"
        },
        {
          "employee_id": "e1",
          "shift_id": "wed_day"
        },
        {
          "employee_id": "e2",
          "shift_id": "mon_day"
        },
        {
          "employee_id": "e2",
          "shift_id": "tue_day"
        },
        {
          "employee_id": "e3",
          "shift_id": "wed_day"
        },
        {
          "employee_id": "e4",
          "shift_id": "mon_day"
        },
        {
          "employee_id": "e4",
          "shift_id": "tue_day"
        },
        {
          "employee_id": "e4",
          "shift_id": "wed_day"
        },
        {
          "employee_id": "e5",
          "shift_id": "mon_night"
        },
        {
          "employee_id": "e6",
          "shift_id": "mon_night"
        },
        {
          "employee_id": "e6",
          "shift_id": "tue_night"
        },
        {
          "employee_id": "e7",
          "shift_id": "wed_night"
        },
        {
          "employee_id": "e8",
          "shift_id": "tue_night"
        },
        {
          "employee_id": "e8",
          "shift_id": "wed_night"
        },
        {
          "employee_id": "e9",
          "shift_id": "mon_night"
        },
        {
          "employee_id": "e9",
          "shift_id": "tue_night"
        },
        {
          "employee_id": "e10",
          "shift_id": "mon_day"
        },
        {
          "employee_id": "e10",
          "shift_id": "tue_day"
        },
        {
          "employee_id": "e11",
          "shift_id": "tue_day"
        },
        {
          "employee_id": "e11",
          "shift_id": "wed_day"
        },
        {
          "employee_id": "e12",
          "shift_id": "wed_night"
        }
      ],
      "total_cost": 4016.0,
      "total_hours": 176.0
    }
  },
  {
    "id": "shift_scheduling_0ea4b82d",
    "difficulty": "expert",
    "scenario": {
      "domain": "shift_scheduling",
      "description": "AsterBridge Colocation runs a 24/7 Network Operations Center (NOC) and must staff core monitoring plus two high-risk \u2018special\u2019 blocks: a weekly Linux change window and a dedicated incident-bridge commander shift. The manager must assign engineers and technicians to shifts while respecting availability, required skill bundles, overtime limits, and fairness\u2014minimizing total labor cost. Several low-cost employees hold rare qualifications (change management or incident command) that create greedy traps if assigned to routine coverage first.",
      "employees": [
        {
          "id": "e1",
          "name": "Priya Rao (NOC Lead)",
          "skills": [
            "noc_monitoring",
            "linux",
            "change_mgmt",
            "networking"
          ],
          "availability": [
            "morning_watch",
            "day_watch",
            "change_window"
          ],
          "max_shifts": 6,
          "hourly_rate": 34.0
        },
        {
          "id": "e2",
          "name": "Mateo Silva (Linux Ops)",
          "skills": [
            "noc_monitoring",
            "linux"
          ],
          "availability": [
            "morning_watch",
            "graveyard_watch"
          ],
          "max_shifts": 5,
          "hourly_rate": 31.0
        },
        {
          "id": "e3",
          "name": "Hannah Kim (Net Incident Commander)",
          "skills": [
            "noc_monitoring",
            "networking",
            "incident_cmd"
          ],
          "availability": [
            "day_watch",
            "swing_watch",
            "incident_bridge"
          ],
          "max_shifts": 5,
          "hourly_rate": 45.0
        },
        {
          "id": "e4",
          "name": "Omar Haddad (Cross-Stack Operator)",
          "skills": [
            "noc_monitoring",
            "networking",
            "linux",
            "storage",
            "incident_cmd"
          ],
          "availability": [
            "morning_watch",
            "day_watch",
            "swing_watch",
            "incident_bridge"
          ],
          "max_shifts": 6,
          "hourly_rate": 49.0
        },
        {
          "id": "e5",
          "name": "Zo\u00eb Chen (Storage Watch)",
          "skills": [
            "noc_monitoring",
            "storage"
          ],
          "availability": [
            "swing_watch",
            "graveyard_watch"
          ],
          "max_shifts": 5,
          "hourly_rate": 30.0
        },
        {
          "id": "e6",
          "name": "Liam O'Connor (Linux/Storage)",
          "skills": [
            "noc_monitoring",
            "linux",
            "storage"
          ],
          "availability": [
            "day_watch",
            "swing_watch",
            "graveyard_watch"
          ],
          "max_shifts": 6,
          "hourly_rate": 38.0
        },
        {
          "id": "e7",
          "name": "Aisha Mensah (Morning Coverage)",
          "skills": [
            "noc_monitoring",
            "linux"
          ],
          "availability": [
            "morning_watch",
            "day_watch"
          ],
          "max_shifts": 5,
          "hourly_rate": 33.0
        },
        {
          "id": "e8",
          "name": "Victor Petrov (Change Coordinator)",
          "skills": [
            "noc_monitoring",
            "networking",
            "change_mgmt",
            "linux"
          ],
          "availability": [
            "day_watch",
            "change_window"
          ],
          "max_shifts": 5,
          "hourly_rate": 29.0
        },
        {
          "id": "e9",
          "name": "Elena Garc\u00eda (Senior IMOC)",
          "skills": [
            "noc_monitoring",
            "linux",
            "networking",
            "incident_cmd"
          ],
          "availability": [
            "graveyard_watch",
            "morning_watch",
            "incident_bridge"
          ],
          "max_shifts": 5,
          "hourly_rate": 52.0
        },
        {
          "id": "e10",
          "name": "Noah Brooks (Storage Runner)",
          "skills": [
            "noc_monitoring",
            "storage"
          ],
          "availability": [
            "morning_watch",
            "swing_watch"
          ],
          "max_shifts": 4,
          "hourly_rate": 26.0
        },
        {
          "id": "e11",
          "name": "Keiko Tanaka (Change Duty Tech)",
          "skills": [
            "noc_monitoring",
            "linux",
            "change_mgmt"
          ],
          "availability": [
            "graveyard_watch",
            "change_window"
          ],
          "max_shifts": 4,
          "hourly_rate": 27.0
        },
        {
          "id": "e12",
          "name": "Jordan Miles (Network Analyst)",
          "skills": [
            "noc_monitoring",
            "networking",
            "incident_cmd"
          ],
          "availability": [
            "graveyard_watch",
            "day_watch",
            "incident_bridge"
          ],
          "max_shifts": 5,
          "hourly_rate": 30.0
        },
        {
          "id": "e13",
          "name": "Sandeep Iyer (Linux On-Call)",
          "skills": [
            "noc_monitoring",
            "linux",
            "change_mgmt"
          ],
          "availability": [
            "morning_watch",
            "graveyard_watch",
            "change_window"
          ],
          "max_shifts": 5,
          "hourly_rate": 36.0
        },
        {
          "id": "e14",
          "name": "Brooke Willis (Platform Watch)",
          "skills": [
            "noc_monitoring",
            "linux",
            "networking"
          ],
          "availability": [
            "morning_watch",
            "day_watch",
            "graveyard_watch"
          ],
          "max_shifts": 6,
          "hourly_rate": 41.0
        }
      ],
      "shifts": [
        {
          "id": "morning_watch",
          "name": "Morning NOC Watch (06:00\u201314:00)",
          "required_skills": [
            "noc_monitoring",
            "linux"
          ],
          "min_staff": 5,
          "max_staff": 7,
          "hours": 8.0
        },
        {
          "id": "day_watch",
          "name": "Day NOC Watch (14:00\u201322:00)",
          "required_skills": [
            "noc_monitoring",
            "networking"
          ],
          "min_staff": 4,
          "max_staff": 6,
          "hours": 8.0
        },
        {
          "id": "swing_watch",
          "name": "Swing Ops Watch (16:00\u201300:00)",
          "required_skills": [
            "noc_monitoring",
            "storage"
          ],
          "min_staff": 2,
          "max_staff": 4,
          "hours": 8.0
        },
        {
          "id": "graveyard_watch",
          "name": "Graveyard NOC Watch (22:00\u201306:00)",
          "required_skills": [
            "noc_monitoring",
            "linux"
          ],
          "min_staff": 3,
          "max_staff": 5,
          "hours": 8.0
        },
        {
          "id": "change_window",
          "name": "Planned Change Window (23:00\u201303:00)",
          "required_skills": [
            "change_mgmt",
            "linux"
          ],
          "min_staff": 2,
          "max_staff": 3,
          "hours": 4.0
        },
        {
          "id": "incident_bridge",
          "name": "Incident Bridge Commander Block (18:00\u201322:00)",
          "required_skills": [
            "incident_cmd",
            "networking"
          ],
          "min_staff": 1,
          "max_staff": 2,
          "hours": 4.0
        }
      ]
    },
    "constraints": [
      {
        "description": "No employee may work more than 8 overtime hours beyond 40 regular hours",
        "_spec": {
          "fn": "max_overtime",
          "args": [
            8,
            40
          ]
        }
      },
      {
        "description": "No employee may be assigned more than 6 total shifts in the planning horizon",
        "_spec": {
          "fn": "max_total",
          "args": [
            6
          ]
        }
      },
      {
        "description": "For fairness, no employee should have more than 2 shifts more than any other employee",
        "_spec": {
          "fn": "fairness",
          "args": [
            2
          ]
        }
      },
      {
        "description": "Overlapping/rest-rule blocks: employees cannot be scheduled for both shifts in any pair (change overlaps watch; incident bridge overlaps swing; and no graveyard-to-morning turnarounds)",
        "_spec": {
          "fn": "no_double",
          "args": [
            [
              [
                "morning_watch",
                "change_window"
              ],
              [
                "day_watch",
                "change_window"
              ],
              [
                "swing_watch",
                "incident_bridge"
              ],
              [
                "graveyard_watch",
                "morning_watch"
              ]
            ]
          ]
        }
      }
    ],
    "instruction": "Minimize total labor cost while meeting all shift staffing requirements, respecting employee availability and required skills, overtime limits, maximum total shifts, the no-double (overlap/rest) rules, and the fairness constraint.",
    "feasible": true,
    "solution": {
      "domain": "shift_scheduling",
      "assignments": [
        {
          "employee_id": "e1",
          "shift_id": "morning_watch"
        },
        {
          "employee_id": "e1",
          "shift_id": "day_watch"
        },
        {
          "employee_id": "e2",
          "shift_id": "morning_watch"
        },
        {
          "employee_id": "e4",
          "shift_id": "morning_watch"
        },
        {
          "employee_id": "e5",
          "shift_id": "swing_watch"
        },
        {
          "employee_id": "e6",
          "shift_id": "graveyard_watch"
        },
        {
          "employee_id": "e7",
          "shift_id": "morning_watch"
        },
        {
          "employee_id": "e8",
          "shift_id": "day_watch"
        },
        {
          "employee_id": "e10",
          "shift_id": "swing_watch"
        },
        {
          "employee_id": "e11",
          "shift_id": "graveyard_watch"
        },
        {
          "employee_id": "e11",
          "shift_id": "change_window"
        },
        {
          "employee_id": "e12",
          "shift_id": "day_watch"
        },
        {
          "employee_id": "e12",
          "shift_id": "incident_bridge"
        },
        {
          "employee_id": "e13",
          "shift_id": "graveyard_watch"
        },
        {
          "employee_id": "e13",
          "shift_id": "change_window"
        },
        {
          "employee_id": "e14",
          "shift_id": "morning_watch"
        },
        {
          "employee_id": "e14",
          "shift_id": "day_watch"
        }
      ],
      "total_cost": 4204.0,
      "total_hours": 124.0
    }
  },
  {
    "id": "shift_scheduling_ee44a6d5",
    "difficulty": "expert",
    "scenario": {
      "domain": "shift_scheduling",
      "description": "SkyLink Ground Handling at Northport International Airport (NPI) is staffing a high-traffic week with de-icing risk and tight aircraft turnaround windows. The duty manager must assign ramp, baggage, gate-assist, ULD build, tow, and load-control qualified staff to six critical shift blocks while minimizing labor cost and respecting availability, rest/fatigue rules, overtime limits, and fairness.",
      "employees": [
        {
          "id": "e1",
          "name": "Maya Torres (Ramp Lead)",
          "skills": [
            "ramp_ops",
            "deicing",
            "uld_build"
          ],
          "availability": [
            "dawn",
            "evening"
          ],
          "max_shifts": 3,
          "hourly_rate": 22.0
        },
        {
          "id": "e2",
          "name": "Luca Bianchi (Cross-Qualified Handler)",
          "skills": [
            "ramp_ops",
            "baggage",
            "gate_assist",
            "uld_build",
            "load_control"
          ],
          "availability": [
            "morning",
            "midday",
            "evening",
            "irrops"
          ],
          "max_shifts": 4,
          "hourly_rate": 18.0
        },
        {
          "id": "e3",
          "name": "Aisha Khan (Gate & Bags Agent)",
          "skills": [
            "baggage",
            "gate_assist"
          ],
          "availability": [
            "morning",
            "midday",
            "irrops"
          ],
          "max_shifts": 3,
          "hourly_rate": 17.0
        },
        {
          "id": "e4",
          "name": "Jordan Lee (Tow/Load Specialist)",
          "skills": [
            "tow_driver",
            "load_control",
            "gate_assist"
          ],
          "availability": [
            "night",
            "irrops"
          ],
          "max_shifts": 3,
          "hourly_rate": 26.0
        },
        {
          "id": "e5",
          "name": "Sofia Petrov (De-icing Tech)",
          "skills": [
            "ramp_ops",
            "deicing",
            "baggage"
          ],
          "availability": [
            "dawn",
            "midday"
          ],
          "max_shifts": 3,
          "hourly_rate": 20.0
        },
        {
          "id": "e6",
          "name": "Ben O'Connor (ULD Builder)",
          "skills": [
            "ramp_ops",
            "uld_build"
          ],
          "availability": [
            "evening"
          ],
          "max_shifts": 2,
          "hourly_rate": 19.0
        },
        {
          "id": "e7",
          "name": "Priya Nair (IRROPS/Tow Qualified)",
          "skills": [
            "tow_driver",
            "load_control",
            "gate_assist"
          ],
          "availability": [
            "night",
            "irrops",
            "morning"
          ],
          "max_shifts": 3,
          "hourly_rate": 28.0
        },
        {
          "id": "e8",
          "name": "Carlos Mendes (Turnaround Handler)",
          "skills": [
            "ramp_ops",
            "baggage",
            "gate_assist",
            "uld_build"
          ],
          "availability": [
            "morning",
            "midday",
            "evening"
          ],
          "max_shifts": 4,
          "hourly_rate": 21.0
        },
        {
          "id": "e9",
          "name": "Hannah Kim (Tow & Load Control)",
          "skills": [
            "tow_driver",
            "load_control",
            "ramp_ops"
          ],
          "availability": [
            "night",
            "midday"
          ],
          "max_shifts": 3,
          "hourly_rate": 24.0
        },
        {
          "id": "e10",
          "name": "Omar El-Sayed (Gate Disruption Desk)",
          "skills": [
            "baggage",
            "gate_assist",
            "load_control"
          ],
          "availability": [
            "morning",
            "irrops"
          ],
          "max_shifts": 3,
          "hourly_rate": 23.0
        },
        {
          "id": "e11",
          "name": "Elena Novak (Widebody Crew)",
          "skills": [
            "ramp_ops",
            "uld_build",
            "baggage",
            "gate_assist"
          ],
          "availability": [
            "morning",
            "midday",
            "evening"
          ],
          "max_shifts": 4,
          "hourly_rate": 20.0
        },
        {
          "id": "e12",
          "name": "Theo Grant (De-icing Runner)",
          "skills": [
            "ramp_ops",
            "deicing",
            "gate_assist"
          ],
          "availability": [
            "dawn",
            "morning",
            "irrops"
          ],
          "max_shifts": 2,
          "hourly_rate": 25.0
        },
        {
          "id": "e13",
          "name": "Rina Sato (Snow Ops Utility)",
          "skills": [
            "ramp_ops",
            "deicing",
            "baggage",
            "gate_assist"
          ],
          "availability": [
            "dawn",
            "morning",
            "midday"
          ],
          "max_shifts": 4,
          "hourly_rate": 19.5
        },
        {
          "id": "e14",
          "name": "Victor Alvarez (De-icing & ULD Lead)",
          "skills": [
            "ramp_ops",
            "deicing",
            "uld_build"
          ],
          "availability": [
            "dawn",
            "evening"
          ],
          "max_shifts": 3,
          "hourly_rate": 27.0
        },
        {
          "id": "e15",
          "name": "Samir Haddad (Tractor Tow Driver)",
          "skills": [
            "tow_driver",
            "load_control"
          ],
          "availability": [
            "night",
            "dawn"
          ],
          "max_shifts": 4,
          "hourly_rate": 21.0
        },
        {
          "id": "e16",
          "name": "Grace Mwangi (Senior Load Controller)",
          "skills": [
            "tow_driver",
            "load_control"
          ],
          "availability": [
            "night",
            "evening"
          ],
          "max_shifts": 2,
          "hourly_rate": 30.0
        }
      ],
      "shifts": [
        {
          "id": "dawn",
          "name": "Dawn De-icing & Pushback Prep",
          "required_skills": [
            "ramp_ops",
            "deicing"
          ],
          "min_staff": 3,
          "max_staff": 5,
          "hours": 9.0
        },
        {
          "id": "morning",
          "name": "Morning Gate Assist & Baggage Flow",
          "required_skills": [
            "baggage",
            "gate_assist"
          ],
          "min_staff": 4,
          "max_staff": 7,
          "hours": 8.0
        },
        {
          "id": "midday",
          "name": "Midday Turnaround Core (Ramp + Bags)",
          "required_skills": [
            "ramp_ops",
            "baggage"
          ],
          "min_staff": 3,
          "max_staff": 6,
          "hours": 8.0
        },
        {
          "id": "evening",
          "name": "Evening Widebody Turn & ULD Build",
          "required_skills": [
            "ramp_ops",
            "uld_build"
          ],
          "min_staff": 4,
          "max_staff": 7,
          "hours": 9.0
        },
        {
          "id": "night",
          "name": "Night Tow & Load Control Desk",
          "required_skills": [
            "tow_driver",
            "load_control"
          ],
          "min_staff": 3,
          "max_staff": 5,
          "hours": 10.0
        },
        {
          "id": "irrops",
          "name": "IRROPS Quick Response (Gate + Load Control)",
          "required_skills": [
            "gate_assist",
            "load_control"
          ],
          "min_staff": 2,
          "max_staff": 4,
          "hours": 6.0
        }
      ]
    },
    "constraints": [
      {
        "description": "No employee may work more than 8 overtime hours beyond 40 regular hours for the week (fatigue rule for airside safety).",
        "_spec": {
          "fn": "max_overtime",
          "args": [
            8,
            40
          ]
        }
      },
      {
        "description": "For fairness, no employee should have more than 2 shifts more than any other employee.",
        "_spec": {
          "fn": "fairness",
          "args": [
            2
          ]
        }
      },
      {
        "description": "Hard cap: no employee may be assigned more than 6 total shifts in the planning horizon.",
        "_spec": {
          "fn": "max_total",
          "args": [
            6
          ]
        }
      },
      {
        "description": "Baseline coverage requirement: each shift must have at least 2 staff assigned (in addition to each shift\u2019s own min_staff requirement).",
        "_spec": {
          "fn": "min_coverage",
          "args": [
            2
          ]
        }
      },
      {
        "description": "Rest/overlap rules: no employee may work both shifts in any forbidden pair (e.g., morning conflicts with IRROPS standby; night conflicts with evening handover and dawn start).",
        "_spec": {
          "fn": "no_double",
          "args": [
            [
              [
                "night",
                "dawn"
              ],
              [
                "evening",
                "night"
              ],
              [
                "morning",
                "irrops"
              ]
            ]
          ]
        }
      }
    ],
    "instruction": "Assign employees to the six Airport Ground Handling shifts to minimize total labor cost while meeting each shift\u2019s staffing requirements (min_staff to max_staff), respecting each employee\u2019s availability and required skills, and complying with overtime, fairness, max-total-shifts, minimum-coverage, and no-double constraints.",
    "feasible": true,
    "solution": {
      "domain": "shift_scheduling",
      "assignments": [
        {
          "employee_id": "e1",
          "shift_id": "dawn"
        },
        {
          "employee_id": "e1",
          "shift_id": "evening"
        },
        {
          "employee_id": "e2",
          "shift_id": "morning"
        },
        {
          "employee_id": "e2",
          "shift_id": "evening"
        },
        {
          "employee_id": "e3",
          "shift_id": "morning"
        },
        {
          "employee_id": "e4",
          "shift_id": "night"
        },
        {
          "employee_id": "e4",
          "shift_id": "irrops"
        },
        {
          "employee_id": "e5",
          "shift_id": "dawn"
        },
        {
          "employee_id": "e5",
          "shift_id": "midday"
        },
        {
          "employee_id": "e6",
          "shift_id": "evening"
        },
        {
          "employee_id": "e8",
          "shift_id": "morning"
        },
        {
          "employee_id": "e8",
          "shift_id": "midday"
        },
        {
          "employee_id": "e9",
          "shift_id": "night"
        },
        {
          "employee_id": "e10",
          "shift_id": "irrops"
        },
        {
          "employee_id": "e11",
          "shift_id": "morning"
        },
        {
          "employee_id": "e11",
          "shift_id": "evening"
        },
        {
          "employee_id": "e13",
          "shift_id": "dawn"
        },
        {
          "employee_id": "e13",
          "shift_id": "midday"
        },
        {
          "employee_id": "e15",
          "shift_id": "night"
        }
      ],
      "total_cost": 3360.5,
      "total_hours": 161.0
    }
  },
  {
    "id": "vehicle_routing_e026a775",
    "difficulty": "expert",
    "scenario": {
      "domain": "vehicle_routing",
      "description": "Catering delivery for corporate events across the Metro Business District. Atlas Corporate Catering must deliver boxed lunches, hot trays, beverage kits, and setup supplies to 16 office venues with strict receiving windows (security docks / event start times). The planning challenge includes capacity limits, time-window compatibility, and max route-length caps that make some tempting geographic clusters infeasible unless sequenced correctly.",
      "depot_id": "depot",
      "locations": [
        {
          "id": "depot",
          "name": "Atlas Corporate Catering - Central Kitchen & Dispatch",
          "x": 0.0,
          "y": 0.0,
          "demand": 0,
          "time_window_start": 0,
          "time_window_end": 600,
          "service_time": 0
        },
        {
          "id": "c1",
          "name": "BluePeak Capital - Executive Lunch (Boxed Bento)",
          "x": 8.0,
          "y": 3.0,
          "demand": 20,
          "time_window_start": 80,
          "time_window_end": 130,
          "service_time": 10
        },
        {
          "id": "c2",
          "name": "Nimbus Law Group - Partner Meeting Catering",
          "x": 10.0,
          "y": -2.0,
          "demand": 18,
          "time_window_start": 70,
          "time_window_end": 120,
          "service_time": 10
        },
        {
          "id": "c3",
          "name": "HelioTech HQ - All-Hands Breakfast Wraps",
          "x": 6.0,
          "y": 6.0,
          "demand": 15,
          "time_window_start": 35,
          "time_window_end": 85,
          "service_time": 10
        },
        {
          "id": "c4",
          "name": "IronGate Insurance - Boardroom Working Lunch",
          "x": -7.0,
          "y": 4.0,
          "demand": 22,
          "time_window_start": 90,
          "time_window_end": 150,
          "service_time": 12
        },
        {
          "id": "c5",
          "name": "CedarBridge Consulting - Training Buffet Setup",
          "x": -10.0,
          "y": -1.0,
          "demand": 25,
          "time_window_start": 110,
          "time_window_end": 180,
          "service_time": 15
        },
        {
          "id": "c6",
          "name": "Lumen Medical Billing - Early Coffee & Pastry Drop",
          "x": -5.0,
          "y": -8.0,
          "demand": 14,
          "time_window_start": 25,
          "time_window_end": 70,
          "service_time": 8
        },
        {
          "id": "c7",
          "name": "Granite Data Systems - Breakfast Sandwich Crates",
          "x": -2.0,
          "y": -11.0,
          "demand": 16,
          "time_window_start": 40,
          "time_window_end": 95,
          "service_time": 10
        },
        {
          "id": "c8",
          "name": "Westport Logistics Campus - Canteen Refill Pallets",
          "x": 18.0,
          "y": 12.0,
          "demand": 30,
          "time_window_start": 210,
          "time_window_end": 280,
          "service_time": 15
        },
        {
          "id": "c9",
          "name": "Orchid Advertising - Client Pitch Lunch Platters",
          "x": 15.0,
          "y": -12.0,
          "demand": 26,
          "time_window_start": 120,
          "time_window_end": 170,
          "service_time": 12
        },
        {
          "id": "c10",
          "name": "Summit Bank Ops Center - Conference Lunch (Hot Trays)",
          "x": 22.0,
          "y": -8.0,
          "demand": 18,
          "time_window_start": 260,
          "time_window_end": 330,
          "service_time": 12
        },
        {
          "id": "c11",
          "name": "Keystone Architecture - Design Review Lunch Boxes",
          "x": -14.0,
          "y": 10.0,
          "demand": 24,
          "time_window_start": 60,
          "time_window_end": 115,
          "service_time": 10
        },
        {
          "id": "c12",
          "name": "Riverview Pharma - Compliance Workshop Catering",
          "x": -18.0,
          "y": 6.0,
          "demand": 20,
          "time_window_start": 150,
          "time_window_end": 210,
          "service_time": 12
        },
        {
          "id": "c13",
          "name": "NorthDock Robotics - Late Lunch Shift (Meal Kits)",
          "x": -20.0,
          "y": -9.0,
          "demand": 28,
          "time_window_start": 230,
          "time_window_end": 310,
          "service_time": 15
        },
        {
          "id": "c14",
          "name": "Pioneer Real Estate Trust - Tenant Event Hors d\u2019oeuvres",
          "x": 5.0,
          "y": -18.0,
          "demand": 22,
          "time_window_start": 175,
          "time_window_end": 240,
          "service_time": 12
        },
        {
          "id": "c15",
          "name": "Juniper HR Services - New Hire Orientation Lunch",
          "x": -8.0,
          "y": -16.0,
          "demand": 19,
          "time_window_start": 130,
          "time_window_end": 190,
          "service_time": 10
        },
        {
          "id": "c16",
          "name": "CoralWorks Studio - Executive Late Breakfast",
          "x": 12.0,
          "y": 7.0,
          "demand": 23,
          "time_window_start": 55,
          "time_window_end": 105,
          "service_time": 10
        }
      ],
      "vehicles": [
        {
          "id": "v1",
          "name": "Reefer Van 'Chafing-Dish One' (Temp-Control)",
          "capacity": 120,
          "max_distance": 115.0,
          "cost_per_distance": 1.1,
          "start_location": "depot"
        },
        {
          "id": "v2",
          "name": "Box Truck 'Hot Tray Runner' (Liftgate)",
          "capacity": 110,
          "max_distance": 140.0,
          "cost_per_distance": 1.0,
          "start_location": "depot"
        },
        {
          "id": "v3",
          "name": "Sprinter Van 'Downtown QuickServe'",
          "capacity": 90,
          "max_distance": 105.0,
          "cost_per_distance": 0.85,
          "start_location": "depot"
        },
        {
          "id": "v4",
          "name": "City Van 'Dock-Slot Specialist'",
          "capacity": 80,
          "max_distance": 125.0,
          "cost_per_distance": 0.9,
          "start_location": "depot"
        }
      ]
    },
    "constraints": [
      {
        "description": "Each vehicle can make at most 7 delivery stops per route (security check-ins + loading dock appointments).",
        "_spec": {
          "fn": "max_stops",
          "args": [
            7
          ]
        }
      },
      {
        "description": "Maximum route distance cap for all vehicles (applies in addition to each vehicle's own max_distance field).",
        "_spec": {
          "fn": "max_distance",
          "args": [
            140
          ]
        }
      },
      {
        "description": "Customer c3 (HelioTech HQ) must be served within its strict receiving window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c3",
            35,
            85
          ]
        }
      },
      {
        "description": "Customer c6 (Lumen Medical Billing) must be served within its strict receiving window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c6",
            25,
            70
          ]
        }
      },
      {
        "description": "Customer c7 (Granite Data Systems) must be served within its strict receiving window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c7",
            40,
            95
          ]
        }
      },
      {
        "description": "Customer c1 (BluePeak Capital) must be served within its strict receiving window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c1",
            80,
            130
          ]
        }
      },
      {
        "description": "Customer c2 (Nimbus Law Group) must be served within its strict receiving window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c2",
            70,
            120
          ]
        }
      },
      {
        "description": "Customer c16 (CoralWorks Studio) must be served within its strict receiving window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c16",
            55,
            105
          ]
        }
      },
      {
        "description": "Customer c11 (Keystone Architecture) must be served within its strict receiving window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c11",
            60,
            115
          ]
        }
      },
      {
        "description": "Customer c4 (IronGate Insurance) must be served within its strict receiving window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c4",
            90,
            150
          ]
        }
      },
      {
        "description": "Customer c5 (CedarBridge Consulting) must be served within its strict receiving window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c5",
            110,
            180
          ]
        }
      },
      {
        "description": "Customer c9 (Orchid Advertising) must be served within its strict receiving window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c9",
            120,
            170
          ]
        }
      },
      {
        "description": "Customer c12 (Riverview Pharma) must be served within its strict receiving window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c12",
            150,
            210
          ]
        }
      },
      {
        "description": "Customer c15 (Juniper HR Services) must be served within its strict receiving window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c15",
            130,
            190
          ]
        }
      },
      {
        "description": "Customer c14 (Pioneer Real Estate Trust) must be served within its strict receiving window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c14",
            175,
            240
          ]
        }
      },
      {
        "description": "Customer c8 (Westport Logistics Campus) must be served within its strict receiving window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c8",
            210,
            280
          ]
        }
      },
      {
        "description": "Customer c13 (NorthDock Robotics) must be served within its strict receiving window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c13",
            230,
            310
          ]
        }
      },
      {
        "description": "Customer c10 (Summit Bank Ops Center) must be served within its strict receiving window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c10",
            260,
            330
          ]
        }
      },
      {
        "description": "High-profile executive order at BluePeak (c1) must be delivered by the temperature-controlled Reefer Van v1 (client-required).",
        "_spec": {
          "fn": "must_visit",
          "args": [
            "c1",
            "v1"
          ]
        }
      },
      {
        "description": "Security policy: Nimbus Law Group (c2) and Orchid Advertising (c9) cannot be on the same route (confidentiality overlap for competing legal matter).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c2",
            "c9"
          ]
        }
      },
      {
        "description": "Dock congestion: Westport Logistics Campus (c8) and Summit Bank Ops Center (c10) cannot be on the same route (both require long dock slots; combining tends to miss one window).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c8",
            "c10"
          ]
        }
      },
      {
        "description": "Allergen-control separation: HelioTech breakfast (c3) and Pioneer hors d\u2019oeuvres (c14) cannot be on the same route (separate handling requirement).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c3",
            "c14"
          ]
        }
      },
      {
        "description": "Union dock rule: Riverview Pharma (c12) and NorthDock Robotics (c13) cannot be on the same route (both require dedicated load-out equipment that cannot be shared on a single run).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c12",
            "c13"
          ]
        }
      }
    ],
    "instruction": "Minimize total delivery distance (and cost) while ensuring all customers are served within their time windows, respecting vehicle capacity limits, maximum route distances, and stop constraints. Travel time equals Euclidean distance between coordinates; service_time consumes time at each stop; vehicles start at the depot and may finish anywhere unless your solver assumes return-to-depot (if return is required, routes must still respect max_distance).",
    "feasible": true,
    "solution": {
      "domain": "vehicle_routing",
      "routes": [
        {
          "vehicle_id": "v1",
          "stops": [
            {
              "location_id": "c3",
              "arrival_time": 35,
              "departure_time": 45
            },
            {
              "location_id": "c2",
              "arrival_time": 70,
              "departure_time": 80
            },
            {
              "location_id": "c1",
              "arrival_time": 85,
              "departure_time": 95
            },
            {
              "location_id": "c16",
              "arrival_time": 101,
              "departure_time": 111
            },
            {
              "location_id": "c8",
              "arrival_time": 210,
              "departure_time": 225
            }
          ],
          "total_distance": 57.92,
          "total_load": 106.0
        },
        {
          "vehicle_id": "v2",
          "stops": [
            {
              "location_id": "c4",
              "arrival_time": 90,
              "departure_time": 102
            },
            {
              "location_id": "c11",
              "arrival_time": 111,
              "departure_time": 121
            },
            {
              "location_id": "c12",
              "arrival_time": 150,
              "departure_time": 162
            },
            {
              "location_id": "c5",
              "arrival_time": 172,
              "departure_time": 187
            }
          ],
          "total_distance": 43.62,
          "total_load": 91.0
        },
        {
          "vehicle_id": "v3",
          "stops": [
            {
              "location_id": "c6",
              "arrival_time": 25,
              "departure_time": 33
            },
            {
              "location_id": "c7",
              "arrival_time": 40,
              "departure_time": 50
            },
            {
              "location_id": "c15",
              "arrival_time": 130,
              "departure_time": 140
            },
            {
              "location_id": "c13",
              "arrival_time": 230,
              "departure_time": 245
            }
          ],
          "total_distance": 57.3,
          "total_load": 77.0
        },
        {
          "vehicle_id": "v4",
          "stops": [
            {
              "location_id": "c9",
              "arrival_time": 120,
              "departure_time": 132
            },
            {
              "location_id": "c14",
              "arrival_time": 175,
              "departure_time": 187
            },
            {
              "location_id": "c10",
              "arrival_time": 260,
              "departure_time": 272
            }
          ],
          "total_distance": 74.0,
          "total_load": 66.0
        }
      ],
      "total_distance": 232.84,
      "total_cost": 224.11,
      "unserved": []
    }
  },
  {
    "id": "vehicle_routing_8fcfe93f",
    "difficulty": "expert",
    "scenario": {
      "domain": "vehicle_routing",
      "description": "Beverage distribution day-run from HarborFrost Beverages Warehouse to retail accounts (bottle shops, grocers, and bars). Loads include chilled craft soda, sparkling water, and kegs. Dispatch must respect store receiving windows, truck capacity, and maximum route length while minimizing distance/cost. The map includes decoy-close stops with tight windows and one-way-feeling geography to create greedy traps.",
      "depot_id": "depot",
      "locations": [
        {
          "id": "depot",
          "name": "HarborFrost Beverages Warehouse (Depot)",
          "x": 0.0,
          "y": 0.0,
          "demand": 0,
          "time_window_start": 0,
          "time_window_end": 999,
          "service_time": 0
        },
        {
          "id": "c1",
          "name": "Dockside Market - Receiving Bay A (craft soda)",
          "x": 4.0,
          "y": 6.0,
          "demand": 28,
          "time_window_start": 20,
          "time_window_end": 55,
          "service_time": 6
        },
        {
          "id": "c2",
          "name": "BlueCap Liquors (sparkling water)",
          "x": 6.0,
          "y": 4.0,
          "demand": 18,
          "time_window_start": 0,
          "time_window_end": 38,
          "service_time": 5
        },
        {
          "id": "c3",
          "name": "Sunset Corner Grocer (keg + cans)",
          "x": 8.0,
          "y": 7.0,
          "demand": 12,
          "time_window_start": 45,
          "time_window_end": 80,
          "service_time": 5
        },
        {
          "id": "c4",
          "name": "Old Town Bottle House (premium mixer cases)",
          "x": -3.0,
          "y": 7.0,
          "demand": 24,
          "time_window_start": 10,
          "time_window_end": 45,
          "service_time": 6
        },
        {
          "id": "c5",
          "name": "Copper Mug Tavern (keg drop)",
          "x": -6.0,
          "y": 5.0,
          "demand": 10,
          "time_window_start": 0,
          "time_window_end": 30,
          "service_time": 7
        },
        {
          "id": "c6",
          "name": "Greenline Supermart - Back Dock (bulk water pallets)",
          "x": -10.0,
          "y": 2.0,
          "demand": 30,
          "time_window_start": 35,
          "time_window_end": 80,
          "service_time": 8
        },
        {
          "id": "c7",
          "name": "Riverside Deli (grab-n-go cans)",
          "x": -8.0,
          "y": -3.0,
          "demand": 20,
          "time_window_start": 0,
          "time_window_end": 40,
          "service_time": 5
        },
        {
          "id": "c8",
          "name": "Pine & Pearl Wines (limited-edition soda)",
          "x": -4.0,
          "y": -6.0,
          "demand": 14,
          "time_window_start": 55,
          "time_window_end": 95,
          "service_time": 6
        },
        {
          "id": "c9",
          "name": "Meadowview Mini-Mart (sparkling water cases)",
          "x": 1.0,
          "y": -8.0,
          "demand": 16,
          "time_window_start": 25,
          "time_window_end": 70,
          "service_time": 5
        },
        {
          "id": "c10",
          "name": "Hillcrest Grocery - Receiving (assorted pallets)",
          "x": 10.0,
          "y": -2.0,
          "demand": 34,
          "time_window_start": 0,
          "time_window_end": 35,
          "service_time": 8
        },
        {
          "id": "c11",
          "name": "Eastgate Convenience (impulse cooler stock)",
          "x": 12.0,
          "y": 3.0,
          "demand": 22,
          "time_window_start": 50,
          "time_window_end": 95,
          "service_time": 5
        },
        {
          "id": "c12",
          "name": "Glass & Grain Bottle Shop (craft soda variety)",
          "x": 14.0,
          "y": 8.0,
          "demand": 26,
          "time_window_start": 0,
          "time_window_end": 28,
          "service_time": 6
        },
        {
          "id": "c13",
          "name": "Seabreeze Hypermart - Dock 3 (bulk pallets)",
          "x": 18.0,
          "y": 1.0,
          "demand": 36,
          "time_window_start": 40,
          "time_window_end": 85,
          "service_time": 10
        },
        {
          "id": "c14",
          "name": "Canal Street Bar Supply (keg pickup/drop)",
          "x": 9.0,
          "y": 12.0,
          "demand": 16,
          "time_window_start": 60,
          "time_window_end": 110,
          "service_time": 7
        },
        {
          "id": "c15",
          "name": "Northbridge Spirits (small-lot mixers)",
          "x": -12.0,
          "y": 10.0,
          "demand": 20,
          "time_window_start": 20,
          "time_window_end": 60,
          "service_time": 6
        },
        {
          "id": "c16",
          "name": "Lighthouse Fuel & Mart (cooler reset)",
          "x": -15.0,
          "y": -2.0,
          "demand": 18,
          "time_window_start": 45,
          "time_window_end": 90,
          "service_time": 5
        },
        {
          "id": "c17",
          "name": "Market Square Kiosk (tiny top-up order)",
          "x": 2.0,
          "y": 2.0,
          "demand": 8,
          "time_window_start": 0,
          "time_window_end": 25,
          "service_time": 3
        },
        {
          "id": "c18",
          "name": "Crescent Mall Grocer - Dock (assorted cases)",
          "x": 6.0,
          "y": -12.0,
          "demand": 22,
          "time_window_start": 60,
          "time_window_end": 120,
          "service_time": 7
        }
      ],
      "vehicles": [
        {
          "id": "v1",
          "name": "Chiller Box Truck 12ft (HarborFrost Unit 12)",
          "capacity": 150,
          "max_distance": 95.0,
          "cost_per_distance": 1.0,
          "start_location": "depot"
        },
        {
          "id": "v2",
          "name": "Reefer Sprinter Van (HarborFrost Van R2)",
          "capacity": 130,
          "max_distance": 120.0,
          "cost_per_distance": 1.2,
          "start_location": "depot"
        },
        {
          "id": "v3",
          "name": "Day-Cab Straight Truck (HarborFrost ST-7)",
          "capacity": 90,
          "max_distance": 110.0,
          "cost_per_distance": 0.9,
          "start_location": "depot"
        },
        {
          "id": "v4",
          "name": "City Mini-Truck (HarborFrost City-3)",
          "capacity": 120,
          "max_distance": 85.0,
          "cost_per_distance": 1.1,
          "start_location": "depot"
        }
      ]
    },
    "constraints": [
      {
        "description": "Each vehicle can make at most 8 delivery stops per route (forces non-greedy clustering).",
        "_spec": {
          "fn": "max_stops",
          "args": [
            8
          ]
        }
      },
      {
        "description": "No single route may exceed 120 distance units (global cap ensures maximum route length discipline while allowing feasible routing).",
        "_spec": {
          "fn": "max_distance",
          "args": [
            120
          ]
        }
      },
      {
        "description": "Customer c12 has a strict early receiving window (bait for greedy east-side clustering).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c12",
            0,
            28
          ]
        }
      },
      {
        "description": "Customer c10 must be served early (pairs awkwardly with nearby-but-late customers).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c10",
            0,
            35
          ]
        }
      },
      {
        "description": "Customer c5 has an early bar delivery cutoff (west-side decoy close to other west stops).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c5",
            0,
            30
          ]
        }
      },
      {
        "description": "Customer c2 has a tight morning window near the depot (tempting first stop that can cause later dead ends).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c2",
            0,
            38
          ]
        }
      },
      {
        "description": "Customer c1 is mid-morning only (creates interaction with early-window cluster).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c1",
            20,
            55
          ]
        }
      },
      {
        "description": "Customer c6 is dock-appointment only (late enough to force sequencing).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c6",
            35,
            80
          ]
        }
      },
      {
        "description": "Customer c15 has a mid-morning window and is far west (forces commitment to a west route).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c15",
            20,
            60
          ]
        }
      },
      {
        "description": "Customer c11 is a late-window east stop (a decoy to 'just add on' to an early east route).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c11",
            50,
            95
          ]
        }
      },
      {
        "description": "Customer c14 is late-only north-east (pulls routes long if scheduled poorly).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c14",
            60,
            110
          ]
        }
      },
      {
        "description": "Customer c18 is late-only south cluster (counterintuitive: may need a dedicated run despite being 'near' others).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c18",
            60,
            120
          ]
        }
      },
      {
        "description": "Hazmat/returnables conflict: c5 (keg drop with returns) cannot share a route with c12 (glass pickup) due to contamination policy.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c5",
            "c12"
          ]
        }
      },
      {
        "description": "Returns handling conflict: c6 (bulk pallet exchange) cannot be on the same route as c10 (tight early grocery dock) due to unload sequence constraints.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c6",
            "c10"
          ]
        }
      },
      {
        "description": "High-priority account Dockside Market (c1) must be served by the chilled box truck v1 to keep product at spec.",
        "_spec": {
          "fn": "must_visit",
          "args": [
            "c1",
            "v1"
          ]
        }
      }
    ],
    "instruction": "Minimize total delivery distance (and travel cost) while serving all customers within their time windows and service times, respecting vehicle capacity limits, maximum route distance limits, and the maximum stops-per-vehicle constraint. Vehicles start at the HarborFrost warehouse depot; routes must be planned so that incompatibilities are not violated.",
    "feasible": true,
    "solution": {
      "domain": "vehicle_routing",
      "routes": [
        {
          "vehicle_id": "v1",
          "stops": [
            {
              "location_id": "c17",
              "arrival_time": 2,
              "departure_time": 5
            },
            {
              "location_id": "c2",
              "arrival_time": 10,
              "departure_time": 15
            },
            {
              "location_id": "c12",
              "arrival_time": 24,
              "departure_time": 30
            },
            {
              "location_id": "c3",
              "arrival_time": 45,
              "departure_time": 50
            },
            {
              "location_id": "c1",
              "arrival_time": 54,
              "departure_time": 60
            }
          ],
          "total_distance": 33.65,
          "total_load": 92.0
        },
        {
          "vehicle_id": "v2",
          "stops": [
            {
              "location_id": "c10",
              "arrival_time": 10,
              "departure_time": 18
            },
            {
              "location_id": "c13",
              "arrival_time": 40,
              "departure_time": 50
            },
            {
              "location_id": "c11",
              "arrival_time": 56,
              "departure_time": 61
            },
            {
              "location_id": "c14",
              "arrival_time": 70,
              "departure_time": 77
            }
          ],
          "total_distance": 49.55,
          "total_load": 108.0
        },
        {
          "vehicle_id": "v3",
          "stops": [
            {
              "location_id": "c7",
              "arrival_time": 8,
              "departure_time": 13
            },
            {
              "location_id": "c8",
              "arrival_time": 55,
              "departure_time": 61
            },
            {
              "location_id": "c9",
              "arrival_time": 66,
              "departure_time": 71
            },
            {
              "location_id": "c18",
              "arrival_time": 77,
              "departure_time": 84
            }
          ],
          "total_distance": 38.75,
          "total_load": 72.0
        },
        {
          "vehicle_id": "v4",
          "stops": [
            {
              "location_id": "c4",
              "arrival_time": 10,
              "departure_time": 16
            },
            {
              "location_id": "c5",
              "arrival_time": 19,
              "departure_time": 26
            },
            {
              "location_id": "c15",
              "arrival_time": 34,
              "departure_time": 40
            },
            {
              "location_id": "c16",
              "arrival_time": 52,
              "departure_time": 57
            },
            {
              "location_id": "c6",
              "arrival_time": 64,
              "departure_time": 72
            }
          ],
          "total_distance": 48.01,
          "total_load": 102.0
        }
      ],
      "total_distance": 169.96,
      "total_cost": 178.46,
      "unserved": []
    }
  },
  {
    "id": "vehicle_routing_efda19f2",
    "difficulty": "expert",
    "scenario": {
      "domain": "vehicle_routing",
      "description": "Same-day appliance repair technicians must deliver parts and perform on-site service calls. Each customer demand represents the parts load (in standardized tote units) that must be carried when traveling to that stop. Technicians start at the central warehouse, must respect customer appointment windows, and each van has a hard maximum route length due to fuel/shift limits. Goal is to minimize total distance while serving all calls.",
      "depot_id": "depot",
      "locations": [
        {
          "id": "depot",
          "name": "Central Parts Warehouse (SparkFix Distribution)",
          "x": 0.0,
          "y": 0.0,
          "demand": 0,
          "time_window_start": 0,
          "time_window_end": 600,
          "service_time": 0
        },
        {
          "id": "c1",
          "name": "Maplewood Condos - GE Refrigerator No-Cool",
          "x": 4.0,
          "y": 18.0,
          "demand": 18,
          "time_window_start": 60,
          "time_window_end": 120,
          "service_time": 12
        },
        {
          "id": "c2",
          "name": "Riverview Bistro - Hobart Dishwasher Error E3",
          "x": 6.0,
          "y": 16.0,
          "demand": 12,
          "time_window_start": 90,
          "time_window_end": 170,
          "service_time": 10
        },
        {
          "id": "c3",
          "name": "Pinecrest Townhomes - LG Washer Drain Pump",
          "x": 9.0,
          "y": 20.0,
          "demand": 15,
          "time_window_start": 40,
          "time_window_end": 110,
          "service_time": 10
        },
        {
          "id": "c4",
          "name": "Northgate Clinic - Whirlpool Dryer No-Heat",
          "x": 14.0,
          "y": 15.0,
          "demand": 20,
          "time_window_start": 180,
          "time_window_end": 260,
          "service_time": 14
        },
        {
          "id": "c5",
          "name": "Old Mill Lofts - Samsung Range Igniter",
          "x": 12.0,
          "y": 10.0,
          "demand": 14,
          "time_window_start": 150,
          "time_window_end": 240,
          "service_time": 12
        },
        {
          "id": "c6",
          "name": "Lakeview Senior Center - Frigidaire Freezer Seal",
          "x": 2.0,
          "y": 8.0,
          "demand": 16,
          "time_window_start": 0,
          "time_window_end": 80,
          "service_time": 12
        },
        {
          "id": "c7",
          "name": "Cedar Park Deli - True Cooler Fan Motor",
          "x": -3.0,
          "y": 15.0,
          "demand": 22,
          "time_window_start": 120,
          "time_window_end": 210,
          "service_time": 15
        },
        {
          "id": "c8",
          "name": "Eastfield Elementary - Maytag Washer Control Board",
          "x": -6.0,
          "y": 12.0,
          "demand": 13,
          "time_window_start": 90,
          "time_window_end": 160,
          "service_time": 10
        },
        {
          "id": "c9",
          "name": "Harborline Apartments - Bosch Dishwasher Leak",
          "x": -10.0,
          "y": 18.0,
          "demand": 17,
          "time_window_start": 200,
          "time_window_end": 300,
          "service_time": 12
        },
        {
          "id": "c10",
          "name": "Westgate Bakery - Blodgett Oven Thermostat",
          "x": -12.0,
          "y": 9.0,
          "demand": 19,
          "time_window_start": 220,
          "time_window_end": 330,
          "service_time": 15
        },
        {
          "id": "c11",
          "name": "Meadowbrook Gym - Speed Queen Dryer Belt",
          "x": -8.0,
          "y": 4.0,
          "demand": 11,
          "time_window_start": 30,
          "time_window_end": 140,
          "service_time": 10
        },
        {
          "id": "c12",
          "name": "Downtown Hotel - Ice Machine Water Valve",
          "x": -2.0,
          "y": -6.0,
          "demand": 16,
          "time_window_start": 240,
          "time_window_end": 360,
          "service_time": 12
        },
        {
          "id": "c13",
          "name": "Southridge Town Center - KitchenAid Dishwasher Pump",
          "x": 5.0,
          "y": -10.0,
          "demand": 21,
          "time_window_start": 260,
          "time_window_end": 380,
          "service_time": 14
        },
        {
          "id": "c14",
          "name": "Summit View Homes - Electrolux Washer Door Lock",
          "x": 10.0,
          "y": -14.0,
          "demand": 9,
          "time_window_start": 300,
          "time_window_end": 420,
          "service_time": 10
        },
        {
          "id": "c15",
          "name": "Bayside Marina Office - GE Microwave Magnetron",
          "x": 14.0,
          "y": -8.0,
          "demand": 12,
          "time_window_start": 210,
          "time_window_end": 300,
          "service_time": 10
        },
        {
          "id": "c16",
          "name": "Greenfield Market - Beverage Cooler Compressor Start Kit",
          "x": 18.0,
          "y": -12.0,
          "demand": 18,
          "time_window_start": 360,
          "time_window_end": 520,
          "service_time": 15
        }
      ],
      "vehicles": [
        {
          "id": "v1",
          "name": "Tech Van A (Rosa) - Transit 250",
          "capacity": 120,
          "max_distance": 120.0,
          "cost_per_distance": 1.0,
          "start_location": "depot"
        },
        {
          "id": "v2",
          "name": "Tech Van B (Malik) - Sprinter 2500",
          "capacity": 110,
          "max_distance": 115.0,
          "cost_per_distance": 0.95,
          "start_location": "depot"
        },
        {
          "id": "v3",
          "name": "Tech Van C (Jin) - NV200",
          "capacity": 100,
          "max_distance": 105.0,
          "cost_per_distance": 0.85,
          "start_location": "depot"
        },
        {
          "id": "v4",
          "name": "Tech Van D (Elena) - Promaster City",
          "capacity": 90,
          "max_distance": 95.0,
          "cost_per_distance": 0.8,
          "start_location": "depot"
        }
      ]
    },
    "constraints": [
      {
        "description": "Each technician van can make at most 7 customer stops (service calls) on its route to reflect shift constraints and paperwork time.",
        "_spec": {
          "fn": "max_stops",
          "args": [
            7
          ]
        }
      },
      {
        "description": "Hard maximum route distance per vehicle (also encoded on vehicles) to model fuel/shift limits; any route exceeding 110 distance units is disallowed.",
        "_spec": {
          "fn": "max_distance",
          "args": [
            110
          ]
        }
      },
      {
        "description": "Early-morning senior-center appointment must be handled by Tech Van C (Jin) because he carries the dedicated freezer-seal kit.",
        "_spec": {
          "fn": "must_visit",
          "args": [
            "c6",
            "v3"
          ]
        }
      },
      {
        "description": "Maplewood Condos tight 8\u201310am appointment window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c1",
            60,
            120
          ]
        }
      },
      {
        "description": "Riverview Bistro lunch-prep window; must be completed before kitchen ramp-up.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c2",
            90,
            170
          ]
        }
      },
      {
        "description": "Pinecrest Townhomes early window; rescheduling not allowed.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c3",
            40,
            110
          ]
        }
      },
      {
        "description": "Northgate Clinic maintenance window mid-day; security requires arrival inside window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c4",
            180,
            260
          ]
        }
      },
      {
        "description": "Old Mill Lofts property-management window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c5",
            150,
            240
          ]
        }
      },
      {
        "description": "Lakeview Senior Center very early window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c6",
            0,
            80
          ]
        }
      },
      {
        "description": "Cedar Park Deli window aligned with delivery receiving; after 3:30pm is rejected.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c7",
            120,
            210
          ]
        }
      },
      {
        "description": "Eastfield Elementary window between classes; late arrival causes cancellation.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c8",
            90,
            160
          ]
        }
      },
      {
        "description": "Harborline Apartments afternoon access window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c9",
            200,
            300
          ]
        }
      },
      {
        "description": "Westgate Bakery oven repair must happen after peak baking but before evening prep.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c10",
            220,
            330
          ]
        }
      },
      {
        "description": "Meadowbrook Gym flexible morning slot.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c11",
            30,
            140
          ]
        }
      },
      {
        "description": "Downtown Hotel engineering window (back-of-house access).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c12",
            240,
            360
          ]
        }
      },
      {
        "description": "Southridge Town Center window; loading dock access starts at 1:20pm.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c13",
            260,
            380
          ]
        }
      },
      {
        "description": "Summit View Homes late-afternoon residential window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c14",
            300,
            420
          ]
        }
      },
      {
        "description": "Bayside Marina office window; must be done before staff leaves.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c15",
            210,
            300
          ]
        }
      },
      {
        "description": "Greenfield Market late-day HVAC/compartment access window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c16",
            360,
            520
          ]
        }
      },
      {
        "description": "Food-service safety policy: do not schedule Cedar Park Deli and Downtown Hotel on the same van because their parts totes require different sanitation protocols and cannot share the same route.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c7",
            "c12"
          ]
        }
      },
      {
        "description": "Food-service safety policy: do not schedule Riverview Bistro and Westgate Bakery on the same van (allergen-control tool segregation).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c2",
            "c10"
          ]
        }
      },
      {
        "description": "Clinic compliance policy: Northgate Clinic and Meadowbrook Gym cannot be on the same van route due to contamination-control and mandated separate toolsets.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c4",
            "c11"
          ]
        }
      }
    ],
    "instruction": "Minimize total delivery distance (and thus cost) while ensuring all customer service calls are visited exactly once within their time windows, respecting each van\u2019s capacity and the global per-vehicle maximum distance constraint, and honoring max-stops, must-visit, and incompatibility constraints.",
    "feasible": true,
    "solution": {
      "domain": "vehicle_routing",
      "routes": [
        {
          "vehicle_id": "v2",
          "stops": [
            {
              "location_id": "c11",
              "arrival_time": 30,
              "departure_time": 40
            },
            {
              "location_id": "c8",
              "arrival_time": 90,
              "departure_time": 100
            },
            {
              "location_id": "c7",
              "arrival_time": 120,
              "departure_time": 135
            },
            {
              "location_id": "c9",
              "arrival_time": 200,
              "departure_time": 212
            },
            {
              "location_id": "c10",
              "arrival_time": 221,
              "departure_time": 236
            }
          ],
          "total_distance": 53.27,
          "total_load": 82.0
        },
        {
          "vehicle_id": "v3",
          "stops": [
            {
              "location_id": "c6",
              "arrival_time": 8,
              "departure_time": 20
            },
            {
              "location_id": "c1",
              "arrival_time": 60,
              "departure_time": 72
            },
            {
              "location_id": "c2",
              "arrival_time": 90,
              "departure_time": 100
            },
            {
              "location_id": "c3",
              "arrival_time": 105,
              "departure_time": 115
            },
            {
              "location_id": "c4",
              "arrival_time": 180,
              "departure_time": 194
            },
            {
              "location_id": "c5",
              "arrival_time": 199,
              "departure_time": 211
            }
          ],
          "total_distance": 54.36,
          "total_load": 95.0
        },
        {
          "vehicle_id": "v4",
          "stops": [
            {
              "location_id": "c12",
              "arrival_time": 240,
              "departure_time": 252
            },
            {
              "location_id": "c13",
              "arrival_time": 260,
              "departure_time": 274
            },
            {
              "location_id": "c15",
              "arrival_time": 283,
              "departure_time": 293
            },
            {
              "location_id": "c16",
              "arrival_time": 360,
              "departure_time": 375
            },
            {
              "location_id": "c14",
              "arrival_time": 383,
              "departure_time": 393
            }
          ],
          "total_distance": 54.71,
          "total_load": 76.0
        }
      ],
      "total_distance": 162.34,
      "total_cost": 146.11,
      "unserved": []
    }
  },
  {
    "id": "vehicle_routing_1271b2c3",
    "difficulty": "expert",
    "scenario": {
      "domain": "vehicle_routing",
      "description": "Urban grocery delivery service (FreshCart Metro) dispatching a mixed fleet from a single warehouse to deliver chilled produce boxes, pantry staples, and meal-kit totes to apartments, offices, and small caf\u00e9s. Routes must respect tight customer receiving windows (concierge hours, caf\u00e9 prep windows), vehicle capacity (totes/boxes), and maximum route length due to battery/range and cold-chain limits.",
      "depot_id": "depot",
      "locations": [
        {
          "id": "depot",
          "name": "FreshCart Metro Warehouse (Cold Dock)",
          "x": 0.0,
          "y": 0.0,
          "demand": 0,
          "time_window_start": 0,
          "time_window_end": 999,
          "service_time": 0
        },
        {
          "id": "c1",
          "name": "Riverside Towers Concierge (Produce Box Drop)",
          "x": 2.0,
          "y": 8.0,
          "demand": 12,
          "time_window_start": 0,
          "time_window_end": 55,
          "service_time": 6
        },
        {
          "id": "c2",
          "name": "Maple & 9th Daycare Kitchen (Allergen-Safe Pantry)",
          "x": 6.0,
          "y": 7.0,
          "demand": 18,
          "time_window_start": 0,
          "time_window_end": 50,
          "service_time": 7
        },
        {
          "id": "c3",
          "name": "Cedar Deli Prep Door (Breakfast Fruit Trays)",
          "x": 10.0,
          "y": 6.0,
          "demand": 22,
          "time_window_start": 25,
          "time_window_end": 70,
          "service_time": 8
        },
        {
          "id": "c4",
          "name": "Union Station Office Pantry (Snack Restock)",
          "x": 8.0,
          "y": 2.0,
          "demand": 15,
          "time_window_start": 20,
          "time_window_end": 85,
          "service_time": 6
        },
        {
          "id": "c5",
          "name": "North Loop Gym Juice Bar (Frozen Berries)",
          "x": 3.0,
          "y": -6.0,
          "demand": 16,
          "time_window_start": 60,
          "time_window_end": 120,
          "service_time": 7
        },
        {
          "id": "c6",
          "name": "Old Town Caf\u00e9 (Bakery Flour + Milk Crates)",
          "x": -4.0,
          "y": -5.0,
          "demand": 25,
          "time_window_start": 70,
          "time_window_end": 140,
          "service_time": 9
        },
        {
          "id": "c7",
          "name": "Canal Market Stalls (Meal-Kit Tote Batch)",
          "x": -7.0,
          "y": -1.0,
          "demand": 20,
          "time_window_start": 35,
          "time_window_end": 95,
          "service_time": 8
        },
        {
          "id": "c8",
          "name": "Lakeside Clinic Staff Fridge (Healthy Lunch Kits)",
          "x": -9.0,
          "y": 4.0,
          "demand": 24,
          "time_window_start": 10,
          "time_window_end": 55,
          "service_time": 8
        },
        {
          "id": "c9",
          "name": "Pinehurst Condos Locker Room (Weekly Grocery Totes)",
          "x": -6.0,
          "y": 9.0,
          "demand": 14,
          "time_window_start": 0,
          "time_window_end": 45,
          "service_time": 6
        },
        {
          "id": "c10",
          "name": "Eastside Co-Working (Coffee + Oat Milk)",
          "x": 12.0,
          "y": 1.0,
          "demand": 13,
          "time_window_start": 45,
          "time_window_end": 110,
          "service_time": 6
        },
        {
          "id": "c11",
          "name": "Greenline Apartments Parcel Room (Mixed Groceries)",
          "x": 5.0,
          "y": 11.0,
          "demand": 17,
          "time_window_start": 15,
          "time_window_end": 60,
          "service_time": 7
        },
        {
          "id": "c12",
          "name": "Southgate Student Housing (Budget Pantry Packs)",
          "x": 1.0,
          "y": 14.0,
          "demand": 19,
          "time_window_start": 60,
          "time_window_end": 140,
          "service_time": 7
        },
        {
          "id": "c13",
          "name": "Harborview Hotel Back Dock (Mini-Bar Restock)",
          "x": -2.0,
          "y": 15.0,
          "demand": 21,
          "time_window_start": 40,
          "time_window_end": 90,
          "service_time": 8
        },
        {
          "id": "c14",
          "name": "West End Bistro (Lunch Prep Produce)",
          "x": -12.0,
          "y": -3.0,
          "demand": 18,
          "time_window_start": 30,
          "time_window_end": 80,
          "service_time": 8
        },
        {
          "id": "c15",
          "name": "Midtown Boutique Grocer Pop-up (Sampling Cart)",
          "x": 9.0,
          "y": -8.0,
          "demand": 11,
          "time_window_start": 80,
          "time_window_end": 150,
          "service_time": 6
        },
        {
          "id": "c16",
          "name": "Hilltop Senior Center (Dietician Meal Kits)",
          "x": -11.0,
          "y": 10.0,
          "demand": 21,
          "time_window_start": 0,
          "time_window_end": 50,
          "service_time": 9
        }
      ],
      "vehicles": [
        {
          "id": "v1",
          "name": "Reefer Van 1 (Cold-Chain Priority)",
          "capacity": 90,
          "max_distance": 55.0,
          "cost_per_distance": 1.15,
          "start_location": "depot"
        },
        {
          "id": "v2",
          "name": "Electric Box Truck (Mid-Range, Low Cost)",
          "capacity": 110,
          "max_distance": 60.0,
          "cost_per_distance": 0.95,
          "start_location": "depot"
        },
        {
          "id": "v3",
          "name": "Cargo Van (Short-Range, Fast Loading)",
          "capacity": 70,
          "max_distance": 50.0,
          "cost_per_distance": 1.0,
          "start_location": "depot"
        },
        {
          "id": "v4",
          "name": "Sprinter Van (Longer Range, Higher Cost)",
          "capacity": 80,
          "max_distance": 75.0,
          "cost_per_distance": 1.25,
          "start_location": "depot"
        },
        {
          "id": "v5",
          "name": "City Microvan (Nimble, Limited Capacity)",
          "capacity": 65,
          "max_distance": 45.0,
          "cost_per_distance": 0.9,
          "start_location": "depot"
        }
      ]
    },
    "constraints": [
      {
        "description": "Each vehicle can make at most 8 delivery stops per route (urban loading/parking limits).",
        "_spec": {
          "fn": "max_stops",
          "args": [
            8
          ]
        }
      },
      {
        "description": "Maximum route distance per vehicle (range + cold-chain constraints).",
        "_spec": {
          "fn": "max_distance",
          "args": [
            75
          ]
        }
      },
      {
        "description": "c1 must be served early within its receiving window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c1",
            0,
            55
          ]
        }
      },
      {
        "description": "c2 daycare kitchen only accepts deliveries before morning prep ends.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c2",
            0,
            50
          ]
        }
      },
      {
        "description": "c3 deli prep window overlaps lunch prep; too early causes waiting, too late misses prep.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c3",
            25,
            70
          ]
        }
      },
      {
        "description": "c4 office pantry accepts during staffed hours.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c4",
            20,
            85
          ]
        }
      },
      {
        "description": "c5 gym juice bar requires delivery after the smoothie station opens.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c5",
            60,
            120
          ]
        }
      },
      {
        "description": "c6 caf\u00e9 prefers late-morning/early-afternoon receiving to align with baking schedule.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c6",
            70,
            140
          ]
        }
      },
      {
        "description": "c7 market stalls can only receive during vendor coordination hours.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c7",
            35,
            95
          ]
        }
      },
      {
        "description": "c8 clinic delivery must be completed before shift change.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c8",
            10,
            55
          ]
        }
      },
      {
        "description": "c9 condo locker access is only during concierge coverage.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c9",
            0,
            45
          ]
        }
      },
      {
        "description": "c10 coworking pantry restock cannot occur before the kitchen lead arrives.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c10",
            45,
            110
          ]
        }
      },
      {
        "description": "c11 parcel room receiving is limited to the morning desk schedule.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c11",
            15,
            60
          ]
        }
      },
      {
        "description": "c12 student housing prefers deliveries after classes start; late afternoon still ok.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c12",
            60,
            140
          ]
        }
      },
      {
        "description": "c13 hotel back dock window overlaps vendor reservation slots.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c13",
            40,
            90
          ]
        }
      },
      {
        "description": "c14 bistro receiving window is tight due to lunch service ramp-up.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c14",
            30,
            80
          ]
        }
      },
      {
        "description": "c15 pop-up event delivery must arrive after setup but before peak sampling.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c15",
            80,
            150
          ]
        }
      },
      {
        "description": "c16 senior center requires early drop-off before activity programming starts.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c16",
            0,
            50
          ]
        }
      },
      {
        "description": "High-priority cold-chain drop: c8 (clinic) must be served by Reefer Van 1 to ensure temperature compliance.",
        "_spec": {
          "fn": "must_visit",
          "args": [
            "c8",
            "v1"
          ]
        }
      },
      {
        "description": "Contracted hotel dock appointment: c13 must be served by the Sprinter Van (v4) because it has the required liftgate clearance paperwork.",
        "_spec": {
          "fn": "must_visit",
          "args": [
            "c13",
            "v4"
          ]
        }
      },
      {
        "description": "Decoy interaction: daycare allergen protocol means it cannot share a vehicle with the senior center meal-kits (separate handling).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c2",
            "c16"
          ]
        }
      },
      {
        "description": "Hidden interaction: clinic staff-fridge (c8) and senior center (c16) cannot share a route due to cross-contamination handling rules (separate bins/vehicle).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c8",
            "c16"
          ]
        }
      },
      {
        "description": "Cascading effect: bistro (c14) and gym frozen goods (c5) are incompatible on the same route due to odor/handling segregation in this fleet.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c14",
            "c5"
          ]
        }
      }
    ],
    "instruction": "Minimize total delivery distance (and total distance-based cost) while serving all customers. Every customer must be visited within its time window and serviced for the specified service_time. Each vehicle must respect its capacity and must not exceed the maximum route distance. Also respect max-stops, must-visit assignments, and incompatible-customer constraints.",
    "feasible": true,
    "solution": {
      "domain": "vehicle_routing",
      "routes": [
        {
          "vehicle_id": "v1",
          "stops": [
            {
              "location_id": "c8",
              "arrival_time": 10,
              "departure_time": 18
            },
            {
              "location_id": "c14",
              "arrival_time": 30,
              "departure_time": 38
            },
            {
              "location_id": "c7",
              "arrival_time": 43,
              "departure_time": 51
            },
            {
              "location_id": "c6",
              "arrival_time": 70,
              "departure_time": 79
            }
          ],
          "total_distance": 34.26,
          "total_load": 87.0
        },
        {
          "vehicle_id": "v2",
          "stops": [
            {
              "location_id": "c1",
              "arrival_time": 8,
              "departure_time": 14
            },
            {
              "location_id": "c11",
              "arrival_time": 18,
              "departure_time": 25
            },
            {
              "location_id": "c2",
              "arrival_time": 29,
              "departure_time": 36
            },
            {
              "location_id": "c3",
              "arrival_time": 40,
              "departure_time": 48
            },
            {
              "location_id": "c10",
              "arrival_time": 54,
              "departure_time": 60
            },
            {
              "location_id": "c4",
              "arrival_time": 64,
              "departure_time": 70
            }
          ],
          "total_distance": 38.49,
          "total_load": 97.0
        },
        {
          "vehicle_id": "v3",
          "stops": [
            {
              "location_id": "c15",
              "arrival_time": 80,
              "departure_time": 86
            },
            {
              "location_id": "c5",
              "arrival_time": 92,
              "departure_time": 99
            }
          ],
          "total_distance": 25.07,
          "total_load": 27.0
        },
        {
          "vehicle_id": "v4",
          "stops": [
            {
              "location_id": "c9",
              "arrival_time": 10,
              "departure_time": 16
            },
            {
              "location_id": "c16",
              "arrival_time": 21,
              "departure_time": 30
            },
            {
              "location_id": "c13",
              "arrival_time": 41,
              "departure_time": 49
            },
            {
              "location_id": "c12",
              "arrival_time": 60,
              "departure_time": 67
            }
          ],
          "total_distance": 43.42,
          "total_load": 75.0
        }
      ],
      "total_distance": 141.24,
      "total_cost": 148.3,
      "unserved": []
    }
  },
  {
    "id": "vehicle_routing_de7c4d1f",
    "difficulty": "expert",
    "scenario": {
      "domain": "vehicle_routing",
      "description": "Home healthcare nurse visit scheduling for HarborLight Home Health: route nurse teams from the central clinical hub to patient homes. Each stop represents an in-home visit requiring a specific amount of care time (service_time) and a scheduled arrival window. Vehicles represent nurse teams with a daily visit-minute capacity and a maximum drivable distance.",
      "depot_id": "depot",
      "locations": [
        {
          "id": "depot",
          "name": "HarborLight Clinical Hub (Dispatch & Supply Room)",
          "x": 0.0,
          "y": 0.0,
          "demand": 0,
          "time_window_start": 0,
          "time_window_end": 600,
          "service_time": 0
        },
        {
          "id": "c1",
          "name": "Patient: Evelyn Park \u2014 Post-op Wound Care",
          "x": 2.0,
          "y": 12.0,
          "demand": 30,
          "time_window_start": 60,
          "time_window_end": 120,
          "service_time": 30
        },
        {
          "id": "c2",
          "name": "Patient: Thomas Rivera \u2014 Diabetes Check + Education",
          "x": 6.0,
          "y": 10.0,
          "demand": 45,
          "time_window_start": 90,
          "time_window_end": 160,
          "service_time": 45
        },
        {
          "id": "c3",
          "name": "Patient: Marsha Klein \u2014 Medication Reconciliation",
          "x": 10.0,
          "y": 8.0,
          "demand": 60,
          "time_window_start": 110,
          "time_window_end": 180,
          "service_time": 60
        },
        {
          "id": "c4",
          "name": "Patient: Nolan Briggs \u2014 Short Safety Assessment",
          "x": 12.0,
          "y": 2.0,
          "demand": 25,
          "time_window_start": 80,
          "time_window_end": 150,
          "service_time": 25
        },
        {
          "id": "c5",
          "name": "Patient: Greta Singh \u2014 Mobility/PT Assist",
          "x": 9.0,
          "y": -6.0,
          "demand": 35,
          "time_window_start": 140,
          "time_window_end": 210,
          "service_time": 35
        },
        {
          "id": "c6",
          "name": "Patient: Walter Chen \u2014 INR Check",
          "x": 5.0,
          "y": -9.0,
          "demand": 40,
          "time_window_start": 170,
          "time_window_end": 250,
          "service_time": 40
        },
        {
          "id": "c7",
          "name": "Patient: Judith Alvarez \u2014 Home Oxygen Review",
          "x": -3.0,
          "y": -11.0,
          "demand": 30,
          "time_window_start": 150,
          "time_window_end": 230,
          "service_time": 30
        },
        {
          "id": "c8",
          "name": "Patient: Ben Holloway \u2014 Catheter Care",
          "x": -9.0,
          "y": -7.0,
          "demand": 50,
          "time_window_start": 180,
          "time_window_end": 260,
          "service_time": 50
        },
        {
          "id": "c9",
          "name": "Patient: Lila Okafor \u2014 Chronic Pain Follow-up",
          "x": -12.0,
          "y": -1.0,
          "demand": 30,
          "time_window_start": 210,
          "time_window_end": 290,
          "service_time": 30
        },
        {
          "id": "c10",
          "name": "Patient: Rosa Martinez \u2014 Speech Therapy Coaching",
          "x": -10.0,
          "y": 7.0,
          "demand": 40,
          "time_window_start": 240,
          "time_window_end": 330,
          "service_time": 40
        },
        {
          "id": "c11",
          "name": "Patient: Henry Ford \u2014 Complex Dressing Change",
          "x": -6.0,
          "y": 13.0,
          "demand": 55,
          "time_window_start": 270,
          "time_window_end": 360,
          "service_time": 55
        },
        {
          "id": "c12",
          "name": "Patient: Amina Yusuf \u2014 Palliative Check-in",
          "x": 1.0,
          "y": 18.0,
          "demand": 35,
          "time_window_start": 300,
          "time_window_end": 390,
          "service_time": 35
        },
        {
          "id": "c13",
          "name": "Patient: Caleb Brooks \u2014 Fall-risk Reassessment",
          "x": 14.0,
          "y": -2.0,
          "demand": 35,
          "time_window_start": 260,
          "time_window_end": 340,
          "service_time": 35
        },
        {
          "id": "c14",
          "name": "Patient: Priya Nair \u2014 IV Antibiotic Visit",
          "x": 16.0,
          "y": 6.0,
          "demand": 30,
          "time_window_start": 280,
          "time_window_end": 360,
          "service_time": 30
        },
        {
          "id": "c15",
          "name": "Patient: Samuel Price \u2014 Late-day Insulin Titration",
          "x": 8.0,
          "y": 16.0,
          "demand": 45,
          "time_window_start": 420,
          "time_window_end": 510,
          "service_time": 45
        },
        {
          "id": "c16",
          "name": "Patient: Dana Whitman \u2014 Evening Wellness Check",
          "x": -14.0,
          "y": 10.0,
          "demand": 50,
          "time_window_start": 420,
          "time_window_end": 540,
          "service_time": 50
        }
      ],
      "vehicles": [
        {
          "id": "v1",
          "name": "Team A (RN+LPN) \u2014 Central-East",
          "capacity": 190,
          "max_distance": 95.0,
          "cost_per_distance": 1.0,
          "start_location": "depot"
        },
        {
          "id": "v2",
          "name": "Team B (RN) \u2014 North Loop",
          "capacity": 170,
          "max_distance": 90.0,
          "cost_per_distance": 0.95,
          "start_location": "depot"
        },
        {
          "id": "v3",
          "name": "Team C (RN) \u2014 West/South",
          "capacity": 180,
          "max_distance": 92.0,
          "cost_per_distance": 0.9,
          "start_location": "depot"
        },
        {
          "id": "v4",
          "name": "Team D (RN) \u2014 Long-Range Float",
          "capacity": 190,
          "max_distance": 120.0,
          "cost_per_distance": 1.15,
          "start_location": "depot"
        },
        {
          "id": "v5",
          "name": "Team E (LPN) \u2014 Short-Haul",
          "capacity": 150,
          "max_distance": 75.0,
          "cost_per_distance": 0.85,
          "start_location": "depot"
        }
      ]
    },
    "constraints": [
      {
        "description": "Each nurse team can complete at most 5 patient visits in a day due to documentation overhead and handoff time.",
        "_spec": {
          "fn": "max_stops",
          "args": [
            5
          ]
        }
      },
      {
        "description": "Maximum allowable driving distance per route to avoid overtime/unsafe driving: 120 distance units per vehicle.",
        "_spec": {
          "fn": "max_distance",
          "args": [
            120
          ]
        }
      },
      {
        "description": "c1 must be visited within its appointment window (morning wound care).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c1",
            60,
            120
          ]
        }
      },
      {
        "description": "c2 must be visited within its appointment window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c2",
            90,
            160
          ]
        }
      },
      {
        "description": "c3 must be visited within its appointment window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c3",
            110,
            180
          ]
        }
      },
      {
        "description": "c4 must be visited within its appointment window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c4",
            80,
            150
          ]
        }
      },
      {
        "description": "c5 must be visited within its appointment window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c5",
            140,
            210
          ]
        }
      },
      {
        "description": "c6 must be visited within its appointment window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c6",
            170,
            250
          ]
        }
      },
      {
        "description": "c7 must be visited within its appointment window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c7",
            150,
            230
          ]
        }
      },
      {
        "description": "c8 must be visited within its appointment window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c8",
            180,
            260
          ]
        }
      },
      {
        "description": "c9 must be visited within its appointment window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c9",
            210,
            290
          ]
        }
      },
      {
        "description": "c10 must be visited within its appointment window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c10",
            240,
            330
          ]
        }
      },
      {
        "description": "c11 must be visited within its appointment window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c11",
            270,
            360
          ]
        }
      },
      {
        "description": "c12 must be visited within its appointment window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c12",
            300,
            390
          ]
        }
      },
      {
        "description": "c13 must be visited within its appointment window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c13",
            260,
            340
          ]
        }
      },
      {
        "description": "c14 must be visited within its appointment window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c14",
            280,
            360
          ]
        }
      },
      {
        "description": "c15 must be visited within its appointment window (late-day).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c15",
            420,
            510
          ]
        }
      },
      {
        "description": "c16 must be visited within its appointment window (late-day).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c16",
            420,
            540
          ]
        }
      },
      {
        "description": "High-acuity IV antibiotic visit c14 must be served by the long-range float team v4 (special equipment + backup supplies kept on that vehicle/team).",
        "_spec": {
          "fn": "must_visit",
          "args": [
            "c14",
            "v4"
          ]
        }
      },
      {
        "description": "Complex dressing change c11 must be served by Team B v2 (assigned clinician continuity).",
        "_spec": {
          "fn": "must_visit",
          "args": [
            "c11",
            "v2"
          ]
        }
      },
      {
        "description": "Infection-control separation: c8 (catheter care) and c3 (med reconciliation at immunocompromised home) cannot be on the same route.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c8",
            "c3"
          ]
        }
      },
      {
        "description": "Infection-control separation: c7 (home oxygen review in shared housing) and c14 (IV antibiotic visit) cannot be on the same route.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c7",
            "c14"
          ]
        }
      },
      {
        "description": "Behavioral/household safety separation: c16 (evening wellness check in high-stress home) and c10 (speech therapy coaching) cannot be on the same route.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c16",
            "c10"
          ]
        }
      }
    ],
    "instruction": "Minimize total travel distance (and thus total cost) while serving all patients exactly once within their time windows. Respect each nurse team\u2019s visit-minute capacity (demand), per-vehicle maximum route distance limits, the maximum-stops constraint, and the listed must-visit and incompatibility constraints. Travel distance is Euclidean between coordinates; assume travel time equals distance for time-window feasibility, and add service_time at each stop.",
    "feasible": true,
    "solution": {
      "domain": "vehicle_routing",
      "routes": [
        {
          "vehicle_id": "v2",
          "stops": [
            {
              "location_id": "c1",
              "arrival_time": 60,
              "departure_time": 90
            },
            {
              "location_id": "c12",
              "arrival_time": 300,
              "departure_time": 335
            },
            {
              "location_id": "c11",
              "arrival_time": 343,
              "departure_time": 398
            },
            {
              "location_id": "c16",
              "arrival_time": 420,
              "departure_time": 470
            }
          ],
          "total_distance": 52.59,
          "total_load": 170.0
        },
        {
          "vehicle_id": "v3",
          "stops": [
            {
              "location_id": "c4",
              "arrival_time": 80,
              "departure_time": 105
            },
            {
              "location_id": "c5",
              "arrival_time": 140,
              "departure_time": 175
            },
            {
              "location_id": "c6",
              "arrival_time": 180,
              "departure_time": 220
            },
            {
              "location_id": "c13",
              "arrival_time": 260,
              "departure_time": 295
            }
          ],
          "total_distance": 51.25,
          "total_load": 135.0
        },
        {
          "vehicle_id": "v4",
          "stops": [
            {
              "location_id": "c2",
              "arrival_time": 90,
              "departure_time": 135
            },
            {
              "location_id": "c3",
              "arrival_time": 139,
              "departure_time": 199
            },
            {
              "location_id": "c14",
              "arrival_time": 280,
              "departure_time": 310
            },
            {
              "location_id": "c15",
              "arrival_time": 420,
              "departure_time": 465
            }
          ],
          "total_distance": 53.15,
          "total_load": 180.0
        },
        {
          "vehicle_id": "v5",
          "stops": [
            {
              "location_id": "c7",
              "arrival_time": 150,
              "departure_time": 180
            },
            {
              "location_id": "c8",
              "arrival_time": 187,
              "departure_time": 237
            },
            {
              "location_id": "c9",
              "arrival_time": 243,
              "departure_time": 273
            },
            {
              "location_id": "c10",
              "arrival_time": 282,
              "departure_time": 322
            }
          ],
          "total_distance": 45.78,
          "total_load": 150.0
        }
      ],
      "total_distance": 202.77,
      "total_cost": 196.69,
      "unserved": []
    }
  },
  {
    "id": "vehicle_routing_8d3cc192",
    "difficulty": "expert",
    "scenario": {
      "domain": "vehicle_routing",
      "description": "Waste collection and recycling routing for GreenLoop Hauling Co.: collect mixed recyclables, cardboard bales, glass, and regulated e-waste/batteries from customers and deliver back to the central warehouse/depot within tight dock appointment windows.",
      "depot_id": "depot",
      "locations": [
        {
          "id": "depot",
          "name": "GreenLoop Central Yard (Warehouse & Tip Floor)",
          "x": 0.0,
          "y": 0.0,
          "demand": 0,
          "time_window_start": 0,
          "time_window_end": 1000,
          "service_time": 0
        },
        {
          "id": "c1",
          "name": "Riverside Apartments Recycling Dock",
          "x": 8.0,
          "y": 9.0,
          "demand": 18,
          "time_window_start": 10,
          "time_window_end": 40,
          "service_time": 5
        },
        {
          "id": "c2",
          "name": "Maple St. Bottle Bank (Glass Igloo)",
          "x": 10.0,
          "y": 8.0,
          "demand": 22,
          "time_window_start": 0,
          "time_window_end": 30,
          "service_time": 4
        },
        {
          "id": "c3",
          "name": "Northgate Cardboard Compactor",
          "x": 7.0,
          "y": 11.0,
          "demand": 15,
          "time_window_start": 15,
          "time_window_end": 45,
          "service_time": 5
        },
        {
          "id": "c4",
          "name": "City Library Mixed Recyclables Bay",
          "x": 9.0,
          "y": 12.0,
          "demand": 20,
          "time_window_start": 20,
          "time_window_end": 55,
          "service_time": 6
        },
        {
          "id": "c5",
          "name": "GreenMart Superstore Bale Dock",
          "x": 11.0,
          "y": 10.0,
          "demand": 16,
          "time_window_start": 5,
          "time_window_end": 35,
          "service_time": 5
        },
        {
          "id": "c6",
          "name": "Riverfront Food Court Sealed Organics Tank",
          "x": 13.0,
          "y": -7.0,
          "demand": 24,
          "time_window_start": 70,
          "time_window_end": 120,
          "service_time": 7
        },
        {
          "id": "c7",
          "name": "Luna Diner Compostables Tote Station",
          "x": 15.0,
          "y": -6.0,
          "demand": 14,
          "time_window_start": 75,
          "time_window_end": 115,
          "service_time": 5
        },
        {
          "id": "c8",
          "name": "Canyon Mall Cardboard Dock",
          "x": 12.0,
          "y": -10.0,
          "demand": 19,
          "time_window_start": 60,
          "time_window_end": 100,
          "service_time": 6
        },
        {
          "id": "c9",
          "name": "Westside MRF Transfer Cage (Mixed Recycling)",
          "x": -18.0,
          "y": 6.0,
          "demand": 17,
          "time_window_start": 35,
          "time_window_end": 85,
          "service_time": 6
        },
        {
          "id": "c10",
          "name": "Bayshore Brewery Glass Bin",
          "x": -20.0,
          "y": 4.0,
          "demand": 21,
          "time_window_start": 40,
          "time_window_end": 75,
          "service_time": 5
        },
        {
          "id": "c11",
          "name": "Cedar Park Paper Drop (Office Park)",
          "x": -16.0,
          "y": 8.0,
          "demand": 13,
          "time_window_start": 35,
          "time_window_end": 90,
          "service_time": 4
        },
        {
          "id": "c12",
          "name": "Old Mill Plastics Roll-off",
          "x": -22.0,
          "y": 7.0,
          "demand": 12,
          "time_window_start": 45,
          "time_window_end": 95,
          "service_time": 6
        },
        {
          "id": "c13",
          "name": "BatterySafe Collection Point (Lithium & Lead-Acid Cage)",
          "x": 4.0,
          "y": 2.0,
          "demand": 26,
          "time_window_start": 15,
          "time_window_end": 40,
          "service_time": 7
        },
        {
          "id": "c14",
          "name": "E-Cycle Electronics Pallet Pickup (CRT/ITAD)",
          "x": 5.0,
          "y": -1.0,
          "demand": 11,
          "time_window_start": 25,
          "time_window_end": 65,
          "service_time": 6
        },
        {
          "id": "c15",
          "name": "Harbor Hotel Back-of-House Recycling Room",
          "x": 6.0,
          "y": -12.0,
          "demand": 23,
          "time_window_start": 80,
          "time_window_end": 125,
          "service_time": 6
        },
        {
          "id": "c16",
          "name": "South Clinic Cardboard & Packaging Bay",
          "x": 9.0,
          "y": -5.0,
          "demand": 10,
          "time_window_start": 65,
          "time_window_end": 95,
          "service_time": 5
        },
        {
          "id": "c17",
          "name": "Sunset Apartments Mixed Recycling Enclosure",
          "x": 16.0,
          "y": -9.0,
          "demand": 16,
          "time_window_start": 85,
          "time_window_end": 130,
          "service_time": 5
        },
        {
          "id": "c18",
          "name": "Airport Catering Cardboard Bales Dock",
          "x": 18.0,
          "y": -5.0,
          "demand": 18,
          "time_window_start": 90,
          "time_window_end": 140,
          "service_time": 6
        }
      ],
      "vehicles": [
        {
          "id": "v1",
          "name": "Rear-Loader Diesel RL-12",
          "capacity": 120,
          "max_distance": 200.0,
          "cost_per_distance": 1.1,
          "start_location": "depot"
        },
        {
          "id": "v2",
          "name": "Side-Loader CNG SL-8",
          "capacity": 110,
          "max_distance": 200.0,
          "cost_per_distance": 1.0,
          "start_location": "depot"
        },
        {
          "id": "v3",
          "name": "HazMat Box Truck HM-3 (Batteries/E-waste)",
          "capacity": 100,
          "max_distance": 200.0,
          "cost_per_distance": 1.4,
          "start_location": "depot"
        },
        {
          "id": "v4",
          "name": "Electric Mini-Compactor EV-5",
          "capacity": 90,
          "max_distance": 200.0,
          "cost_per_distance": 0.8,
          "start_location": "depot"
        }
      ]
    },
    "constraints": [
      {
        "description": "Each vehicle can make at most 8 collection stops per route (driver hours + unloading constraints).",
        "_spec": {
          "fn": "max_stops",
          "args": [
            8
          ]
        }
      },
      {
        "description": "Maximum allowed route distance per vehicle (range + driver shift limit).",
        "_spec": {
          "fn": "max_distance",
          "args": [
            170
          ]
        }
      },
      {
        "description": "Regulated batteries (c13) must be collected by the HazMat-certified truck v3.",
        "_spec": {
          "fn": "must_visit",
          "args": [
            "c13",
            "v3"
          ]
        }
      },
      {
        "description": "Sealed organics tank (c6) must be collected by the electric mini-compactor v4 assigned to the organics corridor.",
        "_spec": {
          "fn": "must_visit",
          "args": [
            "c6",
            "v4"
          ]
        }
      },
      {
        "description": "Dock appointment window for c1.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c1",
            10,
            40
          ]
        }
      },
      {
        "description": "Dock appointment window for c2.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c2",
            0,
            30
          ]
        }
      },
      {
        "description": "Dock appointment window for c3.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c3",
            15,
            45
          ]
        }
      },
      {
        "description": "Dock appointment window for c4.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c4",
            20,
            55
          ]
        }
      },
      {
        "description": "Dock appointment window for c5.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c5",
            5,
            35
          ]
        }
      },
      {
        "description": "Dock appointment window for c6.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c6",
            70,
            120
          ]
        }
      },
      {
        "description": "Dock appointment window for c7.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c7",
            75,
            115
          ]
        }
      },
      {
        "description": "Dock appointment window for c8.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c8",
            60,
            100
          ]
        }
      },
      {
        "description": "Dock appointment window for c9.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c9",
            35,
            85
          ]
        }
      },
      {
        "description": "Dock appointment window for c10.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c10",
            40,
            75
          ]
        }
      },
      {
        "description": "Dock appointment window for c11.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c11",
            35,
            90
          ]
        }
      },
      {
        "description": "Dock appointment window for c12.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c12",
            45,
            95
          ]
        }
      },
      {
        "description": "Dock appointment window for c13.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c13",
            15,
            40
          ]
        }
      },
      {
        "description": "Dock appointment window for c14.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c14",
            25,
            65
          ]
        }
      },
      {
        "description": "Dock appointment window for c15.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c15",
            80,
            125
          ]
        }
      },
      {
        "description": "Dock appointment window for c16.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c16",
            65,
            95
          ]
        }
      },
      {
        "description": "Dock appointment window for c17.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c17",
            85,
            130
          ]
        }
      },
      {
        "description": "Dock appointment window for c18.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c18",
            90,
            140
          ]
        }
      },
      {
        "description": "Hazardous batteries (c13) cannot be combined on the same route as supermarket bales (c5) due to compartment sealing and chain-of-custody procedures.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c13",
            "c5"
          ]
        }
      },
      {
        "description": "Hazardous batteries (c13) cannot be combined on the same route as organics tank service (c6).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c13",
            "c6"
          ]
        }
      },
      {
        "description": "Hazardous batteries (c13) cannot be combined on the same route as organics tote service (c7).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c13",
            "c7"
          ]
        }
      },
      {
        "description": "E-waste pallets (c14) cannot be combined on the same route as supermarket bales (c5) due to secure loading/strapping requirements.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c14",
            "c5"
          ]
        }
      },
      {
        "description": "E-waste pallets (c14) cannot be combined on the same route as organics tank service (c6).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c14",
            "c6"
          ]
        }
      },
      {
        "description": "E-waste pallets (c14) cannot be combined on the same route as organics tote service (c7).",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c14",
            "c7"
          ]
        }
      }
    ],
    "instruction": "Minimize total delivery/collection distance (and total cost) while ensuring all customers are served within their time windows, respecting vehicle capacity limits, maximum route distance limits, stop limits, and incompatibility rules.",
    "feasible": true,
    "solution": {
      "domain": "vehicle_routing",
      "routes": [
        {
          "vehicle_id": "v1",
          "stops": [
            {
              "location_id": "c1",
              "arrival_time": 12,
              "departure_time": 17
            },
            {
              "location_id": "c2",
              "arrival_time": 19,
              "departure_time": 23
            },
            {
              "location_id": "c5",
              "arrival_time": 25,
              "departure_time": 30
            },
            {
              "location_id": "c4",
              "arrival_time": 33,
              "departure_time": 39
            },
            {
              "location_id": "c3",
              "arrival_time": 41,
              "departure_time": 46
            }
          ],
          "total_distance": 34.63,
          "total_load": 91.0
        },
        {
          "vehicle_id": "v2",
          "stops": [
            {
              "location_id": "c11",
              "arrival_time": 35,
              "departure_time": 39
            },
            {
              "location_id": "c9",
              "arrival_time": 41,
              "departure_time": 47
            },
            {
              "location_id": "c12",
              "arrival_time": 51,
              "departure_time": 57
            },
            {
              "location_id": "c10",
              "arrival_time": 61,
              "departure_time": 66
            }
          ],
          "total_distance": 48.85,
          "total_load": 63.0
        },
        {
          "vehicle_id": "v3",
          "stops": [
            {
              "location_id": "c13",
              "arrival_time": 15,
              "departure_time": 22
            },
            {
              "location_id": "c14",
              "arrival_time": 25,
              "departure_time": 31
            },
            {
              "location_id": "c8",
              "arrival_time": 60,
              "departure_time": 66
            },
            {
              "location_id": "c15",
              "arrival_time": 80,
              "departure_time": 86
            }
          ],
          "total_distance": 38.77,
          "total_load": 79.0
        },
        {
          "vehicle_id": "v4",
          "stops": [
            {
              "location_id": "c16",
              "arrival_time": 65,
              "departure_time": 70
            },
            {
              "location_id": "c6",
              "arrival_time": 74,
              "departure_time": 81
            },
            {
              "location_id": "c17",
              "arrival_time": 85,
              "departure_time": 90
            },
            {
              "location_id": "c18",
              "arrival_time": 94,
              "departure_time": 100
            },
            {
              "location_id": "c7",
              "arrival_time": 103,
              "departure_time": 108
            }
          ],
          "total_distance": 42.17,
          "total_load": 82.0
        }
      ],
      "total_distance": 164.42,
      "total_cost": 176.75,
      "unserved": []
    }
  },
  {
    "id": "vehicle_routing_460f50c1",
    "difficulty": "expert",
    "scenario": {
      "domain": "vehicle_routing",
      "description": "Package delivery for e-commerce: SwiftCart Fulfillment must deliver mixed small-parcel orders (phone cases, chargers, skincare bundles, and apparel) from a single urban warehouse to 18 customer locations (lockers, 3PL pickup points, and small retail partners). Routes must respect vehicle capacity, customer time windows, and maximum route length while minimizing total travel distance. The instance is adversarial: early-morning tight-window stops sit near tempting high-demand customers that can overflow capacity and force late arrivals; several \u201cclose-by\u201d pairs are incompatible (different carrier handoff requirements) creating decoy clusters.",
      "depot_id": "depot",
      "locations": [
        {
          "id": "depot",
          "name": "SwiftCart Fulfillment Hub (Warehouse)",
          "x": 0.0,
          "y": 0.0,
          "demand": 0,
          "time_window_start": 0,
          "time_window_end": 999,
          "service_time": 0
        },
        {
          "id": "c1",
          "name": "PrimeNow Locker - Old Town",
          "x": 2.0,
          "y": 9.0,
          "demand": 8,
          "time_window_start": 20,
          "time_window_end": 55,
          "service_time": 6
        },
        {
          "id": "c2",
          "name": "ParcelPoint Kiosk - Riverwalk",
          "x": 4.0,
          "y": 11.0,
          "demand": 20,
          "time_window_start": 15,
          "time_window_end": 60,
          "service_time": 8
        },
        {
          "id": "c3",
          "name": "Click&Collect Counter - Midtown Mall",
          "x": 7.0,
          "y": 8.0,
          "demand": 18,
          "time_window_start": 85,
          "time_window_end": 130,
          "service_time": 8
        },
        {
          "id": "c4",
          "name": "SwiftCart Returns Desk - East Market",
          "x": 10.0,
          "y": 10.0,
          "demand": 22,
          "time_window_start": 95,
          "time_window_end": 140,
          "service_time": 9
        },
        {
          "id": "c5",
          "name": "GadgetDrop Partner Store - University",
          "x": 6.0,
          "y": 3.0,
          "demand": 15,
          "time_window_start": 0,
          "time_window_end": 40,
          "service_time": 7
        },
        {
          "id": "c6",
          "name": "SkinCareCo Micro-Depot - Arts District",
          "x": 12.0,
          "y": 6.0,
          "demand": 16,
          "time_window_start": 60,
          "time_window_end": 110,
          "service_time": 7
        },
        {
          "id": "c7",
          "name": "ApparelHub Outlet - Southside",
          "x": 9.0,
          "y": -2.0,
          "demand": 14,
          "time_window_start": 35,
          "time_window_end": 80,
          "service_time": 7
        },
        {
          "id": "c8",
          "name": "Neighborhood Locker - Lakeside",
          "x": 3.0,
          "y": -7.0,
          "demand": 12,
          "time_window_start": 0,
          "time_window_end": 35,
          "service_time": 6
        },
        {
          "id": "c9",
          "name": "Office Mailroom - Financial Center",
          "x": -4.0,
          "y": 8.0,
          "demand": 10,
          "time_window_start": 10,
          "time_window_end": 45,
          "service_time": 6
        },
        {
          "id": "c10",
          "name": "Boutique Pickup - West End",
          "x": -8.0,
          "y": 6.0,
          "demand": 18,
          "time_window_start": 100,
          "time_window_end": 150,
          "service_time": 8
        },
        {
          "id": "c11",
          "name": "Community Locker - North Park",
          "x": -6.0,
          "y": 12.0,
          "demand": 16,
          "time_window_start": 65,
          "time_window_end": 95,
          "service_time": 7
        },
        {
          "id": "c12",
          "name": "3PL Handoff - Harbor Gate",
          "x": -11.0,
          "y": 9.0,
          "demand": 20,
          "time_window_start": 20,
          "time_window_end": 70,
          "service_time": 9
        },
        {
          "id": "c13",
          "name": "Campus Mail Center - Tech Quad",
          "x": -3.0,
          "y": 2.0,
          "demand": 14,
          "time_window_start": 50,
          "time_window_end": 100,
          "service_time": 7
        },
        {
          "id": "c14",
          "name": "MegaOrder Customer - Hillcrest Apartments",
          "x": 14.0,
          "y": 12.0,
          "demand": 30,
          "time_window_start": 110,
          "time_window_end": 165,
          "service_time": 10
        },
        {
          "id": "c15",
          "name": "Bulk Pickup - Suburb North (Maple)",
          "x": 19.0,
          "y": 4.0,
          "demand": 28,
          "time_window_start": 40,
          "time_window_end": 90,
          "service_time": 10
        },
        {
          "id": "c16",
          "name": "Bulk Pickup - Suburb East (Cedar)",
          "x": 17.0,
          "y": -1.0,
          "demand": 26,
          "time_window_start": 0,
          "time_window_end": 50,
          "service_time": 10
        },
        {
          "id": "c17",
          "name": "Regional Locker - Far West (Pine)",
          "x": -18.0,
          "y": -4.0,
          "demand": 24,
          "time_window_start": 75,
          "time_window_end": 120,
          "service_time": 9
        },
        {
          "id": "c18",
          "name": "Retail Partner - Outlet Strip (Southwest)",
          "x": -13.0,
          "y": -9.0,
          "demand": 25,
          "time_window_start": 30,
          "time_window_end": 85,
          "service_time": 9
        }
      ],
      "vehicles": [
        {
          "id": "v1",
          "name": "Linehaul Box Truck (Long-range)",
          "capacity": 125,
          "max_distance": 95.0,
          "cost_per_distance": 1.05,
          "start_location": "depot"
        },
        {
          "id": "v2",
          "name": "City Straight Truck (Standard)",
          "capacity": 115,
          "max_distance": 90.0,
          "cost_per_distance": 1.0,
          "start_location": "depot"
        },
        {
          "id": "v3",
          "name": "Urban Step Van (Agile)",
          "capacity": 110,
          "max_distance": 85.0,
          "cost_per_distance": 0.95,
          "start_location": "depot"
        },
        {
          "id": "v4",
          "name": "Electric Cargo Van (Short-range)",
          "capacity": 85,
          "max_distance": 70.0,
          "cost_per_distance": 0.75,
          "start_location": "depot"
        },
        {
          "id": "v5",
          "name": "Electric Sprinter (Short-range)",
          "capacity": 70,
          "max_distance": 65.0,
          "cost_per_distance": 0.7,
          "start_location": "depot"
        }
      ]
    },
    "constraints": [
      {
        "description": "Each vehicle can make at most 7 delivery stops per route (forces non-greedy clustering; 18 customers require multiple routes).",
        "_spec": {
          "fn": "max_stops",
          "args": [
            7
          ]
        }
      },
      {
        "description": "Maximum route distance per vehicle is capped to prevent 'one big loop' solutions and create route-length tradeoffs.",
        "_spec": {
          "fn": "max_distance",
          "args": [
            95
          ]
        }
      },
      {
        "description": "High-demand far-north customer c15 (Suburb North) must be served by the long-range linehaul truck v1 (requires correct sequencing with time windows).",
        "_spec": {
          "fn": "must_visit",
          "args": [
            "c15",
            "v1"
          ]
        }
      },
      {
        "description": "Early-window bulk customer c16 (Suburb East) must be served by the standard city truck v2 (a greedy 'nearby-first' choice can break c16's window).",
        "_spec": {
          "fn": "must_visit",
          "args": [
            "c16",
            "v2"
          ]
        }
      },
      {
        "description": "Carrier-handoff conflict: Riverwalk kiosk (c2) cannot be on the same route as Harbor Gate 3PL handoff (c12). They look geographically compatible but are operationally incompatible.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c2",
            "c12"
          ]
        }
      },
      {
        "description": "Security/ID check conflict: Financial Center mailroom (c9) cannot share a route with Midtown Mall counter (c3) due to different chain-of-custody procedures; greedy 'bundle downtown' fails.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c9",
            "c3"
          ]
        }
      },
      {
        "description": "Cold-chain packaging conflict: SkinCareCo micro-depot (c6) cannot be on the same route as Outlet Strip (c18) due to temperature-control handling requirements.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c6",
            "c18"
          ]
        }
      },
      {
        "description": "Time window for c1 (Old Town locker) enforced as tight early-mid window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c1",
            20,
            55
          ]
        }
      },
      {
        "description": "Time window for c2 (Riverwalk kiosk) enforced as early window; tempting to visit first but can cascade into missing other early stops.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c2",
            15,
            60
          ]
        }
      },
      {
        "description": "Time window for c5 (University partner store) is very early; a classic greedy trap if paired with far customers.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c5",
            0,
            40
          ]
        }
      },
      {
        "description": "Time window for c8 (Lakeside locker) is very early and short; pairing it incorrectly forces excess waiting or late arrivals elsewhere.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c8",
            0,
            35
          ]
        }
      },
      {
        "description": "Time window for c9 (Financial Center mailroom) is early and strict, creating hidden interaction with the c9/c3 incompatibility.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c9",
            10,
            45
          ]
        }
      },
      {
        "description": "Time window for c12 (Harbor Gate 3PL handoff) is early-mid; looks easy to cluster with other west/north stops but conflicts with c2.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c12",
            20,
            70
          ]
        }
      },
      {
        "description": "Time window for c11 (North Park locker) is narrow mid-morning, acting as a pivot that can break routes if scheduled too late.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c11",
            65,
            95
          ]
        }
      },
      {
        "description": "Time window for c3 (Midtown Mall counter) is later; visiting it too early causes waiting that can blow distance/stop budgets.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c3",
            85,
            130
          ]
        }
      },
      {
        "description": "Time window for c4 (East Market returns desk) is later-midday, interacting with the far-northeast cluster and capacity usage.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c4",
            95,
            140
          ]
        }
      },
      {
        "description": "Time window for c10 (West End boutique pickup) is late, a decoy for greedy west-side clustering with c17/c18 due to max distance.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c10",
            100,
            150
          ]
        }
      },
      {
        "description": "Time window for c14 (Hillcrest megaorder) is late; despite being 'far', it can be optimal to pair with other late-window east/northeast stops.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c14",
            110,
            165
          ]
        }
      },
      {
        "description": "Time window for c15 (Suburb North bulk pickup) is mid; must be hit by v1 while still allowing v1 to cover at least one nearby compatible stop.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c15",
            40,
            90
          ]
        }
      },
      {
        "description": "Time window for c16 (Suburb East bulk pickup) is early; must be hit by v2, creating a counterintuitive optimum (use a bigger truck on an 'easy' far stop).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c16",
            0,
            50
          ]
        }
      },
      {
        "description": "Time window for c17 (Far West regional locker) is mid; pairing it with c18 is tempting but can exceed route distance when combined with other west stops.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c17",
            75,
            120
          ]
        }
      },
      {
        "description": "Time window for c18 (Outlet Strip southwest) is early-mid; conflicts with c6 to prevent a too-convenient south loop.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c18",
            30,
            85
          ]
        }
      }
    ],
    "instruction": "Minimize total travel distance (and cost) while serving all 18 e-commerce delivery customers within their time windows. Respect each vehicle\u2019s capacity, the global maximum route distance constraint, stop limits, and any must-visit and incompatibility constraints. Vehicles start at the SwiftCart Fulfillment Hub (depot).",
    "feasible": true,
    "solution": {
      "domain": "vehicle_routing",
      "routes": [
        {
          "vehicle_id": "v1",
          "stops": [
            {
              "location_id": "c1",
              "arrival_time": 20,
              "departure_time": 26
            },
            {
              "location_id": "c2",
              "arrival_time": 28,
              "departure_time": 36
            },
            {
              "location_id": "c6",
              "arrival_time": 60,
              "departure_time": 67
            },
            {
              "location_id": "c15",
              "arrival_time": 74,
              "departure_time": 84
            },
            {
              "location_id": "c14",
              "arrival_time": 110,
              "departure_time": 120
            },
            {
              "location_id": "c4",
              "arrival_time": 124,
              "departure_time": 133
            }
          ],
          "total_distance": 56.8,
          "total_load": 124.0
        },
        {
          "vehicle_id": "v2",
          "stops": [
            {
              "location_id": "c5",
              "arrival_time": 6,
              "departure_time": 13
            },
            {
              "location_id": "c16",
              "arrival_time": 25,
              "departure_time": 35
            },
            {
              "location_id": "c7",
              "arrival_time": 43,
              "departure_time": 50
            },
            {
              "location_id": "c3",
              "arrival_time": 85,
              "departure_time": 93
            }
          ],
          "total_distance": 47.3,
          "total_load": 73.0
        },
        {
          "vehicle_id": "v4",
          "stops": [
            {
              "location_id": "c8",
              "arrival_time": 7,
              "departure_time": 13
            },
            {
              "location_id": "c18",
              "arrival_time": 30,
              "departure_time": 39
            },
            {
              "location_id": "c17",
              "arrival_time": 75,
              "departure_time": 84
            },
            {
              "location_id": "c10",
              "arrival_time": 100,
              "departure_time": 108
            }
          ],
          "total_distance": 54.95,
          "total_load": 79.0
        },
        {
          "vehicle_id": "v5",
          "stops": [
            {
              "location_id": "c9",
              "arrival_time": 10,
              "departure_time": 16
            },
            {
              "location_id": "c12",
              "arrival_time": 23,
              "departure_time": 32
            },
            {
              "location_id": "c11",
              "arrival_time": 65,
              "departure_time": 72
            },
            {
              "location_id": "c13",
              "arrival_time": 82,
              "departure_time": 89
            }
          ],
          "total_distance": 35.89,
          "total_load": 60.0
        }
      ],
      "total_distance": 194.94,
      "total_cost": 173.5,
      "unserved": []
    }
  },
  {
    "id": "vehicle_routing_f17723ff",
    "difficulty": "expert",
    "scenario": {
      "domain": "vehicle_routing",
      "description": "Oak & Allen Furniture Delivery and Assembly must deliver boxed furniture (and optional in-home assembly time at each stop) from its warehouse to residential customers and interior design studios across town. Routes must respect truck capacities (measured in cubic-load units), customer appointment windows, and maximum route lengths. Several customers have tight appointment windows that interact with distance limits, creating greedy traps where the closest-next stop causes missed windows or forces an overlong return to depot.",
      "depot_id": "depot",
      "locations": [
        {
          "id": "depot",
          "name": "Oak & Allen Warehouse Dock",
          "x": 0.0,
          "y": 0.0,
          "demand": 0,
          "time_window_start": 0,
          "time_window_end": 600,
          "service_time": 0
        },
        {
          "id": "c1",
          "name": "Mapleline Lofts - Unit 12B (Sofa + assembly)",
          "x": 8.0,
          "y": 12.0,
          "demand": 18,
          "time_window_start": 60,
          "time_window_end": 120,
          "service_time": 14
        },
        {
          "id": "c2",
          "name": "Cedar Grove Townhomes - #7 (Bed frame)",
          "x": 10.0,
          "y": 10.0,
          "demand": 14,
          "time_window_start": 40,
          "time_window_end": 200,
          "service_time": 10
        },
        {
          "id": "c3",
          "name": "Birch & Brass Design Studio (Dining set, fragile)",
          "x": 14.0,
          "y": 6.0,
          "demand": 22,
          "time_window_start": 90,
          "time_window_end": 150,
          "service_time": 16
        },
        {
          "id": "c4",
          "name": "Pinecrest Apartments - Lobby (Bookshelves x2)",
          "x": 6.0,
          "y": 18.0,
          "demand": 12,
          "time_window_start": 150,
          "time_window_end": 240,
          "service_time": 10
        },
        {
          "id": "c5",
          "name": "Riverstone Condos - Unit 3A (Sectional)",
          "x": 20.0,
          "y": 15.0,
          "demand": 26,
          "time_window_start": 210,
          "time_window_end": 300,
          "service_time": 18
        },
        {
          "id": "c6",
          "name": "Juniper Hills - 44 (Wardrobe + assembly)",
          "x": 24.0,
          "y": -2.0,
          "demand": 20,
          "time_window_start": 60,
          "time_window_end": 140,
          "service_time": 20
        },
        {
          "id": "c7",
          "name": "Oakridge Estates - 9 (Nursery set)",
          "x": -8.0,
          "y": 22.0,
          "demand": 16,
          "time_window_start": 90,
          "time_window_end": 160,
          "service_time": 12
        },
        {
          "id": "c8",
          "name": "Willow Walk - 31 (Coffee table, tight slot)",
          "x": -12.0,
          "y": 18.0,
          "demand": 18,
          "time_window_start": 120,
          "time_window_end": 170,
          "service_time": 8
        },
        {
          "id": "c9",
          "name": "Ashford Corner - 2 (Office desks x2)",
          "x": -18.0,
          "y": 14.0,
          "demand": 24,
          "time_window_start": 180,
          "time_window_end": 280,
          "service_time": 14
        },
        {
          "id": "c10",
          "name": "Elmview Renovation Site (Staging delivery)",
          "x": -22.0,
          "y": 6.0,
          "demand": 20,
          "time_window_start": 70,
          "time_window_end": 130,
          "service_time": 12
        },
        {
          "id": "c11",
          "name": "Spruce Street Rowhouses - #5 (Mattress + assembly)",
          "x": -10.0,
          "y": -6.0,
          "demand": 12,
          "time_window_start": 50,
          "time_window_end": 120,
          "service_time": 16
        },
        {
          "id": "c12",
          "name": "Walnut Wharf - Unit 19 (Console + chairs)",
          "x": -16.0,
          "y": -10.0,
          "demand": 28,
          "time_window_start": 140,
          "time_window_end": 220,
          "service_time": 14
        },
        {
          "id": "c13",
          "name": "Chestnut Commons - 8 (Bunk bed, needs liftgate)",
          "x": -24.0,
          "y": -14.0,
          "demand": 18,
          "time_window_start": 220,
          "time_window_end": 320,
          "service_time": 18
        },
        {
          "id": "c14",
          "name": "Magnolia Museum Gift Office (Display cases)",
          "x": -6.0,
          "y": -18.0,
          "demand": 22,
          "time_window_start": 110,
          "time_window_end": 170,
          "service_time": 12
        },
        {
          "id": "c15",
          "name": "Hickory Heights - 101 (Patio set)",
          "x": 6.0,
          "y": -20.0,
          "demand": 16,
          "time_window_start": 160,
          "time_window_end": 260,
          "service_time": 10
        },
        {
          "id": "c16",
          "name": "Poplar Park - 3C (Recliner, quick drop)",
          "x": 16.0,
          "y": -18.0,
          "demand": 14,
          "time_window_start": 100,
          "time_window_end": 160,
          "service_time": 8
        },
        {
          "id": "c17",
          "name": "Teak Terrace - 55 (Kitchen island, timed)",
          "x": 22.0,
          "y": -12.0,
          "demand": 20,
          "time_window_start": 170,
          "time_window_end": 230,
          "service_time": 16
        },
        {
          "id": "c18",
          "name": "Rosewood Ridges - 14 (Custom headboard)",
          "x": 28.0,
          "y": -16.0,
          "demand": 14,
          "time_window_start": 240,
          "time_window_end": 330,
          "service_time": 10
        }
      ],
      "vehicles": [
        {
          "id": "v1",
          "name": "Liftgate Box Truck A (\"Dovetail\")",
          "capacity": 120,
          "max_distance": 155.0,
          "cost_per_distance": 1.15,
          "start_location": "depot"
        },
        {
          "id": "v2",
          "name": "Box Truck B (\"Mortise\")",
          "capacity": 110,
          "max_distance": 150.0,
          "cost_per_distance": 1.0,
          "start_location": "depot"
        },
        {
          "id": "v3",
          "name": "Long-Range Sprinter Van (\"Tenon\")",
          "capacity": 80,
          "max_distance": 210.0,
          "cost_per_distance": 1.35,
          "start_location": "depot"
        },
        {
          "id": "v4",
          "name": "City Van (\"Hinge\")",
          "capacity": 90,
          "max_distance": 140.0,
          "cost_per_distance": 0.95,
          "start_location": "depot"
        },
        {
          "id": "v5",
          "name": "Compact Assembly Van (\"Clamp\")",
          "capacity": 70,
          "max_distance": 130.0,
          "cost_per_distance": 0.9,
          "start_location": "depot"
        },
        {
          "id": "v6",
          "name": "Spare Sprinter (\"Level\")",
          "capacity": 70,
          "max_distance": 190.0,
          "cost_per_distance": 1.25,
          "start_location": "depot"
        }
      ]
    },
    "constraints": [
      {
        "description": "Limit stops to keep crews within practical loading/assembly pace (max 7 customer stops per vehicle).",
        "_spec": {
          "fn": "max_stops",
          "args": [
            7
          ]
        }
      },
      {
        "description": "Per-vehicle hard cap on route distance (applies to all vehicles). This interacts with time windows: late-window east customers can make short-distance greedy sequencing fail if it forces a long return arc.",
        "_spec": {
          "fn": "max_distance",
          "args": [
            165
          ]
        }
      },
      {
        "description": "Mapleline Lofts appointment window must be respected.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c1",
            60,
            120
          ]
        }
      },
      {
        "description": "Cedar Grove availability window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c2",
            40,
            200
          ]
        }
      },
      {
        "description": "Birch & Brass Design Studio receiving window (staffed dock).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c3",
            90,
            150
          ]
        }
      },
      {
        "description": "Pinecrest lobby access window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c4",
            150,
            240
          ]
        }
      },
      {
        "description": "Riverstone concierge window (late).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c5",
            210,
            300
          ]
        }
      },
      {
        "description": "Juniper Hills morning-only slot; missing it forces costly reroute.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c6",
            60,
            140
          ]
        }
      },
      {
        "description": "Oakridge Estates window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c7",
            90,
            160
          ]
        }
      },
      {
        "description": "Willow Walk tight mid-day slot; looks close to c7/c9 but timing makes some greedy pairings fail.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c8",
            120,
            170
          ]
        }
      },
      {
        "description": "Ashford Corner afternoon window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c9",
            180,
            280
          ]
        }
      },
      {
        "description": "Elmview renovation site early window (site manager only on-site early).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c10",
            70,
            130
          ]
        }
      },
      {
        "description": "Spruce Street narrow early window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c11",
            50,
            120
          ]
        }
      },
      {
        "description": "Walnut Wharf mid-day dock window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c12",
            140,
            220
          ]
        }
      },
      {
        "description": "Chestnut Commons late window; pairs awkwardly with other southwest stops under max-distance limits.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c13",
            220,
            320
          ]
        }
      },
      {
        "description": "Magnolia Museum office window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c14",
            110,
            170
          ]
        }
      },
      {
        "description": "Hickory Heights afternoon window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c15",
            160,
            260
          ]
        }
      },
      {
        "description": "Poplar Park mid-day window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c16",
            100,
            160
          ]
        }
      },
      {
        "description": "Teak Terrace timed receiving (contractor present).",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c17",
            170,
            230
          ]
        }
      },
      {
        "description": "Rosewood Ridges late window.",
        "_spec": {
          "fn": "time_window",
          "args": [
            "c18",
            240,
            330
          ]
        }
      },
      {
        "description": "High-priority designer drop (c3) must be handled by the liftgate box truck (v1) due to crated display cases and on-site uncrating workflow.",
        "_spec": {
          "fn": "must_visit",
          "args": [
            "c3",
            "v1"
          ]
        }
      },
      {
        "description": "Heavy bunk bed (c13) must be handled by the liftgate box truck (v1).",
        "_spec": {
          "fn": "must_visit",
          "args": [
            "c13",
            "v1"
          ]
        }
      },
      {
        "description": "Do not place Mapleline Lofts (c1) and Juniper Hills (c6) on the same route: both have tight morning windows and lengthy service times; combining them reliably causes missed appointments.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c1",
            "c6"
          ]
        }
      },
      {
        "description": "Do not combine the renovation site (c10) with Rosewood Ridges (c18): the early site window and far southeast late window create a distance+waiting-time decoy that breaks max route length.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c10",
            "c18"
          ]
        }
      },
      {
        "description": "Do not combine Riverstone (c5) with Juniper Hills (c6): tempting geographically, but their time windows plus service times cause cascading waiting that pushes other stops out of window.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c5",
            "c6"
          ]
        }
      },
      {
        "description": "Do not combine Birch & Brass (c3) with Teak Terrace (c17): both have precise staffed receiving/assembly timing and together create a greedy trap under distance cap.",
        "_spec": {
          "fn": "incompatible",
          "args": [
            "c3",
            "c17"
          ]
        }
      }
    ],
    "instruction": "Minimize total travel distance (and thus total cost) while serving every customer exactly once within their time windows. Respect each vehicle's capacity, the global per-vehicle maximum route distance constraint, and the maximum-stops rule. Also satisfy the must-visit assignments and incompatibility constraints.",
    "feasible": true,
    "solution": {
      "domain": "vehicle_routing",
      "routes": [
        {
          "vehicle_id": "v1",
          "stops": [
            {
              "location_id": "c3",
              "arrival_time": 90,
              "departure_time": 106
            },
            {
              "location_id": "c6",
              "arrival_time": 118,
              "departure_time": 138
            },
            {
              "location_id": "c15",
              "arrival_time": 164,
              "departure_time": 174
            },
            {
              "location_id": "c12",
              "arrival_time": 198,
              "departure_time": 212
            },
            {
              "location_id": "c13",
              "arrival_time": 221,
              "departure_time": 239
            }
          ],
          "total_distance": 114.39,
          "total_load": 104.0
        },
        {
          "vehicle_id": "v3",
          "stops": [
            {
              "location_id": "c10",
              "arrival_time": 70,
              "departure_time": 82
            },
            {
              "location_id": "c8",
              "arrival_time": 120,
              "departure_time": 128
            },
            {
              "location_id": "c7",
              "arrival_time": 133,
              "departure_time": 145
            },
            {
              "location_id": "c9",
              "arrival_time": 180,
              "departure_time": 194
            }
          ],
          "total_distance": 79.69,
          "total_load": 78.0
        },
        {
          "vehicle_id": "v4",
          "stops": [
            {
              "location_id": "c11",
              "arrival_time": 50,
              "departure_time": 66
            },
            {
              "location_id": "c14",
              "arrival_time": 110,
              "departure_time": 122
            },
            {
              "location_id": "c16",
              "arrival_time": 144,
              "departure_time": 152
            },
            {
              "location_id": "c17",
              "arrival_time": 170,
              "departure_time": 186
            },
            {
              "location_id": "c18",
              "arrival_time": 240,
              "departure_time": 250
            }
          ],
          "total_distance": 94.26,
          "total_load": 82.0
        },
        {
          "vehicle_id": "v5",
          "stops": [
            {
              "location_id": "c2",
              "arrival_time": 40,
              "departure_time": 50
            },
            {
              "location_id": "c1",
              "arrival_time": 60,
              "departure_time": 74
            },
            {
              "location_id": "c4",
              "arrival_time": 150,
              "departure_time": 160
            },
            {
              "location_id": "c5",
              "arrival_time": 210,
              "departure_time": 228
            }
          ],
          "total_distance": 62.61,
          "total_load": 70.0
        }
      ],
      "total_distance": 350.95,
      "total_cost": 386.05,
      "unserved": []
    }
  }
]
